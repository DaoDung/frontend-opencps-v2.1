(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-94471c42"],{"000e":function(e,t,o){"use strict";var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{style:e.viewMobile?"":"text-align: left;position: absolute;line-height: 46px;"},[e._v("Tổng số "),o("span",{staticClass:"text-bold primary--text"},[e._v(e._s(e.total))]),e._v(" hồ sơ. ")]),e.total>0?o("div",{staticClass:"vue-tiny-pagination pagination layout",style:e.viewMobile?"":"justify-content: flex-end; -webkit-justify-content: flex-end;"},[o("div",{staticClass:"pr-3 xs4 sm2 flex"},[o("v-autocomplete",{attrs:{items:e.totalPagesData,"item-text":"text","item-value":"value"},on:{input:e.goToPage},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1),o("ul",{staticClass:"tiny-pagination",class:e.customClass},[o("li",{staticClass:"page-item",class:e.classFirstPage},[o("button",{staticClass:"pagination__navigation",class:e.classFirstPage,on:{click:function(t){return t.preventDefault(),e.lastPageLast(t)}}},[o("i",{staticClass:"material-icons icon",attrs:{"aria-hidden":"true"}},[e._v("first_page")])])]),o("li",{staticClass:"page-item",class:e.classFirstPage},[o("button",{staticClass:"pagination__navigation",class:e.classFirstPage,staticStyle:{"border-left":"0"},on:{click:function(t){return t.preventDefault(),e.lastPage(t)}}},[o("i",{staticClass:"material-icons icon",attrs:{"aria-hidden":"true"}},[e._v("chevron_left")])])]),o("li",{staticClass:"page-item",staticStyle:{"margin-right":"0"}},[o("button",{staticClass:"pagination__navigation pagination__navigation--disabled text-bold primary--text",staticStyle:{"border-right":"0","border-left":"0"}},[e._v("\n          "+e._s(e.titlePage)+"\n        ")])]),o("li",{staticClass:"page-item",class:e.classLastPage,staticStyle:{"margin-right":"0"}},[o("button",{staticClass:"pagination__navigation",class:e.classLastPage,staticStyle:{"border-left":"0"},on:{click:function(t){return t.preventDefault(),e.nextPage(t)}}},[o("i",{staticClass:"material-icons icon",attrs:{"aria-hidden":"true"}},[e._v("chevron_right")])])]),o("li",{staticClass:"page-item",class:e.classLastPage},[o("button",{staticClass:"pagination__navigation",class:e.classLastPage,on:{click:function(t){return t.preventDefault(),e.nextPageLast(t)}}},[o("i",{staticClass:"material-icons icon",attrs:{"aria-hidden":"true"}},[e._v("last_page")])])])])]):e._e()])},s=[],a=(o("6762"),o("2fdb"),o("e814")),r=o.n(a),n=(o("c5f6"),o("9029")),l="TinyPagination",c={name:l,props:{total:{type:Number,required:!0},page:{type:Number,default:1},lang:{type:String,default:"en"},customClass:{type:String},currentLimit:{type:Number,default:15},limits:{type:Array,default:function(){return[10,15,20,50,100]}},showLimit:{type:Boolean,default:!0}},data:function(){return{version:"0.2.1",currentPage:1,translations:{en:{prev:"Previous",title:"Page",next:"Next"}},availableLanguages:["en"]}},created:function(){this.currentPage=this.page},watch:{page:function(e){this.currentPage=r()(e)}},computed:{translation:function(){return this.availableLanguages.includes(this.lang)?this.translations[this.lang]:this.translations["en"]},totalPages:function(){return Math.ceil(this.total/this.currentLimit)},totalPagesData:function(){for(var e=[],t={},o=1;o<=this.totalPages;++o)t={value:o,text:"Trang "+o},e.push(t);return e},titlePage:function(){return"".concat(this.currentPage)},classFirstPage:function(){return{"c-not-allowed pagination__navigation--disabled":1===this.currentPage}},classLastPage:function(){return{"c-not-allowed pagination__navigation--disabled":this.currentPage===this.totalPages}},viewMobile:function(){return n["isMobile"]}},methods:{nextPage:function(){this.currentPage!==this.totalPages&&(this.currentPage+=1,this.$emit("tiny:change-page",{page:this.currentPage}))},lastPage:function(){this.currentPage>1&&(this.currentPage-=1,this.$emit("tiny:change-page",{page:this.currentPage}))},nextPageLast:function(){this.currentPage=this.totalPages,this.$emit("tiny:change-page",{page:this.totalPages})},lastPageLast:function(){this.currentPage=1,this.$emit("tiny:change-page",{page:1})},goToPage:function(){this.$emit("tiny:change-page",{page:this.currentPage})},onLimitChange:function(){this.currentPage=1}}},d=c,p=o("2877"),u=Object(p["a"])(d,i,s,!1,null,null,null);t["a"]=u.exports},"454f":function(e,t,o){o("46a7");var i=o("584a").Object;e.exports=function(e,t,o){return i.defineProperty(e,t,o)}},"46a7":function(e,t,o){var i=o("63b6");i(i.S+i.F*!o("8e60"),"Object",{defineProperty:o("d9f6").f})},"85f2":function(e,t,o){e.exports=o("454f")},bd86:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var i=o("85f2"),s=o.n(i);function a(e,t,o){return t in e?s()(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}},c5df:function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("v-form",{ref:"formTiepNhanHoSo",attrs:{"lazy-validation":""},model:{value:e.validTNHS,callback:function(t){e.validTNHS=t},expression:"validTNHS"}},[o("div",{staticClass:"row-header"},[o("div",{staticClass:"background-triangle-big"},[o("span",[e._v("THÔNG TIN NHÓM HỒ SƠ")])]),o("div",{staticClass:"layout wrap header_tools row-blue"},[o("div",{staticClass:"flex xs8 sm10 pl-3 text-ellipsis text-bold",attrs:{title:e.thongTinNhomHoSo.serviceName}},[e._v("\n          "+e._s(e.thongTinNhomHoSo.serviceName)+"\n        ")])])]),e.activeAddDossierIntoGroup?e._e():o("div",[o("v-layout",{staticStyle:{background:"#fff","border-bottom":"1px solid #dedede"},attrs:{wrap:""}},[o("v-flex",{staticClass:"my-2",attrs:{xs12:"",sm2:""}},[o("v-subheader",{staticClass:"pl-0 text-header pt-2"},[e._v("Tên nhóm hồ sơ: ")])],1),o("v-flex",{staticClass:"my-2 pr-3",attrs:{xs12:"",sm10:""}},[o("v-text-field",{staticClass:"mt-1",model:{value:e.thongTinNhomHoSo.dossierName,callback:function(t){e.$set(e.thongTinNhomHoSo,"dossierName",t)},expression:"thongTinNhomHoSo.dossierName"}})],1)],1),o("thong-tin-chu-ho-so",{ref:"thongtinnguoinophoso",attrs:{showApplicant:!0,showDelegate:!1}}),o("div",{staticStyle:{position:"relative","border-top":"1px solid #dedede"}},[o("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:0}},[o("v-expansion-panel-content",[o("div",{staticStyle:{display:"flex","align-items":"center"},attrs:{slot:"header"},slot:"header"},[o("div",{staticClass:"background-triangle-small"},[o("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),e._v("\n              Thành phần hồ sơ theo nhóm    \n            ")]),o("thanh-phan-ho-so-1",{ref:"thanhphanhoso1",attrs:{onlyView:!1,id:"nm",partTypes:e.inputTypes}})],1)],1)],1),o("div",{staticStyle:{position:"relative"}},[o("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[o("v-expansion-panel-content",{key:1},[o("div",{staticStyle:{display:"flex","align-items":"center"},attrs:{slot:"header"},slot:"header"},[o("div",{staticClass:"background-triangle-small"},[o("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),e._v("\n              Kết quả xử lý theo nhóm    \n            ")]),o("thanh-phan-ho-so-2",{ref:"thanhphanhoso2",attrs:{onlyView:!0,id:"nm",partTypes:e.outputTypesGroup}})],1)],1)],1),o("div",{staticStyle:{position:"relative","border-bottom":"1px solid #dedede"}},[o("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[o("v-expansion-panel-content",{key:1},[o("div",{staticStyle:{display:"flex","align-items":"center"},attrs:{slot:"header"},slot:"header"},[o("div",{staticClass:"background-triangle-small"},[o("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),e._v("\n              Hồ sơ trong nhóm    \n            ")]),e.dossiersIntoGroupRender.length>0?o("div",{staticClass:"mb-3"},[o("v-layout",{staticClass:"my-2",attrs:{wrap:""}},[o("v-flex",{staticStyle:{width:"120px"}},[o("v-subheader",{staticClass:"pl-0 text-header"},[e._v("Bước xử lý: ")])],1),o("v-flex",{staticClass:"pr-3",staticStyle:{width:"calc(100% - 120px)"}},[o("v-select",{attrs:{items:e.stepList,"item-text":"stepName","item-value":"stepCode","return-object":"",clearable:""},on:{change:e.changeStep},model:{value:e.stepSelected,callback:function(t){e.stepSelected=t},expression:"stepSelected"}})],1)],1),o("div",{staticClass:"btn_wrap_actions my-2 mr-2"},e._l(e.btnDynamics,function(t,i){return o("v-btn",{key:i,attrs:{color:"primary",loading:e.loadingAction,disabled:e.loadingAction},nativeOn:{click:function(o){e.btnActionEvent(t,i)}}},[e._v("\n                  "+e._s(t.title)+e._s(t.tiltle)+"\n                  "),o("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])])}),1),o("v-data-table",{staticClass:"table-landing table-bordered",attrs:{"select-all":"",headers:e.headers,items:e.dossiersIntoGroupRender,pagination:e.pagination,"hide-actions":"","item-key":"dossierId"},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"headers",fn:function(t){return[o("tr",[o("th",{staticClass:"v_data_table_check_all",staticStyle:{"padding-left":"14px !important"},attrs:{width:"32px"}},[o("v-checkbox",{attrs:{"input-value":t.all,indeterminate:t.indeterminate,primary:"","hide-details":""},nativeOn:{click:function(t){return e.toggleAll(t)}}})],1),e._l(e.headers,function(t){return o("th",{key:t.text,class:t["class"]?t["class"]:"",attrs:{width:t["width"]?t["width"]+"px":""}},[o("v-tooltip",{attrs:{bottom:""}},[o("span",{attrs:{slot:"activator"},slot:"activator"},[e._v(e._s(t.text))]),o("span",[e._v(e._s(t.text))])])],1)})],2)]}},{key:"items",fn:function(t){return[o("tr",{staticStyle:{cursor:"pointer"}},[o("td",{staticClass:"text-xs-center pl-3",staticStyle:{height:"40px !important"},attrs:{width:"32px"}},[o("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(o){e.$set(t,"selected",o)},expression:"props.selected"}})],1),o("td",{staticClass:"text-xs-center",staticStyle:{height:"40px !important"},attrs:{width:"50px"},on:{click:function(o){e.viewDetail(t.item,t.index)}}},[o("span",[e._v(e._s(e.pagination.page*e.pagination.rowsPerPage-e.pagination.rowsPerPage+t.index+1))])]),o("td",{staticClass:"text-xs-left",staticStyle:{height:"40px !important"},attrs:{width:"250px"},on:{click:function(o){e.viewDetail(t.item,t.index)}}},[e._v("\n                      "+e._s(t.item.dossierNo)+"\n                    ")]),o("td",{staticClass:"text-xs-left",staticStyle:{height:"40px !important"},on:{click:function(o){e.viewDetail(t.item,t.index)}}},[e._v("\n                      "+e._s(t.item.applicantName)+"\n                    ")]),o("td",{staticClass:"text-xs-left",staticStyle:{height:"40px !important"},attrs:{width:"200px"},on:{click:function(o){e.viewDetail(t.item,t.index)}}},[e._v("\n                      "+e._s(t.item.dossierSubStatusText?t.item.dossierSubStatusText:t.item.dossierStatusText)+"\n                    ")])])]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),e.dossiersIntoGroupRender.length>10?o("div",{staticClass:"text-xs-center layout wrap mt-2 pr-1",staticStyle:{position:"relative"}},[o("div",{staticClass:"flex pagging-table px-2"},[o("tiny-pagination",{attrs:{total:e.dossiersIntoGroupRender.length,currentLimit:10,page:e.pagination.page,"custom-class":"custom-tiny-class"},on:{"tiny:change-page":e.paggingData}})],1)]):e._e()],1):o("div",{staticClass:"pl-4 py-2"},[e._v("Chưa có hồ sơ nào")]),o("v-flex",{staticClass:"text-right mb-3 mr-2",attrs:{xs12:""}},[o("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"dossierImport"},on:{change:function(t){e.uploadfileDossierImport(t)}}}),o("v-btn",{staticClass:"mx-0 my-0 mr-2",staticStyle:{height:"36px !important"},attrs:{color:"primary"},on:{click:e.createDossierIntoGroup}},[o("v-icon",{attrs:{size:"20"}},[e._v("add")]),e._v("   \n                "),o("span",[e._v("Thêm hồ sơ vào nhóm")])],1),o("v-btn",{staticClass:"mx-0 my-0 mr-1",staticStyle:{height:"36px !important"},attrs:{color:"primary"},on:{click:e.importIntoGroup}},[o("v-icon",{attrs:{size:"20"}},[e._v("cloud_upload")]),e._v("   \n                "),o("span",[e._v("Import hồ sơ vào nhóm")])],1)],1)],1)],1)],1)],1),e.activeAddDossierIntoGroup?o("div",[e.activeAddDossierIntoGroup?o("thong-tin-chu-ho-so",{ref:"thongtinchuhoso",attrs:{showApplicant:!1,showDelegate:!0}}):e._e(),e.activeAddDossierIntoGroup?o("div",{staticStyle:{position:"relative"}},[o("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:0}},[o("v-expansion-panel-content",[o("div",{staticStyle:{display:"flex","align-items":"center"},attrs:{slot:"header"},slot:"header"},[o("div",{staticClass:"background-triangle-small"},[o("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),e._v("\n              Thành phần hồ sơ     \n            ")]),o("thanh-phan-ho-so",{ref:"thanhphanhoso",attrs:{onlyView:!1,id:"nm",partTypes:e.inputTypesIntoGroup}})],1)],1)],1):e._e(),0!==e.viaPortalDetail?o("div",{staticStyle:{position:"relative"}},[o("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:0}},[o("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"2"}},[o("div",{attrs:{slot:"header"},slot:"header"},[o("div",{staticClass:"background-triangle-small"},[o("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),e._v("Dịch vụ chuyển phát kết quả")]),o("dich-vu-chuyen-phat-ket-qua",{ref:"dichvuchuyenphatketqua",on:{changeViapostal:e.changeViapostal}})],1)],1)],1):e._e(),o("div",{staticStyle:{position:"relative"}},[o("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[o("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"2"}},[e.showThuPhi?o("thu-phi",{attrs:{viaPortal:e.viaPortalDetail},model:{value:e.payments,callback:function(t){e.payments=t},expression:"payments"}}):e._e()],1)],1)],1)],1):e._e(),e.activeAddDossierIntoGroup||e.activeAddGroup?o("v-tabs",{staticClass:"mb-0 mt-4",attrs:{"icons-and-text":"",centered:""}},[e.activeAddGroup?o("v-tab",{staticClass:"px-0 py-0",attrs:{href:"#tab-1"},on:{click:function(t){e.putGroupDossier()}}},[o("v-btn",{attrs:{flat:"",loading:e.loadingAction,disabled:e.loadingAction}},[o("v-icon",{attrs:{size:"20"}},[e._v("save")]),e._v("   \n          "),o("span",[e._v("Cập nhật")]),o("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])],1)],1):e._e(),e.activeAddGroup?e._e():o("v-tab",{staticClass:"px-0 py-0",attrs:{href:"#tab-1"},on:{click:function(t){e.tiepNhanHoSo()}}},[o("v-btn",{attrs:{flat:"",loading:e.loadingAction,disabled:e.loadingAction}},[o("v-icon",{attrs:{size:"20"}},[e._v("save")]),e._v("   \n          "),o("span",[e._v("Tiếp nhận hồ sơ")]),o("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])],1)],1),e.activeAddGroup?e._e():o("v-tab",{staticClass:"px-0 py-0",attrs:{href:"#tab-2"},on:{click:function(t){e.tiepNhanHoSo("add")}}},[o("v-btn",{attrs:{flat:"",loading:e.loadingAction,disabled:e.loadingAction}},[o("v-icon",{attrs:{size:"20"}},[e._v("note_add")]),e._v("   \n          "),o("span",[e._v("Tiếp nhận và thêm mới")]),o("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])],1)],1),o("v-tab",{staticClass:"px-0 py-0",attrs:{href:"#tab-2"},on:{click:e.goBack}},[o("v-btn",{attrs:{flat:"",loading:e.loadingAction,disabled:e.loadingAction}},[o("v-icon",{attrs:{size:"18"}},[e._v("reply")]),e._v("  \n          Quay lại\n          "),o("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])],1)],1)],1):e._e()],1),o("v-dialog",{attrs:{"max-width":"700",transition:"fade-transition"},model:{value:e.dialogImportDosier,callback:function(t){e.dialogImportDosier=t},expression:"dialogImportDosier"}},[o("v-card",[o("v-toolbar",{attrs:{flat:"",dark:"",color:"primary"}},[o("v-toolbar-title",[e._v("Import hồ sơ")]),o("v-spacer"),o("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.dialogImportDosier=!1}}},[o("v-icon",[e._v("close")])],1)],1),o("v-card-text",{staticClass:"pt-0 pb-0 px-0"},[o("v-flex",{staticClass:"text-xs-center"},[o("v-progress-circular",{staticClass:"my-2",attrs:{rotate:-90,size:70,width:10,value:e.valueProgress,color:"primary"}},[o("span",{staticStyle:{"font-size":"1.5em","font-weight":"bold"}},[e._v(e._s(e.countDossierProgress))])]),o("div",{staticClass:"pb-0",staticStyle:{margin:"0 auto"}},[o("v-card",{staticClass:"py-0"},[o("span",{staticStyle:{color:"green"}},[e._v("Thành công: "+e._s(e.countDossierSuccess)+" hồ sơ")]),o("p",{staticStyle:{color:"red"}},[e._v("Lỗi: "+e._s(e.dossierError.length)+" hồ sơ")])])],1)],1),e.dossierError.length&&!e.loadingImportDossier?o("div",{staticClass:"px-2",staticStyle:{margin:"0 auto"}},[o("span",{staticStyle:{"font-size":"1.2em","font-weight":"bold"}},[e._v("Danh sách hồ sơ bị lỗi:")]),o("v-data-table",{staticClass:"table-landing table-bordered mt-2",staticStyle:{"border-left":"1px solid #dedede"},attrs:{headers:e.headers,items:e.dossierError,"hide-actions":"","item-key":"dossierId"},scopedSlots:e._u([{key:"items",fn:function(t){return[o("tr",{staticStyle:{cursor:"pointer"}},[o("td",{staticClass:"text-xs-center",attrs:{width:""}},[o("span",[e._v(e._s(t.index+1))])]),o("td",{staticClass:"text-xs-left",attrs:{width:""}},[e._v("\n                  "+e._s(t.item.applicantName)+"\n                ")]),o("td",{staticClass:"text-xs-left"},[e._v("\n                  "+e._s(t.item.applicantIdNo)+"\n                ")]),o("td",{staticClass:"text-xs-left",attrs:{width:""}},[e._v("\n                  "+e._s(t.item.address)+"\n                ")])])]}}])})],1):e._e()],1),o("v-card-actions",[o("v-spacer"),e.dossierError.length?o("v-btn",{attrs:{color:"primary",loading:e.loadingImportDossier,disabled:e.loadingImportDossier},nativeOn:{click:function(t){e.addDossierAgain()}}},[o("v-icon",[e._v("send")]),e._v(" \n            Thực hiện lại\n            "),o("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])],1):e._e(),o("v-btn",{staticStyle:{color:"#fff"},attrs:{color:"red",loading:e.loadingImportDossier,disabled:e.loadingImportDossier},nativeOn:{click:function(t){e.dialogImportDosier=!1}}},[o("v-icon",[e._v("reply")]),e._v(" \n          Quay lại\n          "),o("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])],1)],1)],1)],1),o("v-dialog",{attrs:{"max-width":"1000",transition:"fade-transition"},model:{value:e.dialogSelectDosier,callback:function(t){e.dialogSelectDosier=t},expression:"dialogSelectDosier"}},[o("v-card",{attrs:{flat:""}},[o("v-toolbar",{attrs:{flat:"",dark:"",color:"primary"}},[o("v-toolbar-title",[e._v("Chọn hồ sơ đính kèm tài liệu")]),o("v-spacer"),o("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.cancelAddFile(t)}}},[o("v-icon",[e._v("close")])],1)],1),o("v-card-text",{staticClass:"pt-0 pb-0 px-0"},[e.dossiersIntoGroupRender.length>0?o("div",{staticClass:"mb-3"},[o("v-layout",{staticClass:"my-2",attrs:{wrap:""}},[o("v-flex",{staticStyle:{width:"120px"}},[o("v-subheader",{staticClass:"pl-0 text-header"},[e._v("Bước xử lý: ")])],1),o("v-flex",{staticClass:"pr-3",staticStyle:{width:"calc(100% - 120px)"}},[o("v-select",{attrs:{items:e.stepList,"item-text":"stepName","item-value":"stepCode","return-object":"",clearable:""},on:{change:e.changeStep},model:{value:e.stepSelected,callback:function(t){e.stepSelected=t},expression:"stepSelected"}})],1)],1),o("v-data-table",{staticClass:"table-landing table-bordered",attrs:{"select-all":"",headers:e.headers,items:e.dossiersIntoGroupRender,pagination:e.pagination,"hide-actions":"","item-key":"dossierId"},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"headers",fn:function(t){return[o("tr",[o("th",{staticClass:"v_data_table_check_all",staticStyle:{"padding-left":"14px !important"},attrs:{width:"32px"}},[o("v-checkbox",{attrs:{"input-value":t.all,indeterminate:t.indeterminate,primary:"","hide-details":""},nativeOn:{click:function(t){return e.toggleAllSelectDialog(t)}}})],1),e._l(e.headers,function(t){return o("th",{key:t.text,class:t["class"]?t["class"]:"",attrs:{width:t["width"]?t["width"]+"px":""}},[o("v-tooltip",{attrs:{bottom:""}},[o("span",{attrs:{slot:"activator"},slot:"activator"},[e._v(e._s(t.text))]),o("span",[e._v(e._s(t.text))])])],1)})],2)]}},{key:"items",fn:function(t){return[o("tr",{staticStyle:{cursor:"pointer"}},[o("td",{staticClass:"text-xs-center pl-3",staticStyle:{height:"40px !important"},attrs:{width:"32px"}},[o("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(o){e.$set(t,"selected",o)},expression:"props.selected"}})],1),o("td",{staticClass:"text-xs-center",staticStyle:{height:"40px !important"},attrs:{width:"50px"},on:{click:function(o){e.viewDetail(t.item,t.index)}}},[o("span",[e._v(e._s(e.pagination.page*e.pagination.rowsPerPage-e.pagination.rowsPerPage+t.index+1))])]),o("td",{staticClass:"text-xs-left",staticStyle:{height:"40px !important"},attrs:{width:"250px"},on:{click:function(o){e.viewDetail(t.item,t.index)}}},[e._v("\n                  "+e._s(t.item.dossierNo)+"\n                ")]),o("td",{staticClass:"text-xs-left",staticStyle:{height:"40px !important"},on:{click:function(o){e.viewDetail(t.item,t.index)}}},[e._v("\n                  "+e._s(t.item.applicantName)+"\n                ")]),o("td",{staticClass:"text-xs-left",staticStyle:{height:"40px !important"},attrs:{width:"200px"},on:{click:function(o){e.viewDetail(t.item,t.index)}}},[e._v("\n                  "+e._s(t.item.dossierSubStatusText?t.item.dossierSubStatusText:t.item.dossierStatusText)+"\n                ")])])]}}]),model:{value:e.selectedAttach,callback:function(t){e.selectedAttach=t},expression:"selectedAttach"}}),e.dossiersIntoGroupRender.length>10?o("div",{staticClass:"text-xs-center layout wrap mt-2 pr-1",staticStyle:{position:"relative"}},[o("div",{staticClass:"flex pagging-table px-2"},[o("tiny-pagination",{attrs:{total:e.dossiersIntoGroupRender.length,currentLimit:10,page:e.pagination.page,"custom-class":"custom-tiny-class"},on:{"tiny:change-page":e.paggingData}})],1)]):e._e()],1):e._e()]),o("v-card-actions",[o("v-spacer"),o("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){e.addFileToDossier()}}},[o("v-icon",[e._v("send")]),e._v(" \n          Xác nhận\n        ")],1),o("v-btn",{staticStyle:{color:"#fff"},attrs:{color:"red"},nativeOn:{click:function(t){return e.cancelAddFile(t)}}},[o("v-icon",[e._v("close")]),e._v(" \n          Bỏ qua\n        ")],1)],1)],1)],1)],1)},s=[],a=(o("a481"),o("c5f6"),o("795b")),r=o.n(a),n=(o("5df3"),o("ac6a"),o("6b54"),o("5176")),l=o.n(n),c=o("f499"),d=o.n(c),p=o("bd86"),u=o("854a"),_=o.n(u),h=o("1157"),m=o.n(h),f=o("826a"),g=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("v-card",{attrs:{flat:""}},[e._l(e.dossierTemplateItemsFilter,function(t,i){return o("div",{key:t.partNo,staticClass:"form_alpaca",staticStyle:{position:"relative"}},[o("v-expansion-panel",{staticClass:"expaned__list__data",attrs:{expand:"",value:e.currentFormView==="formAlpaca"+t.partNo+e.id?[!0]:[!1]}},[o("v-expansion-panel-content",{attrs:{"hide-actions":""}},[o("div",{staticStyle:{"background-color":"#fff"},attrs:{slot:"header"},on:{click:function(t){e.stateView=!1}},slot:"header"},[o("div",{staticStyle:{"align-items":"center",background:"#fff","padding-left":"25px"},style:{width:e.checkStyle(t)}},[o("div",{staticClass:"mr-2",staticStyle:{"min-width":"20px",display:"flex"},on:{click:function(o){(!e.onlyView||!t.hasForm)&&e.loadAlpcaFormClick(t)}}},[o("div",{staticClass:"header__tphs",staticStyle:{"min-width":"20px"}},[o("span",{staticClass:"text-bold"},[e._v(e._s(i+1)+".")]),e._v("  ")]),o("div",{staticClass:"header__tphs",staticStyle:{"text-align":"justify"}},[t.partTip&&t.partTip["tip"]?o("v-tooltip",{staticStyle:{"max-width":"100% !important"},attrs:{top:""}},[o("span",{attrs:{slot:"activator"},slot:"activator"},[e._v("\n                      "+e._s(t.partName)+"\n                      "),t.required?o("span",{staticStyle:{color:"red"}},[e._v("   (*) ")]):e._e()]),t.partTip["tip"]?o("span",[e._v(e._s(t.partTip["tip"]))]):e._e()]):o("span",[e._v("\n                    "+e._s(t.partName)+" "),t.required?o("span",{staticStyle:{color:"red"}},[e._v("   (*) ")]):e._e(),t.hasForm?o("span",{staticStyle:{color:"#004b94"}},[e._v("(Bản khai trực tuyến)")]):e._e()]),e._v("\n                    \n                  "),!t.hasForm&&t.hasFileTemp?o("v-tooltip",{attrs:{top:""}},[o("v-icon",{staticStyle:{color:"#0d71bb"},attrs:{slot:"activator",size:"16",color:"primary"},on:{click:function(o){o.stopPropagation(),e.downloadFileTemplate(t,i)}},slot:"activator"},[e._v("save_alt")]),o("span",[e._v("Biểu mẫu điền thủ công")])],1):e._e()],1)]),o("div",{staticStyle:{display:"flex"}},[1===e.checkInput&&2===t.fileCheck&&t.stateEditFileCheck?o("v-text-field",{attrs:{placeholder:"Nhập lý do",rules:[function(e){return!!e||"Bạn phải nhập lý do trước khi gửi"}],required:""},on:{keyup:function(o){if(!("button"in o)&&e._k(o.keyCode,"enter",13,o.key,"Enter"))return null;e.changeFileComment(t,i)}},model:{value:t.fileComment,callback:function(o){e.$set(t,"fileComment",o)},expression:"item.fileComment"}}):e._e(),1===e.checkInput&&2===t.fileCheck&&t.stateEditFileCheck?o("v-tooltip",{attrs:{top:""}},[o("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(o){o.stopPropagation(),e.changeFileComment(t,i)}},slot:"activator"},[o("v-icon",{staticClass:"mx-0",attrs:{size:"16",color:"primary"}},[e._v("send")])],1),o("span",[e._v("Gửi")])],1):e._e()],1),t.fileComment&&!t.stateEditFileCheck?o("i",{staticStyle:{"font-size":"12px",color:"#0d71bb","margin-left":"10px"}},[e._v(e._s(t.fileComment))]):e._e(),t.fileComment&&!t.stateEditFileCheck&&1===e.checkInput?o("v-tooltip",{attrs:{top:""}},[o("v-icon",{staticStyle:{"font-size":"13px",color:"#0d71bb","margin-left":"10px",cursor:"pointer"},attrs:{slot:"activator"},on:{click:function(e){e.stopPropagation(),t.stateEditFileCheck=!t.stateEditFileCheck}},slot:"activator"},[e._v("edit")]),o("span",[e._v("Chỉnh sửa ý kiến")])],1):e._e(),e._l(e.dossierFilesItems,function(i,s){return t.partNo===i.dossierPartNo?o("div",{key:s},[i.eForm?e._e():o("div",{style:{width:"calc(100% - 0px)",display:"flex","align-items":"center",background:"#fff","padding-left":"15px","font-size":"12px","margin-bottom":e.onlyView?"5px":"0px"}},[o("span",{staticClass:"ml-3",staticStyle:{cursor:"pointer"},on:{click:function(t){t.stopPropagation(),e.viewFile2(i)}}},[0!==i.fileSize?o("v-icon",{staticClass:"mr-1",attrs:{color:e.getDocumentTypeIcon(i.fileType)["color"],size:e.getDocumentTypeIcon(i.fileType)["size"]}},[e._v("\n                      "+e._s(e.getDocumentTypeIcon(i.fileType)["icon"])+"\n                    ")]):e._e(),e._v("\n                    "+e._s(i.displayName)+" - \n                    "),o("i",[e._v(e._s(i.modifiedDate))])],1),e.onlyView||1===e.checkInput?e._e():o("v-btn",{staticClass:"mx-0 my-0",attrs:{icon:"",ripple:""},on:{click:function(t){t.stopPropagation(),e.deleteSingleFile(i,s)}}},[o("v-icon",{staticStyle:{color:"red"}},[e._v("delete_outline")])],1)],1)]):e._e()}),o("div",{staticClass:"mr-3 my-2 py-2",staticStyle:{display:"none","max-height":"250px","overflow-y":"scroll",border:"1px dashed #f3ae75","border-radius":"5px",position:"relative"},attrs:{id:"fileApplicant-"+t.partNo}},[e._l(e.dossierFilesApplicant,function(s,a){return s.dossierTemplateNo===e.thongTinHoSo["dossierTemplateNo"]&&t.partNo===s.dossierPartNo?o("div",{key:a},[s.eForm&&0!==s.fileSize?o("div",{style:{width:"calc(100% - 0px)",display:"flex","align-items":"center","padding-left":"15px","font-size":"12px","margin-bottom":e.onlyView?"5px":"3px"}},[o("v-tooltip",{staticStyle:{"max-width":"100%"},attrs:{top:""}},[o("span",{staticStyle:{cursor:"pointer"},attrs:{slot:"activator"},on:{click:function(t){t.stopPropagation(),e.viewGiayToDaNop(s)}},slot:"activator"},[o("i",{staticClass:"ml-1 fa fa-file-o",staticStyle:{color:"#0d71bb","font-size":"13px"}}),e._v("  \n                        "+e._s(s.dossierTemplateNo?s.dossierTemplateNo:s.referenceUid)+"."+e._s(s.fileType)+" - \n                        "),o("i",[e._v(e._s(s.modifiedDate))])]),o("span",[e._v("Bản khai trực tuyến")])]),e.progressUploadPart===s.dossierFileId?o("v-progress-circular",{attrs:{width:2,size:25,color:"green",indeterminate:""}}):e._e(),e.onlyView||e.progressUploadPart?e._e():o("v-tooltip",{staticClass:"ml-2",attrs:{top:""}},[o("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(t){e.attachToDossier(s,i)}},slot:"activator"},[o("v-badge",[o("v-icon",{attrs:{size:"16",color:"orange darken-3"}},[e._v("cloud_download")])],1)],1),o("span",[e._v("Sử dụng giấy tờ này")])],1)],1):o("div",{style:{width:"calc(100% - 0px)",display:"flex","align-items":"center","padding-left":"15px","font-size":"12px","margin-bottom":e.onlyView?"5px":"3px"}},[o("v-tooltip",{staticStyle:{"max-width":"100%"},attrs:{top:""}},[o("span",{staticStyle:{cursor:"pointer"},attrs:{slot:"activator"},on:{click:function(t){t.stopPropagation(),e.viewGiayToDaNop(s)}},slot:"activator"},[0!==s.fileSize?o("v-icon",{staticStyle:{color:"#0d71bb"}},[e._v("attach_file")]):e._e(),e._v("\n                        "+e._s(s.displayName)+" - \n                        "),o("i",[e._v(e._s(s.modifiedDate))])],1),o("span",[e._v("Đính kèm")])]),e.progressUploadPart===s.dossierFileId?o("v-progress-circular",{attrs:{width:2,size:25,color:"green",indeterminate:""}}):e._e(),e.onlyView||e.progressUploadPart?e._e():o("v-tooltip",{staticClass:"ml-2",attrs:{top:""}},[o("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(t){e.attachToDossier(s,i)}},slot:"activator"},[o("v-badge",[o("v-icon",{attrs:{size:"16",color:"orange darken-3"}},[e._v("cloud_download")])],1)],1),o("span",[e._v("Sử dụng giấy tờ này")])],1)],1)]):e._e()}),o("v-btn",{staticClass:"mx-0 my-0",staticStyle:{position:"absolute",right:"0px",top:"0px"},attrs:{flat:"",icon:"",color:"red"},on:{click:function(o){o.stopPropagation(),e.showFilesApplicant(t.partNo)}}},[o("v-icon",[e._v("clear")])],1)],2)],2)]),t.hasForm&&!e.onlyView?o("v-card",{attrs:{flat:""}},[o("v-card-text",{staticStyle:{"background-color":"rgba(244, 247, 213, 0.19)"}},[o("v-layout",{attrs:{wrap:""}},[e.stateView?e._e():o("v-flex",{staticClass:"text-xs-right",attrs:{xs12:""}},[o("div",{style:e.pstFixed>e.pstEl&&e.pstFixed<e.endEl+e.pstEl?"position:fixed;top:5px;z-index:101":"",attrs:{id:"wrapForm"+t.partNo+e.id}},[t["editForm"]&&t.hasForm&&!e.onlyView&&1!==e.checkInput?o("v-btn",{attrs:{color:"primary"},on:{click:function(o){o.stopPropagation(),e.saveAlpacaForm(t,i)}}},[o("v-icon",{attrs:{color:"white"}},[e._v("save")]),e._v(" \n                      Lưu lại\n                    ")],1):e._e(),t["editForm"]&&t.daKhai&&t.hasForm?o("v-btn",{attrs:{color:"primary"},on:{click:function(o){o.stopPropagation(),e.previewFormAlpaca(t,i)}}},[o("v-icon",{attrs:{color:"white"}},[e._v("print")]),e._v(" \n                      Xem\n                    ")],1):e._e(),t["editForm"]||!t.hasForm||e.onlyView?e._e():o("v-btn",{attrs:{color:"primary"},on:{click:function(o){o.stopPropagation(),e.editFormAlpaca(t)}}},[o("v-icon",{attrs:{color:"white"}},[e._v("edit")]),e._v(" \n                      Sửa\n                    ")],1),t.daKhai&&t.hasForm&&!e.onlyView&&1!==e.checkInput?o("v-btn",{attrs:{color:"primary"},on:{click:function(o){o.stopPropagation(),e.deleteSingleFileEform(t,i)}}},[o("v-icon",{attrs:{color:"white"}},[e._v("delete")]),e._v(" \n                      Xóa\n                    ")],1):e._e()],1),t["editForm"]?o("div",{class:{no_acction__event:e.onlyView},attrs:{id:"formAlpaca"+t.partNo+e.id}}):e._e(),t["editForm"]?e._e():o("iframe",{staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"displayPDF"+t.partNo+e.id,src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})])],1)],1)],1):e._e()],1)],1),o("div",{staticClass:"absolute__btn group__thanh_phan mr-1"},[e.loading?o("content-placeholders",{staticClass:"mt-1"},[o("content-placeholders-text",{attrs:{lines:1}})],1):o("v-layout",{attrs:{row:"",wrap:""}},[1===e.originality||e.onlyView?e._e():o("v-flex",{staticClass:"layout wrap mr-2",staticStyle:{width:"100px"}},[o("v-text-field",{staticClass:"counter-up-down text-xs-center",staticStyle:{width:"100px"},style:e.onlyView?"pointer-events: none":"",attrs:{title:"Số lượng","append-icon":"add","prepend-inner-icon":"remove","clear-icon":"mdi-close-circle",type:"number",solo:"",flat:"",height:"32"},on:{"click:append":function(t){e.increaseCounter(i)},"click:prepend-inner":function(t){e.decreaseCounter(i)},input:function(t){e.changeRecordCount(i)}},model:{value:e.dossierTemplateItems[i]["recordCount"],callback:function(t){e.$set(e.dossierTemplateItems[i],"recordCount",t)},expression:"dossierTemplateItems[index]['recordCount']"}})],1),1===e.originality||1!==t.partType||e.thongTinHoSo.online||1===e.checkInput?e._e():o("v-flex",{staticClass:"layout wrap",staticStyle:{width:"100px"}},[o("v-select",{style:e.onlyView?"pointer-events: none":"",attrs:{items:e.fileMarkItems},on:{change:function(t){e.changeFileMark(t,i)}},model:{value:e.dossierTemplateItems[i].fileMark,callback:function(t){e.$set(e.dossierTemplateItems[i],"fileMark",t)},expression:"dossierTemplateItems[index].fileMark"}})],1),1===e.checkInput?o("v-flex",{staticClass:"layout wrap",staticStyle:{width:"120px"}},[o("v-select",{attrs:{items:e.fileCheckItems,"item-text":"text","item-value":"value"},on:{change:function(t){e.changeFileCheck(t,i)}},model:{value:e.dossierTemplateItems[i].fileCheck,callback:function(t){e.$set(e.dossierTemplateItems[i],"fileCheck",t)},expression:"dossierTemplateItems[index].fileCheck"}})],1):t.fileCheck>0?o("v-flex",{staticClass:"layout wrap",style:{width:"40px","align-items":"center","margin-left":"10px","margin-top":e.thongTinHoSo.online?"10px":"0px"}},[1===t.fileCheck?o("v-tooltip",{attrs:{top:""}},[o("v-icon",{staticClass:"mx-0",attrs:{slot:"activator",size:"24",color:"primary"},slot:"activator"},[e._v("done")]),o("span",[e._v("Đạt")])],1):2===t.fileCheck?o("v-tooltip",{attrs:{top:""}},[o("v-icon",{staticClass:"mx-0",attrs:{slot:"activator",size:"24",color:"primary"},slot:"activator"},[e._v("close")]),o("span",[e._v("Không đạt")])],1):e._e()],1):e._e(),1!==e.checkInput?o("v-flex",{class:{"text-xs-right":e.onlyView},style:{width:e.onlyView?"auto":"120px"}},[t["multiple"]?o("input",{staticStyle:{display:"none"},attrs:{type:"file",multiple:"",id:"file"+t.partNo},on:{change:function(o){e.onUploadSingleFile(o,t,i)}}}):o("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"file"+t.partNo},on:{change:function(o){e.onUploadSingleFile(o,t,i)}}}),3!==t.partType||3!==e.originality||e.onlyView?e._e():o("v-tooltip",{attrs:{top:""}},[o("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(o){e.addFileOther(t)}},slot:"activator"},[o("v-icon",{staticClass:"mx-0",attrs:{size:"16",color:"primary"}},[e._v("add")])],1),o("span",[e._v("Thêm giấy tờ khác")])],1),e.progressUploadPart===t.partNo?o("v-progress-circular",{attrs:{width:2,size:25,color:"green",indeterminate:""}}):e._e(),e.progressUploadPart!==t.partNo&&!e.onlyView&t.hasForm?o("v-tooltip",{attrs:{top:""}},[o("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(o){o.stopPropagation(),e.loadAlpcaFormClick(t)}},slot:"activator"},[o("v-badge",[o("v-icon",{attrs:{size:"24",color:"#004b94"}},[e._v("edit")])],1)],1),o("span",[e._v("Khai trực tuyến")])],1):e._e(),e.progressUploadPart!==t.partNo&&e.onlyView&t.hasForm?o("v-tooltip",{attrs:{top:""}},[o("v-btn",{staticClass:"mx-1 my-0",staticStyle:{height:"25px",width:"25px"},attrs:{slot:"activator",fab:"",dark:"",small:"",color:"primary"},on:{click:function(o){e.loadAlpcaFormClick(t)}},slot:"activator"},[o("v-icon",{staticStyle:{"font-size":"14px"}},[e._v("visibility")])],1),o("span",[e._v("Xem")])],1):e._e(),e.progressUploadPart===t.partNo||e.onlyView?e._e():o("v-tooltip",{attrs:{left:""}},[o("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(o){e.pickFile(t)}},slot:"activator"},[o("v-badge",[o("v-icon",{attrs:{size:"24",color:"#004b94"}},[e._v("cloud_upload")])],1)],1),t.partTip["extensions"]||t.partTip["maxSize"]?o("span",[e._v("Tải giấy tờ lên (Chấp nhận tải lên các định dạng: "+e._s(t.partTip["extensions"])+". Tối đa "+e._s(t.partTip["maxSize"])+" MB)")]):o("span",[e._v("Tải giấy tờ lên")])],1),e.partNoApplicantHasFile(t.partNo)&&!e.onlyView?o("v-tooltip",{attrs:{top:""}},[o("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(o){e.showFilesApplicant(t.partNo)}},slot:"activator"},[o("v-badge",[o("v-icon",{attrs:{size:"24",color:"orange darken-3"}},[e._v("folder")])],1)],1),o("span",[e._v("Giấy tờ đã nộp")])],1):e._e()],1):e._e()],1)],1)],1)}),e.partTypes.includes(2)||3!==e.originality||e.partTypes.includes(6)||e.partTypes.includes(7)?e._e():o("div",[o("v-card",{attrs:{flat:""}},[o("v-card-text",{staticClass:"py-0 px-3 pl-4",attrs:{flat:""}},[e.onlyView?e._e():o("div",{staticClass:"my-2"},[o("v-textarea",{staticClass:"py-0",attrs:{box:"",rows:"3",label:"Ghi chú"},on:{input:e.changeApplicantNote},model:{value:e.applicantNoteDossier,callback:function(t){e.applicantNoteDossier=t},expression:"applicantNoteDossier"}})],1),e.onlyView&&e.applicantNoteDossier?o("v-text-field",{staticClass:"my-2",attrs:{label:"Ghi chú",readonly:"",box:""},model:{value:e.applicantNoteDossier,callback:function(t){e.applicantNoteDossier=t},expression:"applicantNoteDossier"}}):e._e()],1)],1)],1),o("v-dialog",{attrs:{"max-width":"400",transition:"fade-transition",persistent:""},model:{value:e.dialogAddOtherTemp,callback:function(t){e.dialogAddOtherTemp=t},expression:"dialogAddOtherTemp"}},[o("v-card",[o("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[o("v-toolbar",{attrs:{dark:"",color:"primary"}},[o("v-toolbar-title",[e._v("Tên giấy tờ")]),o("v-spacer"),o("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.cancelDialog(t)}}},[o("v-icon",[e._v("close")])],1)],1),o("v-card-text",{staticClass:"pb-0 pt-4"},[o("v-layout",{attrs:{wrap:""}},[o("v-flex",{staticClass:"px-2 pb-3 fix__label",attrs:{xs12:""}},[o("v-text-field",{attrs:{label:"Tên giấy tờ:",rules:[function(e){return!!e||"Bạn phải điền tên giấy tờ."}],required:""},model:{value:e.otherDossierTemplate,callback:function(t){e.otherDossierTemplate=t},expression:"otherDossierTemplate"}})],1)],1)],1),o("v-card-actions",[o("v-spacer"),o("v-btn",{attrs:{color:"red darken-3",flat:"flat",loading:e.loadingAddOther},nativeOn:{click:function(t){return e.cancelDialog(t)}}},[e._v("\n              Quay lại\n              "),o("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])]),o("v-btn",{attrs:{color:"primary",flat:"flat",loading:e.loadingAddOther},nativeOn:{click:function(t){return e.addOtherTemplate(t)}}},[e._v("\n              Đồng ý\n              "),o("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])])],1)],1)],1)],1)],2),o("v-dialog",{staticStyle:{overflow:"hidden"},attrs:{"max-width":"900",transition:"fade-transition"},model:{value:e.dialogPDF,callback:function(t){e.dialogPDF=t},expression:"dialogPDF"}},[o("v-card",[o("v-toolbar",{attrs:{dark:"",color:"primary"}},[o("v-toolbar-title",[e.pdfEform?o("span",[e._v("Bản in đã khai trực tuyến")]):o("span",[e._v("Tài liệu đính kèm")])]),o("v-spacer"),o("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.dialogPDF=!1}}},[o("v-icon",[e._v("close")])],1)],1),e.dialogPDFLoading?o("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[o("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):e._e(),o("iframe",{directives:[{name:"show",rawName:"v-show",value:!e.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPDFPreview"+e.id,src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1)],1)},v=[],y=o("fcfe"),T=y["a"],I=o("2877"),D=Object(I["a"])(T,g,v,!1,null,null,null),x=D.exports,C=o("c199"),S=o("f374"),P=o("a9a9"),b=o("000e");_.a.options={closeButton:!0,timeOut:"5000"};var E={props:["index","id","formCode"],components:{"thong-tin-chu-ho-so":f["a"],"thanh-phan-ho-so":x,"thanh-phan-ho-so-1":x,"thanh-phan-ho-so-2":x,"thong-tin-chung":C["a"],"thu-phi":S["a"],"dich-vu-chuyen-phat-ket-qua":P["a"],"tiny-pagination":b["a"]},data:function(){var e;return e={detailGroup:!1,dialogImportDosier:!1,dialogSelectDosier:!1,groupDossierList:[],groupDossierSelected:"",dossiersIntoGroup:[],dossiersIntoGroupRender:[],selected:[],selectedAttach:[],stepList:[],stepSelected:"",btnDynamics:[],processOptionSelected:"",thongTinNhomHoSo:"",validTNHS:!1,groupDossierNameCreate:"",currentDossierIntoGroup:"",dossierId:"",mark:!0,stateEditSample:!1,tiepNhanState:!1,activeAddGroup:!1,thongTinChiTietHoSo:{},payments:{},paymentProfile:{},briefNote:"",receiveDateEdit:"",editableDate:!1,dueDateEdit:"",viaPortalDetail:0,showThuPhi:!1,inputTypes:[6],outputTypesGroup:[7],inputTypesIntoGroup:[1,3,6],outputTypes:[2],sampleCount:0,isMobile:!1,loadingAction:!1,dialogAddGroup:!1,activeAddDossierIntoGroup:!1,headers:[{text:"STT",align:"center",sortable:!1,class:"text-xs-center"},{text:"Mã hồ sơ",align:"center",sortable:!1,class:"text-xs-center"},{text:"Tên chủ hồ sơ",align:"center",sortable:!1,class:"text-xs-center"},{text:"Trạng thái",align:"center",sortable:!1,class:"text-xs-center"}],filesGroupDossier:[],countDossierProgress:0},Object(p["a"])(e,"dialogImportDosier",!1),Object(p["a"])(e,"listDossierImport",[]),Object(p["a"])(e,"progressUploadFile",!1),Object(p["a"])(e,"loadingImportDossier",!1),Object(p["a"])(e,"dossierError",[]),Object(p["a"])(e,"dossierSuccess",[]),Object(p["a"])(e,"totalDossier",0),Object(p["a"])(e,"valueProgress",0),Object(p["a"])(e,"countDossierSuccess",0),Object(p["a"])(e,"pagination",{rowsPerPage:10,page:1}),e},computed:{loading:function(){return this.$store.getters.loading},originality:function(){var e=this;return e.getOriginality()},dichVuChuyenPhatKetQua:function(){return this.$store.getters.dichVuChuyenPhatKetQua},thongTinChuHoSo:function(){return this.$store.getters.thongTinChuHoSo},filesAdd:function(){return this.$store.getters.getFilesAdd},activeAddFileGroup:function(){return this.$store.getters.activeAddFileGroup}},created:function(){var e=this;e.$nextTick(function(){e.$router.history.current.query;var t=e.id;t&&e.getDetaiGroup(t)})},beforeDestroy:function(){var e=m()('meta[name="viewport"]');e.attr("content","initial-scale=1.0, width=device-width"),"undefined"!==typeof window&&window.removeEventListener("resize",this.onResize,{passive:!0})},mounted:function(){var e=this;e.thongTinNhomHoSo&&(e.$refs.thongtinnguoinophoso.initData(e.thongTinNhomHoSo),e.$refs.thanhphanhoso1.initData(e.thongTinNhomHoSo),e.$refs.thanhphanhoso2.initData(e.thongTinNhomHoSo),e.filesGroupDossier=e.$refs.thanhphanhoso1.getFilesGroupDossier(),console.log("fileItems 1",e.filesGroupDossier))},watch:{isMobile:function(e){var t=m()('meta[name="viewport"]');e?t.attr("content",""):t.attr("content","initial-scale=1.0, width=device-width")},$route:function(e,t){var o=this,i=(e.query,o.id);i&&o.getDetaiGroup(i)},thongTinNhomHoSo:function(e){var t=this;e&&(t.$refs.thongtinnguoinophoso.initData(e),t.$refs.thanhphanhoso1.initData(e),t.$refs.thanhphanhoso2.initData(e),t.$store.dispatch("loadDossierFiles",e.dossierId).then(function(e){t.filesGroupDossier=e}).catch(function(e){}))},selected:function(e){},activeAddFileGroup:function(e){var t=this;console.log("val activeAddFileGroup",e),t.stepSelected="",t.dialogSelectDosier=e}},methods:{onResize:function(){var e=this,t=window.innerWidth<1024;e.isMobile=t},paggingData:function(e){var t=this;t.pagination.page=e.page},getGroupDossier:function(){var e=this,t=e.$router.history.current.query,o={service:t.serviceCode?t.serviceCode:"",template:t.template_no?t.template_no:"",agency:t.govAgencyCode?t.govAgencyCode:""};e.$store.dispatch("getGroupDossier",o).then(function(t){e.groupDossierList=t})},getDetaiGroup:function(e){var t=this;t.$store.dispatch("getDetailDossier",e).then(function(o){t.thongTinNhomHoSo=o,t.activeAddDossierIntoGroup=!1,t.activeAddGroup=!0,t.groupDossierSelected=o;var i={groupDossierId:e};t.dossiersIntoGroup=[],t.dossiersIntoGroupRender=[],t.$store.dispatch("getDossiersIntoGroup",i).then(function(e){if(t.dossiersIntoGroup=e,t.$store.commit("setSelectDossierGroup",t.dossiersIntoGroup),t.dossiersIntoGroup.length>0){var o=[],i=function(e){0===o.filter(function(o){return String(o["stepCode"])===String(t.dossiersIntoGroup[e]["stepCode"])}).length&&o.push({stepCode:t.dossiersIntoGroup[e]["stepCode"],stepName:t.dossiersIntoGroup[e]["stepName"]})};for(var s in t.dossiersIntoGroup)i(s);t.stepList=o}t.dossiersIntoGroupRender=t.dossiersIntoGroup})})},changeStep:function(){var e=this;setTimeout(function(){e.stepSelected?(e.dossiersIntoGroupRender=e.dossiersIntoGroup.filter(function(t){return String(t["stepCode"])===String(e.stepSelected["stepCode"])}),e.$store.dispatch("pullProcessSteps",e.stepSelected).then(function(t){t.hasOwnProperty("menuGroup")&&t.menuGroup?e.$store.dispatch("getDetailMenuConfig",t).then(function(t){if(t.hasOwnProperty("buttonConfig")&&t.buttonConfig)try{e.btnDynamics=JSON.parse(t["buttonConfig"])["buttons"],e.btnDynamics=e.btnDynamics.filter(function(e){return"ACTIONS"===e["form"]}),e.btnDynamics=e.btnDynamics.filter(function(t){return!t.hasOwnProperty("onlySteps")||t.hasOwnProperty("onlySteps")&&t["onlySteps"].filter(function(t){return String(t)===String(e.stepSelected["stepCode"])})>0})}catch(o){e.btnDynamics=[]}else e.btnDynamics=[]}):e.btnDynamics=[]})):(e.dossiersIntoGroupRender=e.dossiersIntoGroup,e.btnDynamics=[])},200)},btnActionEvent:function(e,t){var o=this;o.selected?o.$store.dispatch("loadActionActive",e).then(function(){o.$store.dispatch("loadDossierSelected",o.selected).then(function(){var t=o.selected.map(function(e){return e.dossierId}).join(","),i=o.$router.history.current.query;i["dossiers"]=t,i["actionActive"]=d()(e),o.$router.push({path:"/danh-sach-ho-so/0/xu-ly-ho-so",query:i})})}):alert("Chọn hồ sơ để thực hiện")},putGroupDossier:function(){var e=this,t=this.$refs.thongtinnguoinophoso?this.$refs.thongtinnguoinophoso.thongTinNguoiNopHoSo:{},o=e.$refs.thongtinnguoinophoso.showValid();if(o["validForm"]){var i=!1;if(o["validApplicant"])i=!0;else{var s=confirm(o["message"]+" Bạn có muốn tiếp tục?");s&&(i=!0)}if(i){var a=l()(e.thongTinNhomHoSo,t);a["dossierId"]=e.thongTinNhomHoSo.dossierId,a["originality"]=e.thongTinNhomHoSo.originality,a["dossierName"]=e.thongTinNhomHoSo.dossierName,console.log("data put groupDossier --\x3e",a),setTimeout(function(){e.$store.dispatch("putDossier",a).then(function(e){_.a.clear(),_.a.success("Cập nhật thành công")}).catch(function(e){_.a.clear(),_.a.error("Yêu cầu của bạn thực hiện thất bại.")})},500)}}},createDossierIntoGroup:function(){var e=this;e.$router.history.current.query;e.activeAddGroup=!1,e.activeAddDossierIntoGroup=!0;var t={serviceCode:e.thongTinNhomHoSo.serviceCode,govAgencyCode:e.thongTinNhomHoSo.govAgencyCode,templateNo:e.thongTinNhomHoSo.dossierTemplateNo,originality:e.originality,groupDossierId:e.thongTinNhomHoSo.dossierId,dossierId:""};e.$store.dispatch("postDossier",t).then(function(o){e.currentDossierIntoGroup=o,t.dossierId=o.dossierId,setTimeout(function(){o["editable"]=!1,""===o.dossierStatus?e.$store.dispatch("pullNextactions",o).then(function(t){if(t){var i=t.filter(function(e){return 1100===e.actionCode||"1100"===e.actionCode});e.$store.dispatch("processPullBtnDetail",{dossierId:o.dossierId,actionId:i[0]?i[0].processActionId:""}).then(function(t){o["editable"]=!(!t||!t.receiving)&&t.receiving.editable,o["receivingDuedate"]=t&&t.receiving&&t.receiving.dueDate?t.receiving.dueDate:null,o["receivingDate"]=t&&t.receiving?t.receiving.receiveDate:"",e.editableDate=!(!t||!t.receiving)&&t.receiving.editable,e.dueDateEdit=t&&t.receiving&&t.receiving.dueDate?t.receiving.dueDate:"",e.receiveDateEdit=t&&t.receiving?t.receiving.receiveDate:"",t&&t.payment&&t.payment.requestPayment>0&&(e.showThuPhi=!0,e.payments=t.payment)})}}):e.$refs.thongtinchunghoso&&(console.log("has thong tin chung ho so"),e.$refs.thongtinchunghoso.initData(o)),e.$refs.thongtinchuhoso.initData(o);var t=e.filesGroupDossier.filter(function(e){return 6===e["dossierPartType"]||7===e["dossierPartType"]});if(t.length>0){var i=t.map(function(e){return e.dossierFileId}).toString(),s={dossierIds:o.dossierId,dossierFileId:i};e.$store.dispatch("uploadFileDossierGroup",s).then(function(t){setTimeout(function(){e.$refs.thanhphanhoso.initData(o)},300)})}else e.$refs.thanhphanhoso.initData(o);if(e.viaPortalDetail=o.viaPostal,o.viaPostal>0){var a=o.address?o.address+", "+o.wardName+" - "+o.districtName+" - "+o.cityName:"";"NEW"===e.formCode&&1===e.originality&&(o["postalAddress"]=a,o["postalTelNo"]=e.thongTinChuHoSo["contactTelNo"]),e.$store.commit("setDichVuChuyenPhatKetQua",o)}},300),e.$store.dispatch("postDossierIntoGroup",t).then(function(e){})}).catch(function(e){})},uploadfileDossierImport:function(e){var t=this,o=t.$refs.thanhphanhoso1.dossierTemplateItems;o=o.filter(function(e){return 1===e["partType"]||6===e["partType"]}),t.$store.dispatch("loadDossierFiles",t.thongTinNhomHoSo["dossierId"]).then(function(e){var o=[];for(var i in e)1!==e[i]["dossierPartType"]&&6!==e[i]["dossierPartType"]||o.push(e[i]["dossierFileId"]);t.dossierFiles=o?o.toString():"",t.progressUploadFile=!0;var s={};t.countDossierProgress=0,t.valueProgress=0,t.listDossierImport=[],t.dossierError=[],t.dossierSuccess=[],t.countDossierSuccess=0,s["dossierId"]=t.thongTinNhomHoSo["dossierId"],s["referenceUid"]=t.thongTinNhomHoSo["referenceUid"],s["selector"]="dossierImport",s["partTip"]={tip:"",maxSize:10,extensions:"xlsx,xls"};m()("#dossierImport")[0].files[0];t.$store.dispatch("uploadDossierFileImport",s).then(function(e){if(t.progressUploadFile=!1,t.totalDossier=e.total,e.total){var o=confirm("Bạn có chắc chắn thực hiện hành động này?");o&&(t.dialogImportDosier=!0,t.listDossierImport=e.data,console.log(e.data),setTimeout(function(){if(t.listDossierImport.length){t.loadingImportDossier=!0;var e=[];t.listDossierImport.forEach(function(o,i){setTimeout(function(){e.push(t.doCreateDossier(o,i)),e.length===t.listDossierImport.length&&r.a.all(e).then(function(e){t.loadingImportDossier=!1,console.log("dossierSuccess 1123412",t.dossierSuccess);var o={groupDossierId:t.thongTinNhomHoSo.dossierId,dossierId:""},i=[];for(var s in t.dossierSuccess)i.push(t.dossierSuccess[s]["dossierId"]);o["dossierId"]=i.toString(),console.log("dataAddGroup",o),t.$store.dispatch("postDossierIntoGroup",o).then(function(e){0===t.dossierError.length&&(_.a.success("Import hồ sơ thành công"),t.getDetaiGroup(t.thongTinNhomHoSo.dossierId),t.dialogImportDosier=!1)})}).catch(function(e){t.loadingImportDossier=!1})},1e3*i)})}},300))}else t.listDossierImport=[],_.a.error("Dữ liệu bị lỗi, vui lòng kiểm tra lại!")}).catch(function(e){t.dialogImportDosier=!1,t.progressUploadFile=!1,_.a.error("Tải file lỗi, vui lòng thử lại!")})}).catch(function(e){})},importIntoGroup:function(){document.getElementById("dossierImport").value="",document.getElementById("dossierImport").click()},addDossierAgain:function(){var e=this;if(e.countDossierProgress=e.dossierSuccess.length,e.valueProgress=100*e.countDossierProgress/e.totalDossier,console.log("valueProgress++++",e.valueProgress),e.countDossierSuccess=e.dossierSuccess.length,e.dossierError.length){e.loadingImportDossier=!0;var t=[];e.dossierError.forEach(function(o,i){setTimeout(function(){t.push(e.doCreateDossier(o,i)),t.length===e.dossierError.length&&r.a.all(t).then(function(t){e.loadingImportDossier=!1,console.log("dossierSuccess 1",e.dossierSuccess);var o={groupDossierId:e.thongTinNhomHoSo.dossierId,dossierId:""},i=[];for(var s in e.dossierSuccess)i=i.push(e.dossierSuccess[s]["dossierId"]),o["dossierId"]=i.toString();e.$store.dispatch("postDossierIntoGroup",o).then(function(t){0===e.dossierError.length&&(_.a.success("Import hồ sơ thành công"),e.getDetaiGroup(e.thongTinNhomHoSo.dossierId),e.dialogImportDosier=!1)})}).catch(function(t){e.loadingImportDossier=!1})},1e3*i)})}},doCreateDossier:function(e,t){var o=this;return new r.a(function(i,s){var a=o,r=o.$refs.thanhphanhoso1.dossierTemplateItems,n={},c=e,p="",u="",_=a.$refs.thongtinnguoinophoso;if(n["serviceCode"]=a.thongTinNhomHoSo["serviceCode"],n["govAgencyCode"]=a.thongTinNhomHoSo["govAgencyCode"],n["dossierTemplateNo"]=a.thongTinNhomHoSo["dossierTemplateNo"],n["originality"]=a.originality,r&&r.length){var h=r.map(function(e){return{partNo:e.partNo,partName:e.partName,fileMark:e.fileMark}});p=d()(h)}else p="";if(n["dossierMarks"]=p,_&&_["thongTinNguoiNopHoSo"]){var m=_["thongTinNguoiNopHoSo"];c=l()(c,m)}n["dossiers"]=c?d()(c):"",n["dossierFiles"]=a.dossierFiles?a.dossierFiles:"",n["payment"]=u?d()(u):"",a.$store.dispatch("importDossier",n).then(function(e){a.countDossierProgress++,a.valueProgress+=100/a.totalDossier,a.listDossierImport[t]["dossierId"]=e["dossierId"],a.listDossierImport[t]["flagError"]=!1,a.countDossierSuccess<a.listDossierImport.length&&a.countDossierSuccess++,a.calDossierErrorSuccess(),i(!0)}).catch(function(e){console.log(e),a.countDossierProgress++,a.valueProgress+=100/a.totalDossier,a.listDossierImport[t]["flagError"]=!0,a.calDossierErrorSuccess(),s(e)})})},calDossierErrorSuccess:function(){var e=this;e.dossierError=e.listDossierImport.filter(function(e){return e["flagError"]}),e.dossierSuccess=e.listDossierImport.filter(function(e){return!e.hasOwnProperty("flagError")||!e["flagError"]})},tiepNhanHoSo:function(e){var t=this;t.$store.commit("setPrintPH",!1);var o=this.$refs.thongtinchuhoso.getThongTinChuHoSo(),i=this.$refs.thongtinchuhoso.getThongTinNguoiNopHoSo(),s=(this.$refs.thanhphanhoso.dossierTemplateItems,t.dichVuChuyenPhatKetQua);console.log("validate TNHS formThongtinchuhoso.validate()",t.$refs.thongtinchuhoso.showValid());var a=t.$refs.thongtinchuhoso.showValid();if(a["validForm"]){var r=!0;if(r){if(t.loadingAction=!0,!t.$refs.thanhphanhoso.validDossierTemplate())return void(t.loadingAction=!1);if(2===s.viaPostal&&!t.$refs.dichvuchuyenphatketqua.validDichVuChuyenPhat())return void(t.loadingAction=!1);var n=t.$refs.thanhphanhoso.dossierFilesItems,c=[];n&&n.forEach(function(e,o){e.eForm&&(e["dossierId"]=t.dossierId,c.push(t.$store.dispatch("putAlpacaForm",e)))}),i={sameUser:!1,delegateName:t.thongTinNhomHoSo["delegateName"],delegateCityCode:t.thongTinNhomHoSo["delegateCityCode"],delegateAddress:t.thongTinNhomHoSo["delegateAddress"],delegateDistrictCode:t.thongTinNhomHoSo["delegateDistrictCode"],delegateWardCode:t.thongTinNhomHoSo["delegateWardCode"],delegateEmail:t.thongTinNhomHoSo["delegateEmail"],delegateTelNo:t.thongTinNhomHoSo["delegateTelNo"],delegateIdNo:t.thongTinNhomHoSo["delegateIdNo"]};var d=l()(o,i,s);d["dossierId"]=t.currentDossierIntoGroup.dossierId,d["sampleCount"]=t.currentDossierIntoGroup.sampleCount,d["originality"]=t.originality,t.$store.dispatch("putDossier",d).then(function(o){if(t.loadingAction=!1,"UPDATE"===t.formCode)t.goBack();else{var i=t.$store.getters.loadingInitData,s=i.user.userName?i.user.userName:"",a={};t.showThuPhi&&(a={requestPayment:t.payments["requestPayment"],paymentNote:t.payments["paymentNote"],advanceAmount:Number(t.payments["advanceAmount"].toString().replace(/\./g,"")),feeAmount:Number(t.payments["feeAmount"].toString().replace(/\./g,"")),serviceAmount:Number(t.payments["serviceAmount"].toString().replace(/\./g,"")),shipAmount:Number(t.payments["shipAmount"].toString().replace(/\./g,""))});var r={dueDate:t.editableDate&&d.dueDate?d.dueDate:t.dueDateEdit,receiveDate:t.receiveDateEdit},n={dossierId:t.currentDossierIntoGroup.dossierId,actionCode:1100,actionNote:"",actionUser:s,payload:r,security:"",assignUsers:"",payment:a,createDossiers:""};t.loadingAction=!0,t.$store.dispatch("postAction",n).then(function(o){t.loadingAction=!1,e?t.createDossierIntoGroup():(_.a.success("Thêm hồ sơ vào nhóm thành công"),t.getDetaiGroup(t.id),t.activeAddDossierIntoGroup=!1)}).catch(function(e){t.loadingAction=!1})}}).catch(function(e){t.loadingAction=!1,_.a.clear(),_.a.error("Yêu cầu của bạn thực hiện thất bại.")})}}},changeViapostal:function(e){this.viaPortalDetail=e?2:1},durationText:function(e,t){var o;if(1===e&&t>8){var i,s=Math.floor(t/8)+" ngày";i=t%8!==0?8*(t/8-Math.floor(t/8))+" giờ":"",o="".concat(s," ").concat(i)}else 0===e?o=t+" ngày":1===e&&t<=8&&(o=t+" giờ");return o},viewDetail:function(e,t){var o=this;o.$router.history.current.query;o.$router.push("/danh-sach-ho-so/0/chi-tiet-ho-so/"+e["dossierId"])},addFileToDossier:function(){var e=this,t=e.selectedAttach.map(function(e){return e.dossierId}).toString(),o=e.filesAdd.map(function(e){return e.dossierFileId}).toString(),i={dossierIds:t,dossierFileId:o};e.$store.dispatch("uploadFileDossierGroup",i).then(function(t){_.a.success("Đính kèm tài liệu thành công"),e.$store.commit("setActiveAddFileGroup",!1)})},cancelAddFile:function(){var e=this;e.$store.commit("setActiveAddFileGroup",!1)},toggleAll:function(){var e=this;e.selected.length?e.selected=[]:e.selected=e.dossiersIntoGroupRender},toggleAllSelectDialog:function(){var e=this;console.log("toggleAllSelectDialog",e.dossiersIntoGroupRender,e.selectedAttach),e.selectedAttach.length?e.selectedAttach=[]:e.selectedAttach=e.dossiersIntoGroupRender,console.log("toggleAllSelectDialog 2",e.selectedAttach)},goBack:function(){var e=this,t=e.$router.history.current.params,o=e.$router.history.current.query;e.activeAddDossierIntoGroup?(e.activeAddDossierIntoGroup=!1,e.getDetaiGroup(e.id)):e.$router.push({path:"/danh-sach-ho-so/"+t.index,query:o})}}},F=E,w=Object(I["a"])(F,i,s,!1,null,null,null);t["default"]=w.exports},fcfe:function(module,__webpack_exports__,__webpack_require__){"use strict";var d_SourseCode_FDS_OPENCPS_front_end_opencps_frontend_opencps_v2_1_onegate_21_fe_node_modules_babel_runtime_corejs2_core_js_object_assign__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("5176"),d_SourseCode_FDS_OPENCPS_front_end_opencps_frontend_opencps_v2_1_onegate_21_fe_node_modules_babel_runtime_corejs2_core_js_object_assign__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(d_SourseCode_FDS_OPENCPS_front_end_opencps_frontend_opencps_v2_1_onegate_21_fe_node_modules_babel_runtime_corejs2_core_js_object_assign__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es6_array_find_index__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("20d6"),core_js_modules_es6_array_find_index__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es6_array_find_index__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("7514"),core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_2__),d_SourseCode_FDS_OPENCPS_front_end_opencps_frontend_opencps_v2_1_onegate_21_fe_node_modules_babel_runtime_corejs2_core_js_array_is_array__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("a745"),d_SourseCode_FDS_OPENCPS_front_end_opencps_frontend_opencps_v2_1_onegate_21_fe_node_modules_babel_runtime_corejs2_core_js_array_is_array__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(d_SourseCode_FDS_OPENCPS_front_end_opencps_frontend_opencps_v2_1_onegate_21_fe_node_modules_babel_runtime_corejs2_core_js_array_is_array__WEBPACK_IMPORTED_MODULE_3__),d_SourseCode_FDS_OPENCPS_front_end_opencps_frontend_opencps_v2_1_onegate_21_fe_node_modules_babel_runtime_corejs2_core_js_promise__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("795b"),d_SourseCode_FDS_OPENCPS_front_end_opencps_frontend_opencps_v2_1_onegate_21_fe_node_modules_babel_runtime_corejs2_core_js_promise__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(d_SourseCode_FDS_OPENCPS_front_end_opencps_frontend_opencps_v2_1_onegate_21_fe_node_modules_babel_runtime_corejs2_core_js_promise__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es6_string_iterator__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("5df3"),core_js_modules_es6_string_iterator__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es6_string_iterator__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("ac6a"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es7_array_includes__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("6762"),core_js_modules_es7_array_includes__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es7_array_includes__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es6_string_includes__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("2fdb"),core_js_modules_es6_string_includes__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es6_string_includes__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("c5f6"),core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_9__),jquery__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("1157"),jquery__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_10__),toastr__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("854a"),toastr__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(toastr__WEBPACK_IMPORTED_MODULE_11__);toastr__WEBPACK_IMPORTED_MODULE_11___default.a.options={closeButton:!0,timeOut:"2000"},__webpack_exports__["a"]={props:{onlyView:{type:Boolean,default:function(){return!1}},id:{type:String,default:function(){return"nm"}},partTypes:{type:Array,default:function(){return[1,3]}},checkInput:{type:Number,default:function(){return 0}}},data:function(){return{dossierTemplateItems:[],dossierMarksItems:[],dossierFilesItems:[],thongTinHoSo:{},valid:!0,stateView:!1,dialogAddOtherTemp:!1,loadingAddOther:!1,otherDossierTemplate:"",sheet:!1,partView:"",dossierFileIdView:"",stateEdit:!1,progressUploadPart:"",dialogPDF:!1,dialogPDFLoading:!0,stateAddFileOther:!1,dossierTemplatesItemSelect:{},fileViews:[],pdfEform:!1,sampleCount:0,serviceInfoId:0,fileMarkItems:[{text:"Không có",value:0},{text:"Bản chụp",value:1},{text:"Bản sao",value:2},{text:"Bản gốc",value:3},{text:"Bản dịch",value:4}],fileCheckItems:[{text:"Chưa kiểm tra",value:0},{text:"Đạt",value:1},{text:"Không đạt",value:2}],fileTemplateItems:[],fileTemplateNoString:"",dossierFilesApplicant:[],stateViewResult:!0,currentFormView:"",pstFixed:0,pstEl:0,endEl:0,applicantNoteDossier:"",doChange:""}},computed:{loading:function(){return this.$store.getters.loading},originality:function(){var e=this;return e.getOriginality()},initDataResource:function(){return this.$store.getters.loadingInitData},dossierTemplateItemsFilter:function(){var e=this,t=e.dossierTemplateItems;if(t.length>0){var o=t.filter(function(t){return e.partTypes.includes(t.partType)&&e.checkVisibleTemp(t,0)});return o}},applicantBussinessExit:function(){return this.$store.getters.getApplicantBussinessExit},applicantId:function(){return this.$store.getters.getApplicantIdNo},applicantNote:function(){return this.$store.getters.getApplicantNote},dossierIntoGroup:function(){return this.$store.getters.getDossierIntoGroup}},mounted:function(){var e=this;e.page=1,e.$nextTick(function(){})},watch:{applicantBussinessExit:function(e){var t=this;e&&t.fileTemplateNoString&&t.getDossierFileApplicants(e,t.fileTemplateNoString)},applicantId:function(e){var t=this;e&&t.fileTemplateNoString&&t.getDossierFileApplicants(e,t.fileTemplateNoString)}},methods:{resetCounterTemplate:function(e,t){e.commit,e.state;var o=this;o.dossierTemplateItems.forEach(function(e){e.partNo===t.partNo&&(e.hasForm?e.count=1:e.count=0)})},recountFileTemplates:function(){var e=this;e.dossierTemplateItems.forEach(function(t){t.count=0,e.dossierFilesItems.forEach(function(e){t.partNo!==e.dossierPartNo||e.eForm||t.count++})})},initData:function(e){var t=this;t.thongTinHoSo=e,t.applicantNoteDossier=e["applicantNote"]&&String(e["applicantNote"]).indexOf("<br>[")<0?e["applicantNote"]:"";var o=[];null!==e["sampleCount"]&&void 0!==e["sampleCount"]&&"undefined"!==e["sampleCount"]&&(t.sampleCount=e["sampleCount"]),o.push(t.$store.dispatch("loadDossierTemplates",e)),o.push(t.$store.dispatch("loadDossierMark",e)),o.push(t.$store.dispatch("loadDossierFiles",e.dossierId)),o.push(t.$store.dispatch("getServiceInfo",{serviceInfoId:e.serviceCode})),d_SourseCode_FDS_OPENCPS_front_end_opencps_frontend_opencps_v2_1_onegate_21_fe_node_modules_babel_runtime_corejs2_core_js_promise__WEBPACK_IMPORTED_MODULE_4___default.a.all(o).then(function(e){var o=e[0],i=e[1],s=e[2],a=[];e[3].hasOwnProperty("serviceInfoId")&&(t.serviceInfoId=e[3].serviceInfoId),e[3].fileTemplates&&(d_SourseCode_FDS_OPENCPS_front_end_opencps_frontend_opencps_v2_1_onegate_21_fe_node_modules_babel_runtime_corejs2_core_js_array_is_array__WEBPACK_IMPORTED_MODULE_3___default()(e[3].fileTemplates)?a=e[3].fileTemplates:a.push(e[3].fileTemplates));var r=t.mergeDossierTemplateVsDossierFiles(o,s);if(r=t.mergeDossierTemplateVsDossierMark(r,i),r=t.mergeDossierTemplateVsFileTemplates(r,a),t.dossierFilesItems=s,t.dossierMarksItems=i,t.fileTemplateItems=a,t.dossierTemplateItems=r,t.partTypes.includes(2)&&t.dossierTemplateItems.length>0){var n=[];t.dossierTemplateItems.forEach(function(e){var o=t.dossierFilesItems.find(function(t){return e.partNo===t.dossierPartNo&&2===e.partType});o&&n.push(e)}),t.dossierTemplateItems=n}t.changeStateViewResult(),setTimeout(function(e){t.genAllAlpacaForm(s,r),t.recountFileTemplates()},500);var l=[];for(var c in t.dossierTemplateItems)t.dossierTemplateItems[c]["fileTemplateNo"]&&l.push(t.dossierTemplateItems[c]["fileTemplateNo"]);l.length>0&&(t.fileTemplateNoString=l.toString(),t.applicantId&&!t.onlyView&&t.getDossierFileApplicants(t.applicantId,t.fileTemplateNoString))}).catch(function(e){})},genAllAlpacaForm:function(e,t){var o=this;if(e.length>0){var i=e.filter(function(e){return e.eForm}),s=t.filter(function(e){return e.hasForm&&o.partTypes.includes(e.partType)});i.length>0?i.forEach(function(e){e.eForm&&o.$store.dispatch("loadAlpcaForm",e)}):t.forEach(function(e){e.hasForm&&o.partTypes.includes(e.partType)&&(e["templateFileNo"]=o.thongTinHoSo.dossierTemplateNo,o.showAlpacaJSFORM(e))}),s.length!==i.length&&s.forEach(function(e){var t=i.findIndex(function(t){return e.partNo===t.dossierPartNo});-1===t&&(e["templateFileNo"]=o.thongTinHoSo.dossierTemplateNo,o.showAlpacaJSFORM(e))})}else t.forEach(function(e){e.hasForm&&o.partTypes.includes(e.partType)&&(e["templateFileNo"]=o.thongTinHoSo.dossierTemplateNo,o.showAlpacaJSFORM(e))})},postDossierMark:function(e,t){var o=this;e["dossierId"]=o.thongTinHoSo.dossierId,o.$store.dispatch("postDossierMark",e).then(function(e){}).catch(function(e){})},mergeDossierTemplateVsDossierFiles:function(e,t){var o=this;return 0!==t.length?e.forEach(function(e){e["editForm"]=!0,e["daKhai"]=!1,e["passRequired"]=!1;var i=t.find(function(t){return e.partNo===t.dossierPartNo&&o.partTypes.includes(e.partType)&&t.eForm&&!t.removed&&0!==t.fileSize});i&&(e["daKhai"]=!0,e["hasForm"]=!0,e["referenceUid"]=i["referenceUid"]),t.forEach(function(t){e.partNo===t.dossierPartNo&&(e["passRequired"]=!0)})}):e.forEach(function(e){e.hasForm&&(e["daKhai"]=!1,e["passRequired"]=!1,e["editForm"]=!0)}),e},mergeDossierTemplateVsDossierMark:function(e,t){return 0!==t.length?e.map(function(e){e["count"]=0,e["stateEditFileCheck"]=!1;var o=t.find(function(t){return t.dossierPartNo===e.partNo});return null!==o&&void 0!==o?(e["fileMark"]=o.fileMark,e["fileComment"]=o.fileComment,e["fileCheck"]=o.fileCheck,e["recordCount"]=o.recordCount):(e["fileMark"]=0,e["fileComment"]="",e["fileCheck"]=0,e["recordCount"]=""),e}):e&&e.forEach(function(e){e["stateEditFileCheck"]=!1,e["count"]=0,e["fileMark"]=0,e["fileComment"]="",e["fileCheck"]=0,e["stateEditFileCheck"]=!1}),e},mergeDossierTemplateVsFileTemplates:function(e,t){return 0!==t.length?e.map(function(e){var o=t.find(function(t){return t.fileTemplateNo===e.fileTemplateNo});return e["hasFileTemp"]=null!==o&&void 0!==o?o.fileTemplateNo:"",e}):e&&e.forEach(function(e){e["hasFileTemp"]=""}),e},showAlpacaJSFORM:function showAlpacaJSFORM(item){var vm=this;item["dossierId"]=vm.thongTinHoSo.dossierId,vm.$store.dispatch("loadFormScript",item).then(function(resScript){vm.$store.dispatch("loadFormData",item).then(function(resData){var formScript,formData;window.$("#formAlpaca"+item.partNo+vm.id).empty(),formScript=resScript?eval("("+resScript+")"):{},resData?(formData=eval("("+resData+")"),item["loaded"]=!0):formData={},formScript.data=formData,window.$("#formAlpaca"+item.partNo+vm.id).alpaca(formScript)})})},saveAlpacaForm:function(e,t){var o=this,i=o.dossierFilesItems.find(function(t){return t.dossierPartNo===e.partNo&&t.eForm&&0!==t.fileSize});i?(i["dossierId"]=o.thongTinHoSo.dossierId,i["id"]=o.id,o.$store.dispatch("putAlpacaForm",i).then(function(e){o.dossierIntoGroup.length>0&&(o.$store.commit("setFilesAdd",[resPostEform]),o.$store.commit("setActiveAddFileGroup",!0)),o.$store.dispatch("loadDossierFiles",o.thongTinHoSo.dossierId).then(function(e){o.dossierFilesItems=e}).catch(function(e){}),o.dossierTemplateItems[t]["passRequired"]=!0}).catch(function(e){toastr__WEBPACK_IMPORTED_MODULE_11___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_11___default.a.error("Yêu cầu của bạn thực hiện thất bại.")})):(e["dossierId"]=o.thongTinHoSo.dossierId,e["id"]=o.id,o.$store.dispatch("postEform",e).then(function(e){o.dossierIntoGroup.length>0&&(o.$store.commit("setFilesAdd",[e]),o.$store.commit("setActiveAddFileGroup",!0)),o.dossierTemplateItems[t].daKhai=!0,o.dossierTemplateItems[t]["passRequired"]=!0,o.$store.dispatch("loadDossierFiles",o.thongTinHoSo.dossierId).then(function(e){o.dossierFilesItems=e}).catch(function(e){toastr__WEBPACK_IMPORTED_MODULE_11___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_11___default.a.error("Yêu cầu của bạn thực hiện thất bại.")})}).catch(function(e){toastr__WEBPACK_IMPORTED_MODULE_11___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_11___default.a.error("Yêu cầu của bạn thực hiện thất bại.")}))},onDeleteAttackFiles:function(e){var t=this;console.log("delete");var o=confirm("Bạn có muốn xóa toàn bộ file trong thành phần hồ sơ này?");o&&t.dossierFilesItems.forEach(function(o){o.dossierPartNo===e.partNo&&(o["dossierId"]=t.thongTinHoSo.dossierId,t.$store.dispatch("deleteAttackFiles",o).then(function(o){t.resetCounterTemplate(e),t.$store.dispatch("loadDossierFiles",t.thongTinHoSo.dossierId)}).catch(function(e){}))})},changeApplicantNote:function(){var e=this;console.log("applicantNoteEdit",e.applicantNoteDossier),e.$store.commit("setApplicantNote",e.applicantNoteDossier)},pickFile:function(e){var t=this;t.stateAddFileOther=!1,document.getElementById("file"+e.partNo).value="",6===e["partType"]||e["partType"],document.getElementById("file"+e.partNo).click()},onUploadSingleFile:function(e,t,o){var i=this;if(i.dossierTemplatesItemSelect=t,i.progressUploadPart=t.partNo,t["dossierId"]=i.thongTinHoSo.dossierId,t["dossierTemplateNo"]=i.thongTinHoSo.dossierTemplateNo,3!==t.partType)i.$store.dispatch("uploadSingleFile",t).then(function(e){console.log("vm.dossierIntoGroup",i.dossierIntoGroup),i.dossierIntoGroup.length>0&&(i.$store.commit("setFilesAdd",e),i.$store.commit("setActiveAddFileGroup",!0)),i.dossierTemplateItems[o]["passRequired"]=!0,i.progressUploadPart="",i.$store.dispatch("loadDossierFiles",i.thongTinHoSo.dossierId).then(function(e){i.dossierFilesItems=e,i.recountFileTemplates()})}).catch(function(e){e.length>0&&(i.dossierTemplateItems[o]["passRequired"]=!0),i.progressUploadPart="",i.$store.dispatch("loadDossierFiles",i.thongTinHoSo.dossierId).then(function(e){i.dossierFilesItems=e,i.recountFileTemplates()})});else{if(0===window.$("#file"+t.partNo)[0].files.length)return void(i.progressUploadPart="");i.partView=t.partNo,i.stateView=!0,i.dialogAddOtherTemp=!0}},loadAlpcaForm:function(e){var t=this,o=t.dossierFilesItems.find(function(t){return t.dossierPartNo===e.partNo&&t.eForm});o?(o["id"]=t.id,t.$store.dispatch("loadAlpcaForm",o)):t.dossierTemplateItems.forEach(function(o){o.hasForm&&e.partNo===o.partNo&&(o["templateFileNo"]=t.thongTinHoSo.dossierTemplateNo,t.showAlpacaJSFORM(o))})},loadAlpcaFormClick:function(e){var t=this;t.currentFormView==="formAlpaca"+e.partNo+t.id?t.currentFormView="":t.currentFormView="formAlpaca"+e.partNo+t.id,t.pstEl=t.endEl=0,setTimeout(function(){jquery__WEBPACK_IMPORTED_MODULE_10___default()("#formAlpaca"+e.partNo+t.id).height()>200&&(t.pstEl=jquery__WEBPACK_IMPORTED_MODULE_10___default()("#wrapForm"+e.partNo+t.id).offset().top,t.endEl=jquery__WEBPACK_IMPORTED_MODULE_10___default()("#formAlpaca"+e.partNo+t.id).height(),jquery__WEBPACK_IMPORTED_MODULE_10___default()(window).scroll(function(){t.pstFixed=jquery__WEBPACK_IMPORTED_MODULE_10___default()(window).scrollTop()}))},500);var o=t.dossierFilesItems.find(function(t){return t.dossierPartNo===e.partNo&&t.eForm&&t.fileSize});o?(o["id"]=t.id,t.$store.dispatch("loadAlpcaForm",o),e["editForm"]=!1,t.$store.dispatch("viewFile",o).then(function(e){document.getElementById("displayPDF"+o.dossierPartNo+t.id).src=e})):t.dossierTemplateItems.forEach(function(o){o.hasForm&&e.partNo===o.partNo&&(o["templateFileNo"]=t.thongTinHoSo.dossierTemplateNo,o["loaded"]||t.showAlpacaJSFORM(o))})},editFormAlpaca:function(e){var t=this;e["editForm"]=!0,setTimeout(function(){var o=t.dossierFilesItems.find(function(t){return t.dossierPartNo===e.partNo&&t.eForm});o["id"]=t.id,t.$store.dispatch("loadAlpcaForm",o)},200)},deleteSingleFileEform:function(e,t){var o=this,i=confirm("Bạn có chắc chắn xóa file?");i&&o.dossierFilesItems.forEach(function(i){i.dossierPartNo===e.partNo&&i.eForm&&(i["dossierId"]=o.thongTinHoSo.dossierId,o.$store.dispatch("deleteDossierFile",i).then(function(i){console.log("success!"),o.dossierTemplateItems[t].daKhai=!1,o.$store.dispatch("loadDossierFiles",o.thongTinHoSo.dossierId).then(function(i){if(o.dossierFilesItems=i,o.recountFileTemplates(),e["editForm"]=!0,setTimeout(function(){console.log("item --1--",e),o.loadAlpcaForm(e)},200),0!==o.dossierFilesItems.length){var s=o.dossierFilesItems.filter(function(t){return t.dossierPartNo===e.partNo});o.dossierTemplateItems[t]["passRequired"]=!!s}else o.dossierTemplateItems[t]["passRequired"]=!1})}))})},previewFileEfom:function(e,t){var o=this;o.dossierFilesItems.forEach(function(t){t.dossierPartNo===e.partNo&&t.eForm&&!t.removed&&(t["dossierId"]=o.thongTinHoSo.dossierId,o.dialogPDFLoading=!0,o.dialogPDF=!0,o.onlyView?o.$store.dispatch("viewFile",t).then(function(e){o.dialogPDFLoading=!1,t["eForm"]?o.pdfEform=!0:o.pdfEform=!1,document.getElementById("dialogPDFPreview"+o.id).src=e}):(t["id"]=o.id,o.$store.dispatch("putAlpacaForm",t).then(function(e){setTimeout(function(){o.$store.dispatch("viewFile",t).then(function(e){o.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+o.id).src=e})},1e3)}).catch(function(e){toastr__WEBPACK_IMPORTED_MODULE_11___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_11___default.a.error("Yêu cầu của bạn thực hiện thất bại.")})))})},previewFormAlpaca:function(e,t){var o=this;o.dossierFilesItems.forEach(function(t){t.dossierPartNo===e.partNo&&t.eForm&&!t.removed&&(t["dossierId"]=o.thongTinHoSo.dossierId,o.onlyView?(e["editForm"]=!1,o.$store.dispatch("viewFile",t).then(function(i){t["eForm"]?o.pdfEform=!0:o.pdfEform=!1,document.getElementById("displayPDF"+e.dossierPartNo+o.id).src=i})):(t["id"]=o.id,o.$store.dispatch("putAlpacaForm",t).then(function(i){e["editForm"]=!1,setTimeout(function(){o.$store.dispatch("viewFile",t).then(function(e){document.getElementById("displayPDF"+t.dossierPartNo+o.id).src=e})},500)}).catch(function(e){toastr__WEBPACK_IMPORTED_MODULE_11___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_11___default.a.error("Yêu cầu của bạn thực hiện thất bại.")})))})},deleteSingleFile:function(e,t){var o=this,i=confirm("Bạn có chắc chắn xóa file đính kèm ?");i&&(e["dossierId"]=o.thongTinHoSo.dossierId,o.$store.dispatch("deleteDossierFile",e).then(function(i){o.fileViews.splice(t,1),o.stateView=!0,o.partView=e.dossierPartNo,o.$store.dispatch("loadDossierFiles",o.thongTinHoSo.dossierId).then(function(t){o.dossierFilesItems=t,o.setDaKhai(e)})}).catch(function(e){toastr__WEBPACK_IMPORTED_MODULE_11___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_11___default.a.error("Yêu cầu của bạn thực hiện thất bại.")}))},viewFile:function(e){var t=this,o=this;o.dossierFilesItems.forEach(function(i){i["dossierId"]=o.thongTinHoSo.dossierId,i.dossierPartNo===e.partNo&&t.$store.dispatch("viewFile",i)})},setDaKhai:function(e){var t=this,o=t.dossierFilesItems.findIndex(function(t){return t.dossierPartNo===e.dossierPartNo});if(-1===o){for(var i=0;i<t.dossierTemplateItems.length;i++)if(t.dossierTemplateItems[i].partNo===e.dossierPartNo){t.dossierTemplateItems[i]["passRequired"]=!1;break}}else for(i=0;i<t.dossierTemplateItems.length;i++)if(t.dossierTemplateItems[i].partNo===e.dossierPartNo){t.dossierTemplateItems[i]["passRequired"]=!0;break}},checkPartType3:function(){var e=this;if(0!==e.dossierTemplateItems.length)for(var t=0;t<e.dossierTemplateItems.length;t++)if(3===e.dossierTemplateItems[t].partType)return!0;return!1},viewFile2:function(e){var t=this;if(0!==e.fileSize)if(e["eForm"]?t.pdfEform=!0:t.pdfEform=!1,"doc"===e.fileType||"docx"===e.fileType||"xlsx"===e.fileType||"xls"===e.fileType||"zip"===e.fileType||"rar"===e.fileType||"txt"===e.fileType||"mp3"===e.fileType||"mp4"===e.fileType){var o=t.initDataResource.dossierApi+"/"+t.thongTinHoSo.dossierId+"/files/"+e.referenceUid;window.open(o)}else e["dossierId"]=t.thongTinHoSo.dossierId,e.referenceUid?(t.dialogPDFLoading=!0,t.dialogPDF=!0,t.$store.dispatch("viewFile",e).then(function(e){t.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+t.id).src=e})):(toastr__WEBPACK_IMPORTED_MODULE_11___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_11___default.a.error("File dữ liệu không tồn tại"))},attachToDossier:function(e,t){var o=this;console.log(e,t),e["dossierId"]=o.thongTinHoSo.dossierId,3!==e.partType&&(o.progressUploadPart=e.dossierFileId,o.$store.dispatch("copyFile",e).then(function(e){o.progressUploadPart="",o.dossierTemplateItems[t]["passRequired"]=!0,o.$store.dispatch("loadDossierFiles",o.thongTinHoSo.dossierId).then(function(e){o.dossierFilesItems=e,o.recountFileTemplates()})}).catch(function(e){o.progressUploadPart="",toastr__WEBPACK_IMPORTED_MODULE_11___default.a.error("Đính kèm tài liệu thất bại")}))},viewGiayToDaNop:function(e){var t=this;if(0!==e.fileSize)if(e["eForm"]?t.pdfEform=!0:t.pdfEform=!1,"doc"===e.fileType||"docx"===e.fileType||"xlsx"===e.fileType||"xls"===e.fileType||"zip"===e.fileType||"rar"===e.fileType||"txt"===e.fileType||"mp3"===e.fileType||"mp4"===e.fileType){var o=t.initDataResource.dossierApi+"/"+e.dossierId+"/files/"+e.referenceUid;window.open(o)}else e.referenceUid?(t.dialogPDFLoading=!0,t.dialogPDF=!0,t.$store.dispatch("viewFile",e).then(function(e){t.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+t.id).src=e})):(toastr__WEBPACK_IMPORTED_MODULE_11___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_11___default.a.error("File dữ liệu không tồn tại"))},viewFileWithPartNo:function(e){var t=this;if(t.dossierFilesItems){var o=t.dossierFilesItems.filter(function(t){return t.dossierPartNo===e.partNo&&!t.eForm});if(!o)return;t.fileViews=o,t.partView!==e.partNo?(t.stateView=!0,t.partView=e.partNo):(t.stateView=!t.stateView,t.partView=e.partNo)}},saveMark:function(){var e=this;e.dossierTemplateItems&&e.dossierTemplateItems.forEach(function(t,o){1===t.partType&&(t["dossierId"]=e.thongTinHoSo.dossierId,e.$store.dispatch("postDossierMark",t))})},changeFileMark:function(e,t){var o=this;if(!o.onlyView){var i=o.dossierTemplateItems[t];i["dossierId"]=o.thongTinHoSo.dossierId,i["fileMark"]=e,i["checkInput"]=o.checkInput,o.$store.dispatch("postDossierMark",i),o.dossierTemplateItems[t].fileMark=e}},changeFileCheck:function(e,t){var o=this,i=o.dossierTemplateItems[t];i["dossierId"]=o.thongTinHoSo.dossierId,i["fileCheck"]=e,i["checkInput"]=o.checkInput,2!==e?(i["fileComment"]="",o.$store.dispatch("postDossierMark",i),o.dossierTemplateItems[t].fileCheck=e):i["stateEditFileCheck"]=!0},changeFileComment:function(e,t){var o=this;null!==e.fileComment&&void 0!==e.fileComment&&""!==e.fileComment&&(e["dossierId"]=o.thongTinHoSo.dossierId,e["fileComment"]=e.fileComment,e["checkInput"]=o.checkInput,e["stateEditFileCheck"]=!e["stateEditFileCheck"],o.$store.dispatch("postDossierMark",e),o.dossierTemplateItems[t].fileComment=e.fileComment)},checkStyle:function(e){var t=this;if(1===t.checkInput)return"calc(100% - 140px)";var o=0;return 1===t.originality||1!==e.partType||t.thongTinHoSo.online||1===t.checkInput||(t.onlyView?o+=140:o+=240),e.fileCheck>0&&!t.thongTinHoSo.online&&(o+=20),e.fileCheck>0&&t.thongTinHoSo.online&&(o+=40),t.onlyView||(o+=90),"calc(100% - "+o+"px)"},checkVisibleTemp:function(e,t){var o=this;if(!o.onlyView)return!0;if(3===e.partType){if(o.dossierFilesItems.length>0){var i=o.dossierFilesItems.findIndex(function(t){return t.dossierPartNo===e.partNo});return-1!==i}return!1}return!0},changeStateViewResult:function(){var e=this;if(e.dossierFilesItems.length>0){var t=e.dossierFilesItems.findIndex(function(e){return 2===e.dossierPartType||7===e.dossierPartType});-1!==t?e.$emit("tp:change-state-view-result",!0):e.$emit("tp:change-state-view-result",!1)}else(e.partTypes.includes(2)||e.partTypes.includes(7))&&e.$emit("tp:change-state-view-result",!1)},changeOtherDossierTemp:function(e){var t=this;if(3===t.originality&&t.stateAddFileOther)t.loadingAddOther=!0,t.$store.dispatch("uploadSingleOtherFile",{dossierId:t.thongTinHoSo.dossierId,displayName:e,partNo:t.dossierTemplatesItemSelect.partNo}).then(function(e){t.loadingAddOther=!1,t.dialogAddOtherTemp=!1,t.$store.dispatch("loadDossierFiles",t.thongTinHoSo.dossierId).then(function(e){t.dossierFilesItems=e})}).catch(function(e){t.loadingAddOther=!1});else{var o=t.dossierTemplatesItemSelect;o["dossierId"]=t.thongTinHoSo.dossierId,o["displayName"]=e,o["dossierTemplateNo"]=t.thongTinHoSo.dossierTemplateNo,t.$store.dispatch("uploadSingleFile",o).then(function(e){t.progressUploadPart="",t.dialogAddOtherTemp=!1,t.$store.dispatch("loadDossierFiles",t.thongTinHoSo.dossierId).then(function(e){if(t.dossierFilesItems=e,t.recountFileTemplates(),t.stateView&&t.dossierFilesItems){var o=t.dossierFilesItems.filter(function(e){return e.dossierPartNo===t.dossierTemplatesItemSelect.partNo&&!e.eForm});o&&(t.fileViews=o)}})}).catch(function(e){t.progressUploadPart=""})}},downloadFileTemplate:function(e,t){var o=this;if(o.fileTemplateItems.length>0){var i=o.fileTemplateItems.find(function(t){return e.fileTemplateNo===t.fileTemplateNo});if(i){var s=o.initDataResource.serviceInfoApi+"/"+o.serviceInfoId+"/filetemplates/"+i.fileTemplateNo;window.open(s)}else console.log("ko thay file")}},addOtherTemplate:function(){var e=this;e.$refs.form.validate()&&e.changeOtherDossierTemp(e.otherDossierTemplate)},editDisplayName:function(e,t){var o=this;o.dossierFileIdView!==e.dossierFileId?(o.dossierFileIdView=e.dossierFileId,o.stateEdit=!0):(o.dossierFileIdView=e.dossierFileId,o.stateEdit=!o.stateEdit)},cancelDialog:function(){var e=this;e.dialogAddOtherTemp=!1,e.progressUploadPart=""},addFileOther:function(e){var t=this;t.dialogAddOtherTemp=!0,t.stateAddFileOther=!0,t.dossierTemplatesItemSelect=e},validDossierTemplate:function(){var e=this;if(e.dossierTemplateItems.length>0){for(var t=0;t<e.dossierTemplateItems.length;t++)if(e.dossierTemplateItems[t]["required"]&&!e.dossierTemplateItems[t]["passRequired"]&&e.partTypes.includes(e.dossierTemplateItems[t].partType)){var o="Chú ý :"+e.dossierTemplateItems[t].partName+" là thành phần bắt buộc!";return toastr__WEBPACK_IMPORTED_MODULE_11___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_11___default.a.error(o),!1}return!0}return!0},changeDisplayName:function(e,t){var o=this,i={dossierId:o.thongTinHoSo.dossierId,value:value};o.$store.dispatch("changeDisplayNameFile",i).then(function(e){o.fileViews[t].displayName=e.displayName,o.stateEdit=!1}).catch(function(e){console.log("error")})},getDossierFileApplicants:function(e,t){var o=this,i={dossierId:o.thongTinHoSo.dossierId,applicantIdNo:e,fileTemplateNo:t};o.$store.dispatch("getDossierFilesApplicants",i).then(function(e){o.dossierFilesApplicant=e}).catch(function(e){console.log("error")})},showFilesApplicant:function(e){jquery__WEBPACK_IMPORTED_MODULE_10___default()("#fileApplicant-"+e).is(":visible")?jquery__WEBPACK_IMPORTED_MODULE_10___default()("#fileApplicant-"+e).hide():jquery__WEBPACK_IMPORTED_MODULE_10___default()("#fileApplicant-"+e).show()},checkKQhasFile:function(e){var t=this;if(t.partTypes.includes(2)){var o=t.dossierFilesItems.find(function(t){return e.partNo===t.dossierPartNo});return!!o}return!0},partNoApplicantHasFile:function(e){var t=this,o=t.dossierFilesApplicant.find(function(o){return o.dossierTemplateNo===t.thongTinHoSo["dossierTemplateNo"]&&o.dossierPartNo===e});return!!o},changeRecordCount:function(e){var t=this;if(!t.onlyView){var o=function(){t.doChange=setTimeout(function(){if(!t.onlyView&&Number(t.dossierTemplateItems[e]["recordCount"])>=0){var o=d_SourseCode_FDS_OPENCPS_front_end_opencps_frontend_opencps_v2_1_onegate_21_fe_node_modules_babel_runtime_corejs2_core_js_object_assign__WEBPACK_IMPORTED_MODULE_0___default()({},t.dossierTemplateItems[e],{dossierId:t.thongTinHoSo.dossierId});t.$store.dispatch("postDossierMark",o)}},3e3)};t.dossierTemplateItems[e].recordCount=t.dossierTemplateItems[e]["recordCount"]?t.dossierTemplateItems[e]["recordCount"]:"",clearTimeout(t.doChange),o()}},increaseCounter:function(e){var t=this;function o(){t.doChange=setTimeout(function(){if(!t.onlyView&&Number(t.dossierTemplateItems[e]["recordCount"])>=0){var o=d_SourseCode_FDS_OPENCPS_front_end_opencps_frontend_opencps_v2_1_onegate_21_fe_node_modules_babel_runtime_corejs2_core_js_object_assign__WEBPACK_IMPORTED_MODULE_0___default()({},t.dossierTemplateItems[e],{dossierId:t.thongTinHoSo.dossierId});t.$store.dispatch("postDossierMark",o)}},3e3)}t.dossierTemplateItems[e].recordCount=t.dossierTemplateItems[e]["recordCount"]?t.dossierTemplateItems[e]["recordCount"]:"",t.dossierTemplateItems[e]["recordCount"]=Number(t.dossierTemplateItems[e]["recordCount"])+1,clearTimeout(t.doChange),o()},decreaseCounter:function(e){var t=this;function o(){t.doChange=setTimeout(function(){if(!t.onlyView&&Number(t.dossierTemplateItems[e]["recordCount"])>=0){var o=d_SourseCode_FDS_OPENCPS_front_end_opencps_frontend_opencps_v2_1_onegate_21_fe_node_modules_babel_runtime_corejs2_core_js_object_assign__WEBPACK_IMPORTED_MODULE_0___default()({},t.dossierTemplateItems[e],{dossierId:t.thongTinHoSo.dossierId});t.$store.dispatch("postDossierMark",o)}},3e3)}t.dossierTemplateItems[e].recordCount=t.dossierTemplateItems[e]["recordCount"]?t.dossierTemplateItems[e]["recordCount"]:"",t.dossierTemplateItems[e]["recordCount"]=Number(t.dossierTemplateItems[e]["recordCount"])-1,clearTimeout(t.doChange),o()},getFilesGroupDossier:function(){var e=this;return e.dossierFilesItems},getDocumentTypeIcon:function(e){var t="doc,docx",o="xls,xlsx",i="png,jpg,jpeg";return e?t.indexOf(e.toLowerCase())>=0?{icon:"fas fa fa-file-word-o",color:"blue",size:14}:o.indexOf(e.toLowerCase())>=0?{icon:"fas fa fa-file-excel-o",color:"green",size:14}:"pdf"===e.toLowerCase()?{icon:"fa fa-file-pdf-o",color:"red",size:14}:i.indexOf(e.toLowerCase())>=0?{icon:"fas fa fa-file-image-o",color:"primary",size:14}:{icon:"fas fa fa-paperclip",color:"",size:14}:""}}}}}]);
//# sourceMappingURL=chunk-94471c42.js.map