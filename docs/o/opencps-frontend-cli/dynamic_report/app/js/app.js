(function(e){function t(t){for(var i,n,r=t[0],l=t[1],d=t[2],p=0,u=[];p<r.length;p++)n=r[p],s[n]&&u.push(s[n][0]),s[n]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);c&&c(t);while(u.length)u.shift()();return o.push.apply(o,d||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],i=!0,r=1;r<a.length;r++){var l=a[r];0!==s[l]&&(i=!1)}i&&(o.splice(t--,1),e=n(n.s=a[0]))}return e}var i={},s={app:0},o=[];function n(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=i,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var d=0;d<r.length;d++)t(r[d]);var c=l;o.push(["56d7","chunk-vendors"]),a()})({"31a3":function(module,__webpack_exports__,__webpack_require__){"use strict";var toastr__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("854a"),toastr__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(toastr__WEBPACK_IMPORTED_MODULE_0__);toastr__WEBPACK_IMPORTED_MODULE_0___default.a.options={closeButton:!0,timeOut:"5000"},__webpack_exports__["a"]={props:{id:{type:String,default:()=>"nm"},detailDossier:{type:Object,default:()=>{}},createFiles:{type:Array,default:()=>[]}},data:()=>({dossierTemplateItems:[],dossierMarksItems:[],dossierFilesItems:[],thongTinHoSo:{},valid:!0,stateView:!1,dialogAddOtherTemp:!1,loadingAddOther:!1,otherDossierTemplate:"",sheet:!1,partView:"",dossierFileIdView:"",stateEdit:!1,progressUploadPart:"",dialogPDF:!1,dialogPDFLoading:!0,stateAddFileOther:!1,dossierTemplatesItemSelect:{},fileViews:[],sampleCount:0,fileTemplateItems:[]}),computed:{loading(){return this.$store.getters.loading},originality(){var e=this;return e.getOriginality()},initDataResource(){return this.$store.getters.loadingInitData}},created(){var e=this;e.page=1,e.$nextTick(function(){console.log("vm.detailDossier------------",e.detailDossier),e.detailDossier["dossierId"]&&e.$store.dispatch("loadDossierFiles",e.detailDossier.dossierId).then(t=>{e.dossierFilesItems=t,e.createFiles=e.mergeDossierTemplateVsDossierFiles(e.createFiles,t),console.log("vm.createFiles------------",e.createFiles),console.log("vm.dossierFilesItems------------",e.dossierFilesItems)}).catch(e=>{})})},mounted(){var e=this;e.$nextTick(function(){e.createFiles.length>0&&setTimeout(function(){console.log("vm.createFiles------------",e.createFiles),console.log("vm.dossierFilesItems------------",e.dossierFilesItems),e.genAllAlpacaForm(e.dossierFilesItems,e.createFiles)},300)})},methods:{genAllAlpacaForm(e,t){var a=this;if(e.length>0){var i=e.filter(e=>{return e.eForm}),s=t.filter(e=>{return e.eForm});i.length>0?i.forEach(e=>{e.eForm&&a.$store.dispatch("loadAlpcaForm",e)}):t.forEach(e=>{e.eForm&&(e["templateFileNo"]=a.detailDossier.dossierTemplateNo,a.showAlpacaJSFORM(e))}),s.length!==i.length&&s.forEach(e=>{let t=i.findIndex(t=>{return e.partNo===t.dossierPartNo});-1===t&&(e["templateFileNo"]=a.detailDossier.dossierTemplateNo,a.showAlpacaJSFORM(e))})}else t.forEach(e=>{e.eForm&&(e["templateFileNo"]=a.detailDossier.dossierTemplateNo,a.showAlpacaJSFORM(e))})},mergeDossierTemplateVsDossierFiles(e,t){return 0!==t.length?e.forEach(e=>{var a=t.find(t=>{return e.partNo===t.dossierPartNo&&t.eForm});a?e["daKhai"]=!0:!a&&e.eForm&&(e["daKhai"]=!1)}):e.forEach(e=>{e.eForm&&(e["daKhai"]=!1)}),e},showAlpacaJSFORM(item){var vm=this;item["dossierId"]=vm.detailDossier.dossierId,vm.$store.dispatch("loadFormScript",item).then(resScript=>{vm.$store.dispatch("loadFormData",item).then(resData=>{var formScript,formData;window.$("#formAlpaca"+item.partNo+vm.id).empty(),formScript=resScript?eval("("+resScript+")"):{},formData=resData?eval("("+resData+")"):{},formScript.data=formData,window.$("#formAlpaca"+item.partNo+vm.id).alpaca(formScript)})})},loadAlpcaForm(e){var t=this,a=t.dossierFilesItems.find(t=>{return t.dossierPartNo===e.partNo&&t.eForm});a?(a["id"]=t.id,t.$store.dispatch("loadAlpcaForm",a)):t.createFiles.forEach(a=>{a.eForm&&e.partNo===a.partNo&&(a["templateFileNo"]=t.detailDossier.dossierTemplateNo,t.showAlpacaJSFORM(a))})},previewFileEfom(e,t){var a=this;a.dossierFilesItems.forEach(t=>{t.dossierPartNo===e.partNo&&t.eForm&&(t["dossierId"]=a.detailDossier.dossierId,a.dialogPDFLoading=!0,a.dialogPDF=!0,t["id"]=a.id,a.$store.dispatch("putAlpacaForm",t).then(e=>{setTimeout(function(){a.$store.dispatch("viewFile",t).then(e=>{a.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+a.id).src=e})},1e3)}).catch(e=>{toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn được thực hiện thất bại.")}))})},viewFile(e){var t=this;t.dossierFilesItems.forEach(a=>{a["dossierId"]=t.detailDossier.dossierId,a.dossierPartNo===e.partNo&&this.$store.dispatch("viewFile",a)})},viewFile2(e){var t=this;if("doc"===e.fileType||"docx"===e.fileType||"xlsx"===e.fileType||"xls"===e.fileType||"zip"===e.fileType||"rar"===e.fileType||"txt"===e.fileType){var a=t.initDataResource.dossierApi+"/"+t.detailDossier.dossierId+"/files/"+e.referenceUid;window.open(a)}else t.dialogPDFLoading=!0,t.dialogPDF=!0,e["dossierId"]=t.detailDossier.dossierId,t.$store.dispatch("viewFile",e).then(e=>{t.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+t.id).src=e})},viewFileWithPartNo(e){var t=this;if(t.dossierFilesItems){var a=t.dossierFilesItems.filter(t=>{return t.dossierPartNo===e.partNo&&!t.eForm});if(!a)return;t.fileViews=a,t.partView!==e.partNo?(t.stateView=!0,t.partView=e.partNo):(t.stateView=!t.stateView,t.partView=e.partNo)}},checkStyle(e){return"calc(100% - 50px)"},downloadFileTemplate(e,t){var a=this;if(a.fileTemplateItems.length>0){let t=a.fileTemplateItems.find(t=>{return e.fileTemplateNo===t.fileTemplateNo});if(t){let e=a.initDataResource.serviceInfoApi+"/"+t.serviceCode+"/filetemplates/"+t.fileTemplateNo;window.open(e)}else console.log("ko thay file")}}}}},4360:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return store});var vue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("a026"),vuex__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("2f62"),toastr__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("854a"),toastr__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(toastr__WEBPACK_IMPORTED_MODULE_2__),axios__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("bc3a"),axios__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_3__),_support_json__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("bbd0"),_support_json__WEBPACK_IMPORTED_MODULE_4___namespace=__webpack_require__.t("bbd0",1),jquery__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("1157"),jquery__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_5__),file_saver__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("21a6"),file_saver__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(file_saver__WEBPACK_IMPORTED_MODULE_6__);vue__WEBPACK_IMPORTED_MODULE_0__["a"].use(toastr__WEBPACK_IMPORTED_MODULE_2___default.a),vue__WEBPACK_IMPORTED_MODULE_0__["a"].use(vuex__WEBPACK_IMPORTED_MODULE_1__["a"]),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.options={closeButton:!0,timeOut:"15000"};const store=new vuex__WEBPACK_IMPORTED_MODULE_1__["a"].Store({state:{initData:_support_json__WEBPACK_IMPORTED_MODULE_4__.initData,endPointApi:"/o/rest/v2",loading:!1,loadingTable:!1,loadingDynamicBtn:!1,loadingGov:!1,validFileUpload:!1,fileTypeTPHS:["png","jpg","jpeg","pdf","docx","doc","xls","xlsx","txt","rtf"],fileTypePAYMENT:["png","jpg","jpeg"],error:null,user:{role:""},index:0,kysoSuccess:!1,activeGetCounter:!1,activeLoadingDataHoSo:!1,trangThaiHoSoList:null,listThuTucHanhChinh:null,checkInput:0,stepOverdueNextAction:"",usersNextAction:[],lePhi:{fee:"",feeNote:"",request:""},dossier:{applicantIdNo:"ccc"},dossierSelected:[],actionActive:{},serviceConfigObj:{},dossierTemplateName:"",thongTinChungHoSo:{serviceName:"",dossierTemplateName:"",serviceConfig:"",serviceOption:"",dossierNo:"",receiveDate:new Date,dueDate:(new Date).toString(),durationDate:"",dossierId:"",dossierIdCTN:"",dossierStatus:"",dossierStatusText:""},vnpostCodeItems:[],serviceConfigItems:null,serviceOptionItems:[],citys:null,cityVal:null,districtVal:null,wardVal:null,resultServices:null,dossierFiles:[],listHistoryProcessingItems:[],thanhPhanHoSo:{dossierTemplates:_support_json__WEBPACK_IMPORTED_MODULE_4__.dossierTemplates},dossierTemplates:_support_json__WEBPACK_IMPORTED_MODULE_4__.dossierTemplates,applicantId:"",applicantBussinessExit:!1,applicantNote:"",thongTinChuHoSo:{userType:!0,cityCode:"",districtCode:"",wardCode:"",applicantIdNo:"",contactEmail:"",contactName:"",address:"",applicantName:""},thongTinChuHoSoBindChuyenPhat:{cityCode:"",districtCode:"",wardCode:"",address:"",contactTelNo:""},thongTinNguoiNopHoSo:{sameUser:!0,delegateName:"",delegateCityCode:"",delegateAddress:"",delegateDistrictCode:"",delegateWardCode:"",delegateEmail:"",delegateTelNo:"",delegateIdNo:""},dichVuChuyenPhatKetQua:{viaPostal:0,postalServiceCode:"",postalAddress:"",postalCityCode:"",postalDistrictCode:"",postalWardCode:"",postalTelNo:""},viaPostal:0,data_phancong:[],dataCreateDossier:{},dataCreateFile:[],paymentProfile:"",paymentFileName:""},actions:{clearError({commit:e}){e("clearError")},loadInitResource({commit:e,state:t}){return new Promise((a,i)=>{null!==window.themeDisplay&&void 0!==window.themeDisplay?(t.initData["groupId"]=window.themeDisplay.getScopeGroupId(),t.initData["user"]={userName:window.themeDisplay.getUserName(),userEmail:"",userId:window.themeDisplay.getUserId()}):(t.initData["groupId"]=0,t.initData["user"]={userName:"",userEmail:"",userId:20164}),""===t["user"].role&&store.dispatch("getRoleUser").then(function(e){t["user"].role=e}).catch(function(e){t["user"].role=["default"],console.log(e)}),e("setInitData",t.initData),a(t.initData)})},getRoleUser({commit:e,state:t},a){return new Promise((e,a)=>{let i={headers:{groupId:window.themeDisplay.getScopeGroupId()?window.themeDisplay.getScopeGroupId():""}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.endPointApi+"/users/login",i).then(function(t){let a=t.data;if(a&&a.length>0){let t=[];for(let e in a)a[e]["role"]&&t.push(a[e]["role"]);console.log("roles",t),e(t)}else e(["default"])}).catch(function(e){console.log(e),a("default")})})},loadMenuConfigToDo({commit:commit,state:state}){return commit("setLoadingDynamicBtn",!0),null===state.trangThaiHoSoList?new Promise((resolve,reject)=>{store.dispatch("loadInitResource").then(function(result){let param={headers:{groupId:state.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(state.initData.menuConfigToDo,param).then(function(response){let serializable=response.data,menuData=[],index=0;for(let key in serializable.data){let current=serializable.data[key],menuDetail={index:index,active:!1,title:current["menuName"],id:current["menuGroup"],action:"description",action_active:"play_arrow",counter:-1,menuType:parseInt(current["menuType"]),queryParams:current["queryParams"]};index+=1;let tableConfig=current["tableConfig"],buttonConfig=current["buttonConfig"];if(""!==tableConfig&&void 0!==tableConfig&&"undefined"!==tableConfig&&-1!==String(tableConfig).indexOf("{")&&-1!==String(tableConfig).indexOf("}")&&(menuDetail["tableConfig"]=eval("("+tableConfig+")")),""!==buttonConfig&&void 0!==buttonConfig&&"undefined"!==buttonConfig&&-1!==String(buttonConfig).indexOf("{")&&-1!==String(buttonConfig).indexOf("}")&&(menuDetail["buttonConfig"]=eval("("+buttonConfig+")")),current.hasOwnProperty("steps"))if(current.steps.length>1)menuDetail["items"]=current.steps;else{let e=[];e.push(current.steps),menuDetail["items"]=e}menuData.push(menuDetail)}commit("setLoadingDynamicBtn",!1),commit("setMenuConfigToDo",menuData),resolve(menuData)}).catch(function(e){commit("setLoadingDynamicBtn",!1),console.log(e),reject(e)})})}):new Promise((e,t)=>{commit("setLoadingDynamicBtn",!1),e(state.trangThaiHoSoList)})},loadListThuTucHanhChinh({commit:e,state:t}){return null===t.listThuTucHanhChinh?new Promise((a,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.getListThuTucHanhChinh,o).then(function(t){let i=t.data,s=Array.from(i.data);e("setListThuTucHanhChinh",s),a(s)}).catch(function(e){console.log(e),i(e)})})}):new Promise((e,a)=>{let i=Array.from(t.listThuTucHanhChinh);e(i)})},loadingDataHoSo({commit:e,state:t},a){return e("setLoadingTable",!0),new Promise((i,s)=>{store.dispatch("loadInitResource").then(function(o){let n={start:15*a.page-15,end:15*a.page,agency:a.agency?a.agency:"",service:a.service?a.service:"",template:a.template?a.template:"",status:a.status?a.status:"",register:a.register?a.register:"",keyword:a.keyword?a.keyword:"",domain:a.domain?a.domain:"",substatus:a.substatus?a.substatus:"",year:a.year?a.year:0,month:a.month?a.month:0,day:a.day?a.day:0,top:a.top?a.top:"",dossierNo:a.dossierNo?a.dossierNo:""};a["originality"]&&(n["originality"]=a.originality);let r={headers:{groupId:t.initData.groupId},params:n};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.queryParams,r).then(function(t){let a=t.data;e("setLoadingTable",!1),e("setUserNextAction",[]),i(a)}).catch(function(t){e("setLoadingTable",!1),e("setUserNextAction",[]),console.log(t),s(t)})})})},loadingCounterNotStep({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={agency:a.agency?a.agency:"",service:a.service?a.service:"",template:a.template?a.template:"",status:a.status?a.status:"",register:a.register?a.register:"",keyword:a.keyword?a.keyword:"",domain:a.domain?a.domain:"",substatus:a.substatus?a.substatus:"",year:a.year?a.year:0,month:a.month?a.month:0,day:a.day?a.day:0,top:a.top?a.top:"",dossierNo:a.dossierNo?a.dossierNo:""};a["originality"]&&(o["originality"]=a.originality);let n={headers:{groupId:t.initData.groupId},params:o};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.queryParams,n).then(function(t){let a=t.data;e(a)}).catch(function(e){i(e)})})})},loadingCounterHoSo({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId}};a.hasOwnProperty("originality")&&1===a.originality&&(o["params"]={owner:!0}),axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.counterMenuStep,o).then(function(t){let a=t.data;e(a)}).catch(function(e){console.log(e),i(e)})})})},loadDossierSelected({commit:e,state:t},a){e("dossierSelected",a)},loadActionActive({commit:e,state:t},a){e("actionActive",a)},loadDictItems({commit:e,state:t},a){return new Promise((i,s)=>{store.dispatch("loadInitResource").then(function(o){let n={headers:{groupId:t.initData.groupId},params:{parent:a.parent}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.regionApi+"/"+a.collectionCode+"/dictitems",n).then(function(t){let s=t.data;"ADMINISTRATIVE_REGION"===a.collectionCode&&0===a.level&&e("setCitys",s.data),i(t.data)},e=>{s(e)})})})},resetThongTinChungHoSo({commit:e}){let t={serviceConfig:{},serviceOption:"",receiveDate:new Date,dueDate:(new Date).toString(),durationDate:"",dossierId:"",dossierNo:"",govAgencyName:"",dossierIdCTN:"",processBlock:"",processUnit:"",dossierStatus:"",dossierStatusText:"",submitDate:""};e("setThongTinChungHoSo",t)},resetThongTinChuHoSo({commit:e}){let t={userType:!0,cityCode:25,districtCode:"",wardCode:"",applicantIdNo:"",contactEmail:"",contactName:"",address:"",applicantName:""};e("setThongTinChuHoSo",t)},resetThongTinNguoiNopHoSo({commit:e}){let t={sameUser:"",delegateName:"",delegateCityCode:25,delegateAddress:"",delegateDistrictCode:"",delegateWardCode:"",delegateEmail:"",delegateTelNo:"",delegateIdNo:""};e("setThongTinNguoiNopHoSo",t)},resetThanhPhanHoSo({commit:e}){e("setDossierTemplates",[])},loadDossierMark({commit:e,state:t},a){return new Promise((e,i)=>{let s={headers:{groupId:t.initData.groupId},params:{type:1}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.dossierApi+"/"+a.dossierId+"/marks",s).then(function(t){let a=t.data;a.data?e(a.data):e([])},e=>{i(e)})})},loadDossierTemplates({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.dossierTemplatesApi+"/"+a.dossierTemplateNo,o).then(function(t){let a=t.data,i=function(e){try{return JSON.parse(e),JSON.parse(e)}catch(t){let a={tip:e,maxSize:10,extensions:"pdf,doc,docx,xls,xlsx,png,jpg,jpeg,txt,rtf"};return a}};if(a&&a["dossierParts"])for(let e in a["dossierParts"]){let t=a["dossierParts"][e]["partTip"];a["dossierParts"][e]["partTip"]=i(t)}e(a.dossierParts)},e=>{i(e)})})})},loadAllDossierTemplates({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.dossierTemplatesApi+"/"+a.dossierTemplateNo,o).then(function(t){let a=t.data,i=function(e){try{return JSON.parse(e),JSON.parse(e)}catch(t){let a={tip:e,maxSize:10,extensions:"pdf,doc,docx,xls,xlsx,png,jpg,jpeg,txt,rtf"};return a}};if(a&&a["dossierParts"])for(let e in a["dossierParts"]){let t=a["dossierParts"][e]["partTip"];a["dossierParts"][e]["partTip"]=i(t)}e(a.dossierParts)},e=>{i(e)})})})},deleteAttackFiles({commit:e,state:t,dispatch:a},i){return new Promise((e,a)=>{let s={headers:{groupId:t.initData.groupId}};console.log("data -delete-----",i),console.log("data-- dossier file-------",t.dossierFiles);var o=new URLSearchParams;i.hasForm||i.eform?axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(t.initData.dossierApi+"/"+i.dossierId+"/files/"+i.referenceUid+"/resetformdata",o,s).then(function(t){console.log("success"),e(t)}).catch(function(e){console.log(e),a(e)}):axios__WEBPACK_IMPORTED_MODULE_3___default.a.delete(t.initData.dossierApi+"/"+i.dossierId+"/files/"+i.fileTemplateNo+"/all",s).then(function(t){console.log("success!"),e(t)}).catch(function(e){console.log(e),a(e)})})},deleteDossierFile({commit:e,state:t},a){return new Promise((e,i)=>{let s={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.delete(t.initData.dossierApi+"/"+a.dossierId+"/files/"+a.referenceUid,s).then(function(t){console.log("success!"),e(t)}).catch(function(e){console.log(e),i(e)})})},resetCounterTemplate({commit:e,state:t},a){t.dossierTemplates.forEach(e=>{e.partNo===a.partNo&&(e.hasForm?e.count=1:e.count=0)})},deleteSingleFile({commit:e,state:t},a){let i={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.delete(t.initData.dossierApi+"/"+t.thonTinChungHoSo.dossierId+"/files/"+a.referenceUid,i).then(function(e){console.log("success")}).catch(function(e){console.log(e)})},uploadSingleFile({commit:e,state:t},a){return new Promise((e,i)=>{let s=jquery__WEBPACK_IMPORTED_MODULE_5___default()("#file"+a.partNo)[0].files,o=s[0],n=o["name"];o["name"]&&(n=o["name"].replace(/\%/g,""),n=n.replace(/\//g,""),n=n.replace(/\\/g,""));let r=new FormData;3===a.partType?(a["displayName"]&&(n=a["displayName"].replace(/\%/g,""),n=n.replace(/\//g,""),n=n.replace(/\\/g,"")),r.append("displayName",n)):r.append("displayName",n),r.append("fileType",o.type),r.append("fileSize",o.size),r.append("isSync","false"),r.append("file",o,n),r.append("dossierPartNo",a.partNo),r.append("dossierTemplateNo",a.dossierTemplateNo),r.append("fileTemplateNo",a.fileTemplateNo),r.append("formData",""),r.append("referenceUid","");let l={partTip:a.partTip,file:o};store.dispatch("validFileUpload",l),o&&t.validFileUpload?axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(t.initData.dossierApi+"/"+a.dossierId+"/files",r,{headers:{groupId:t.initData.groupId,"Content-Type":"multipart/form-data"}}).then(function(t){e(t.data),console.log("upload file success!")}).catch(function(e){console.log(e),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),i(e)}):i("error")})},uploadSingleOtherFile({commit:e,state:t},a){return new Promise((e,i)=>{let s=new FormData,o=a["displayName"];a["displayName"]&&(o=a["displayName"].replace(/\%/g,""),o=o.replace(/\//g,""),o=o.replace(/\\/g,"")),s.append("displayName",a.displayName?o:""),s.append("dossierPartNo",a.partNo?a.partNo:""),s.append("file",""),s.append("fileType",""),s.append("fileSize",""),s.append("isSync","false"),s.append("dossierTemplateNo",""),s.append("fileTemplateNo",""),s.append("formData",""),s.append("referenceUid",""),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(t.initData.dossierApi+"/"+a.dossierId+"/files",s,{headers:{groupId:t.initData.groupId,"Content-Type":"multipart/form-data"}}).then(function(t){e(t.data),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.success("Yêu cầu của bạn được thực hiện thành công."),console.log("upload file success!")}).catch(function(e){console.log(e),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),i(e)})})},uploadPaymentFile({commit:e,state:t},a){return new Promise((e,i)=>{let s=jquery__WEBPACK_IMPORTED_MODULE_5___default()("#"+a.selector)[0].files,o=s[0],n=o["name"];o["name"]&&(n=o["name"].replace(/\%/g,""),n=n.replace(/\//g,""),n=n.replace(/\\/g,""));let r=new FormData;r.append("file",o,n);let l={partTip:a["partTip"],file:o};store.dispatch("validFileUpload",l),o&&t.validFileUpload?axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(t.initData.dossierApi+"/"+a.dossierId+"/payments/"+a.referenceUid+"/confirmfile",r,{headers:{groupId:t.initData.groupId,"Content-Type":"multipart/form-data"}}).then(function(t){e(t.data),console.log("Tải file lên thành công")}).catch(function(e){console.log(e),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Tải file lên thất bại"),i(e)}):i("error")})},getDetailDossier({commit:e,state:t},a){return new Promise((i,s)=>{store.dispatch("loadInitResource").then(function(o){let n={headers:{groupId:t.initData.groupId}};console.log("run"),a>0?(e("setLoading",!0),axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.postDossierApi+"/"+a,n).then(function(t){let a={delegateName:t.data.delegateName,delegateCityCode:t.data.delegateCityCode,delegateAddress:t.data.delegateAddress,delegateDistrictCode:t.data.delegateDistrictCode,delegateWardCode:t.data.delegateWardCode,delegateEmail:t.data.delegateEmail,delegateTelNo:t.data.delegateTelNo,delegateIdNo:t.data.delegateIdNo};i(t.data),e("setLoading",!1),e("setDossier",t.data),e("setThongTinChuHoSo",t.data),e("setLePhi",t.data),e("setThongTinNguoiNopHoSo",a),e("setThongTinChungHoSo",t.data),e("setDichVuChuyenPhatKetQua",t.data)},t=>{e("setLoading",!1),s(t)}).catch(function(e){console.log(e)})):i()})})},getGovAgency({commit:e,state:t},a){return new Promise((e,a)=>{let i={headers:{groupId:t.initData.groupId},params:{sort:"sibling"}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.regionApi+"/GOVERMENT_AGENCY/dictitems",i).then(function(t){e(t.data.data)}).catch(function(e){console.log(e)})})},loadDossierFiles({commit:e,state:t},a){return new Promise((i,s)=>{let o={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.dossierApi+"/"+a+"/files",o).then(function(t){e("setDossierFiles",t.data.data),t.data.data?i(t.data.data):i([])}).catch(function(e){console.log(e),s(e)})})},getPaymentFiles({commit:e,state:t},a){return new Promise((i,s)=>{let o={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.dossierApi+"/"+a.dossierId+"/payments/"+a.referenceUid+"/confirmfile",o).then(function(t){200===t.status||"200"===t.status?i("hasPayment"):i(""),t.headers["content-disposition"]?e("setPaymentFileName",t.headers["content-disposition"].split(";")[1].split("=")[1].replace(/\"/g,"")):e("setPaymentFileName","file báo thanh toán")}).catch(function(e){console.log(e),s(e)})})},putPayments({commit:e,state:t},a){return new Promise((e,i)=>{let s={headers:{groupId:t.initData.groupId}},o=new URLSearchParams;axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(t.initData.dossierApi+"/keypay/"+a.referenceUid+"/"+a.referenceUid,o,s).then(function(a){store.dispatch("getActiveGetCounter",!t.activeGetCounter),a.data?e(a.data):e([])}).catch(function(e){console.log(e),i(e)})})},viewFile({commit:e,state:t,dispatch:a},i){return new Promise((e,a)=>{let s={headers:{groupId:t.initData.groupId},responseType:"blob"};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.dossierApi+"/"+i.dossierId+"/files/"+i.referenceUid,s).then(function(t){var a=window.URL.createObjectURL(t.data);e(a)}).catch(function(e){console.log(e)})})},viewPaymentFile({commit:e,state:t,dispatch:a},i){return new Promise((e,a)=>{let s={headers:{groupId:t.initData.groupId},responseType:"blob"};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.dossierApi+"/"+i.dossierId+"/payments/"+i.referenceUid+"/confirmfile",s).then(function(t){var a=window.URL.createObjectURL(t.data);e(a)}).catch(function(e){console.log(e)})})},viewDocument({commit:e,state:t,dispatch:a},i){return new Promise((e,a)=>{let s={headers:{groupId:t.initData.groupId},responseType:"blob"};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.dossierApi+"/"+i.dossierId+"/documents/"+i.referenceUid,s).then(function(t){var a=window.URL.createObjectURL(t.data);e(a)}).catch(function(e){console.log(e)})})},postDossier({commit:e,state:t},a){return console.log("data-------------",a),new Promise((i,s)=>{e("setLoading",!0);let o={headers:{groupId:t.initData.groupId,Accept:"application/json","Content-Type":"application/x-www-form-urlencoded",cps_auth:t.initData.cps_auth}};var n=new URLSearchParams;n.append("serviceCode",a.serviceCode),n.append("govAgencyCode",a.govAgencyCode),n.append("dossierTemplateNo",a.templateNo),n.append("originality",a.originality),console.log("dataPostdossier-------------",n),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(t.initData.postDossierApi,n,o).then(function(a){a.data.serviceConfig=t.serviceConfigObj,e("setLoading",!1),e("setDossier",a.data),e("setThongTinChuHoSo",a.data),e("setLePhi",a.data),e("setThongTinChungHoSo",a.data),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.success("Yêu cầu của bạn được thực hiện thành công."),i(a.data)}).catch(function(t){s(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),e("setLoading",!1)})})},doCopy({commit:e,state:t},a){return new Promise((i,s)=>{e("setLoading",!0);let o={headers:{groupId:t.initData.groupId,Accept:"application/json"}};var n=new URLSearchParams;axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(t.initData.postDossierApi+"/"+a.dossierId+"/cloning",n,o).then(function(e){toastr__WEBPACK_IMPORTED_MODULE_2___default.a.success("Yêu cầu của bạn được thực hiện thành công."),i(e.data)}).catch(function(t){s(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),e("setLoading",!1)})})},doCancel({commit:e,state:t},a){return new Promise((i,s)=>{e("setLoading",!0);let o={headers:{groupId:t.initData.groupId,Accept:"application/json"}};var n=new URLSearchParams;axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(t.initData.postDossierApi+"/"+a.dossierId+"/cancel",n,o).then(function(e){toastr__WEBPACK_IMPORTED_MODULE_2___default.a.success("Yêu cầu của bạn được thực hiện thành công."),i(e.data)}).catch(function(t){s(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),e("setLoading",!1)})})},putDossier({commit:e,state:t},a){return new Promise((i,s)=>{e("setLoading",!1);let o={headers:{groupId:t.initData.groupId,Accept:"application/json","Content-Type":"application/x-www-form-urlencoded",cps_auth:t.initData.cps_auth}};var n="";n=a.userType?"citizen":"business";let r=!1;null!==a["sameUser"]&&void 0!==a["sameUser"]&&"undefined"!==a["sameUser"]&&(r=a["sameUser"]);var l=new URLSearchParams;l.append("applicantName",a.applicantName),l.append("dossierNo",a.dossierNo?a.dossierNo:""),l.append("applicantIdType",n),l.append("applicantIdNo",a.applicantIdNo),l.append("address",a.address),l.append("cityCode",a.cityCode),l.append("districtCode",a.districtCode),l.append("wardCode",a.wardCode),l.append("contactTelNo",a.contactTelNo),l.append("contactEmail",a.contactEmail),l.append("delegateName",a.delegateName),l.append("delegateIdNo",a.delegateIdNo),l.append("delegateTelNo",a.delegateTelNo),l.append("delegateEmail",a.delegateEmail),l.append("delegateAddress",a.delegateAddress),l.append("delegateCityCode",a.delegateCityCode),l.append("delegateDistrictCode",a.delegateDistrictCode),l.append("delegateWardCode",a.delegateWardCode),l.append("applicantNote",t.applicantNote),1!==a.originality&&l.append("dossierName",a.dossierName),l.append("isSameAsApplicant",r),a.editable&&l.append("dueDate",a.dueDate?a.dueDate:""),a.viaPostal&&(l.append("viaPostal",a.viaPostal),l.append("postalServiceCode",a.postalServiceCode),l.append("postalAddress",a.postalAddress),l.append("postalCityCode",a.postalCityCode),l.append("postalTelNo",a.postalTelNo)),l.append("sampleCount",a.sampleCount?a.sampleCount:0),axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(t.initData.postDossierApi+"/"+a.dossierId,l,o).then(function(t){i(t.data),e("setLoading",!1),e("setDossier",t.data),e("setThongTinChuHoSo",t.data),e("setThongTinChungHoSo",t.data),e("setLePhi",t.data),e("setDichVuChuyenPhatKetQua",t.data)}).catch(e=>{s(e)})})},updateApplicantNote({commit:e,state:t},a){return new Promise((e,i)=>{let s={headers:{groupId:t.initData.groupId,Accept:"application/json","Content-Type":"application/x-www-form-urlencoded",cps_auth:t.initData.cps_auth}};var o=new URLSearchParams;o.append("applicantNote",t.applicantNote),axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(t.initData.postDossierApi+"/"+a.dossierId,o,s).then(function(t){e(t.data)}).catch(e=>{i(e)})})},getApplicantInfos({commit:e,state:t},a){return new Promise((e,i)=>{let s={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.endPointApi+"/applicants/ngsp/"+a.applicantIdNo,s).then(function(t){t.data&&t.data["Data"]&&e(t.data["Data"])}).catch(function(e){console.log(e),i(e)})})},checkApplicantInfos({commit:e,state:t},a){return new Promise((e,i)=>{let s={headers:{groupId:t.initData.groupId?t.initData.groupId:"",Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}};var o=t.endPointApi+"/applicants/ngsp/verify",n=new URLSearchParams;n.append("applicantIdNo",a.applicantIdNo?a.applicantIdNo:""),n.append("applicantName",a.applicantName?a.applicantName:""),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(o,n,s).then(t=>{e(t.data)}).catch(e=>{i(e)})})},getDossierFilesApplicants({commit:e,state:t},a){return new Promise((e,i)=>{let s={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.dossierApi+"/"+a.dossierId+"/applicant/"+a.applicantIdNo+"/files/"+a.fileTemplateNo+"/search",s).then(function(t){t.data.data?e(t.data.data):e([])}).catch(function(e){console.log(e),i(e)})})},putDuedateDossier({commit:e,state:t},a){return new Promise((i,s)=>{e("setLoading",!1);let o={headers:{groupId:t.initData.groupId,Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}};var n=new URLSearchParams;n.append("dueDate",a),axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(t.initData.postDossierApi+"/"+t.thongTinChungHoSo.dossierId,n,o).then(function(e){i(e.data)}).catch(function(e){s(e)})})},submitDossier({commit:e,state:t},a){return new Promise((e,a)=>{let i={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.dossierApi+"/"+t.thongTinChungHoSo.dossierId+"/submitting",i).then(function(t){e(t.data)}).catch(function(e){a(e),console.log(e)})})},postDossierMark({commit:e,state:t},a){return new Promise((e,i)=>{let s={headers:{groupId:t.initData.groupId,Accept:"application/json","Content-Type":"application/x-www-form-urlencoded",cps_auth:t.initData.cps_auth}};var o=new URLSearchParams;1===a["checkInput"]?(void 0!==a.fileCheck&&"undefined"!==a.fileCheck&&null!==a.fileCheck&&o.append("fileCheck",a.fileCheck),void 0!==a.fileComment&&"undefined"!==a.fileComment&&null!==a.fileComment&&o.append("fileComment",a.fileComment)):void 0!==a.fileMark&&"undefined"!==a.fileMark&&null!==a.fileMark&&o.append("fileMark",a.fileMark);let n=t.initData.dossierApi+"/"+a.dossierId+"/marks/"+a.partNo;axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(n,o,s).then(function(t){e(t.data)}).catch(function(e){i(e)})})},postAction({commit:e,state:t},a){return new Promise((i,s)=>{e("setLoading",!0);let o={headers:{groupId:t.initData.groupId}};var n=new URLSearchParams;n.append("actionCode",a.actionCode?a.actionCode:""),n.append("actionNote",a.actionNote?a.actionNote:""),n.append("actionUser",a.actionUser?a.actionUser:""),n.append("payload",a.payload?JSON.stringify(a.payload):""),n.append("security",a.security?a.security:""),n.append("assignUsers",a.assignUsers?JSON.stringify(a.assignUsers):""),n.append("payment",a.payment?JSON.stringify(a.payment):""),n.append("createDossiers",a.createDossiers?a.createDossiers:"");let r=t.initData.dossierApi+"/"+a.dossierId+"/actions";axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(r,n,o).then(function(a){i(a.data),e("setLoading",!1),store.dispatch("getActiveGetCounter",!t.activeGetCounter)}).catch(function(e){s(e),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),store.commit("setLoading",!1)})})},getUserInfoFromApplicantIdNo({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId},params:{start:0,end:5,idNo:a.idNo}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.applicantApi,o).then(function(t){e(t.data.data)}).catch(function(e){console.log(e),i(e)})})})},loadAlpcaForm({commit:commit,state:state,dispatch:dispatch},data){console.log("alpaca");let id=data["id"]?data["id"]:"nm";var formScript,formData;window.$("#formAlpaca"+data.dossierPartNo+id).empty(),formScript=data.formScript?eval("("+data.formScript+")"):{},formData=data.formData?eval("("+data.formData+")"):{},formScript.data=formData,window.$("#formAlpaca"+data.dossierPartNo+id).alpaca(formScript)},putAlpacaForm({commit:e,state:t,dispatch:a},i){return new Promise((e,a)=>{let s={headers:{groupId:t.initData.groupId,cps_auth:t.initData.cps_auth}},o=i["id"]?i["id"]:"nm";try{var n=window.$("#formAlpaca"+i.dossierPartNo+o).alpaca("get"),r=n.getValue();let p=window.$("#formAlpaca"+i.dossierPartNo+o).alpaca("get").childrenByPropertyId;if(p)for(var l in p)if(p[l].isRequired()&&""===p[l].getValue())return void toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error(p[l].options.placeholder?p[l].options.placeholder+" là trường dữ liệu bắt buộc":p[l].options["name"]+" là trường dữ liệu bắt buộc");var d=new URLSearchParams;d.append("formdata",JSON.stringify(r));let u=t.initData.dossierApi+"/"+i.dossierId+"/files/"+i.referenceUid+"/formdata";axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(u,d,s).then(function(t){e(t.data)}).catch(function(e){a(i)})}catch(c){console.log(c),a(i)}})},rollBack({state:e,commit:t},a){return new Promise((t,i)=>{let s={headers:{groupId:e.initData.groupId}};try{var o=new URLSearchParams;let r=e.initData.dossierApi+"/"+a.dossierId+"/rollback";axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(r,o,s).then(function(a){t(a.data),store.dispatch("getActiveGetCounter",!e.activeGetCounter)}).catch(function(e){i(a)})}catch(n){console.log(n),i(a)}})},goToStep({state:e,commit:t},a){return new Promise((t,i)=>{let s={headers:{groupId:e.initData.groupId}};try{var o=new URLSearchParams;let r=e.initData.dossierApi+"/"+a.dossierId+"/goto/"+a.stepCode;axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(r,o,s).then(function(a){t(a.data),store.dispatch("getActiveGetCounter",!e.activeGetCounter)}).catch(function(e){i(a)})}catch(n){console.log(n),i(a)}})},postEform({commit:e,state:t},a){return new Promise((e,i)=>{let s={headers:{groupId:t.initData.groupId,"Content-Type":"multipart/form-data"}};try{let c=a["id"]?a["id"]:"nm";var o=new FormData,n=window.$("#formAlpaca"+a.partNo+c).alpaca("get"),r=n.getValue();o.append("formData",JSON.stringify(r)),o.append("file","");let p=window.$("#formAlpaca"+a.partNo+c).alpaca("get").childrenByPropertyId;if(p)for(var l in p)if(p[l].isRequired()&&""===p[l].getValue())return void toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error(p[l].options.placeholder?p[l].options.placeholder+" là trường dữ liệu bắt buộc":p[l].options["name"]+" là trường dữ liệu bắt buộc");let u=t.initData.dossierApi+"/"+a.dossierId+"/eforms/"+a.partNo;axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(u,o,s).then(function(t){e(t.data)}).catch(function(e){i(a)})}catch(d){console.log(d),i(a)}})},postEformEsignature({commit:e,state:t},a){return new Promise((e,i)=>{let s={headers:{groupId:t.initData.groupId,"Content-Type":"multipart/form-data"}};try{var o=new FormData;o.append("formData",JSON.stringify(JSON.parse(a.formData))),o.append("file","");let r=t.initData.dossierApi+"/"+a.dossierId+"/eforms/"+a.partNo;axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(r,o,s).then(function(t){e(t.data)}).catch(function(e){i(a)})}catch(n){console.log(n),i(a)}})},postVNPOST({commit:e,state:t},a){return new Promise((i,s)=>{e("setLoading",!0);let o={headers:{groupId:t.initData.groupId,Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}};var n=new URLSearchParams;n.append("customerCode","ccth"),n.append("orderNumber",t.thongTinChungHoSo.dossierId),n.append("senderProvince",a.senderProvince),n.append("senderAddress",a.senderAddress),n.append("senderName",a.senderName),n.append("senderTel",a.senderTel),n.append("receiverName",a.receiverName),n.append("receiverAddress",a.receiverAddress),n.append("receiverTel",a.receiverTel),n.append("receiverProvince",a.receiverProvince);let r="/o/rest/v2/postal/vnpost";axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(r,n,o).then(function(t){i(t.data),e("setLoading",!1)}).catch(function(t){s(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),e("setLoading",!1)})})},getDossierTemplateEdit({commit:e,state:t}){return new Promise((e,a)=>{var i=t.dossierTemplates,s=[];try{0===t.dossierFiles.length?dispatch("loadDossierFiles").then(t=>{t.forEach(e=>{i.forEach(t=>{e.dossierPartNo===t.partNo&&s.push({partName:t.partName,partNo:t.partNo,displayName:e.displayName,dossierFileId:e.dossierFileId,partType:t.partType,hasForm:t.hasForm,fileType:e.fileType,referenceUid:e.referenceUid})})}),e(s)}).catch(t=>{console.log(t),e([])}):t.dossierFiles.forEach(e=>{i.forEach(t=>{e.dossierPartNo===t.partNo&&s.push({partName:t.partName,partNo:t.partNo,displayName:e.displayName,dossierFileId:e.dossierFileId,partType:t.partType,hasForm:t.hasForm,fileType:e.fileType,referenceUid:e.referenceUid})})}),e(s),console.log(s)}catch(o){console.log(o),a([])}})},loadPlugin({commit:commit,state:state},item){return new Promise((resolve,reject)=>{item.plugin=!0;var urlPluginFormData=state.initData.dossierApi+"/"+item.dossierId+"/plugins/"+item.processPluginId+"/formdata",urlPluginFormScript=state.initData.dossierApi+"/"+item.dossierId+"/plugins/"+item.processPluginId+"/formscript",config_plugins={headers:{groupId:state.initData.groupId,Token:window.Liferay?window.Liferay.authToken:""},dataType:"text"};axios__WEBPACK_IMPORTED_MODULE_3___default.a.all([axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(urlPluginFormScript,config_plugins),axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(urlPluginFormData,config_plugins)]).then(axios__WEBPACK_IMPORTED_MODULE_3___default.a.spread(function(urlResponesFormScript,urlResponesFormData){var responseScript=urlResponesFormScript.data,responseData=urlResponesFormData.data;if(console.log("responseScript==============",responseScript),item.plugin=!0,-1!==responseScript.indexOf("#preview@pdf")){console.log("view pdf");var url=state.initData.dossierApi+"/"+item.dossierId+"/plugins/"+item.processPluginId+"/preview",config_blob={headers:{groupId:state.initData.groupId},responseType:"blob"};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(url,config_blob).then(function(e){var t=window.URL.createObjectURL(e.data);item.pdf=!0,item.url=t,item.no_pdf="",resolve(item)}).catch(function(e){console.log(e),item.pdf=!0,item.url="",item.no_pdf="Tài liệu đính kèm không tồn tại!",resolve(item)})}if(-1!==responseScript.indexOf("#preview@html")){console.log("view html");var config_view={headers:{groupId:state.initData.groupId},dataType:"json"};item.html=!0,item.no_html="";var url=state.initData.dossierApi+"/"+item.dossierId+"/plugins/"+item.processPluginId+"/previewhtml";axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(url,config_view).then(function(response){item.no_html="",vm.stepModel=item;var serializable=response.data,partNo=serializable.partNo,dossierFileId=serializable.dossierFileId,formReport=eval("("+serializable.formReport+")"),formData=eval("("+serializable.formData+")");console.log("formReport======",formReport),console.log("formData======",formData),formReport.data=formData,console.log("formReport_____FINAL=======",formReport),window.$("#alpacajs_form_plugin").alpaca(formReport),window.$(".dossierFilePartNo").val(""),window.$(".dossierFilePartNo").attr("id","dossierFileId"+partNo),window.$(".dossierFilePartNo").val(dossierFileId)}).catch(function(e){console.log(e),item.html=!0,item.no_html="Tài liệu đính kèm không tồn tại!",resolve(item)})}})).catch(function(e){console.log(e),reject(e)})})},getActiveGetCounter({commit:e,state:t},a){e("setActiveGetCounter",a)},getActiveLoadingDataHoSo({commit:e,state:t},a){e("setActiveLoadingDataHoSo",a)},setDefaultCityCode({commit:e,state:t},a){t.thongTinChuHoSo.cityCode=a},getListHistoryProcessingItems({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId}};var n=[];axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.dossierlogsApi+"/"+a.dossierId+"/logs",o).then(function(t){var a=t.data;for(var i in a.data)"PROCESS_TYPE"===a.data[i].notificationType&&n.push(a.data[i]);e(n)}).catch(function(e){i(e)})})})},loadDossierLogs({commit:e,state:t},a){return new Promise((e,i)=>{let s={headers:{groupId:t.initData.groupId},params:{notificationType:a.type}},o=t.initData.dossierApi+"/"+a.dossierId+"/logs";axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(o,s).then(function(t){e(t.data.data)}).catch(function(e){i(e)})})},loadPlugins({commit:e,state:t},a){return new Promise((e,i)=>{let s={headers:{groupId:t.initData.groupId}},o=t.initData.dossierApi+"/"+a.dossierId+"/plugins";axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(o,s).then(function(t){e(t.data.data)}).catch(function(e){i(e)})})},downloadFile({commit:e,state:t},a){let i={headers:{groupId:t.initData.groupId},responseType:"blob"};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.dossierApi+"/"+a.dossierId+"/files/"+a.fileAttachId,i).then(function(e){var t=window.URL.createObjectURL(e.data);window.open(t)}).catch(function(e){console.log(e)})},getCpsAuthen({commit:e,state:t}){return new Promise((e,a)=>{let i={headers:{groupId:t.initData.groupId},params:{}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get("http://127.0.0.1:8081/api/onegate/token",i).then(function(t){e(t.data)}).catch(function(e){a(e)})})},loadUsersComment({commit:e,state:t},a){return new Promise((e,i)=>{var s=[];let o={headers:{groupId:t.initData.groupId},params:{userMapping:!0}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.dossierApi+"/"+a+"/contacts",o).then(function(t){if(null!=t&&t.hasOwnProperty("data")){let e=t.data;jquery__WEBPACK_IMPORTED_MODULE_5___default.a.each(e,function(e,t){var a={};a.id=t.userId,a.fullname=t.userName,a.email=t.email,a.profilePictureURL=t.profileUrl,s.push(a)})}else s=[];e(s)}).catch(function(e){s=[],i(s)})})},loadCommentItems({commit:e,state:t},a){return new Promise((e,i)=>{let s={headers:{groupId:t.initData.groupId},params:{}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.commentApi+"/"+a.className+"/"+a.classPK,s).then(function(t){e(t.data.data)}).catch(function(e){i(e)})})},postComment({commit:e,state:t},a){return new Promise((e,i)=>{const s={headers:{groupId:t.initData.groupId}};var o=a.pings.join(),n=new URLSearchParams;n.append("className",a.className),n.append("classPK",a.classPK),n.append("parent",null!=a.parent?a.parent:0),n.append("pings",o),n.append("content",a.content),n.append("upvoteCount",null!=a.upvoteCount?a.upvoteCount:0),n.append("opinion",a.opinion),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(t.initData.commentApi,n,s).then(function(t){var a={};null!=t&&(a=t.data,console.log("resPostCmt",a)),e(a)}).catch(function(e){toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),console.log(e)})})},putComment({commit:e,state:t},a){return new Promise((e,i)=>{const s={headers:{groupId:t.initData.groupId}};var o=a.pings.join(),n=new URLSearchParams;n.append("pings",o),n.append("content",a.content),console.log("dataPut",a),axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(t.initData.commentApi+"/"+a.commentId,n,s).then(function(t){var a={};null!=t&&(a=t.data),e(a)}).catch(function(e){console.log(e)})})},deleteComment({commit:e,state:t},a){return new Promise((e,i)=>{const s={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.delete(t.initData.commentApi+"/"+a.commentId,s).then(function(t){e(t)}).catch(function(e){i(e)})})},upvoteComment({commit:e,state:t},a){return new Promise((e,i)=>{const s={headers:{groupId:t.initData.groupId}};if(a.userHasUpvoted){var o=new URLSearchParams;o.append("className",a.className),o.append("classPK",a.classPK),o.append("commentId",a.commentId),o.append("upvoteCount",null!=a.upvoteCount?a.upvoteCount:0),axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(t.initData.commentApi+"/"+a.commentId+"/upvotes",o,s).then(function(t){var a={};null!=t&&(a=t.data),e(a)}).catch(function(e){console.log(e)})}else axios__WEBPACK_IMPORTED_MODULE_3___default.a.delete(t.initData.commentApi+"/"+a.commentId+"/upvotes",s).then(function(t){var a={};null!=t&&(a=t.data),e(a)}).catch(function(e){console.log(e)})})},loadProcessStep({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId}};var n=t.initData.dossierApi+"/"+a.dossierId+"/nextactions",r=t.initData.dossierApi+"/"+a.dossierId+"/plugins";axios__WEBPACK_IMPORTED_MODULE_3___default.a.all([axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(n,o),axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(r,o)]).then(axios__WEBPACK_IMPORTED_MODULE_3___default.a.spread(function(t,a){var i=t.data.data,s=a.data.data,o=[],n=[];if(i)for(var r=0;r<i.length;r++){if(i[r].type=1,i[r].configNote){var l=JSON.parse(i[r].configNote);i[r].configNote=l}n.push(i[r])}else i=[],n=[];if(s)for(r=0;r<s.length;r++){var d={type:2,processActionId:s[r].processPluginId,actionName:s[r].pluginName};o.push(d)}var c=n,p=o;console.log("nextactions++++++++++++",c),console.log("plugins++++++++++++",p),c.push(...p),console.log("nextactions2++++++++++++",c),e(c)})).catch(function(e){i(e)})})})},pullNextactions({commit:e,state:t},a){return new Promise((i,s)=>{store.dispatch("loadInitResource").then(function(o){console.log("result",o);let n={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.getNextAction+"/"+a.dossierId+"/nextactions",n).then(function(t){let a=t.data;e("setUserNextAction",[]),e("setCheckInput",a["checkInput"]),e("setStepOverdueNextAction",a["stepOverdue"]),a["users"]&&(Array.isArray(a["users"])?e("setUserNextAction",a["users"]):e("setUserNextAction",[a["users"]])),i(a.data)}).catch(function(t){console.log(t),s(t),e("setUserNextAction",[])})})})},pullBtnConfigStep({commit:e,state:t},a){return new Promise((e,i)=>{const s={headers:{groupId:t.initData.groupId}};new URLSearchParams;axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.stepConfigApi+"/status/"+a.dossierStatus+"/"+a.dossierSubStatus,s).then(function(t){let a,i=t.data.data;a=i[0].buttonConfig&&i[0].buttonConfig.indexOf("{")>=0&&JSON.parse(i[0].buttonConfig)["buttons"]?JSON.parse(i[0].buttonConfig)["buttons"]:[],e(a)}).catch(function(e){console.log(e),i(e)})})},loadDossierDocuments({commit:e,state:t},a){let i={headers:{groupId:t.initData.groupId},params:{}},s=t.initData.documentApi+"/"+a.dossierId+"/documents";return new Promise((e,t)=>{axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(s,i).then(function(t){t.data.data?e(t.data.data):e([])}).catch(function(e){t(e)})})},loadDossierPayments({commit:e,state:t},a){let i={headers:{groupId:t.initData.groupId},params:{}},s=t.initData.dossierApi+"/"+a.dossierId+"/payment";return new Promise((e,t)=>{axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(s,i).then(function(t){e(t.data)}).catch(function(e){t(e)})})},postDossierPayments({commit:e,state:t},a){let i={headers:{groupId:t.initData.groupId}};var s=new URLSearchParams;s.append("paymentFee",a.paymentFee),s.append("paymentNote",a.paymentNote);let o=t.initData.dossierApi+"/"+a.dossierId+"/payment";return new Promise((e,t)=>{axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(o,s,i).then(function(t){e(t.data)}).catch(function(e){t(e)})})},loadDossierActions({commit:e,state:t},a){let i={headers:{groupId:t.initData.groupId},params:{stepType:a.stepType}},s=t.initData.dossierApi+"/"+a.dossierId+"/sequences";return new Promise((e,t)=>{axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(s,i).then(function(t){e(t.data)}).catch(function(e){t(e)})})},loadMermaidgraph({commit:e,state:t},a){let i={headers:{groupId:t.initData.groupId},params:{stepType:a.stepType}},s=t.initData.dossierApi+"/"+a.dossierId+"/mermaidgraph";return new Promise((e,t)=>{axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(s,i).then(function(t){e(t.data)}).catch(function(e){t(e)})})},loadDossierLienThong({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId},params:{originDossierId:a}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.dossierApi,o).then(function(t){let a=t.data;a.data?e(a.data):e([])}).catch(function(e){i(e)})})})},getDossierUserAsign({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.dossierApi+"/"+a+"/users",o).then(function(t){let a=t.data;a["data"]?Array.isArray(a["data"])?e(a.data):e([a["data"]]):e([])}).catch(function(e){i(e)})})})},postDossierUserAsign({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId}},n=new URLSearchParams;n.append("assignUsers",a.users?JSON.stringify(a.users):""),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(t.initData.dossierApi+"/"+a.dossierId+"/users",n,o).then(function(t){e(t)}).catch(function(e){i(e)})})})},loadDossierSyncs({commit:e,state:t},a){return new Promise((e,i)=>{let s={headers:{groupId:t.initData.groupId}},o=t.endPointApi+"/dossiers/"+a.dossierId+"/syncs";axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(o,s).then(function(t){e(t.data.data)}).catch(function(e){i(e)})})},processDossierRouter({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId,Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}},n=new URLSearchParams;n.append("actionCode",a.actionCode?a.actionCode:""),n.append("payment",a.payment?JSON.stringify(a.payment):""),n.append("assignUsers",a.toUsers?JSON.stringify(a.toUsers):""),n.append("actionNote",a.userNote?JSON.stringify(a.userNote):""),n.append("payload",a.payload?JSON.stringify(a.payload):""),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(t.initData.getNextAction+"/"+a.dossierId+"/actions",n,o).then(function(a){store.dispatch("getActiveGetCounter",!t.activeGetCounter);let i=a.data;e(i)}).catch(function(e){console.log(e),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),i(e)})})})},deleteDossier({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId,Accept:"application/json"}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.delete(t.initData.getNextAction+"/"+a.dossierId,o).then(function(a){let i=a.data;store.dispatch("getActiveGetCounter",!t.activeGetCounter),e(i)}).catch(function(e){console.log(e),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),i(e)})})})},restoreDossier({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId,Accept:"application/json"}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.post("/o/rest/v2/dossiers/"+a.dossierId+"/restore",o).then(function(t){let a=t.data;e(a)}).catch(function(e){console.log(e),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),i(e)})})})},getListDossierFiles({commit:e,state:t},a){return new Promise((e,i)=>{let s={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.dossierApi+"/"+a+"/files",s).then(function(t){t.data.data?e(t.data.data):e([])}).catch(function(e){console.log(e),i(e)})})},deleteDossierPatch({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId,Accept:"application/json"}};var n=0;let r=a["dossierId"].length;for(let l in a.dossierId)axios__WEBPACK_IMPORTED_MODULE_3___default.a.delete(t.initData.getNextAction+"/"+a.dossierId[l],o).then(function(a){let i=a.data;n+=1,n===r&&(store.dispatch("getActiveGetCounter",!t.activeGetCounter),store.dispatch("getActiveLoadingDataHoSo",!t.activeLoadingDataHoSo)),e(i)}).catch(function(e){console.log(e),n+=1,n===r&&(store.dispatch("getActiveGetCounter",!t.activeGetCounter),store.dispatch("getActiveLoadingDataHoSo",!t.activeLoadingDataHoSo)),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),i(e)})})})},doPrint01({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId},responseType:"blob",params:{payload:a.payload}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.getNextAction+"/"+a.dossierId+"/documents/preview/"+a.document,o).then(function(t){let a=t.data,i=window.URL.createObjectURL(a);e(i)}).catch(function(e){console.log(e),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),i(e)})})})},doPrint03({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId},responseType:"blob",params:{payload:a.payload}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.getNextAction+"/"+a.dossierId+"/documents/print",o).then(function(t){let a=t.data,i=window.URL.createObjectURL(a);e(i)}).catch(function(e){console.log(e),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),i(e)})})})},doGuiding({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={serviceCode:a.serviceCode?a.serviceCode:"",serviceName:a.serviceName?a.serviceName:"",typeCode:a.typeCode?a.typeCode:"",templateNo:a.templateNo?a.templateNo:"",applicantName:a.applicantName?a.applicantName:"",applicantAddress:a.applicantAddress?a.applicantAddress:"",applicantEmail:a.applicantEmail?a.applicantEmail:"",applicantTelNo:a.applicantTelNo?a.applicantTelNo:"",employeeName:a.employeeName?a.employeeName:""};a.reportType&&(o["reportType"]=a.reportType);let n={headers:{groupId:t.initData.groupId},responseType:"blob",params:o};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.getServiceConfigs+"/"+a.serviceConfigId+"/guide",n).then(function(t){let i=t.data;a.reportType&&file_saver__WEBPACK_IMPORTED_MODULE_6___default()(i,"HDTT"+(new Date).getTime()+".doc");let s=window.URL.createObjectURL(i);e(s)}).catch(function(e){console.log(e),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),i(e)})})})},doPrint02({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId},responseType:"blob"},n=new URLSearchParams;n.append("serviceCode",a.serviceCode),n.append("govAgencyCode",a.govAgencyCode),n.append("dossiers",a.dossiers),n.append("payload",a.payload),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(t.initData.getNextAction+"/preview/"+a.document,n,o).then(function(t){let a=t.data,i=window.URL.createObjectURL(a);e(i)}).catch(function(e){console.log(e),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),i(e)})})})},printPay({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId},responseType:"blob"};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.getNextAction+"/"+a.dossierId+"/payments/"+a.referenceUid+"/invoicefile/preview",o).then(function(t){let a=t.data,i=window.URL.createObjectURL(a);e(i)}).catch(function(e){console.log(e),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),i(e)})})})},processPullBtnDetail({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.getNextAction+"/"+a.dossierId+"/nextactions/"+a.actionId,o).then(function(t){let a=t.data;e(a)}).catch(function(e){console.log(e),i(e)})})})},getNextAction({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.dossierApi+"/"+a.dossierId+"/nextactions/"+a.actionId,o).then(function(t){let a=t.data;e(a)}).catch(function(t){console.log(t),e([]),i(t)})})})},loadFormScript({state:e,commit:t},a){return new Promise((t,i)=>{store.dispatch("loadInitResource").then(function(s){jquery__WEBPACK_IMPORTED_MODULE_5___default.a.ajax({url:e.initData.dossierTemplatesApi+"/"+a.templateFileNo+"/parts/"+a.partNo+"/formscript",type:"GET",headers:{groupId:e.initData.groupId,Token:window.Liferay?window.Liferay.authToken:""},dataType:"text",success:function(e){let a=e;t(a)},error:function(e){console.log(e),t(e),i(e)}})})})},loadFormData({state:e,commit:t},a){return new Promise((t,i)=>{store.dispatch("loadInitResource").then(function(s){jquery__WEBPACK_IMPORTED_MODULE_5___default.a.ajax({url:e.initData.dossierApi+"/"+a.dossierId+"/eforms/"+a.partNo+"/formdata",type:"GET",headers:{groupId:e.initData.groupId,Token:window.Liferay?window.Liferay.authToken:""},dataType:"text",success:function(e){let a=e;t(a)},error:function(e){console.log(e),t(e),i(e)}})})})},loadDossierCounting({state:e,commit:t},a){let i={headers:{groupId:e.initData.groupId}},s="/o/rest/v2/statistics/dossiers/counting";return new Promise((e,t)=>{axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(s,i).then(function(t){e(t.data)}).catch(function(e){t(e)})})},reassignDossier({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId}},n=new URLSearchParams;n.append("toUsers",JSON.stringify(a.toUsers)),axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(t.initData.dossierApi+"/"+a.dossierId+"/reassign",n,o).then(function(t){let a=t.data;e(a)}).catch(function(e){console.log(e),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),i(e)})})})},pullProcessSteps({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.stepConfigApi+"/"+a.stepCode,o).then(function(t){let a=t.data;e(a)}).catch(function(e){console.log(e),i(e)})})})},loadServiceConfigsGov({commit:e,state:t},a){return new Promise((a,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId},params:{}};e("setLoadingGov",!0),axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.serviceConfigByGovApi,o).then(function(t){e("setLoadingGov",!1);let i=t.data;i.govAgencies?a(i.govAgencies):a([])}).catch(function(t){console.log(t),e("setLoadingGov",!1),i(t)})})})},processCheckNextActions({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId}},n=a.actionCode.split(",");axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.dossierApi+"/"+a.dossierId+"/nextactions",o).then(function(t){let i=t.data,s=i.data,o=a,r=!1;for(let e in n)if(!r)for(let t in s)if(String(n[e])===String(s[t].actionCode)){o.actionCode=s[t].actionCode,r=!0;break}e(o)}).catch(function(e){console.log(e),i(e)})})})},getServiceOpionByProcess({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId},params:{}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.getServiceConfigs+"/"+a.serviceConfigId+"/processes",o).then(function(t){let a=t.data;a.data?e(a.data):e({})}).catch(function(e){console.log(e),i(e)})})})},getStatusLists({commit:e,state:t},a){return new Promise((e,a)=>{store.dispatch("loadInitResource").then(function(i){let s={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.endPointApi+"/dictcollections/DOSSIER_STATUS/dictitems?parent=0",s).then(function(t){let a=t.data;if(a.data){let t=a.data;null!==t&&void 0!==t&&"undefined"!==t&&t.unshift({itemCode:"",itemName:"toàn bộ"}),e(t)}else e([])}).catch(function(e){console.log(e),a(e)})})})},getVNPOSTcode({commit:e,state:t},a){return new Promise((e,a)=>{store.dispatch("loadInitResource").then(function(i){let s={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get("/o/rest/v2/dictcollections/VNPOST_CITY_CODE/dictitems",s).then(function(t){let a=t.data;if(a.data){let t=a.data;e(t)}else e([])}).catch(function(e){console.log(e),a(e)})})})},getSubstatusLists({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get("/o/rest/v2/dictcollections/DOSSIER_STATUS/dictitems?parent="+a.itemCode,o).then(function(t){let a=t.data;if(a.data){let t=a.data;null!==t&&void 0!==t&&"undefined"!==t&&t.unshift({itemCode:"",itemName:"toàn bộ"}),e(t)}else e([])}).catch(function(e){console.log(e),i(e)})})})},getAgencyLists({commit:e,state:t},a){return new Promise((e,a)=>{store.dispatch("loadInitResource").then(function(i){let s={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get("/o/rest/v2/serviceinfos/statistics/agencies",s).then(function(t){let a=t.data;if(a.data){let t=a.data;null!==t&&void 0!==t&&"undefined"!==t&&t.unshift({administrationCode:"",administrationName:"toàn bộ"}),e(t)}else e([])}).catch(function(e){console.log(e),a(e)})})})},getServiceLists({commit:e,state:t},a){return new Promise((e,a)=>{store.dispatch("loadInitResource").then(function(i){let s={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.endPointApi+"/serviceinfos",s).then(function(t){let a=t.data;if(a.data){let t=a.data;null!==t&&void 0!==t&&"undefined"!==t&&t.unshift({serviceCode:"",serviceName:"toàn bộ"}),e(t)}else e([])}).catch(function(e){console.log(e),a(e)})})})},getServiceinfoFilter({commit:e,state:t},a){return new Promise((i,s)=>{store.dispatch("loadInitResource").then(function(o){let n={headers:{groupId:t.initData.groupId},params:{domain:a.domain}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.getListThuTucHanhChinh,n).then(function(t){let a=t.data,s=Array.from(a.data);e("setListThuTucHanhChinh",s),i(s)}).catch(function(e){console.log(e),s(e)})})})},getDomainLists({commit:e,state:t},a){return new Promise((e,a)=>{store.dispatch("loadInitResource").then(function(i){let s={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.endPointApi+"/serviceinfos/statistics/domains",s).then(function(t){let a=t.data;if(a.data){let t=a.data;e(t)}else e([])}).catch(function(e){console.log(e),a(e)})})})},getExtraForm({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.dossierApi+"/"+a.dossierId+"/nextactions/"+a.actionId+"/payload",o).then(function(t){let a=t.data;a.data?e(a.data):e([])}).catch(function(e){console.log(e),i(e)})})})},getServiceInfo({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.serviceInfoApi+"/"+a.serviceInfoId,o).then(function(t){let a=t.data;e(a)}).catch(function(e){console.log(e),i(e)})})})},changeDisplayNameFile({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId}};var n=new URLSearchParams;n.append("displayName",a.displayName),axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(t.initData.serviceInfoApi+"/"+a.dossierId+"/files/"+a.dossierFileId,n,o).then(function(t){let a=t.data;e(a)}).catch(function(e){console.log(e),i(e)})})})},loadingDossierCounting({commit:e,state:t},a){return new Promise((e,a)=>{store.dispatch("loadInitResource").then(function(i){let s={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.endPointApi+"/statistics/dossiers/counting",s).then(function(t){let a=t.data;a.hasOwnProperty("data")?e(a.data):e(null)}).catch(function(e){console.log(e),a(e)})})})},loadVoting({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get("/o/rest/v2/postal/votings/"+a.className+"/"+a.classPK,o).then(t=>{let a=t.data;a&&a.data?e(a.data):e([])}).catch(e=>{i(e)})})})},submitVoting({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){var o=new URLSearchParams;const n={headers:{groupId:t.initData.groupId}};o.append("className",a.className),o.append("classPk",a.classPk),o.append("votingCode",a.votingCode?a.votingCode:""),o.append("selected",a.selected),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post("/o/rest/v2/postal/votings/"+a.votingId+"/results",o,n).then(t=>{e(t.data)}).catch(e=>{i(e)})})})},validFileUpload({commit:e,state:t},a){let i=a.file.name?a.file.name.split("."):"",s=i?i[i.length-1]:"",o=a.partTip["extensions"]?a.partTip["extensions"].split(","):"",n=(a.partTip["maxSize"],o?o.filter(function(e){return e===s}):"");store.commit("setValidFileUpload",!1),n&&n.length>0?Number(a.file.size)<=1048576*a.partTip["maxSize"]||!a.partTip["maxSize"]?store.commit("setValidFileUpload",!0):(toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Tài liệu tải lên dung lượng tối đa là "+a.partTip["maxSize"]+" MB"),store.commit("setValidFileUpload",!1)):a.partTip["extensions"]?(toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Tài liệu tải lên chỉ chấp nhận các định dạng "+a.partTip["extensions"]),store.commit("setValidFileUpload",!1)):store.commit("setValidFileUpload",!0)}},mutations:{setLoading(e,t){e.loading=t},setLoadingTable(e,t){e.loadingTable=t},setLoadingGov(e,t){e.loadingGov=t},setValidFileUpload(e,t){e.validFileUpload=t},setError(e,t){e.error=t},clearError(e){e.error=null},setIndex(e,t){e.index=t},setInitData(e,t){e.initData=t},setMenuConfigToDo(e,t){e.trangThaiHoSoList=t},setDataPhanCong(e,t){e.data_phancong=t},setLoadingDynamicBtn(e,t){e.loadingDynamicBtn=t},setListThuTucHanhChinh(e,t){e.listThuTucHanhChinh=t},setDossierTemplateName(e,t){e.dossierTemplateName=t},setIsDetail(e,t){e.isDetail=t},setLePhi(e,t){e.lePhi.fee=t.paymentFee,e.lePhi.feeNote=t.paymentFeeNote},setThanhPhanHoso(e,t){e.thanhPhanHoSo=t},setThanhPhanHosoTemplates(e,t){e.thanhPhanHoSo.dossierTemplates=t},setDataCreateFile(e,t){e.dataCreateFile=t},setCheckInput(e,t){e.checkInput=t},setUserNextAction(e,t){e.usersNextAction=t||[]},setStepOverdueNextAction(e,t){e.stepOverdueNextAction=t},setThongTinChuHoSo(e,t){let a=!0;"business"===t.applicantIdType&&(a=!1);let i={applicantIdNo:t.applicantIdNo,applicantName:t.applicantName,address:t.address,cityCode:t.cityCode,districtCode:t.districtCode,wardCode:t.wardCode,contactEmail:t.contactEmail,contactTelNo:t.contactTelNo,userType:a};e.thongTinChuHoSo=i},setThongTinChuHoSoBindChuyenPhat(e,t){e.thongTinChuHoSoBindChuyenPhat={cityCode:t.cityCode,districtCode:t.districtCode,wardCode:t.wardCode,address:t.address,contactTelNo:t.contactTelNo}},setThongTinNguoiNopHoSo(e,t){e.thongTinNguoiNopHoSo=Object.assign(e.thongTinNguoiNopHoSo,t)},setDichVuChuyenPhatKetQua(e,t){let a={viaPostal:t.viaPostal,postalServiceCode:t.postalServiceCode?t.postalServiceCode:"",postalAddress:t.postalAddress?t.postalAddress:"",postalCityCode:t.postalCityCode?t.postalCityCode:"",postalDistrictCode:t.postalDistrictCode?t.postalDistrictCode:"",postalWardCode:t.postalWardCode?t.postalWardCode:"",postalTelNo:t.postalTelNo?t.postalTelNo:""};e.dichVuChuyenPhatKetQua=a},setViaPostal(e,t){e.viaPostal=t},setServiceConfigObj(e,t){e.serviceConfigObj=t},setThongTinChungHoSo(e,t){var a;if(1===t.processUnit&&t.processBlock>8){let e,i=Math.floor(t.processBlock/8)+" ngày";e=t.processBlock%8!==0?8*(t.processBlock/8-Math.floor(t.processBlock/8))+" giờ":"",a=`${i} ${e}`}else 0===t.processUnit?a=t.processBlock+" ngày":1===t.processUnit&&t.processBlock<=8&&(a=t.processBlock+" giờ");let i={dossierTemplateNo:t.dossierTemplateNo,dossierTemplateName:t.dossierTemplateName,serviceName:t.serviceName,serviceConfig:t.serviceConfig,serviceOption:t.dossierTemplateNo,receiveDate:new Date(t.receiveDate),dueDate:new Date(t.dueDate).toString(),durationDate:a,dossierId:t.dossierId,dossierIdCTN:t.dossierIdCTN,dossierStatus:t.dossierStatus,dossierNo:t.dossierNo,govAgencyName:t.govAgencyName,dossierStatusText:t.dossierStatusText,submitDate:t.submitDate};e.thongTinChungHoSo=i},setThongTinChungHoSoDueDate(e,t){e.thongTinChungHoSo.dueDate=t},setThongTinChungHoSoDurationDate(e,t){e.thongTinChungHoSo.durationDate=t},setThongTinChungHoSoReceiveDate(e,t){e.thongTinChungHoSo.receiveDate=t},setserviceConfigItems(e,t){e.serviceConfigItems=t},setServiceOptionItems(e,t){e.serviceOptionItems=t},setServiceOptionThongTinChungHoSo(e,t){e.thongTinChungHoSo.serviceOption=t},setCitys(e,t){e.citys=t},dossierSelected(e,t){e.dossierSelected=t},actionActive(e,t){e.actionActive=t},setResultServices(e,t){e.resultServices=t},setDossierTemplates(e,t){e.dossierTemplates=t},setDossier(e,t){e.dossier=t},setDanhSachHoSo(e,t){e.danhSachHoSo=t},setCityVal(e,t){e.cityVal=t},setDistrictVal(e,t){e.districtVal=t},setWardVal(e,t){e.wardVal=t},setDossierFiles(e,t){e.dossierFiles=t},setSameUser(e,t){e.thongTinNguoiNopHoSo.sameUser=t},setSameUser2(e,t){e.sameUser2=t},setPrintPH(e,t){e.printPH=t},setlistHistoryProcessingItems(e,t){e.listHistoryProcessingItems=t},setUsersComment(e,t){e.usersComment=t},setCommentItems(e,t){e.commentItems=t},setKysoSuccess(e,t){e.kysoSuccess=t},setActiveGetCounter(e,t){e.activeGetCounter=t},setActiveLoadingDataHoSo(e,t){e.activeLoadingDataHoSo=t},setDataCreateDossier(e,t){e.dataCreateDossier=t},setPaymentProfile(e,t){e.paymentProfile=t},setPaymentFileName(e,t){e.paymentFileName=t},setApplicantBussinessExit(e,t){e.applicantBussinessExit=t},setApplicantNote(e,t){e.applicantNote=t},setApplicantId(e,t){e.applicantId=t}},getters:{loading(e){return e.loading},loadingTable(e){return e.loadingTable},loadingGov(e){return e.loadingGov},error(e){return e.error},index(e){return e.index},dossierSelected(e){return e.dossierSelected},actionActive(e){return e.actionActive},loadingMenuConfigToDo(e){return new Promise((e,t)=>{store.dispatch("loadMenuConfigToDo").then(function(t){e(t)})})},loadingInitData(e){return console.log("loadingInitDataloadingInitDataloadingInitDataloadingInitData: ",e.initData),e.initData},loadingDynamicBtn(e){return e.loadingDynamicBtn},loadingListThuTucHanhChinh(e){store.dispatch("loadListThuTucHanhChinh")},lePhi(e){return e.lePhi},isDetail(e){return e.isDetail},dossierTemplateName(e){return e.dossierTemplateName},thongTinChungHoSo(e,t){return e.thongTinChungHoSo},thongTinChuHoSo(e){return e.thongTinChuHoSo},thongTinChuHoSoBindChuyenPhat(e){return e.thongTinChuHoSoBindChuyenPhat},kysoSuccess(e){return e.kysoSuccess},activeGetCounter(e){return e.activeGetCounter},activeLoadingDataHoSo(e){return e.activeLoadingDataHoSo},thanhPhanHoSo(e){return e.thanhPhanHoSo},thongTinNguoiNopHoSo(e){return e.thongTinNguoiNopHoSo},dichVuChuyenPhatKetQua(e){return e.dichVuChuyenPhatKetQua},viaPostal(e){return e.viaPostal},serviceOptionItems(e){return e.serviceOptionItems},getDictItems(e){return t=>{return"ADMINISTRATIVE_REGION"===t.collectionCode&&0===t.level?null==e.citys?store.dispatch("loadDictItems",t):new Promise((t,a)=>{t({total:e.citys.length,data:e.citys})}):store.dispatch("loadDictItems",t)}},getDataCreateFile(e){return e.dataCreateFile},getCheckInput(e){return e.checkInput},getUsersNextAction(e){return e.usersNextAction},getStepOverdueNextAction(e){return e.stepOverdueNextAction},resultServices(e){return e.resultServices},dossierTemplates(e){return e.dossierTemplates},dataDetailDossier(e){return e.dossier},dossier(e){return e.dossier},getCityVal(e){return e.cityVal},getDistrictVal(e){return e.districtVal},getWardVal(e){return e.wardVal},dossierFiles(e){return e.dossierFiles},sameUser2(e){return e.sameUser2},getVnpostCodeItems(e){return e.vnpostCodeItems},listHistoryProcessingItems(e){return e.listHistoryProcessingItems},subStatusNew(e){return e.subStatusNew},usersComment(e){return e.usersComment},commentItems(e){return e.commentItems},dataPhanCong(e){return e.data_phancong},getDataCreateDossier(e){return e.dataCreateDossier},getPaymentProfile(e){return e.paymentProfile},getPaymentFileName(e){return e.paymentFileName},getUser(e){return e.user},getApplicantIdNo(e){return e.applicantId},getApplicantNote(e){return e.applicantNote},getApplicantBussinessExit(e){return e.applicantBussinessExit}}})},"56d7":function(e,t,a){"use strict";a.r(t);a("0f18");var i=a("a026"),s=a("bb71");a("74ef");i["a"].use(s["a"],{theme:{primary:"#001f4d",secondary:"#424242",accent:"#001f4d",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"},customProperties:!0,iconfont:"md"});var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{attrs:{id:"app_dynamic_report"}},[a("v-navigation-drawer",{attrs:{app:"",clipped:"",floating:"",width:"240"}}),a("v-content",[a("router-view")],1)],1)},n=[],r={data:()=>({})},l=r,d=a("2877"),c=a("6544"),p=a.n(c),u=a("7496"),m=a("549c"),h=a("f774"),_=Object(d["a"])(l,o,n,!1,null,null,null);_.options.__file="App.vue";var g=_.exports;p()(_,{VApp:u["a"],VContent:m["a"],VNavigationDrawer:h["a"]});var v=a("8c4f"),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v("\n 55555555555555\n  "),a("v-layout",{attrs:{wrap:""}},[a("div",e._l(e.dossierCounting,function(t,i){return a("v-chip",{key:i},["deleted"===t.key?a("v-avatar",[a("v-icon",{attrs:{size:"16"}},[e._v("delete")])],1):a("v-avatar",[e._v(e._s(t.count))]),e._v("\n        "+e._s(t.title)+"\n      ")],1)}),1)])],1)},y=[],D={props:["index"],data:()=>({dossierCounting:[]})},T=D,C=a("8212"),x=a("cc20"),P=a("132d"),I=a("a722"),b=Object(d["a"])(T,f,y,!1,null,null,null);b.options.__file="Landing.vue";var w=b.exports;p()(b,{VAvatar:C["a"],VChip:x["a"],VIcon:P["a"],VLayout:I["a"]});var E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v("\n  uuuttttttttttt 12312 3123  1231\n  "),a("v-layout",{attrs:{wrap:""}},[a("div",e._l(e.dossierCounting,function(t,i){return a("v-chip",{key:i},["deleted"===t.key?a("v-avatar",[a("v-icon",{attrs:{size:"16"}},[e._v("delete")])],1):a("v-avatar",[e._v(e._s(t.count))]),e._v("\n        "+e._s(t.title)+"\n      ")],1)}),1)])],1)},S=[],N={props:["index"],data:()=>({dossierCounting:[]})},F=N,A=Object(d["a"])(F,E,S,!1,null,null,null);A.options.__file="TiepNhanHoSoDetail.vue";var k=A.exports;p()(A,{VAvatar:C["a"],VChip:x["a"],VIcon:P["a"],VLayout:I["a"]});var O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v("\n  9816313910231203\n")])},M=[],U={props:["index"],data:()=>({})},L=U,V=Object(d["a"])(L,O,M,!1,null,null,null);V.options.__file="HoanThienBoSungHoSoDetail.vue";var B=V.exports,R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v("\n  13123\n")])},H=[],$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form-chitiet"},[a("div",[a("v-tabs",{attrs:{"icons-and-text":""},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("v-tabs-slider",{attrs:{color:"primary"}}),a("v-tab",{key:1,attrs:{href:"#tabs-1"},on:{click:function(t){e.getNextActions()}}},[a("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{flat:""}},[3===e.originality?a("span",[e._v("XỬ LÝ HỒ SƠ")]):a("span",[e._v("CHUẨN BỊ HỒ SƠ")])])],1),a("v-tab",{key:2,attrs:{href:"#tabs-2"},on:{click:function(t){e.loadTPHS()}}},[a("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{flat:""}},[e.thongTinChiTietHoSo.finishDate?a("span",[e._v("THÀNH PHẦN HỒ SƠ VÀ KẾT QUẢ")]):a("span",[e._v("THÀNH PHẦN HỒ SƠ")])])],1),e.paymentDetail?a("v-tab",{key:3,attrs:{href:"#tabs-3"},on:{click:function(t){e.loadThanhToan()}}},[a("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{flat:""}},[e._v("\n          THANH TOÁN\n        ")])],1):e._e(),1!==e.originality&&e.listLienThong.length>0?a("v-tab",{key:4,attrs:{href:"#tabs-4"},on:{click:function(t){e.loadHoSoLienThong()}}},[a("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{flat:""}},[e._v("\n          LIÊN THÔNG\n        ")])],1):e._e(),1!==e.originality?a("v-tab",{key:5,attrs:{href:"#tabs-5"},on:{click:function(t){e.loadDossierActions()}}},[a("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{flat:""}},[e._v("\n          TIẾN TRÌNH THỤ LÝ\n        ")])],1):e._e(),a("v-tabs-items",{staticStyle:{overflow:"visible!important"},attrs:{"reverse-transition":"fade-transition",transition:"fade-transition"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("v-tab-item",{key:1,attrs:{value:"tabs-1","reverse-transition":"fade-transition",transition:"fade-transition"}},[a("div",{staticClass:"px-4 pt-2"},[e.btnStateVisible&&3===e.originality&&!e.thongTinChiTietHoSo.finishDate?a("div",{staticClass:"px-2 py-2",style:{border:e.filterNextActionEnable(e.btnDossierDynamics)||e.usersNextAction&&Array.isArray(e.usersNextAction)&&e.usersNextAction.length>0?"1px solid #4caf50":""}},[a("p",{staticClass:"mb-2"},[a("span",[e._v("Chuyển đến bởi: ")]),a("b",[e._v(" "+e._s(e.thongTinChiTietHoSo.lastActionUser))]),e.thongTinChiTietHoSo.lastActionNote&&"null"!==e.thongTinChiTietHoSo.lastActionNote?a("span",[a("span",[e._v(" - Ý kiến: ")]),a("span",{staticStyle:{color:"#0b72ba"}},[e._v(" "+e._s(e.thongTinChiTietHoSo.lastActionNote))])]):e._e()]),a("v-layout",{staticClass:"mb-0",attrs:{wrap:"",xs12:""}},[a("v-flex",{staticStyle:{width:"calc(100% - 100px)"}},[a("span",[e._v("Người thực hiện:  ")]),e.usersNextAction&&Array.isArray(e.usersNextAction)&&e.usersNextAction.length>0?a("span",[e._l(e.usersNextAction,function(t,i){return a("span",{key:t.userId},[e._v("\n                       "),a("b",[e._v(e._s(t.userName))]),i!==e.usersNextAction.length-1?a("span",[e._v(",")]):e._e()])}),e.stepOverdueNextAction?a("span",[e._v(" - ")]):e._e(),a("span",{style:e.stepOverdueNextAction&&e.stepOverdueNextAction.indexOf("Quá hạn")<0?"color:green":"color:red"},[e._v("\n                      "+e._s(e.stepOverdueNextAction)+"\n                    ")])],2):e._e()]),a("v-flex",{staticClass:"text-xs-right",staticStyle:{width:"100px"}},[a("v-btn",{staticClass:"mx-0 my-0",staticStyle:{height:"26px"},attrs:{disabled:!1===e.checkPemissionPhanCongLai(e.currentUser)&&String(e.currentUser["userId"])!==String(e.thongTinChiTietHoSo.lastActionUserId),small:"",color:"primary"},on:{click:e.reAsign}},[String(e.currentUser["userId"])===String(e.thongTinChiTietHoSo.lastActionUserId)||e.getUser("Administrator_data")||e.getUser("Administrator")?a("span",[e._v("Phân công lại")]):e._e(),e.getUser("Administrator_data")||e.getUser("Administrator")||String(e.currentUser["userId"])===String(e.thongTinChiTietHoSo.lastActionUserId)||!e.checkPemissionPhanCongLai(e.currentUser)?e._e():a("span",[e._v("Ủy quyền")])])],1)],1)],1):e._e(),e.thongTinChiTietHoSo.finishDate&&e.btnStateVisible?a("div",{staticClass:"px-2 py-2",staticStyle:{border:"1px solid #4caf50"}},[a("p",{staticClass:"mb-2"},[e._v("\n                Hồ sơ đã hoàn thành quá trình xử lý\n              ")])]):e._e()]),0!==e.checkInput&&e.filterNextActionEnable(e.btnDossierDynamics)?a("div",{staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",{key:1,attrs:{"hide-actions":""}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),2===e.checkInput?a("span",[e._v("Chỉnh sửa thành phần hồ sơ")]):a("span",[e._v("Kiểm tra thành phần hồ sơ")]),e._v("     \n                ")]),a("thanh-phan-ho-so",{ref:"thanhphanhoso",attrs:{checkInput:e.checkInput,onlyView:!1,id:"ci",partTypes:e.inputTypes}})],1)],1)],1):e._e(),e.btnStateVisible?a("div",{staticClass:"px-4 py-3",staticStyle:{"border-bottom":"1px solid #dddddd"}},[e._l(e.btnDossierDynamics,function(t,i){return t.enable>0||"special"===t["autoEvent"]&&e.thongTinChiTietHoSo["permission"].indexOf("write")>=0?a("v-btn",{key:i,staticClass:"ml-0 mr-2",class:{deactive__btn:String(e.btnIndex)!==String(i)},attrs:{color:"primary",loading:e.loadingAction&&i===e.btnIndex,disabled:e.loadingAction||2===t.enable},nativeOn:{click:function(a){e.processPullBtnDetail(t,i)}}},[e._v("\n              "+e._s(t.actionName)+"\n              "),a("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])]):e._e()}),e._l(e.btnPlugins,function(t,i){return a("v-btn",{key:i,staticClass:"ml-0 mr-2",attrs:{color:"primary",loading:e.loadingPlugin,disabled:e.loadingPlugin},nativeOn:{click:function(a){e.processPullBtnplugin(t,i)}}},[e._v("\n              "+e._s(t.pluginName)+"\n              "),a("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])])}),e.btnStepsDynamics.length>0&&e.thongTinChiTietHoSo["permission"].indexOf("write")>=0?a("v-menu",{staticStyle:{display:"inline-block",position:"relative !important"},attrs:{bottom:"","offset-y":""}},[a("v-btn",{staticClass:"deactive__btn",attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[e._v("Khác   "),a("v-icon",{attrs:{size:"18"}},[e._v("arrow_drop_down")])],1),a("v-list",e._l(e.btnStepsDynamics,function(t,i){return a("v-list-tile",{key:i,on:{click:function(a){e.btnActionEvent(t,i)}}},[a("v-list-tile-title",[e._v(e._s(t.title))])],1)}),1)],1):e._e()],2):e._e(),e.loadingAction?a("content-placeholders",[a("content-placeholders-img"),a("content-placeholders-heading")],1):e._e(),e.dialogActionProcess&&!e.loadingAction?a("v-layout",{attrs:{wrap:""}},[a("div",{staticClass:"px-4 pt-0 pb-2",staticStyle:{width:"100%","border-bottom":"1px solid #dddddd"}},[e.dialogActionProcess?a("v-btn",{staticClass:"ml-0 mr-2",attrs:{color:"primary",loading:e.loadingActionProcess,disabled:e.loadingActionProcess},nativeOn:{click:function(t){e.processAction(e.dossierItemDialogPick,e.itemDialogPick,e.resultDialogPick,e.indexDialogPick,!1)}}},[a("v-icon",[e._v("save")]),e._v(" \n                Xác nhận\n                "),a("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])],1):e._e()],1)]):e._e(),e.btnStateVisible?e._e():a("v-alert",{staticClass:"mx-3",attrs:{outline:"",color:e.alertObj.color,icon:e.alertObj.icon,value:!0}},[e._v("\n            "+e._s(e.alertObj.message)+"\n          ")]),e.rollbackable||e.printDocument?a("div",{staticClass:"py-2",staticStyle:{width:"100%","border-bottom":"1px solid #dddddd"}},[e.printDocument?a("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.printViewDocument()}}},[e._v("In văn bản hành chính")]):e._e()],1):e._e()],1),a("v-tab-item",{key:2,attrs:{value:"tabs-2","reverse-transition":"fade-transition",transition:"fade-transition"}},[e._v("\n          123\n        ")]),a("v-tab-item",{key:3,attrs:{value:"tabs-3","reverse-transition":"fade-transition",transition:"fade-transition"}},[e._v("\n          123\n        ")]),e.listLienThong.length>0?a("v-tab-item",{key:4,attrs:{value:"tabs-4","reverse-transition":"fade-transition",transition:"fade-transition"}},[e._v("\n          123\n        ")]):e._e(),1!==e.originality?a("v-tab-item",{key:5,attrs:{value:"tabs-5","reverse-transition":"fade-transition",transition:"fade-transition"}},[e._v("\n          13123\n        ")]):e._e()],1)],1)],1)])},K=[],W=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"comment-temp"},[a("div",[a("v-expansion-panel",{staticClass:"expansion-pl-transparent",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("v-card",{staticClass:"comments__container"},[a("v-card-text",{staticClass:"pl-4"},[a("div",{attrs:{id:"comments-container-el"}})])],1)],1)],1)],1)])},q=[],j=a("854a"),Y=a.n(j);Y.a.options={closeButton:!0,timeOut:"10000"};var z={props:["classPK","className"],data:()=>({usersComment:[],comment:[],argShowMore:!0,checkOpinion:!0,validFileUpload:!0,fileTypeAllow:["png","jpg","jpeg","pdf","docx","doc","xls","xlsx","txt","rtf"]}),computed:{loading(){return this.$store.getters.loading},initData(){return this.$store.getters.loadingInitData}},watch:{classPK(e){var t=this;t.$store.dispatch("loadUsersComment",e).then(e=>{t.usersComment=e,t.initComment()}).catch(e=>{t.initComment()})}},created(){},mounted(){},methods:{runComment(){var e=this;e.classPK&&e.initComment()},validateFile(e){let t=this,a=e.file.name?e.file.name.split("."):"",i=a?a[a.length-1]:"",s=t.fileTypeAllow,o=10,n=s?s.filter(function(e){return e===i}):"";t.validFileUpload=!1,n&&n.length>0?Number(e.file.size)<=1048576*o?t.validFileUpload=!0:(Y.a.error("Tài liệu tải lên dung lượng tối đa là "+o+" MB"),t.validFileUpload=!1):(Y.a.error("Tài liệu tải lên chỉ chấp nhận các định dạng "+s.toString()),t.validFileUpload=!1)},initComment:function(){var e=this;window.$("#comments-container-el").comments({profilePictureURL:"https://png.icons8.com/material/50/000000/guest-male.png",textareaRows:2,enableAttachments:!0,enableHashtags:!0,enablePinging:!1,postCommentOnEnter:!1,forceResponsive:!1,readOnly:!1,textareaPlaceholderText:"Thêm bình luận mới",newestText:"Mới nhất",oldestText:"Cũ nhất",popularText:"Phổ biến",attachmentsText:"Đính kèm",sendText:"Gửi",replyText:"Trả lời",editText:"Sửa",editedText:"Đã sửa",youText:"Bạn",saveText:"Ghi lại",deleteText:"Xóa",hideRepliesText:"Ẩn câu trả lời",noCommentsText:"Không có bình luận nào",noAttachmentsText:"Không có tệp đính kèm",attachmentDropText:"Kéo thả tệp đính kèm",fieldMappings:{id:"commentId",parent:"parent",userId:"userId",created:"createdDate",modified:"modifiedDate",content:"content",fileURL:"fileUrl",fileMimeType:"fileType",fileName:"fileName",pings:"pings",creator:"userId",fullname:"fullname",profileURL:"profileUrl",profilePictureURL:"pictureUrl",isNew:"isNew",createdByAdmin:"isAdmin",createdByCurrentUser:"createdByCurrentUser",upvoteCount:"upvoteCount",userHasUpvoted:"userHasUpvoted",email:"email",opinion:"opinion",className:"className",classPK:"classPK"},timeFormatter:function(e){if(e){let t=new Date(e);return t.setHours(t.getHours()-7),`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()} ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`}return""},getUsers:function(t,a){t(e.usersComment)},getComments:function(t,a){var i={classPK:e.classPK,className:e.className};let s=e.$store.dispatch("loadCommentItems",i);s.then(a=>{var i=[];window.$.each(a,function(t,a){e.comment=a,e.formatComment(e.comment),i.push(e.comment)}),t(i)}).catch(e=>{t([]),a()})},postComment:function(t,a,i){t.classPK=e.classPK,t.className=e.className,t.opinion=document.getElementById("opinion").checked,e.$store.dispatch("postComment",t).then(t=>{t.opinion&&window.$(".opinion").hide(),document.getElementById("opinion").checked=!1,e.comment=t,e.formatComment(e.comment),a(e.comment)})},putComment:function(t,a,i){t.classPK=e.classPK,t.className=e.className,e.$store.dispatch("putComment",t).then(t=>{e.comment=t,e.formatComment(e.comment),a(e.comment)})},deleteComment:function(t,a,i){t.classPK=e.classPK,t.className=e.className,e.$store.dispatch("deleteComment",t).then(e=>{a()}).catch(e=>{i(),console.log(e)})},upvoteComment:function(t,a,i){t.classPK=e.classPK,t.className=e.className,e.$store.dispatch("upvoteComment",t).then(t=>{e.comment=t,e.formatComment(e.comment),a(e.comment)}).catch(e=>{console.log(e)})},uploadAttachments:function(t,a,i){var s=0,o=[],n=function(){s++,s===t.length&&(0===o.length?i():a(o))};window.$(t).each(function(t,a){var i=new FormData;window.$(Object.keys(a)).each(function(e,t){var s=a[t];s&&i.append(t,s)}),i.append("file",a.file),i.append("className",e.className),i.append("classPK",e.classPK),i.append("parent",null!=a.parent?a.parent:0),i.append("fileName",a.file.name),i.append("fileType",a.file.type),i.append("fileSize",a.file.size),i.append("pings",a.pings.join()),i.append("opinion",document.getElementById("opinion").checked),i.append("email",""),i.append("fullname",e.initData.user.userName),i.append("opinion",document.getElementById("opinion").checked);let s={file:a.file};e.validateFile(s),e.validFileUpload?window.$.ajax({url:e.initData.commentApi+"/uploads",dataType:"json",type:"POST",headers:{groupId:e.initData.groupId},data:i,cache:!1,contentType:!1,processData:!1,success:function(t){t.opinion&&window.$(".opinion").hide(),document.getElementById("opinion").checked=!1,e.formatComment(t),o.push(e.comment),n(),t.opinion&&window.$(".opinion").hide(),document.getElementById("opinion").checked=!1},error:function(e,t){n()}}):n()})}})},formatComment:function(e){var t=this;t.comment=e,0===e.parent&&(t.comment.parent=null),""===e.fileName&&(t.comment.fileName=null),""===e.fileType&&(t.comment.fileType=null),""===e.fileUrl&&(t.comment.fileUrl=null),""===e.pictureUrl&&(t.comment.pictureUrl="https://png.icons8.com/material/50/000000/guest-male.png"),t.comment.fullname=e.fullname,t.comment.opinion=e.opinion,t.comment.pings=e.pings.toString().split(","),t.comment.createdDate=t.comment.createDate,t.comment.modifiedDate=t.comment.modifiedDate},dateTimeView(e){if(e){let t=new Date(e);return`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()} ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`}return""}},filters:{dateTimeView(e){if(e){let t=new Date(e);return`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()}  ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`}return""}}},G=z,J=a("b0af"),Q=a("99d9"),X=a("cd55"),Z=a("49e2"),ee=Object(d["a"])(G,W,q,!1,null,null,null);ee.options.__file="Comment.vue";var te=ee.exports;p()(ee,{VCard:J["a"],VCardText:Q["b"],VExpansionPanel:X["a"],VExpansionPanelContent:Z["a"]});var ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-expansion-panel",{attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),e._v("Thông tin chung hồ sơ")]),a("v-card",[a("v-card-text",{staticClass:"py-0"},[a("v-layout",{staticClass:"px-2 py-2",attrs:{wrap:""}},[1!==e.originality?a("v-flex",{staticClass:"pr-3",attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[e._v("Chủ hồ sơ: ")]),a("span",{staticClass:"pl-0 text-bold"},[e._v(" "+e._s(e.thongTinChiTietHoSo.applicantName))])]),a("div",{staticClass:"xs12 sm12 pb-1 overHidden"},[a("span",{staticClass:"pr-2"},[e._v("Địa chỉ: ")]),a("v-tooltip",{attrs:{top:""}},[a("span",{staticClass:"text-bold ",attrs:{slot:"activator"},slot:"activator"},[e._v(e._s(e.thongTinChiTietHoSo.address)+" "+e._s(e.thongTinChiTietHoSo.wardName)+", "+e._s(e.thongTinChiTietHoSo.districtName)+", "+e._s(e.thongTinChiTietHoSo.cityName))]),a("span",{staticClass:"pl-0"},[e._v(" "+e._s(e.thongTinChiTietHoSo.address)+" "+e._s(e.thongTinChiTietHoSo.wardName)+", "+e._s(e.thongTinChiTietHoSo.districtName)+", "+e._s(e.thongTinChiTietHoSo.cityName))])])],1),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pl-0"},[e._v("Thư điện tử: ")]),a("span",{staticClass:"pl-0 text-bold "},[e._v(" "+e._s(e.thongTinChiTietHoSo.contactEmail)+" ")])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[e._v("Điện thoại: ")]),a("span",{staticClass:"pl-0 text-bold "},[e._v(" "+e._s(e.thongTinChiTietHoSo.contactTelNo)+" ")])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("v-menu",{staticStyle:{position:"relative !important"},attrs:{"offset-y":""}},[a("span",{staticClass:"pr-2",attrs:{slot:"activator"},slot:"activator"},[e._v("\n                  Thông tin người nộp\n                  "),a("v-icon",{staticStyle:{position:"absolute",right:"-12px",top:"-2px"},attrs:{color:"blue",size:"22"}},[e._v("arrow_drop_down")])],1),a("v-list",{staticClass:"px-3 py-2"},[a("div",{staticClass:"xs12 sm12 py-1"},[a("span",{staticClass:"pr-2"},[e._v("Tên người nộp:")]),e.thongTinChiTietHoSo.online?a("span",{staticClass:"pl-0 text-bold"},[e._v(" \n                      "+e._s(e.thongTinChiTietHoSo.applicantName)+"\n                    ")]):a("span",{staticClass:"pl-0 text-bold "},[e._v(" "+e._s(e.thongTinChiTietHoSo.delegateName)+" ")])]),a("div",{staticClass:"xs12 sm12 py-1"},[a("span",{staticClass:"pr-2"},[e._v("Địa chỉ:")]),e.thongTinChiTietHoSo.online?a("span",{staticClass:"pl-0 text-bold"},[e._v(" \n                      "+e._s(e.thongTinChiTietHoSo.address)+" "+e._s(e.thongTinChiTietHoSo.wardName)+", "+e._s(e.thongTinChiTietHoSo.districtName)+", "+e._s(e.thongTinChiTietHoSo.cityName)+"\n                    ")]):a("span",{staticClass:"pl-0 text-bold"},[e._v(" \n                      "+e._s(e.thongTinChiTietHoSo.delegateAddress)+" "+e._s(e.thongTinChiTietHoSo.delegateWardName)+", "+e._s(e.thongTinChiTietHoSo.delegateDistrictName)+", "+e._s(e.thongTinChiTietHoSo.delegateCityName)+"\n                    ")])]),a("div",{staticClass:"xs12 sm12 py-1"},[a("span",{staticClass:"pr-2"},[e._v("Thư điện tử:")]),e.thongTinChiTietHoSo.online?a("span",{staticClass:"pl-0 text-bold "},[e._v(" "+e._s(e.thongTinChiTietHoSo.contactEmail)+" ")]):a("span",{staticClass:"pl-0 text-bold "},[e._v(" "+e._s(e.thongTinChiTietHoSo.delegateEmail)+" ")])]),a("div",{staticClass:"xs12 sm12 py-1"},[a("span",{staticClass:"pr-2"},[e._v("Số điện thoại:")]),e.thongTinChiTietHoSo.online?a("span",{staticClass:"pl-0 text-bold "},[e._v(" "+e._s(e.thongTinChiTietHoSo.contactTelNo)+" ")]):a("span",{staticClass:"pl-0 text-bold "},[e._v(" "+e._s(e.thongTinChiTietHoSo.delegateTelNo)+" ")])])])],1)],1)]):e._e(),1===e.originality?a("v-flex",{staticClass:"pr-3",attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[e._v("Mã hồ sơ: ")]),a("span",{staticClass:"pl-0 text-bold "},[e._v("  "+e._s(e.thongTinChiTietHoSo.dossierNo)+" ")])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[e._v("Cơ quan: ")]),a("span",{staticClass:"pl-0 text-bold "},[e._v("  "+e._s(e.thongTinChiTietHoSo.govAgencyName)+" ")])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[e._v("Trạng thái: ")]),a("span",{staticClass:"pl-0 text-bold "},[e._v(" "+e._s(e.thongTinChiTietHoSo.dossierStatusText)+" ")])])]):e._e(),1!==e.originality?a("v-flex",{attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[e._v("Ngày gửi trực tuyến: ")]),e.thongTinChiTietHoSo.online?a("span",{staticClass:"pl-0 text-bold"},[e._v(" "+e._s(e.thongTinChiTietHoSo.submitDate)+" ")]):a("span",{staticClass:"pl-0 text-bold"},[e._v(" Một cửa ")])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[e._v("Ngày tiếp nhận: ")]),a("span",{staticClass:"pl-0 text-bold "},[e._v(" "+e._s(e.thongTinChiTietHoSo.receiveDate))])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[e._v("Thời hạn giải quyết: ")]),e.thongTinChiTietHoSo.durationCount>0?a("span",{staticClass:"pl-0 text-bold "},[e._v(" \n                "+e._s(e.durationText(e.thongTinChiTietHoSo.durationUnit,e.thongTinChiTietHoSo.durationCount))+" làm việc \n              ")]):a("span",{staticClass:"pl-0 text-bold "},[e._v("\n                Không quy định\n              ")])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[e._v("Ngày hẹn trả: ")]),a("span",{staticClass:"pl-0 text-bold "},[e._v(" "+e._s(e.thongTinChiTietHoSo.dueDate))])])]):a("v-flex",{attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[e._v("Ngày gửi: ")]),e.thongTinChiTietHoSo.online?a("span",{staticClass:"pl-0 text-bold"},[e._v(" "+e._s(e.thongTinChiTietHoSo.submitDate)+" ")]):a("span",{staticClass:"pl-0 text-bold"},[e._v(" Một cửa ")])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[e._v("Ngày tiếp nhận: ")]),a("span",{staticClass:"pl-0 text-bold "},[e._v(" "+e._s(e.thongTinChiTietHoSo.receiveDate))])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[e._v("Ngày hẹn trả: ")]),a("span",{staticClass:"pl-0 text-bold "},[e._v(" "+e._s(e.thongTinChiTietHoSo.dueDate))])])]),1!==e.originality?a("v-flex",{attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[e._v("Mã hồ sơ: ")]),a("span",{staticClass:"pl-0 text-bold "},[e._v("  "+e._s(e.thongTinChiTietHoSo.dossierNo)+" ")])]),e.thongTinChiTietHoSo.originDossierNo?a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[e._v("Hồ sơ gốc: ")]),a("span",{staticClass:"pl-0 text-bold "},[e._v("  "+e._s(e.thongTinChiTietHoSo.originDossierNo)+" ")])]):e._e(),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[e._v("Trạng thái: ")]),a("span",{staticClass:"pl-0 text-bold "},[e._v(" "+e._s(e.thongTinChiTietHoSo.dossierStatusText)+" ")])]),e.thongTinChiTietHoSo.dossierNote&&"null"!==e.thongTinChiTietHoSo.dossierNote?a("div",{staticClass:"xs12 sm12 pb-1",staticStyle:{color:"#0b72ba"}},[e._v("Ghi chú:")]):e._e(),e.thongTinChiTietHoSo.dossierNote&&"null"!==e.thongTinChiTietHoSo.dossierNote?a("div",{staticClass:"xs12 sm12 pb-1 overHidden"},[a("v-tooltip",{attrs:{top:""}},[a("span",{staticClass:"text-bold ",attrs:{slot:"activator"},slot:"activator"},[e._v(e._s(e.thongTinChiTietHoSo.dossierNote)+" ")]),a("span",{staticClass:"pl-0"},[e._v(" "+e._s(e.thongTinChiTietHoSo.dossierNote)+" ")])])],1):e._e()]):a("v-flex",{attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"xs12 sm12 pb-1",staticStyle:{color:"#0b72ba"}},[e._v("Ghi chú:")]),e.thongTinChiTietHoSo.dossierNote&&"null"!==e.thongTinChiTietHoSo.dossierNote?a("div",{staticClass:"xs12 sm12 pb-1 overHidden"},[a("v-tooltip",{attrs:{top:""}},[a("span",{staticClass:"text-bold ",attrs:{slot:"activator"},slot:"activator"},[e._v(e._s(e.thongTinChiTietHoSo.dossierNote)+" ")]),a("span",{staticClass:"pl-0"},[e._v(" "+e._s(e.thongTinChiTietHoSo.dossierNote)+" ")])])],1):e._e(),e.thongTinChiTietHoSo.extendDate?a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pl-0 text-bold"},[e._v("Hẹn lại: "+e._s(e.thongTinChiTietHoSo.extendDate))])]):e._e()])],1)],1)],1)],1)],1)},ie=[],se={props:{detailDossier:{type:Object,default:()=>{}}},watch:{detailDossier(e){console.log("watch",e);var t=this;t.thongTinChiTietHoSo=e}},components:{},data:()=>({thongTinChiTietHoSo:{},showContactDetail:!1}),computed:{loading(){return this.$store.getters.loading},originality(){var e=this;return e.getOriginality()}},created(){var e=this;e.thongTinChiTietHoSo=e.detailDossier},mounted(){var e=this;e.thongTinChiTietHoSo=e.detailDossier},methods:{initData(e){var t=this;t.$store.dispatch("getDetailDossier",e).then(e=>{t.thongTinChiTietHoSo=e,console.log("thongTinChiTietHoSo",t.thongTinChiTietHoSo)})},goBack(){window.history.back()},durationText(e,t){var a;if(1===e&&t>8){let e,i=Math.floor(t/8)+" ngày";e=t%8!==0?8*(t/8-Math.floor(t/8))+" giờ":"",a=`${i} ${e}`}else 0===e?a=t+" ngày":1===e&&t<=8&&(a=t+" giờ");return a}},filters:{dateTimeView(e){if(e){let t=new Date(e);return`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()} | ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`}return""}}},oe=se,ne=a("0e8f"),re=a("8860"),le=a("e449"),de=a("3a2f"),ce=Object(d["a"])(oe,ae,ie,!1,null,null,null);ce.options.__file="ThongTinCoBanHoSo.vue";var pe=ce.exports;p()(ce,{VCard:J["a"],VCardText:Q["b"],VExpansionPanel:X["a"],VExpansionPanelContent:Z["a"],VFlex:ne["a"],VIcon:P["a"],VLayout:I["a"],VList:re["a"],VMenu:le["a"],VTooltip:de["a"]});var ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"phancong",staticStyle:{"background-color":"white",width:"100%"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),e._v("Chọn người thực hiện\n      ")]),a("v-card",[1===e.type?a("div",{staticClass:"px-4 py-1"},[a("v-layout",{attrs:{wrap:""}},e._l(e.data_phancong,function(t,i){return a("v-checkbox",{key:t.userId,staticStyle:{display:"inline-block","min-width":"190px","max-width":"190px"},attrs:{slot:"activator",label:t.userName,title:t.userName},on:{change:function(t){e.changeAssigned(t,i)}},slot:"activator",model:{value:t.assigned,callback:function(a){e.$set(t,"assigned",a)},expression:"item.assigned"}})}),1),e.assignValidate?e._e():a("span",{staticClass:"ml-3",staticStyle:{color:"#f44336"}},[e._v("* Yêu cầu chọn người để thực hiện")])],1):a("v-card-text",{staticClass:"px-4 py-1"},[a("v-layout",{staticClass:"my-1",attrs:{wrap:""}},e._l(e.data_phancong,function(t,i){return a("div",{key:t.userId,staticClass:"ml-3"},[a("v-layout",{attrs:{wrap:""}},[a("v-tooltip",{attrs:{top:""}},[a("v-checkbox",{staticStyle:{"min-width":"150px"},attrs:{slot:"activator",label:t.userName},on:{change:function(t){e.checkAsign(t,i)}},slot:"activator",model:{value:t.assigned,callback:function(a){e.$set(t,"assigned",a)},expression:"item.assigned"}}),a("span",{staticClass:"pl-0"},[e._v(" "+e._s(t.userName)+" ")])],1),a("toggle-button",{staticClass:"mx-1 btn-tgl",attrs:{id:"btn-"+i,title_checked:"Thực hiện",title_unchecked:"Phối hợp",labels:{checked:"TH",unchecked:"PH"},color:{checked:"#7DCE94",unchecked:"#82C7EB"},width:50},on:{change:function(t){e.changeTypeAssign(t,i)}},model:{value:e.presenterAddGroup,callback:function(t){e.presenterAddGroup=t},expression:"presenterAddGroup"}})],1)],1)}),0),e.assignValidate?e._e():a("span",{staticClass:"ml-3",staticStyle:{color:"#f44336"}},[e._v("* Yêu cầu chọn người để thực hiện")])],1)],1)],1)],1)],1)},me=[],he=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{class:e.className,style:e.maxWidth,attrs:{role:"checkbox",title:e.toggled?e.title_checked:e.title_unchecked,"aria-checked":e.ariaChecked}},[a("input",{staticClass:"v-switch-input",attrs:{type:"checkbox"},on:{change:function(t){return t.stopPropagation(),e.toggle(t)}}}),a("div",{staticClass:"v-switch-core",style:e.coreStyle},[a("div",{staticClass:"v-switch-button",style:e.buttonStyle})]),e.labels?[e.toggled?a("span",{staticClass:"v-switch-label v-left",style:e.labelStyle,domProps:{innerHTML:e._s(e.labelChecked)}}):a("span",{staticClass:"v-switch-label v-right",style:e.labelStyle,domProps:{innerHTML:e._s(e.labelUnchecked)}})]:e._e()],2)},_e=[];const ge={colorChecked:"#75C791",colorUnchecked:"#bfcbd9",cssColors:!1,labelChecked:"on",labelUnchecked:"off",width:50,height:22,margin:3},ve=(e,t)=>{return"object"===typeof e&&e.hasOwnProperty(t)},fe=e=>e+"px";var ye={name:"toggle-button",props:{title_checked:"",title_unchecked:"",value:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},sync:{type:Boolean,default:!1},speed:{type:Number,default:300},color:{type:[String,Object],validator(e){return"object"===typeof e?e.checked||e.unchecked:"string"===typeof e}},cssColors:{type:Boolean,default:!1},labels:{type:[Boolean,Object],default:!1,validator(e){return"object"===typeof e?e.checked||e.unchecked:"boolean"===typeof e}},height:{type:Number,default:ge.height},width:{type:Number,default:ge.width}},computed:{className(){let{toggled:e,disabled:t}=this;return["vue-js-switch",{toggled:e,disabled:t}]},ariaChecked(){return this.toggled.toString()},coreStyle(){return{width:fe(this.width),height:fe(this.height),backgroundColor:this.cssColors?null:this.colorCurrent,borderRadius:fe(Math.round(this.height/2))}},maxWidth(){return{width:fe(this.width)+"!important"}},buttonRadius(){return this.height-2*ge.margin},distance(){return fe(this.width-this.height+ge.margin)},buttonStyle(){return{width:fe(this.buttonRadius),height:fe(this.buttonRadius),transition:`transform ${this.speed}ms`,transform:this.toggled?`translate3d(${this.distance}, 3px, 0px)`:null}},labelStyle(){return{lineHeight:fe(this.height)}},colorChecked(){let{color:e}=this;return"object"!==typeof e?e||ge.colorChecked:ve(e,"checked")?e.checked:ge.colorChecked},colorUnchecked(){let{color:e}=this;return ve(e,"unchecked")?e.unchecked:ge.colorUnchecked},colorCurrent(){return this.toggled?this.colorChecked:this.colorUnchecked},labelChecked(){return ve(this.labels,"checked")?this.labels.checked:ge.labelChecked},labelUnchecked(){return ve(this.labels,"unchecked")?this.labels.unchecked:ge.labelUnchecked}},watch:{value(e){this.sync&&(this.toggled=!!e)}},data(){return{toggled:!!this.value}},methods:{toggle(e){this.toggled=!this.toggled,this.$emit("input",this.toggled),this.$emit("change",{value:this.toggled,srcEvent:e})}}},De=ye,Te=Object(d["a"])(De,he,_e,!1,null,null,null);Te.options.__file="toggleButton.vue";var Ce=Te.exports,xe={components:{"toggle-button":Ce},props:{assign_items:{type:Array,default:()=>[]},type:{type:Number,default:()=>1},configNote:{type:Object,default:()=>{}}},model:{prop:"assign_items"},data:()=>({data_phancong:[],assignedtype_items:{2:[{text:"Không có phân công",value:0},{text:"Thực hiện chính",value:1},{text:"Thực hiện phối hợp",value:2}],3:[{text:"Không có phân công",value:0},{text:"Thực hiện chính",value:1},{text:"Thực hiện phối hợp",value:2},{text:"Theo dõi",value:3}]},title_asign:{1:"PHÂN CÔNG NGƯỜI THỰC HIỆN",2:"PHÂN CÔNG THỰC HIỆN, PHỐI HỢP",3:"PHÂN CÔNG THỰC HIỆN, PHỐI HỢP VÀ THEO DÕI"},presenterAddGroup:!0,assignValidate:!0}),created(){setTimeout(function(){window.$(".btn-tgl").addClass("btn-hidden")},200)},mounted(){this.data_phancong=this.assign_items},methods:{changeAssigned(e,t){var a=this;1===a.type&&(a.assign_items[t].assigned=!0===e?1:0)},checkAsign(e,t){var a=this;e?(a.assign_items[t].assigned=1,window.$(`#btn-${t}`).removeClass("btn-hidden")):(a.assign_items[t].assigned=0,window.$(`#btn-${t}`).addClass("btn-hidden"))},changeTypeAssign(e,t){var a=this;e.value?(a.assign_items[t].assigned=1,window.$(`#btn-${t}`).removeClass("btn-hidden")):(a.assign_items[t].assigned=2,window.$(`#btn-${t}`).addClass("btn-hidden"))},doExport(){var e=this;let t=e.assign_items.filter(function(e){return Number(e.assigned)>0});return 0===t.length?(e.assignValidate=!1,e.assignValidate):(e.assignValidate=!0,e.assignValidate)}}},Pe=xe,Ie=a("ac7c"),be=Object(d["a"])(Pe,ue,me,!1,null,null,null);be.options.__file="PhanCongNguoiThucHien.vue";var we=be.exports;p()(be,{VCard:J["a"],VCardText:Q["b"],VCheckbox:Ie["a"],VExpansionPanel:X["a"],VExpansionPanelContent:Z["a"],VIcon:P["a"],VLayout:I["a"],VTooltip:de["a"]});var Ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"taotailieuketqua",staticStyle:{"background-color":"white",width:"100%"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),e._v(" Tài liệu kết quả\n      ")]),a("v-card",e._l(e.createFiles,function(t,i){return a("div",{key:t.partNo+"cr",staticClass:"form_alpaca",staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expaned__list__data",attrs:{value:[!0]}},[a("v-expansion-panel-content",{attrs:{"hide-actions":"",value:!1}},[a("div",{staticStyle:{"background-color":"#fff"},attrs:{slot:"header"},on:{click:function(t){e.stateView=!1}},slot:"header"},[a("div",{staticStyle:{"align-items":"center",background:"#fff","padding-left":"25px"},style:{width:e.checkStyle(t)}},e._l(e.dossierFilesItems,function(i,s){return t.partNo+e.id===i.dossierPartNo+e.id?a("div",{key:s+"cr"},[a("div",{staticStyle:{width:"calc(100% - 370px)",display:"flex","align-items":"center",background:"#fff","padding-left":"25px","font-size":"12px"}},[a("span",{staticClass:"text-bold"},[e._v(e._s(s+1)+". ")]),a("span",{staticClass:"ml-3",staticStyle:{cursor:"pointer"},on:{click:function(t){t.stopPropagation(),e.viewFile2(i)}}},[i.eForm?a("v-icon",[e._v("border_color")]):a("v-icon",[e._v("attach_file")]),e._v("\n                        "+e._s(i.displayName)+" - \n                        "),a("i",[e._v(e._s(i.modifiedDate))])],1)])]):e._e()}),0)]),t.eForm?a("v-card",[a("v-card-text",{staticStyle:{"background-color":"rgba(244, 247, 213, 0.19)"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"text-xs-right",attrs:{xs12:""}},[t.daKhai&&t.eForm?a("v-btn",{attrs:{color:"primary"},on:{click:function(a){e.previewFileEfom(t,i)}}},[e._v("In")]):e._e(),a("div",{attrs:{id:"formAlpaca"+t.partNo+e.id}})],1)],1)],1)],1):e._e()],1)],1)],1)}),0),a("v-dialog",{staticStyle:{overflow:"hidden"},attrs:{"max-width":"900",transition:"fade-transition"},model:{value:e.dialogPDF,callback:function(t){e.dialogPDF=t},expression:"dialogPDF"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("File đính kèm")]),a("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.dialogPDF=!1}}},[a("v-icon",[e._v("clear")])],1),e.dialogPDFLoading?a("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[a("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):e._e(),a("iframe",{directives:[{name:"show",rawName:"v-show",value:!e.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPDFPreview"+e.id,src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1)],1)],1)],1)},Se=[],Ne=a("31a3"),Fe=Ne["a"],Ae=a("8336"),ke=a("12b2"),Oe=a("169a"),Me=a("490a"),Ue=Object(d["a"])(Fe,Ee,Se,!1,null,null,null);Ue.options.__file="TraKetQua.vue";var Le=Ue.exports;p()(Ue,{VBtn:Ae["a"],VCard:J["a"],VCardText:Q["b"],VCardTitle:ke["a"],VDialog:Oe["a"],VExpansionPanel:X["a"],VExpansionPanelContent:Z["a"],VFlex:ne["a"],VIcon:P["a"],VLayout:I["a"],VProgressCircular:Me["a"]});var Ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"payment-info",staticStyle:{width:"100%"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),1===e.data_payment.requestPayment||5===e.data_payment.requestPayment?a("span",[e._v(e._s(e.data_payment.paymentFee))]):e._e(),2===e.data_payment.requestPayment?a("span",[e._v("Lập phiếu thanh toán")]):e._e()]),a("v-card",[a("v-card-text",{staticClass:"pb-1"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[e._v("Lệ phí: ")])],1),a("v-flex",{attrs:{xs12:"",sm3:""}},[1===e.data_payment.editable||3===e.data_payment.editable?a("v-text-field",{directives:[{name:"money",rawName:"v-money",value:e.money,expression:"money"}],attrs:{suffix:"vnđ"},on:{keyup:e.changeFee},model:{value:e.data_payment.feeAmount,callback:function(t){e.$set(e.data_payment,"feeAmount",t)},expression:"data_payment.feeAmount"}}):a("p",{staticClass:"mt-1 mb-0"},[e._v(e._s(e.currency(e.data_payment.feeAmount.toString().replace(/\./g,"")))+"    vnđ")])],1),a("v-flex",{staticClass:"pt-1",attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[e._v("Phí: ")])],1),a("v-flex",{staticClass:"pt-1",attrs:{xs12:"",sm3:""}},[2===e.data_payment.editable||3===e.data_payment.editable?a("v-text-field",{directives:[{name:"money",rawName:"v-money",value:e.money,expression:"money"}],attrs:{suffix:"vnđ"},on:{keyup:e.changeFee},model:{value:e.data_payment.serviceAmount,callback:function(t){e.$set(e.data_payment,"serviceAmount",t)},expression:"data_payment.serviceAmount"}}):a("p",{staticClass:"mt-1 mb-0"},[e._v(e._s(e.currency(e.data_payment.serviceAmount.toString().replace(/\./g,"")))+"    vnđ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}}),2!==e.viaPortal&&"2"!==e.viaPortal||0===e.data_payment.shipAmount?e._e():a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[e._v("Phí chuyển phát: ")])],1),2!==e.viaPortal&&"2"!==e.viaPortal||0===e.data_payment.shipAmount?e._e():a("v-flex",{attrs:{xs12:"",sm3:""}},[1===e.data_payment.editable||3===e.data_payment.editable?a("v-text-field",{directives:[{name:"money",rawName:"v-money",value:e.money,expression:"money"}],attrs:{suffix:"vnđ"},on:{keyup:e.changeFee},model:{value:e.data_payment.shipAmount,callback:function(t){e.$set(e.data_payment,"shipAmount",t)},expression:"data_payment.shipAmount"}}):a("p",{staticClass:"mt-1 mb-0"},[e._v(e._s(e.currency(e.data_payment.shipAmount.toString().replace(/\./g,"")))+"    vnđ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}})],1)],1),a("v-card-text",{staticClass:"pt-0"},[a("v-layout",{attrs:{wrap:""}},[1===e.data_payment.requestPayment?a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[a("span",{staticClass:"text-bold"},[e._v("Tổng: ")])])],1):e._e(),1===e.data_payment.requestPayment?a("v-flex",{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[a("span",[e._v(e._s(e.currency(e.feeTong.toString().replace(/\./g,"")))+"    vnđ")])]):e._e(),1===e.data_payment.requestPayment?a("v-flex",{attrs:{xs12:"",sm1:""}}):e._e(),2===e.data_payment.requestPayment?a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[a("span",{staticClass:"text-bold"},[e._v("Tổng: ")])])],1):e._e(),2===e.data_payment.requestPayment?a("v-flex",{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[a("span",[e._v(e._s(e.currency(e.totalFee.toString().replace(/\./g,"")))+"    vnđ")])]):e._e(),2===e.data_payment.requestPayment?a("v-flex",{attrs:{xs12:"",sm1:""}}):e._e(),5===e.data_payment.requestPayment?a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[a("span",{staticClass:"text-bold"},[e._v("Tổng: ")])])],1):e._e(),5===e.data_payment.requestPayment?a("v-flex",{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[a("span",[e._v(e._s(e.currency(e.feeTong.toString().replace(/\./g,"")))+"    vnđ")])]):e._e(),5===e.data_payment.requestPayment?a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[a("span",{staticClass:"text-bold"},[e._v("Đã tạm nộp: ")])])],1):e._e(),5===e.data_payment.requestPayment?a("v-flex",{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[a("span",[e._v(e._s(e.currency(Number(e.data_payment.advanceAmount.toString().replace(/\./g,"")).toString().replace(/\./g,"")))+"    vnđ")])]):e._e(),5===e.data_payment.requestPayment?a("v-flex",{attrs:{xs12:"",sm1:""}}):e._e(),5===e.data_payment.requestPayment?a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[a("span",{staticClass:"text-bold"},[e._v("Còn phải nộp: ")])])],1):e._e(),5===e.data_payment.requestPayment?a("v-flex",{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[a("span",[e._v(e._s(e.currency(e.totalFee.toString().replace(/\./g,"")))+"    vnđ")])]):e._e(),5===e.data_payment.requestPayment?a("v-flex",{attrs:{xs12:"",sm1:""}}):e._e()],1),a("v-layout",{staticStyle:{position:"relative"},attrs:{wrap:""}},[a("v-flex",{staticClass:"my-0 py-1",staticStyle:{width:"70px"}},[a("span",{staticClass:"red--text"},[e._v("* ")]),e._v(" Ghi chú:")]),a("v-flex",{staticStyle:{width:"calc(100% - 80px)"}},[0==e.activeEdit?a("div",{staticClass:"pl-2"},[a("v-text-field",{staticClass:"py-0",attrs:{"multi-line":"",readonly:e.activeEdit,required:""},model:{value:e.data_payment.paymentNote,callback:function(t){e.$set(e.data_payment,"paymentNote",t)},expression:"data_payment.paymentNote"}})],1):e._e(),e.activeEdit||""===e.data_payment.paymentNote?a("p",{staticClass:"px-2 my-0 py-1"},[e._v("\n                "+e._s(e.data_payment.paymentNote)+"   \n                "),1==e.activeEdit?a("v-icon",{staticClass:"hover-pointer btn-add mx-0 my-0",attrs:{color:"blue",size:"20",title:"Sửa",grey:"","darken-4":""},on:{click:function(t){t.stopPropagation(),e.activeEdit=!1}}},[e._v("\n                  create\n                ")]):e._e()],1):e._e(),a("span",{staticStyle:{position:"absolute",top:"15px",right:"10px"}},[0==e.activeEdit?a("v-icon",{staticClass:"hover-pointer btn-add mx-0 my-0",attrs:{color:"green",size:"25",grey:"","darken-4":""},on:{click:function(t){t.stopPropagation(),e.activeEdit=!0}}},[e._v("\n                  check\n                ")]):e._e()],1)])],1),e.paymentFile&&5===e.data_payment.requestPayment?a("div",[a("span",[a("span",{staticClass:"red--text"},[e._v("* ")]),e._v(" File báo thanh toán:")]),e._v(" \n            "),a("span",{staticStyle:{cursor:"pointer"},on:{click:function(t){t.stopPropagation(),e.viewFile()}}},[a("v-icon",[e._v("attach_file")]),e._v("\n              "+e._s(e.paymentFileName)+"\n            ")],1),a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:"",ripple:""},on:{click:function(t){t.stopPropagation(),e.downloadPaymentFile(e.item)}},slot:"activator"},[a("v-icon",{staticStyle:{color:"#0d71bb"},attrs:{size:"16",color:"primary"}},[e._v("save_alt")])],1),a("span",[e._v("Tải xuống")])],1)],1):e._e()],1)],1)],1)],1),a("v-dialog",{staticStyle:{overflow:"hidden"},attrs:{"max-width":"900",transition:"fade-transition"},model:{value:e.dialogPDF,callback:function(t){e.dialogPDF=t},expression:"dialogPDF"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("File đính kèm")]),a("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.dialogPDF=!1}}},[a("v-icon",[e._v("clear")])],1),e.dialogPDFLoading?a("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[a("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):e._e(),a("iframe",{directives:[{name:"show",rawName:"v-show",value:!e.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPreview",src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1)],1)},Be=[],Re=a("716b"),He={props:{payments:{type:Object,default:()=>{}},viaPortal:{type:Number,default:()=>0},detailDossier:{type:Object,default:()=>{}}},model:{prop:"payments"},data:()=>({data_payment:{},money:{decimal:"",thousands:".",prefix:"",suffix:"",precision:0,masked:!1},totalFee:0,feeTamThu:0,feeTong:0,checkPaid:!0,activeEdit:!0,paymentFile:"",dialogPDF:!1,dialogPDFLoading:!0}),directives:{money:Re["VMoney"]},created(){var e=this;e.data_payment=e.payments,e.payments&&setTimeout(function(){let t=e.payments.feeAmount?Number(e.payments.feeAmount.toString().replace(/\./g,"")):0;if(1===e.payments.requestPayment){let a=Number(e.payments.serviceAmount);e.feeTong=t+a,e.totalFee=t+a}else if(2===e.payments.requestPayment){let a=e.payments.serviceAmount?Number(e.payments.serviceAmount.toString().replace(/\./g,"")):0,i=e.payments.shipAmount?Number(e.payments.shipAmount.toString().replace(/\./g,"")):0;2!==e.viaPortal&&"2"!==e.viaPortal||0===i?e.totalFee=t+a:e.totalFee=t+a+i}else{let a=e.payments.advanceAmount?Number(e.payments.advanceAmount.toString().replace(/\./g,"")):0,i=e.payments.serviceAmount?Number(e.payments.serviceAmount.toString().replace(/\./g,"")):0,s=e.payments.shipAmount?Number(e.payments.shipAmount.toString().replace(/\./g,"")):0;if(2!==e.viaPortal&&"2"!==e.viaPortal||0===s?(e.feeTong=t+i,e.totalFee=t+i-a):(e.feeTong=t+i+s,e.totalFee=t+i+s-a),5===e.payments.requestPayment&&620===e.detailDossier.stepCode){let t=e.detailDossier;e.$store.dispatch("getPaymentFiles",t).then(t=>{e.paymentFile=t})}}e.totalFee<0&&(e.totalFee=0)},200)},computed:{paymentFileName(){return this.$store.getters.getPaymentFileName}},watch:{viaPortal(e){console.log("viaPortal",e),this.changeFee()},detailDossier(e){var t=this;if(5===t.payments.requestPayment){let a=e;console.log("run get paymentfile",a),t.$store.dispatch("getPaymentFiles",a).then(e=>{t.paymentFile=e})}}},methods:{changeFee(){var e=this;let t=e.data_payment,a=t.feeAmount?Number(t.feeAmount.toString().replace(/\./g,"")):0;if(1===t.requestPayment){let t=e.payments.serviceAmount?Number(e.payments.serviceAmount.toString().replace(/\./g,"")):0;e.feeTong=a+t,e.totalFee=a+t}else if(2===t.requestPayment){let t=e.payments.serviceAmount?Number(e.payments.serviceAmount.toString().replace(/\./g,"")):0,i=e.payments.shipAmount?Number(e.payments.shipAmount.toString().replace(/\./g,"")):0;2!==e.viaPortal&&"2"!==e.viaPortal||0===i?e.totalFee=a+t:e.totalFee=a+t+i}else{let i=Number(t.advanceAmount.toString().replace(/\./g,"")),s=Number(t.serviceAmount.toString().replace(/\./g,"")),o=Number(t.shipAmount.toString().replace(/\./g,""));2!==e.viaPortal&&"2"!==e.viaPortal||0===o?(e.feeTong=a+s,e.totalFee=a+s-i):(e.feeTong=a+s+o,e.totalFee=a+s+o-i)}e.totalFee<0&&(e.totalFee=0)},viewFile(){let e=this;e.dialogPDFLoading=!0,e.dialogPDF=!0;let t={dossierId:e.detailDossier.dossierId,referenceUid:e.detailDossier.referenceUid};e.$store.dispatch("viewPaymentFile",t).then(t=>{e.dialogPDFLoading=!1,document.getElementById("dialogPreview").src=t})},downloadPaymentFile(e){let t=this,a="/o/rest/v2/dossiers/"+t.detailDossier.dossierId+"/payments/"+t.detailDossier.referenceUid+"/confirmfile";window.open(a)},currency(e){if(e){let t=(e/1).toFixed(0).replace(".",",");return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}return""},goBack(){window.history.back()}},filters:{}},$e=He,Ke=a("e0c7"),We=a("2677"),qe=Object(d["a"])($e,Ve,Be,!1,null,null,null);qe.options.__file="FeeDetail.vue";var je=qe.exports;p()(qe,{VBtn:Ae["a"],VCard:J["a"],VCardText:Q["b"],VCardTitle:ke["a"],VDialog:Oe["a"],VExpansionPanel:X["a"],VExpansionPanelContent:Z["a"],VFlex:ne["a"],VIcon:P["a"],VLayout:I["a"],VProgressCircular:Me["a"],VSubheader:Ke["a"],VTextField:We["a"],VTooltip:de["a"]});var Ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-card",[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),a("span",[e._v("Thông tin thanh toán")])]),a("v-card",{},[a("v-card-text",{staticClass:"px-0 py-0"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[e._v("Lệ phí: ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("p",{staticClass:"pt-2 mb-0"},[e._v(e._s(e.payments.feeAmount?e.currency(e.payments.feeAmount.toString().replace(/\./g,"")):0)+"    vnđ")])]),a("v-flex",{staticClass:"pt-1",attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[e._v("Phí: ")])],1),a("v-flex",{staticClass:"pt-1",attrs:{xs12:"",sm3:""}},[a("p",{staticClass:"pt-2 mb-0"},[e._v(e._s(e.payments.serviceAmount?e.currency(e.payments.serviceAmount.toString().replace(/\./g,"")):0)+"    vnđ")])]),a("v-flex",{attrs:{xs12:"",sm3:""}}),2!==e.dossierDetail.viaPortal&&"2"!==e.dossierDetail.viaPortal||0===e.payments.shipAmount?e._e():a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[e._v("Phí chuyển phát: ")])],1),2!==e.dossierDetail.viaPortal&&"2"!==e.dossierDetail.viaPortal||0===e.payments.shipAmount?e._e():a("v-flex",{attrs:{xs12:"",sm2:""}},[a("p",{staticClass:"pt-2 mb-0"},[e._v(e._s(e.payments.shipAmount?e.currency(e.payments.shipAmount.toString().replace(/\./g,"")):0)+"    vnđ")])]),2!==e.dossierDetail.viaPortal&&"2"!==e.dossierDetail.viaPortal||0===e.payments.shipAmount?e._e():a("v-flex",{attrs:{xs12:"",sm8:""}}),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[a("span",{staticClass:"text-bold"},[e._v("Tổng: ")])])],1),a("v-flex",{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[a("span",[e._v(e._s(e.payments.paymentAmount?e.currency(e.payments.paymentAmount.toString().replace(/\./g,"")):0)+"    vnđ")])]),a("v-flex",{attrs:{xs12:"",sm7:""}}),a("v-flex",{staticClass:"my-0 pl-3 py-1",staticStyle:{width:"100px"}},[a("span",{staticClass:"red--text"},[e._v("* ")]),e._v(" Ghi chú:")]),a("v-flex",{staticStyle:{width:"calc(100% - 100px)"}},[a("p",{staticClass:"px-2 my-0 py-1"},[e._v("\n                  "+e._s(e.payments.paymentNote?e.payments.paymentNote:"")+"   \n                ")])])],1)],1)],1)],1)],1),a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),a("span",[e._v("Tình trạng thanh toán")])]),a("v-card",{},[a("v-card-text",{staticClass:"px-0 py-0"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[e._v("Trạng thái: ")])],1),a("v-flex",{attrs:{xs12:"",sm3:""}},[a("p",{staticClass:"pt-2 mb-0"},[e._v(e._s(e.getPaymentStatus(e.payments.paymentStatus)))])]),a("v-flex",{attrs:{xs12:"",sm7:""}}),Number(e.payments.paymentStatus)>=3?a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[e._v("Hình thức thanh toán: ")])],1),a("v-flex",{attrs:{xs12:"",sm3:""}},[a("p",{staticClass:"pt-2 mb-0"},[e._v(e._s(e.payments.paymentMethod))])]),a("v-flex",{attrs:{xs12:"",sm7:""}}),e.paymentFile?a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[e._v("Chứng từ kèm theo: ")])],1):e._e(),e.paymentFile?a("v-flex",{attrs:{xs12:"",sm10:""}},[a("span",{staticStyle:{cursor:"pointer"},on:{click:function(t){t.stopPropagation(),e.viewFile()}}},[a("v-icon",[e._v("attach_file")]),e._v("\n                    "+e._s(e.paymentFileName)+"\n                  ")],1),a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:"",ripple:""},on:{click:function(t){t.stopPropagation(),e.downloadPaymentFile(e.item)}},slot:"activator"},[a("v-icon",{staticStyle:{color:"#0d71bb"},attrs:{size:"16",color:"primary"}},[e._v("save_alt")])],1),a("span",[e._v("Tải xuống")])],1)],1):e._e()],1):e._e()],1)],1)],1)],1)],1),Number(e.payments.paymentStatus)>=3?a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),a("span",[e._v("Hóa đơn thanh toán")])]),a("v-card",{staticClass:"pl-2"},[a("v-card-text",{staticClass:"px-0 py-0"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[e._v("Mẫu số hóa đơn : ")])],1),a("v-flex",{attrs:{xs12:"",sm3:""}},[a("p",{staticClass:"pt-2 mb-0"},[e._v(e._s(e.payments.invoiceTemplateNo))])]),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[e._v("Ký hiệu hóa đơn : ")])],1),a("v-flex",{attrs:{xs12:"",sm3:""}},[a("p",{staticClass:"pt-2 mb-0"},[e._v(e._s(e.payments.invoiceIssueNo))])]),a("v-flex",{attrs:{xs12:"",sm2:""}}),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[e._v("Số hóa đơn trên hệ thống : ")])],1),a("v-flex",{attrs:{xs12:"",sm3:""}},[a("p",{staticClass:"pt-2 mb-0"},[e._v(e._s(e.getEinvoiceNo(e.payments.einvoice)))])]),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[e._v("Mã tra cứu trên hệ thống : ")])],1),a("v-flex",{attrs:{xs12:"",sm3:""}},[a("p",{staticClass:"pt-2 mb-0"},[e._v(e._s(e.getEinvoiceCode(e.payments.einvoice)))])]),a("v-flex",{attrs:{xs12:"",sm2:""}}),a("v-flex",{staticClass:"mb-3",attrs:{xs12:"",sm12:""}},[a("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.tracuuhoadon()}}},[a("v-icon",[e._v("search")]),e._v(" \n                  Tra cứu hóa đơn\n                ")],1),3===e.originality?a("v-btn",{staticClass:"ml-3",attrs:{color:"primary"},on:{click:function(t){e.printPay()}}},[a("v-icon",[e._v("print")]),e._v("  \n                  In biên lai\n                ")],1):e._e()],1)],1)],1)],1)],1)],1):e._e()],1),a("v-dialog",{staticStyle:{overflow:"hidden"},attrs:{"max-width":"900",transition:"fade-transition"},model:{value:e.dialogPDF,callback:function(t){e.dialogPDF=t},expression:"dialogPDF"}},[a("v-card",[e.activePrintPay?a("v-card-title",{staticClass:"headline"},[e._v("In biên lai thanh toán")]):a("v-card-title",{staticClass:"headline"},[e._v("File đính kèm")]),a("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.dialogPDF=!1}}},[a("v-icon",[e._v("clear")])],1),e.dialogPDFLoading?a("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[a("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):e._e(),a("iframe",{directives:[{name:"show",rawName:"v-show",value:!e.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPreview",src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1)],1)},ze=[],Ge={props:{payments:{type:Object,default:()=>{}},dossierDetail:{type:Object,default:()=>{}}},components:{},data:()=>({loading:!0,loadingAction:!1,paymentFile:"",dialogPDF:!1,dialogPDFLoading:!0,activePrintPay:!1}),computed:{paymentFileName(){return this.$store.getters.getPaymentFileName},originality(){var e=this;return e.getOriginality()}},created(){let e=this;e.$nextTick(function(){var e=this;e.$router.history.current.query})},watch:{dossierDetail(e){var t=this;let a=t.dossierDetail;console.log("filterFile",a),t.$store.dispatch("getPaymentFiles",a).then(e=>{t.paymentFile=e})}},methods:{currency(e){if(e){let t=(e/1).toFixed(0).replace(".",",");return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}return""},viewFile(){let e=this;e.activePrintPay=!1,e.dialogPDFLoading=!0,e.dialogPDF=!0;let t={dossierId:e.dossierDetail.dossierId,referenceUid:e.dossierDetail.referenceUid};e.$store.dispatch("viewPaymentFile",t).then(t=>{e.dialogPDFLoading=!1,document.getElementById("dialogPreview").src=t})},downloadPaymentFile(e){let t=this,a="/o/rest/v2/dossiers/"+t.dossierDetail.dossierId+"/payments/"+t.dossierDetail.referenceUid+"/confirmfile";window.open(a)},printPay(){let e=this;e.activePrintPay=!0;let t={dossierId:e.dossierDetail.dossierId,referenceUid:e.payments.referenceUid};e.dialogPDFLoading=!0,e.dialogPDF=!0,e.$store.dispatch("printPay",t).then(function(t){e.dialogPDFLoading=!1,document.getElementById("dialogPreview").src=t})},getEinvoiceNo(e){if(e&&e.indexOf("#")>=0){let t=e.split("#")[1]?e.split("#")[1]:"";return t.indexOf("}")<0&&t.indexOf('"')<0?t:""}return""},getEinvoiceCode(e){if(e&&e.indexOf("#")>=0){let t=e.split("#")[3]?e.split("#")[3].split(",")[0].replace('"',""):"";return t}return""},tracuuhoadon(){window.open("http://tracuu.cmcsoft.com","_blank")},getPaymentStatus(e){return 1===e||"1"===e?"Yêu cầu nộp tiền tạm ứng ":2===e||"2"===e?"Yêu cầu quyết toán phí":3===e||"3"===e?"Báo đã nộp phí trực tuyến":3===e||"4"===e?"Yêu cầu nộp lại phí trực tuyến":5===e||"5"===e?"Xác nhận hoàn thành thu phí":""}}},Je=Ge,Qe=Object(d["a"])(Je,Ye,ze,!1,null,null,null);Qe.options.__file="ChiTietThanhToan.vue";var Xe=Qe.exports;p()(Qe,{VBtn:Ae["a"],VCard:J["a"],VCardText:Q["b"],VCardTitle:ke["a"],VDialog:Oe["a"],VExpansionPanel:X["a"],VExpansionPanelContent:Z["a"],VFlex:ne["a"],VIcon:P["a"],VLayout:I["a"],VProgressCircular:Me["a"],VSubheader:Ke["a"],VTooltip:de["a"]});var Ze=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"payment-info",staticStyle:{width:"100%"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),a("span",[e._v(e._s(e.paymentProfile.paymentFee))])]),a("v-card",[a("v-card-text",{staticClass:"px-4 pb-1"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[e._v("Lệ phí: ")])],1),a("v-flex",{attrs:{xs12:"",sm3:""}},[a("p",{staticClass:"mt-1 mb-0"},[e._v(e._s(e.currency(Number(e.paymentProfile.feeAmount)))+"    vnđ")])]),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[e._v("Phí: ")])],1),a("v-flex",{attrs:{xs12:"",sm3:""}},[a("p",{staticClass:"mt-1 mb-0"},[e._v(e._s(e.currency(Number(e.paymentProfile.serviceAmount)))+"    vnđ")])]),a("v-flex",{attrs:{xs12:"",sm2:""}}),2!==e.detailDossier.viaPostal&&"2"!==e.detailDossier.viaPostal||0===e.paymentProfile.shipAmount?e._e():a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[e._v("Phí chuyển phát: ")])],1),a("v-flex",{attrs:{xs12:"",sm3:""}},[2!==e.detailDossier.viaPostal&&"2"!==e.detailDossier.viaPostal||0===e.paymentProfile.shipAmount?e._e():a("p",{staticClass:"mt-1 mb-0"},[e._v("\n                "+e._s(e.currency(Number(e.paymentProfile.shipAmount)))+"    vnđ\n              ")])])],1)],1),a("v-card-text",{staticClass:"px-4 pt-0"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[a("span",{staticClass:"text-bold"},[e._v("Tổng: ")])])],1),a("v-flex",{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[a("span",[e._v(e._s(e.currency(Number(e.feeTong)))+"    vnđ")])]),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[a("span",{staticClass:"text-bold"},[e._v("Đã tạm nộp: ")])])],1),a("v-flex",{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[a("span",[e._v(e._s(e.currency(Number(e.paymentProfile.advanceAmount)))+"    vnđ")])]),a("v-flex",{attrs:{xs12:"",sm1:""}}),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[a("span",{staticClass:"text-bold"},[e._v("Còn phải nộp: ")])])],1),a("v-flex",{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[a("span",[e._v(e._s(e.currency(e.totalFee))+"    vnđ")])]),a("v-flex",{attrs:{xs12:"",sm1:""}})],1),a("v-layout",{staticStyle:{position:"relative"},attrs:{wrap:""}},[a("v-flex",{staticClass:"my-0 py-1",staticStyle:{width:"70px"}},[a("span",{staticClass:"red--text"},[e._v("* ")]),e._v(" Ghi chú:")]),a("v-flex",{staticStyle:{width:"calc(100% - 80px)"}},[a("p",{staticClass:"px-2 my-0 py-1"},[e._v("\n                "+e._s(e.paymentProfile.paymentNote)+"   \n              ")])])],1),a("p",{staticClass:"mb-0"},[a("span",{staticClass:"red--text"},[e._v("* ")]),e._v(" Lựa chọn hình thức thanh toán:")]),a("v-btn",{staticClass:"ml-3 mr-2",attrs:{dark:"",small:"",color:"blue darken-1"},nativeOn:{click:function(t){return function(){return e.isBank=!0}()}}},[a("v-icon",[e._v("account_balance")]),e._v("  \n            Thanh toán chuyển khoản\n          ")],1),e.getEPaymentProfile(e.paymentProfile.epaymentProfile)?a("v-btn",{staticClass:"ml-2 mr-2",attrs:{dark:"",small:"",color:"amber accent-4"},nativeOn:{click:function(t){e.toKeyPay(e.getEPaymentProfile(e.paymentProfile.epaymentProfile).keypayUrl)}}},[a("v-icon",[e._v("payment")]),e._v("  \n            Thanh toán điện tử\n          ")],1):e._e(),e.isBank?a("div",{staticClass:"ml-3"},[a("div",[a("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"paymentFile1"},on:{change:function(t){e.uploadPaymentFile(t)}}}),a("span",[e._v("Tải lên file báo thanh toán chuyển khoản (Định dạng: .png, .jpg, .jpeg)")]),e.progressUploadPart?a("v-progress-circular",{attrs:{width:2,size:25,color:"green",indeterminate:""}}):a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(t){e.pickFile()}},slot:"activator"},[a("v-badge",[a("v-icon",{attrs:{size:"16",color:"primary"}},[e._v("cloud_upload")])],1)],1),a("span",[e._v("Tải file lên")])],1)],1),e.paymentFile?a("div",[a("span",{staticStyle:{cursor:"pointer"},on:{click:function(t){t.stopPropagation(),e.viewFile()}}},[a("v-icon",{attrs:{color:"blue"}},[e._v("insert_drive_file")]),e._v("\n                "+e._s(e.paymentFileName)+"\n              ")],1),a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:"",ripple:""},on:{click:function(t){t.stopPropagation(),e.downloadPaymentFile(e.item)}},slot:"activator"},[a("v-icon",{staticStyle:{color:"#0d71bb"},attrs:{size:"16",color:"primary"}},[e._v("save_alt")])],1),a("span",[e._v("Tải xuống")])],1)],1):e._e(),e.epaymentValid?e._e():a("span",{staticStyle:{color:"#f44336"}},[e._v("* Yêu cầu tải lên file báo thanh toán")])]):e._e(),!e.isBank&&e.errorNotSelect?a("p",{staticStyle:{color:"#f44336"}},[e._v("* Yêu cầu lựa chọn hình thức thanh toán")]):e._e()],1)],1)],1)],1),a("v-dialog",{staticStyle:{overflow:"hidden"},attrs:{"max-width":"900",transition:"fade-transition"},model:{value:e.dialogPDF,callback:function(t){e.dialogPDF=t},expression:"dialogPDF"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("File đính kèm")]),a("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.dialogPDF=!1}}},[a("v-icon",[e._v("clear")])],1),e.dialogPDFLoading?a("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[a("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):e._e(),a("iframe",{directives:[{name:"show",rawName:"v-show",value:!e.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPreview",src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1)],1)},et=[],tt=a("1157"),at=a.n(tt);Y.a.options={closeButton:!0,timeOut:"5000"};var it={props:{paymentProfile:{type:Object,default:()=>{}},detailDossier:{type:Object,default:()=>{}}},data:()=>({data_payment:{advanceAmount:"",feeAmount:"",serviceAmount:"",shipAmount:"",paymentAmount:"",paymentNote:"",paymentFile:""},paymentFile:"",epaymentValid:!0,money:{decimal:"",thousands:".",prefix:"",suffix:"",precision:0,masked:!1},totalFee:0,feeTamThu:0,feeTong:0,checkPaid:!0,activeEdit:!0,progressUploadPart:!1,dialogPDF:!1,dialogPDFLoading:!0,isBank:!1,errorNotSelect:!1}),directives:{money:Re["VMoney"]},created(){var e=this;if(e.detailDossier.hasOwnProperty("dossierId")){let t=e.detailDossier;e.$store.dispatch("getPaymentFiles",t).then(t=>{e.paymentFile=t,e.data_payment["paymentFile"]=e.paymentFile,e.$store.commit("setPaymentProfile",e.data_payment)})}},computed:{paymentFileName(){return this.$store.getters.getPaymentFileName},isBank(e){!0===e&&(this.errorNotSelect=!1)}},watch:{paymentProfile(e){var t=this;t.paymentProfile&&(t.feeTong=Number(t.paymentProfile.feeAmount)+Number(t.paymentProfile.serviceAmount),2!==t.detailDossier.viaPostal&&"2"!==t.detailDossier.viaPostal||0===t.paymentProfile.shipAmount||(t.feeTong=Number(t.paymentProfile.feeAmount)+Number(t.paymentProfile.serviceAmount)+Number(t.paymentProfile.shipAmount)),console.log("feeTong",t.feeTong),t.totalFee=t.feeTong-Number(t.paymentProfile.advanceAmount),t.totalFee<0&&(t.totalFee=0),t.data_payment={advanceAmount:t.paymentProfile.advanceAmount,feeAmount:t.paymentProfile.feeAmount,serviceAmount:t.paymentProfile.serviceAmount,shipAmount:t.paymentProfile.shipAmount,paymentAmount:t.totalFee,paymentNote:t.paymentProfile.paymentNote,paymentFile:t.paymentFile},t.$store.commit("setPaymentProfile",t.data_payment))},detailDossier(e){var t=this;if(e.hasOwnProperty("dossierId")){let a=e;t.$store.dispatch("getPaymentFiles",a).then(e=>{t.paymentFile=e,t.data_payment["paymentFile"]=t.paymentFile,t.$store.commit("setPaymentProfile",t.data_payment)})}}},methods:{uploadPaymentFile(e){var t=this;t.progressUploadPart=!0;var a={};a["dossierId"]=t.detailDossier.dossierId,a["referenceUid"]=t.detailDossier.referenceUid,a["selector"]="paymentFile1",a["partTip"]={tip:"",maxSize:10,extensions:"jpg,png,jpeg"};at()("#paymentFile1")[0].files[0];t.$store.dispatch("uploadPaymentFile",a).then(function(e){t.epaymentValid=!0,t.progressUploadPart=!1,t.paymentFile=e,t.data_payment["paymentFile"]=t.paymentFile,t.$store.commit("setPaymentProfile",t.data_payment),t.$store.dispatch("getPaymentFiles",a).then(e=>{t.paymentFile=e,t.data_payment["paymentFile"]=t.paymentFile,t.$store.commit("setPaymentProfile",t.data_payment)})}).catch(function(e){t.progressUploadPart=!1})},viewFile(){let e=this;e.dialogPDFLoading=!0,e.dialogPDF=!0;let t={dossierId:e.detailDossier.dossierId,referenceUid:e.detailDossier.referenceUid};e.$store.dispatch("viewPaymentFile",t).then(t=>{e.dialogPDFLoading=!1,document.getElementById("dialogPreview").src=t})},getEPaymentProfile(e){return e?JSON.parse(e):""},deleteFile(e){var t=this;let a=confirm("Bạn có chắc chắn xóa file?");a&&(e["dossierId"]=t.dossierId,t.$store.dispatch("deletePaymentFile",e).then(e=>{Y.a.success("Xóa file thành công."),t.paymentFile="",t.data_payment["paymentFile"]=t.paymentFile,t.$store.commit("setPaymentProfile",t.data_payment)}).catch(e=>{Y.a.error("Xóa file thất bại.")}))},downloadPaymentFile(e){let t=this,a="/o/rest/v2/dossiers/"+t.detailDossier.dossierId+"/payments/"+t.detailDossier.referenceUid+"/confirmfile";window.open(a)},pickFile(){document.getElementById("paymentFile1").value="",document.getElementById("paymentFile1").click()},currency(e){return e&&e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."):0},validPayment(){return this.paymentFile?this.epaymentValid=!0:this.epaymentValid=!1,this.isBank?this.errorNotSelect=!1:this.errorNotSelect=!0,!1!==this.isBank},toKeyPay(e){window.open(e,"_self")},goBack(){window.history.back()}},filters:{}},st=it,ot=a("4ca6"),nt=Object(d["a"])(st,Ze,et,!1,null,null,null);nt.options.__file="ThucHienThanhToanDienTu.vue";var rt=nt.exports;p()(nt,{VBadge:ot["a"],VBtn:Ae["a"],VCard:J["a"],VCardText:Q["b"],VCardTitle:ke["a"],VDialog:Oe["a"],VExpansionPanel:X["a"],VExpansionPanelContent:Z["a"],VFlex:ne["a"],VIcon:P["a"],VLayout:I["a"],VProgressCircular:Me["a"],VSubheader:Ke["a"],VTooltip:de["a"]});var lt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"phancong",staticStyle:{"background-color":"white",width:"100%"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"1"}},[""!==e.esignType&&"digital"!==e.esignType?a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),e._v("Duyệt hồ sơ\n      ")]):e._e(),a("v-card",[a("v-card-text",{staticClass:"px-0 py-0"},["captcha"===e.esignType?a("v-flex",{staticClass:"my-3",attrs:{xs12:"",sm12:""}},[a("span",{staticClass:"ml-3",staticStyle:{color:"#ec0f0f"}},[e._v("(*) Xác thực ký duyệt hồ sơ")]),a("v-captcha",{ref:"captcha"})],1):e._e(),"password"===e.esignType?a("v-flex",{staticClass:"my-3 pl-3",attrs:{xs12:"",sm4:""}},[a("span",{staticClass:"ml-3",staticStyle:{color:"#ec0f0f"}},[e._v("(*) Xác thực ký duyệt hồ sơ")]),a("v-text-field",{attrs:{box:"",label:"Nhập mật khẩu xác thực","append-icon":e.e1?"visibility":"visibility_off","append-icon-cb":function(){return e.e1=!e.e1},rules:[function(e){return!!e||"Yêu cầu nhập mật khẩu"}],type:e.e1?"password":"text",name:"input-10-2",required:""},model:{value:e.passWord,callback:function(t){e.passWord=t},expression:"passWord"}})],1):e._e()],1)],1)],1)],1)],1)},dt=[],ct=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-flex",{staticClass:"text-xs-center",attrs:{xs12:"",sm12:""}},[a("span",[e._v("Kéo thả các ô vuông đúng thứ tự của từ")]),a("br"),a("v-chip",{staticStyle:{"background-color":"#81D4FA"},attrs:{label:"","text-color":"white"}},[e._v("\n      "+e._s(e.captcha)+"\n    ")])],1),a("div",{directives:[{name:"drag-and-drop",rawName:"v-drag-and-drop:options",value:e.options,expression:"options",arg:"options"}],staticClass:"drag-wrapper text-xs-center mt-3"},[a("ul",{attrs:{id:"captcha"}},e._l(e.arrCaptcha,function(t,i){return a("li",{key:i,staticClass:"item-captcha",staticStyle:{padding:"10px 15px","background-color":"#81D4FA","margin-right":"2px",color:"#fff","font-weight":"bold"}},[e._v(e._s(t))])}),0)])],1)},pt=[],ut=a("d8c5"),mt=a.n(ut);i["a"].use(mt.a);var ht={props:["index"],components:{},data:()=>({options:{},arrCaptcha:[],captcha:"",currentlyDragging:null,loggedEvent:"",images:[{name:"Image 1",src:"http://placehold.it/100/000000/ffffff"},{name:"Image 2",src:"http://placehold.it/100/C93742/ffffff"},{name:"Image 3",src:"http://placehold.it/100/6894D1/ffffff"}]}),computed:{loading(){return this.$store.getters.loading}},created(){var e=this;e.makeRandomString(),e.shuffleArrCaptcha(e.arrCaptcha)},watch:{},methods:{makeRandomString(){for(var e=this,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<4;i++)t+=a.charAt(Math.floor(Math.random()*a.length));t&&(e.arrCaptcha=e.shuffleArrCaptcha(t.split(""))),e.captcha=t},shuffleArrCaptcha(e){var t=e.length,a=null,i=0;while(t>0)i=Math.floor(Math.random()*t),t--,a=e[t],e[t]=e[i],e[i]=a;return e},checkValidCatcha(){var e=this,t="";let a=at()("#captcha").children();console.log(a);for(var i=0;i<a.length;i++)t+=a[i].innerHTML;return e.captcha===t}},filters:{dateTimeView(e){if(e){let t=new Date(e);return`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()}`}return""}}},_t=ht,gt=Object(d["a"])(_t,ct,pt,!1,null,null,null);gt.options.__file="Captcha.vue";var vt=gt.exports;function ft(){return document.getElementById("plugin0")}p()(gt,{VChip:x["a"],VFlex:ne["a"]}),Y.a.options={closeButton:!0,timeOut:"5000"};var yt=ft,Dt={props:{detailDossier:{},dataEsign:{}},components:{"v-captcha":vt},data:()=>({tabActive:"tabs-1",activeKS:!1,noteReason:"",thongTinHoSo:{},passWord:"",e1:!0}),created(){""!==this.esignType&&"digital"!==this.esignType||(this.activeKS=!0)},computed:{kysoSuccess(){return this.$store.getters.kysoSuccess},esignType(){return this.dataEsign.signatureType}},watch:{},mounted(){""!==this.esignType&&"digital"!==this.esignType||(this.activeKS=!0)},methods:{changeActive(){var e=this;console.log("tabActive",e.tabActive)},doExport(){let e=this,t={textValue:e.noteReason,required:"password"===e.esignType?e.passWord:"digital"===e.esignType||""===e.esignType?e.activeKS:e.$refs.captcha.checkValidCatcha()};return console.log("exportData",t),t},checkCreateFile(e){var t;t=Array.isArray(e.createFiles)?e.createFiles:[e.createFiles];var a=!1;if(t.length>0)for(var i=t.length,s=0;s<i;s++){var o=t[s];0===o.counter&&(a=!0)}else a=!0;return a},kySo(e){console.log("run ky so data payload",e);var t,a=this;t=Array.isArray(e.createFiles)?e.createFiles:[e.createFiles];var i=[],s=!1;if(t.length>0)for(var o=t.length,n=0;n<o;n++){var r=t[n];if(0===r.counter){s=!0;break}var l=r.dossierFileId,d=r.dossierPartId;if(l&&d&&"digital"===a.esignType){let e=l+","+d;i.push(e)}else if(l&&"digital"!==a.esignType){let e=l;i.push(e)}}else alert("Không tồn tại tệp điện tử. Vui lòng kiểm tra lại");console.log("idArr",i);var c=e.eSignature;if(c){if(s)return void alert("Tệp điện tử chưa sẵn sàng. Xin vui lòng chờ trong giây lát");if(i){var p={};p.actionCode=e.actionCode,p.actionUser=window.themeDisplay.getUserName()?window.themeDisplay.getUserName():"",p.actionNote="",p.postStepCode=e.postStepCode?e.postStepCode:"",p.payload=e.payload?e.payload:"",p.assignUsers=e.assignUsers?e.assignUsers:"",p.payment=e.payment?e.payment:"",p.userNote=e.userNote?e.userNote:"";var u=i.join(";"),m=e.actionName;if(console.log("strIdArr",u),console.log("paramObj",p),"digital"===a.esignType){if(!yt().valid)return c=!1,void alert("Plugin ký số không hoạt động");a.kyDuyetYCGiamDinh(u,p,m)}else"captcha"!==a.esignType&&"password"!==a.esignType&&""!==a.esignType||a.completeKyDuyetCaptchaSignature(u,p,m)}}},kyDuyetYCGiamDinh(e,t,a){var i=this,s="/o/rest/v2/defaultsignature/digitalSignature/"+i.detailDossier.dossierId+"/hashComputed";console.log(i.detailDossier.dossierId),at.a.ajax({type:"POST",url:s,async:!1,dataType:"json",headers:{groupId:window.themeDisplay.getScopeGroupId(),Token:window.Liferay.authToken},data:{strIdArr:e,actionCode:t.actionCode,postStepCode:t.postStepCode},success:function(e){console.log(e);var s=e.msg;if("fileEntryId"!==s){var o=e.hashComputers,n=e.signFieldNames,r=e.fileNames,l=e.fileEntryId;console.log("hashComputers: "+o),console.log("signFieldNames: "+n),console.log("fileNames: "+r),console.log("msgs: "+s);var d=[];if(yt().valid){for(var c=0;c<o.length;c++){var p=o[c],u=yt().Sign(p);if(0===u||7===u){var m=yt().Signature,h=n[c],_=r[c];console.log("sign: "+m),console.log("signFieldName: "+h),console.log("fileName: "+_),d.push(m)}else alert(yt().ErrorMessage)}i.completeKyDuyetManyYCGiamDinh(d.join(","),n.join(","),r.join(","),l.join(","),t,a)}else alert("Plugin ký số không hoạt động")}else alert("Không tìm thấy file bản thảo. Tạm dừng tiến trình ký số")},error:function(e){}})},completeKyDuyetManyYCGiamDinh(e,t,a,i,s,o){var n=this,r="/o/rest/v2/defaultsignature/digitalSignature/"+n.detailDossier.dossierId+"/dossierFiles";at.a.ajax({type:"PUT",url:r,async:!1,dataType:"json",headers:{groupId:window.themeDisplay.getScopeGroupId(),Token:window.Liferay.authToken},data:{actionCode:s["actionCode"],actionUser:s["actionUser"],actionNote:s["actionNote"],assignUserId:s["assignUserId"],postStepCode:s["postStepCode"],subUsers:s["subUsers"],payload:s["payload"]?JSON.stringify(s["payload"]):"",assignUsers:s["assignUsers"],payment:s["payment"]?JSON.stringify(s["payment"]):"",userNote:s["userNote"],sign:e,signFieldName:t,fileName:a,fileEntryId:i},success:function(e){console.log(e);var t=e.msg;"success"===t?(n.$store.commit("setKysoSuccess",!0),Y.a.success("Thực hiện ký số thành công.")):"fileEntryId"===t?alert("Cảnh báo: Không tìm thấy file bản thảo. Tạm dừng tiến trình đóng dấu số"):alert(t)},error:function(){alert("Thực hiện ký số thất bại")}})},completeKyDuyetCaptchaSignature(e,t,a){var i=this,s="/o/rest/v2/defaultsignature/"+i.detailDossier.dossierId+"/dossierFiles";at.a.ajax({type:"PUT",url:s,async:!1,dataType:"json",headers:{groupId:window.themeDisplay.getScopeGroupId()?window.themeDisplay.getScopeGroupId():"",Token:window.Liferay.authToken?window.Liferay.authToken:""},data:{actionCode:t["actionCode"],actionUser:t["actionUser"],actionNote:t["actionNote"],assignUserId:t["assignUserId"],postStepCode:t["postStepCode"],subUsers:t["subUsers"],payload:t["payload"]?JSON.stringify(t["payload"]):"",assignUsers:t["assignUsers"],payment:t["payment"]?JSON.stringify(t["payment"]):"",userNote:t["userNote"],fileEntryId:e},success:function(e){i.$store.commit("setKysoSuccess",!0),Y.a.success("Thực hiện ký số thành công.")},error:function(){Y.a.error("Thực hiện ký số thất bại")}})},completeKyDuyetYCGiamDinh(e,t,a,i,s,o){var n=this,r="/o/rest/v2/defaultsignature/digitalSignature/"+n.detailDossier.dossierId+"/dossierFile";at.a.ajax({type:"PUT",url:r,async:!1,dataType:"json",headers:{groupId:window.themeDisplay.getScopeGroupId(),Token:window.Liferay?window.Liferay.authToken:"","Cache-Control":"no-cache"},data:{actionCode:s["actionCode"],actionUser:s["actionUser"],actionNote:s["actionNote"],assignUserId:s["assignUserId"],postStepCode:s["postStepCode"],subUsers:s["subUsers"],sign:e,signFieldName:t,fileName:a,fileEntryId:i},success:function(e){console.log(e);var t=e.msg;"success"===t?Y.a.success("Yêu cầu của bạn được thực hiện thành công."):"fileEntryId"===t?alert("Cảnh báo: Không tìm thấy file bản thảo. Tạm dừng tiến trình đóng dấu số"):alert(t)},error:function(){alert("ky so false")}})}}},Tt=Dt,Ct=Object(d["a"])(Tt,lt,dt,!1,null,null,null);Ct.options.__file="KyPheDuyetTaiLieu.vue";var xt=Ct.exports;p()(Ct,{VCard:J["a"],VCardText:Q["b"],VExpansionPanel:X["a"],VExpansionPanelContent:Z["a"],VFlex:ne["a"],VIcon:P["a"],VTextField:We["a"]});var Pt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-expansion-panel",{staticClass:"expansion-pl ext__form",attrs:{value:[!0]}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),a("span",[e._v("Ý kiến cán bộ")]),2===e.user_note?a("span",{staticClass:"red--text text--darken-3"},[e._v("*")]):e._e()]),a("v-card",[a("v-card-text",{staticClass:"py-2 px-4"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-form",{ref:"userNoteForm",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{attrs:{"multi-line":"",rows:4,rules:2===e.user_note?[function(){return""!==e.noteYkien||"Trường dữ liệu bắt buộc"}]:[],box:"",label:"nhập ý kiến"},model:{value:e.noteYkien,callback:function(t){e.noteYkien=t},expression:"noteYkien"}})],1)],1)],1)],1)],1)],1)],1)},It=[],bt={props:{user_note:{type:Number,required:!0},configNote:{type:Object,required:!1}},data:()=>({noteYkien:"",valid:!1}),methods:{initData(e){var t=this;t.$store.dispatch("getDetailDossier",e).then(e=>{t.thongTinChiTietHoSo=e})},doExport(){let e=this,t={text:e.noteYkien,valid:e.$refs.userNoteForm.validate()};return t}}},wt=bt,Et=a("4bd4"),St=Object(d["a"])(wt,Pt,It,!1,null,null,null);St.options.__file="YkienCanBoThucHien.vue";var Nt=St.exports;p()(St,{VCard:J["a"],VCardText:Q["b"],VExpansionPanel:X["a"],VExpansionPanelContent:Z["a"],VFlex:ne["a"],VForm:Et["a"],VIcon:P["a"],VLayout:I["a"],VTextField:We["a"]});var Ft=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"taotailieuketqua",staticStyle:{"background-color":"white",width:"100%"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),e._v(" Kết quả xử lý\n      ")]),a("v-card",e._l(e.createFiles,function(t,i){return a("div",{key:t.partNo+"cr",staticClass:"form_alpaca",staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expaned__list__data",attrs:{value:[!0]}},[a("v-expansion-panel-content",{attrs:{"hide-actions":"",value:e.currentFormView==="formAlpaca"+t.partNo+e.id}},[a("div",{staticStyle:{"background-color":"#fff"},attrs:{slot:"header"},on:{click:function(t){e.stateView=!1}},slot:"header"},[a("div",{staticStyle:{"align-items":"center",background:"#fff","padding-left":"25px"},style:{width:e.checkStyle(t)}},[a("div",{staticClass:"mr-2",staticStyle:{"min-width":"18px",display:"flex"},on:{click:function(a){e.loadAlpcaForm(t)}}},[a("div",{staticClass:"header__tphs"},[a("span",{staticClass:"text-bold"},[e._v(e._s(i+1)+".")]),e._v("  ")]),a("div",{staticClass:"header__tphs"},[e._v("\n                      "+e._s(t.partName)+" "),t.required?a("span",{staticStyle:{color:"red"}},[e._v(" (*)")]):e._e(),e._v("\n                        \n                      "),t.eForm&&t.daKhai?a("v-tooltip",{attrs:{top:""}},[a("i",{staticClass:"fa fa-file-text-o",staticStyle:{color:"#0d71bb","font-size":"13px"},attrs:{slot:"activator","aria-hidden":"true"},slot:"activator"}),a("span",[e._v("Biểu mẫu trực tuyến (Đã khai)")])]):e._e(),t.eForm&&!t.daKhai?a("v-tooltip",{attrs:{top:""}},[a("i",{staticClass:"fa fa-file-o",staticStyle:{color:"#0d71bb","font-size":"13px"},attrs:{slot:"activator"},slot:"activator"}),a("span",[e._v("Biểu mẫu trực tuyến (Chưa khai)")])]):e._e()],1)]),e._l(e.dossierFilesItems,function(i,s){return t.partNo+e.id!==i.dossierPartNo+e.id||i.eForm?e._e():a("div",{key:s+"cr"},[a("div",{staticStyle:{width:"calc(100% - 370px)",display:"flex","align-items":"center",background:"#fff","padding-left":"25px","font-size":"12px"}},[a("span",{staticClass:"ml-3",staticStyle:{cursor:"pointer"},on:{click:function(t){t.stopPropagation(),e.viewFile2(i)}}},[i.eForm?a("v-icon",[e._v("border_color")]):a("v-icon",[e._v("attach_file")]),e._v("\n                        "+e._s(i.displayName)+" - \n                        "),a("i",[e._v(e._s(i.modifiedDate))])],1),a("v-btn",{staticClass:"mx-0 my-0",attrs:{icon:"",ripple:""},on:{click:function(t){t.stopPropagation(),e.deleteSingleFile(i,s)}}},[a("v-icon",{staticStyle:{color:"red"}},[e._v("delete_outline")])],1)],1)])})],2)]),t.eForm?a("v-card",[a("v-card-text",{staticStyle:{"background-color":"rgba(244, 247, 213, 0.19)"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"text-xs-right",attrs:{xs12:""}},[a("div",{style:e.pstFixed>e.pstEl&&e.pstFixed<e.endEl+e.pstEl?"position:fixed;top:5px;z-index:101":"",attrs:{id:"wrapForm"+t.partNo+e.id}},[t.eForm?a("v-btn",{attrs:{color:"primary",id:"saveBtn"+t.partNo+t.templateFileNo},on:{click:function(a){e.saveAlpacaForm(t,i)}}},[e._v("Lưu lại")]):e._e(),t.daKhai&&t.eForm?a("v-btn",{attrs:{color:"primary"},on:{click:function(a){e.deleteSingleFileEform(t,i)}}},[e._v("Xóa")]):e._e(),t.daKhai&&t.eForm?a("v-btn",{attrs:{color:"primary"},on:{click:function(a){e.previewFileEfom(t,i)}}},[e._v("In")]):e._e()],1),a("div",{attrs:{id:"formAlpaca"+t.partNo+e.id}})])],1)],1)],1):e._e()],1)],1),a("div",{staticClass:"absolute__btn group__thanh_phan pr-3 mr-1"},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticStyle:{width:"50px"}},[a("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"file"+t.partNo},on:{change:function(a){e.onUploadSingleFile(a,t)}}}),e.progressUploadPart+e.id===t.partNo+e.id?a("v-progress-circular",{attrs:{width:2,size:25,color:"green",indeterminate:""}}):e.progressUploadPart+e.id!==t.partNo+e.id?a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(a){e.pickFile(t)}},slot:"activator"},[a("v-badge",[a("v-icon",{attrs:{size:"16",color:"primary"}},[e._v("cloud_upload")])],1)],1),t.partTip["extensions"]||t.partTip["maxSize"]?a("span",[e._v("Chấp nhận tải lên các định dạng: "+e._s(t.partTip["extensions"])+". Tối đa "+e._s(t.partTip["maxSize"])+" MB ")]):a("span",[e._v("Tải file lên")])],1):e._e()],1)],1)],1)],1)}),0),a("v-dialog",{staticStyle:{overflow:"hidden"},attrs:{"max-width":"900",transition:"fade-transition"},model:{value:e.dialogPDF,callback:function(t){e.dialogPDF=t},expression:"dialogPDF"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("File đính kèm")]),a("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.dialogPDF=!1}}},[a("v-icon",[e._v("clear")])],1),e.dialogPDFLoading?a("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[a("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):e._e(),a("iframe",{directives:[{name:"show",rawName:"v-show",value:!e.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPDFPreview"+e.id,src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1)],1)],1)],1)},At=[],kt=a("78a5"),Ot=kt["a"],Mt=Object(d["a"])(Ot,Ft,At,!1,null,null,null);Mt.options.__file="TaoTaiLieuKetQua.vue";var Ut=Mt.exports;p()(Mt,{VBadge:ot["a"],VBtn:Ae["a"],VCard:J["a"],VCardText:Q["b"],VCardTitle:ke["a"],VDialog:Oe["a"],VExpansionPanel:X["a"],VExpansionPanelContent:Z["a"],VFlex:ne["a"],VIcon:P["a"],VLayout:I["a"],VProgressCircular:Me["a"],VTooltip:de["a"]});var Lt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%"}},["dieuchinhdulieu"!==e.type&&e.formBuilder.length>0?a("v-expansion-panel",{staticClass:"expansion-pl ext__form",attrs:{value:[!0]}},e._l(e.formBuilder,function(t,i){return a("v-expansion-panel-content",{key:i},[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),e._v("\n      "+e._s(t.fieldLabel)+" "),!0===t.required||"true"===t.required?a("span",{staticStyle:{color:"red"}},[e._v(" *")]):e._e()]),a("v-card",[a("v-card-text",{staticClass:"py-2 px-2"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},["textarea"===t.fieldType?a("v-text-field",{attrs:{id:t.fieldName,value:t.value,placeholder:t.placeholder,"multi-line":"",rules:!0===t.required||"true"===t.required?[e.rules.required]:[],required:!0===t.required||"true"===t.required},on:{input:function(a){e.inputChangeValue(t)}}}):e._e(),"string"===t.fieldType?a("v-text-field",{attrs:{id:t.fieldName,value:t.value,placeholder:t.placeholder,rules:!0===t.required||"true"===t.required?[e.rules.required]:[],required:!0===t.required||"true"===t.required},on:{input:function(a){e.inputChangeValue(t)}}}):e._e(),"number"===t.fieldType?a("v-text-field",{attrs:{id:t.fieldName,value:t.value,placeholder:t.placeholder,rules:!0===t.required||"true"===t.required?[e.rules.required]:[e.rules.number],required:!0===t.required||"true"===t.required},on:{input:function(a){e.inputChangeValue(t)}}}):e._e(),"date"===t.fieldType?a("v-layout",{staticClass:"pl-2",attrs:{wrap:""}},[a("v-icon",{staticClass:"ml-3",attrs:{color:"blue"}},[e._v("event")]),a("vue-ctk-date-time-picker",{ref:"datepicker",refInFor:!0,staticClass:"ml-2",staticStyle:{width:"auto!important"},attrs:{label:t.value?"":"Chọn ngày",id:t.fieldName,formatted:"DD/MM/YYYY HH:mm",format:"YYYY-MM-DDTHH:mm","time-format":"HH:mm","without-header":!0},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}})],1):e._e()],1)],1)],1),a("v-dialog",{attrs:{width:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-date-picker",{attrs:{"full-width":"",landscape:""},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),a("v-card-actions",{staticStyle:{background:"#fff"}},[a("v-spacer"),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.pickDateCustom}},[e._v("\n              Xác nhận\n            ")])],1)],1)],1)],1)}),1):e._e(),"dieuchinhdulieu"===e.type?a("div",{staticClass:"ext__form px-3"},[e._l(e.formBuilder,function(t,i){return e.formBuilder.length>0?a("div",{key:i,staticClass:"mb-2",attrs:{"hide-actions":""}},[a("div",{staticClass:"py-1",staticStyle:{"border-bottom":"1px solid #8a898942"}},[a("span",{staticClass:"text-bold"},[e._v(e._s(i+1)+". ")]),e._v(e._s(t.fieldLabel)+" "),!0===t.required||"true"===t.required?a("span",{staticStyle:{color:"red"}},[e._v(" *")]):e._e()]),a("v-form",{ref:"form",refInFor:!0,attrs:{"lazy-validation":""},model:{value:e.valid2,callback:function(t){e.valid2=t},expression:"valid2"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"px-3",attrs:{xs12:""}},["textarea"===t.fieldType?a("v-text-field",{attrs:{box:"",id:t.fieldName,value:t.value,placeholder:t.placeholder,"multi-line":"",rules:!0===t.required||"true"===t.required?[e.rules.required]:[],required:!0===t.required||"true"===t.required},on:{input:function(a){e.inputChangeValue(t)}}}):e._e()],1),a("v-flex",{staticClass:"px-3",attrs:{xs12:""}},["string"===t.fieldType?a("v-text-field",{attrs:{box:"",id:t.fieldName,value:t.value,placeholder:t.placeholder,rules:!0===t.required||"true"===t.required?[e.rules.required]:[],required:!0===t.required||"true"===t.required},on:{input:function(a){e.inputChangeValue(t)}}}):e._e()],1),a("v-flex",{staticClass:"px-3",attrs:{xs12:""}},["number"===t.fieldType?a("v-text-field",{attrs:{box:"",id:t.fieldName,value:t.value,placeholder:t.placeholder,rules:!0===t.required||"true"===t.required?[e.rules.required]:[e.rules.number],required:!0===t.required||"true"===t.required},on:{input:function(a){e.inputChangeValue(t)}}}):e._e()],1),a("v-flex",{staticClass:"px-3",attrs:{xs12:""}},["date"===t.fieldType?a("v-layout",{staticClass:"mt-2",attrs:{wrap:""}},[a("v-icon",{attrs:{color:"blue"}},[e._v("event")]),a("vue-ctk-date-time-picker",{ref:"datepicker",refInFor:!0,staticClass:"ml-2",staticStyle:{width:"auto!important"},attrs:{label:t.value?"":"Chọn ngày",id:t.fieldName,formatted:"DD/MM/YYYY HH:mm",format:"YYYY-MM-DDTHH:mm","time-format":"HH:mm","without-header":!0},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}})],1):e._e()],1),a("v-flex",{staticClass:"px-3",attrs:{xs12:""}},["status"===t.fieldType?a("v-text-field",{attrs:{box:"",id:t.fieldName,value:t.value,placeholder:t.placeholder,rules:!0===t.required||"true"===t.required?[e.rules.required]:[],required:!0===t.required||"true"===t.required},on:{input:function(a){e.inputChangeValue(t)}}}):e._e()],1)],1)],1),a("v-dialog",{attrs:{width:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-date-picker",{attrs:{"full-width":"",landscape:""},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),a("v-card-actions",{staticStyle:{background:"#fff"}},[a("v-spacer"),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.pickDateCustom}},[e._v("\n            Xác nhận\n          ")])],1)],1)],1):e._e()}),0===e.formBuilder.length?a("div",[a("v-alert",{attrs:{outline:"",color:"warning",icon:"priority_high",value:!0}},[e._v("\n        Không có form điều chỉnh dữ liệu\n      ")])],1):e._e()],2):e._e()],1)},Vt=[],Bt=a("e30a"),Rt=a.n(Bt),Ht={components:{"vue-ctk-date-time-picker":Rt.a},props:{dossier_id:{type:Number},action_id:{type:Number},type:{type:String,default:()=>""}},data:()=>({itemId:null,fieldNameID:"",date:null,dialog:!1,formBuilder:[],valid:!1,valid2:!1,rulesValid:{number:function(e){var t=/^\d+$/;return t.test(e)||"Kiểu dữ liệu sai định dạng."}},rules:{required:e=>!!e||"Trường dữ liệu bắt buộc",number:function(e){const t=/^\d+$/;return t.test(e)||"Kiểu dữ liệu sai định dạng."}}}),watch:{dossier_id(){let e=this,t={dossierId:e.dossier_id,actionId:e.action_id};e.$store.dispatch("getExtraForm",t).then(function(t){if(e.formBuilder=t,e.formBuilder.length>0)for(let a in e.formBuilder)"date"===e.formBuilder[a]["fieldType"]&&e.formBuilder[a]["value"]&&isNaN(new Date(e.formBuilder[a]["value"]).getTime())&&(e.formBuilder[a]["value"]="")}).catch(function(){e.formBuilder=[]})}},created(){var e=this;e.$nextTick(function(){let t={dossierId:e.dossier_id,actionId:e.action_id};t["dossierId"]&&t["actionId"]&&e.$store.dispatch("getExtraForm",t).then(function(t){if(e.formBuilder=t,e.formBuilder.length>0)for(let a in e.formBuilder)"date"===e.formBuilder[a]["fieldType"]&&e.formBuilder[a]["value"]&&isNaN(new Date(e.formBuilder[a]["value"]).getTime())&&(e.formBuilder[a]["value"]="")})})},methods:{openDialogCustom(e,t){let a=this;a.dialog=!0,a.fieldNameID=t,a.itemId=e},pickDateCustom(){let e=this;console.log(e.date),e.date&&(e.itemId.value=new Date(e.date)),e.dialog=!1},inputChangeValue(e){e.value=document.getElementById(e.fieldName).value},showDatePicker(){this.$refs.datepicker.showDatePicker()},dateTimeView(e){if(e){let t=new Date(e);return`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()}`}return""},parseCurrentDate(e){if(!e)return null;let[t,a,i]=e.split("/");return`${i}-${a.padStart(2,"0")}-${t.padStart(2,"0")}`},checkValid(){let e=this,t=!0;if(e.formBuilder.length>0)for(let a in e.formBuilder)if((!0===e.formBuilder[a]["required"]||"true"===e.formBuilder[a]["required"])&&!e.formBuilder[a]["value"])return t=!1,alert(e.formBuilder[a]["fieldLabel"]+" là bắt buộc!"),t;return t},formSubmitData(){let e=this,t={};if(e.formBuilder.length>0)for(let a in e.formBuilder){let i=e.formBuilder[a].value;"date"===e.formBuilder[a].fieldType&&(i=new Date(e.formBuilder[a].value).getTime()?new Date(e.formBuilder[a].value).getTime():""),t[e.formBuilder[a].fieldName]=i}else t="";return t}},filters:{parseDate:function(e){if(!e)return"";let t="";return t=isNaN(Number(e))?new Date(e):new Date(Number(e)),t?`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()} ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`:""}}},$t=Ht,Kt=a("0798"),Wt=a("2e4b"),qt=a("9910"),jt=Object(d["a"])($t,Lt,Vt,!1,null,null,null);jt.options.__file="FormBoSungThongTinNgan.vue";var Yt=jt.exports;p()(jt,{VAlert:Kt["a"],VBtn:Ae["a"],VCard:J["a"],VCardActions:Q["a"],VCardText:Q["b"],VDatePicker:Wt["a"],VDialog:Oe["a"],VExpansionPanel:X["a"],VExpansionPanelContent:Z["a"],VFlex:ne["a"],VForm:Et["a"],VIcon:P["a"],VLayout:I["a"],VSpacer:qt["a"],VTextField:We["a"]});var zt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-card",[e._l(e.dossierTemplateItems,function(t,i){return e.partTypes.includes(t.partType)&&e.checkVisibleTemp(t,i)?a("div",{key:t.partNo,staticClass:"form_alpaca",staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expaned__list__data",attrs:{value:[e.currentFormView==="formAlpaca"+t.partNo+e.id]}},[a("v-expansion-panel-content",{attrs:{"hide-actions":""}},[a("div",{staticStyle:{"background-color":"#fff"},attrs:{slot:"header"},on:{click:function(t){e.stateView=!1}},slot:"header"},[a("div",{staticStyle:{"align-items":"center",background:"#fff","padding-left":"25px"},style:{width:e.checkStyle(t)}},[a("div",{staticClass:"mr-2",staticStyle:{"min-width":"18px",display:"flex"},on:{click:function(a){e.onlyView&&t.hasForm?e.viewFile2(t):e.loadAlpcaForm(t)}}},[a("div",{staticClass:"header__tphs"},[a("span",{staticClass:"text-bold"},[e._v(e._s(i+1)+".")]),e._v("  ")]),a("div",{staticClass:"header__tphs"},[a("v-tooltip",{staticStyle:{"max-width":"100% !important"},attrs:{top:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[e._v("\n                      "+e._s(t.partName)+"  \n                      "),t.required?a("span",{staticStyle:{color:"red"}},[e._v(" (*) ")]):e._e(),e._v("\n                        \n                    ")]),t.partTip["tip"]?a("span",[e._v(e._s(t.partTip["tip"]))]):e._e()]),t.hasForm&&t.daKhai&&(1===e.originality&&2!==t.partType||1!==e.originality)?a("v-tooltip",{attrs:{top:""}},[a("i",{staticClass:"fa fa-file-text-o",staticStyle:{color:"#0d71bb","font-size":"13px"},attrs:{slot:"activator","aria-hidden":"true"},slot:"activator"}),a("span",[e._v("Biểu mẫu trực tuyến (Đã khai)")])]):e._e(),t.hasForm&&!t.daKhai&&(1===e.originality&&2!==t.partType||1!==e.originality)?a("v-tooltip",{attrs:{top:""}},[a("i",{staticClass:"fa fa-file-o",staticStyle:{color:"#0d71bb","font-size":"13px"},attrs:{slot:"activator"},slot:"activator"}),a("span",[e._v("Biểu mẫu trực tuyến (Chưa khai)")])]):e._e(),e._v("\n                    \n                  "),!t.hasForm&&t.hasFileTemp?a("v-tooltip",{attrs:{top:""}},[a("v-icon",{staticStyle:{color:"#0d71bb"},attrs:{slot:"activator",size:"16",color:"primary"},on:{click:function(a){a.stopPropagation(),e.downloadFileTemplate(t,i)}},slot:"activator"},[e._v("save_alt")]),a("span",[e._v("Biểu mẫu điền thủ công")])],1):e._e()],1)]),a("div",{staticStyle:{display:"flex"}},[1===e.checkInput&&2===t.fileCheck&&t.stateEditFileCheck?a("v-text-field",{attrs:{placeholder:"Nhập lý do",rules:[function(e){return!!e||"Bạn phải nhập lý do trước khi gửi"}],required:""},on:{keyup:function(a){if(!("button"in a)&&e._k(a.keyCode,"enter",13,a.key,"Enter"))return null;e.changeFileComment(t,i)}},model:{value:t.fileComment,callback:function(a){e.$set(t,"fileComment",a)},expression:"item.fileComment"}}):e._e(),1===e.checkInput&&2===t.fileCheck&&t.stateEditFileCheck?a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(a){a.stopPropagation(),e.changeFileComment(t,i)}},slot:"activator"},[a("v-icon",{staticClass:"mx-0",attrs:{size:"16",color:"primary"}},[e._v("send")])],1),a("span",[e._v("Gửi")])],1):e._e()],1),t.fileComment&&!t.stateEditFileCheck?a("i",{staticStyle:{"font-size":"12px",color:"#0d71bb","margin-left":"10px"}},[e._v(e._s(t.fileComment))]):e._e(),t.fileComment&&!t.stateEditFileCheck&&1===e.checkInput?a("v-tooltip",{attrs:{top:""}},[a("v-icon",{staticStyle:{"font-size":"13px",color:"#0d71bb","margin-left":"10px",cursor:"pointer"},attrs:{slot:"activator"},on:{click:function(e){e.stopPropagation(),t.stateEditFileCheck=!t.stateEditFileCheck}},slot:"activator"},[e._v("edit")]),a("span",[e._v("Chỉnh sửa ý kiến")])],1):e._e(),e._l(e.dossierFilesItems,function(i,s){return t.partNo!==i.dossierPartNo||i.eForm?e._e():a("div",{key:s},[a("div",{style:{width:"calc(100% - 370px)",display:"flex","align-items":"center",background:"#fff","padding-left":"15px","font-size":"12px","margin-bottom":e.onlyView?"5px":"0px"}},[a("span",{staticClass:"ml-3",staticStyle:{cursor:"pointer"},on:{click:function(t){t.stopPropagation(),e.viewFile2(i)}}},[0!==i.fileSize?a("v-icon",[e._v("attach_file")]):e._e(),e._v("\n                    "+e._s(i.displayName)+" - \n                    "),a("i",[e._v(e._s(i.modifiedDate))])],1),e.onlyView||1===e.checkInput?e._e():a("v-btn",{staticClass:"mx-0 my-0",attrs:{icon:"",ripple:""},on:{click:function(t){t.stopPropagation(),e.deleteSingleFile(i,s)}}},[a("v-icon",{staticStyle:{color:"red"}},[e._v("delete_outline")])],1)],1)])}),a("div",{staticClass:"mr-3 my-1 py-2",staticStyle:{display:"none",border:"1px solid #f3ae75"},attrs:{id:"fileApplicant-"+t.partNo}},e._l(e.dossierFilesApplicant,function(i,s){return i.dossierTemplateNo===e.thongTinHoSo["dossierTemplateNo"]&&t.partNo===i.dossierPartNo?a("div",{key:s},[i.eForm?a("div",{style:{width:"calc(100% - 0px)",display:"flex","align-items":"center",background:"#fff","padding-left":"15px","font-size":"12px","margin-bottom":e.onlyView?"5px":"0px"}},[a("v-tooltip",{staticStyle:{"max-width":"100%"},attrs:{top:""}},[a("span",{staticClass:"ml-3",staticStyle:{cursor:"pointer"},attrs:{slot:"activator"},on:{click:function(t){t.stopPropagation(),e.viewGiayToDaNop(i)}},slot:"activator"},[a("i",{staticClass:"ml-1 fa fa-file-o",staticStyle:{color:"#0d71bb","font-size":"13px"}}),e._v("  \n                        "+e._s(i.referenceUid)+"."+e._s(i.fileType)+" - \n                        "),a("i",[e._v(e._s(i.modifiedDate))])]),a("span",[e._v("Bản khai trực tuyến")])])],1):a("div",{style:{width:"calc(100% - 0px)",display:"flex","align-items":"center",background:"#fff","padding-left":"15px","font-size":"12px","margin-bottom":e.onlyView?"5px":"0px"}},[a("v-tooltip",{staticStyle:{"max-width":"100%"},attrs:{top:""}},[a("span",{staticClass:"ml-3",staticStyle:{cursor:"pointer"},attrs:{slot:"activator"},on:{click:function(t){t.stopPropagation(),e.viewGiayToDaNop(i)}},slot:"activator"},[0!==i.fileSize?a("v-icon",{staticStyle:{color:"#0d71bb"}},[e._v("attach_file")]):e._e(),e._v("\n                        "+e._s(i.displayName)+" - \n                        "),a("i",[e._v(e._s(i.modifiedDate))])],1),a("span",[e._v("Đính kèm")])])],1)]):e._e()}),0)],2)]),t.hasForm&&!e.onlyView?a("v-card",[a("v-card-text",{staticStyle:{"background-color":"rgba(244, 247, 213, 0.19)"}},[a("v-layout",{attrs:{wrap:""}},[e.stateView?e._e():a("v-flex",{staticClass:"text-xs-right",attrs:{xs12:""}},[a("div",{style:e.pstFixed>e.pstEl&&e.pstFixed<e.endEl+e.pstEl?"position:fixed;top:5px;z-index:101":"",attrs:{id:"wrapForm"+t.partNo+e.id}},[t.hasForm&&!e.onlyView&&1!==e.checkInput?a("v-btn",{attrs:{color:"primary"},on:{click:function(a){e.saveAlpacaForm(t,i)}}},[e._v("Lưu lại")]):e._e(),t.daKhai&&t.hasForm&&!e.onlyView&&1!==e.checkInput?a("v-btn",{attrs:{color:"primary"},on:{click:function(a){e.deleteSingleFileEform(t,i)}}},[e._v("Xóa")]):e._e(),t.daKhai&&t.hasForm?a("v-btn",{attrs:{color:"primary"},on:{click:function(a){e.previewFileEfom(t,i)}}},[e._v("In")]):e._e()],1),!e.onlyView||t.daKhai?a("div",{class:{no_acction__event:e.onlyView},attrs:{id:"formAlpaca"+t.partNo+e.id}}):e._e()])],1)],1)],1):e._e()],1)],1),a("div",{staticClass:"absolute__btn group__thanh_phan mr-1"},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-layout",{attrs:{row:"",wrap:""}},[1===e.originality||1!==t.partType||e.thongTinHoSo.online||1===e.checkInput?e._e():a("v-flex",{staticClass:"layout wrap",staticStyle:{width:"110px"}},[a("v-select",{attrs:{items:e.fileMarkItems,disabled:e.onlyView},on:{change:function(t){e.changeFileMark(t,i)}},model:{value:e.dossierTemplateItems[i].fileMark,callback:function(t){e.$set(e.dossierTemplateItems[i],"fileMark",t)},expression:"dossierTemplateItems[index].fileMark"}})],1),1===e.checkInput?a("v-flex",{staticClass:"layout wrap",staticStyle:{width:"120px"}},[a("v-select",{attrs:{items:e.fileCheckItems,"item-text":"text","item-value":"value"},on:{change:function(t){e.changeFileCheck(t,i)}},model:{value:e.dossierTemplateItems[i].fileCheck,callback:function(t){e.$set(e.dossierTemplateItems[i],"fileCheck",t)},expression:"dossierTemplateItems[index].fileCheck"}})],1):t.fileCheck>0?a("v-flex",{staticClass:"layout wrap",style:{width:"20px","align-items":"center","margin-left":"10px","margin-top":e.thongTinHoSo.online?"10px":"0px"}},[1===t.fileCheck?a("v-tooltip",{attrs:{top:""}},[a("v-icon",{staticClass:"mx-0",attrs:{slot:"activator",size:"16",color:"primary"},slot:"activator"},[e._v("done")]),a("span",[e._v("Đạt")])],1):2===t.fileCheck?a("v-tooltip",{attrs:{top:""}},[a("v-icon",{staticClass:"mx-0",attrs:{slot:"activator",size:"16",color:"primary"},slot:"activator"},[e._v("close")]),a("span",[e._v("Không đạt")])],1):e._e()],1):e._e(),1!==e.checkInput?a("v-flex",{class:{"text-xs-right":e.onlyView},style:{width:e.onlyView?"auto":"90px"}},[a("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"file"+t.partNo},on:{change:function(a){e.onUploadSingleFile(a,t,i)}}}),3!==t.partType||3!==e.originality||e.onlyView?e._e():a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(a){e.addFileOther(t)}},slot:"activator"},[a("v-icon",{staticClass:"mx-0",attrs:{size:"16",color:"primary"}},[e._v("add")])],1),a("span",[e._v("Thêm giấy tờ khác")])],1),e.progressUploadPart===t.partNo?a("v-progress-circular",{attrs:{width:2,size:25,color:"green",indeterminate:""}}):e.progressUploadPart===t.partNo||e.onlyView?e._e():a("v-tooltip",{attrs:{left:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(a){e.pickFile(t)}},slot:"activator"},[a("v-badge",[a("v-icon",{attrs:{size:"16",color:"primary"}},[e._v("cloud_upload")])],1)],1),t.partTip["extensions"]||t.partTip["maxSize"]?a("span",[e._v("Chấp nhận tải lên các định dạng: "+e._s(t.partTip["extensions"])+". Tối đa "+e._s(t.partTip["maxSize"])+" MB ")]):a("span",[e._v("Tải file lên")])],1),e.partNoApplicantHasFile(t.partNo)&&!e.onlyView?a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(a){e.showFilesApplicant(t.partNo)}},slot:"activator"},[a("v-badge",[a("v-icon",{attrs:{size:"16",color:"orange darken-3"}},[e._v("warning")])],1)],1),a("span",[e._v("Giấy tờ đã nộp")])],1):e._e()],1):e._e()],1)],1)],1):e._e()}),e.partTypes.includes(2)?e._e():a("div",[a("v-layout",{staticClass:"mx-4",attrs:{wrap:""}},[!e.onlyView||e.onlyView&&e.applicantNoteDossier?a("v-flex",{staticClass:"my-0 py-2 text-bold",staticStyle:{width:"60px"}},[e._v("Ghi chú:")]):e._e(),a("v-flex",{staticStyle:{width:"calc(100% - 80px)"}},[e.onlyView?e._e():a("div",{staticClass:"pl-2"},[a("v-text-field",{staticClass:"py-0",attrs:{"multi-line":"",rows:"3"},on:{input:e.changeApplicantNote},model:{value:e.applicantNoteDossier,callback:function(t){e.applicantNoteDossier=t},expression:"applicantNoteDossier"}})],1),e.onlyView&&e.applicantNoteDossier?a("p",{staticClass:"my-0 py-2"},[e._v("\n            "+e._s(e.applicantNoteDossier)+" \n          ")]):e._e()])],1)],1),a("v-dialog",{attrs:{"max-width":"400",transition:"fade-transition",persistent:""},model:{value:e.dialogAddOtherTemp,callback:function(t){e.dialogAddOtherTemp=t},expression:"dialogAddOtherTemp"}},[a("v-card",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-card-title",{staticClass:"headline"},[e._v("Tên giấy tờ")]),a("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.cancelDialog(t)}}},[a("v-icon",[e._v("clear")])],1),e.loadingAddOther?a("v-progress-linear",{staticClass:"my-0",attrs:{indeterminate:!0}}):e._e(),a("v-card-text",{staticClass:"pb-0 pt-4"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"px-2 pb-3 fix__label",attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Tên giấy tờ:",rules:[function(e){return!!e||"Bạn phải điền tên giấy tờ."}],required:""},model:{value:e.otherDossierTemplate,callback:function(t){e.otherDossierTemplate=t},expression:"otherDossierTemplate"}})],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"red darken-3",flat:"flat"},nativeOn:{click:function(t){return e.cancelDialog(t)}}},[e._v("\n              Quay lại\n            ")]),a("v-btn",{attrs:{color:"primary",flat:"flat",loading:e.loadingAddOther},nativeOn:{click:function(t){return e.addOtherTemplate(t)}}},[e._v("\n              Đồng ý\n              "),a("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])])],1)],1)],1)],1)],2),a("v-dialog",{staticStyle:{overflow:"hidden"},attrs:{"max-width":"900",transition:"fade-transition"},model:{value:e.dialogPDF,callback:function(t){e.dialogPDF=t},expression:"dialogPDF"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e.pdfEform?a("span",[e._v("Bản khai trực tuyến")]):a("span",[e._v("File đính kèm")])]),a("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.dialogPDF=!1}}},[a("v-icon",[e._v("clear")])],1),e.dialogPDFLoading?a("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[a("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):e._e(),a("iframe",{directives:[{name:"show",rawName:"v-show",value:!e.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPDFPreview"+e.id,src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1)],1)},Gt=[],Jt=a("7056"),Qt=Jt["a"],Xt=a("8e36"),Zt=a("b56d"),ea=Object(d["a"])(Qt,zt,Gt,!1,null,null,null);ea.options.__file="TiepNhanHoSo_ThanhPhanHoSo.vue";var ta=ea.exports;p()(ea,{VBadge:ot["a"],VBtn:Ae["a"],VCard:J["a"],VCardActions:Q["a"],VCardText:Q["b"],VCardTitle:ke["a"],VDialog:Oe["a"],VExpansionPanel:X["a"],VExpansionPanelContent:Z["a"],VFlex:ne["a"],VForm:Et["a"],VIcon:P["a"],VLayout:I["a"],VProgressCircular:Me["a"],VProgressLinear:Xt["a"],VSelect:Zt["a"],VSpacer:qt["a"],VTextField:We["a"],VTooltip:de["a"]});var aa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"phancong",staticStyle:{"background-color":"white",width:"100%"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),e._v("Ngày hẹn trả\n      ")]),a("v-card",[a("v-card-text",[a("v-layout",{staticClass:"pl-2",attrs:{wrap:""}},[a("v-icon",{staticClass:"hover-pointer",attrs:{color:"primary"},on:{click:e.showDatePicker}},[e._v("event")]),a("vue-ctk-date-time-picker",{ref:"datepicker",staticClass:"ml-2",staticStyle:{width:"auto!important"},attrs:{format:"YYYY-MM-DDTHH:mm","time-format":"HH:mm","without-header":!0,formatted:"DD/MM/YYYY HH:mm",label:e.dueDateInput?"":"Chọn ngày","min-date":e.minDate},model:{value:e.dueDateInput,callback:function(t){e.dueDateInput=t},expression:"dueDateInput"}})],1)],1)],1)],1)],1)],1)},ia=[],sa={components:{"vue-ctk-date-time-picker":Rt.a},props:["dueDateEdit"],data:()=>({dueDateInput:"",minDate:null}),created(){var e=this;e.dueDateInput=e.dueDateEdit?e.formatDateInput(e.dueDateEdit):"",console.log("dueDateInput",e.dueDateInput)},watch:{},mounted(){this.dueDateInput=this.dueDateEdit?this.formatDateInput(this.dueDateEdit):"",console.log("dueDateInput",this.dueDateInput),this.minDate=this.getCurentDateTime("date")},methods:{getDateInput(){var e=this;console.log("vm.dueDateInput",e.dueDateInput);let t=e.dueDateInput?new Date(e.dueDateInput).getTime():"";return t},getCurentDateTime(e){let t=new Date;return"datetime"===e?`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()} | ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`:"date"===e?`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`:void 0},formatDateInput(e){return`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")} ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`},showDatePicker(){this.$refs.datepicker.showDatePicker()}}},oa=sa,na=Object(d["a"])(oa,aa,ia,!1,null,null,null);na.options.__file="EditDate.vue";var ra=na.exports;p()(na,{VCard:J["a"],VCardText:Q["b"],VExpansionPanel:X["a"],VExpansionPanelContent:Z["a"],VIcon:P["a"],VLayout:I["a"]});var la=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"background-color":"white",width:"100%"}},["overdue"===e.type||"preoverdue"===e.type?a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),a("span",[e._v("Lý do chậm hạn trả")]),a("span",{staticStyle:{color:"red"}},[e._v(" *")])]),a("v-card",[a("v-card-text",{staticClass:"py-2 px-2"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-form",{ref:"delayNoteForm",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{attrs:{"multi-line":"",rows:3,rules:function(){return""!==e.delayNote||"Trường dữ liệu bắt buộc"}},model:{value:e.delayNote,callback:function(t){e.delayNote=t},expression:"delayNote"}})],1)],1)],1)],1)],1)],1)],1):e._e(),a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),"overdue"===e.type||"preoverdue"===e.type?a("span",[e._v("Ngày hẹn lại")]):e._e(),"betimes"===e.type?a("span",[e._v("Ngày hẹn trả sớm")]):e._e()]),a("v-card",[a("v-card-text",[a("v-layout",{staticClass:"pl-2",attrs:{wrap:""}},[a("v-icon",{staticClass:"hover-pointer ml-3",attrs:{color:"blue"},on:{click:e.showDatePicker}},[e._v("event")]),a("vue-ctk-date-time-picker",{ref:"datepicker",staticClass:"ml-2",staticStyle:{width:"auto!important"},attrs:{format:"YYYY-MM-DDTHH:mm","time-format":"HH:mm","without-header":!0,formatted:"DD/MM/YYYY HH:mm",label:e.extendDateInput?"":"Chọn ngày","min-date":e.minDate},model:{value:e.extendDateInput,callback:function(t){e.extendDateInput=t},expression:"extendDateInput"}})],1)],1)],1)],1)],1)],1)},da=[],ca={components:{"vue-ctk-date-time-picker":Rt.a},props:["extendDateEdit","type"],data:()=>({extendDateInput:"",minDate:null,delayNote:""}),created(){},watch:{},mounted(){this.extendDateInput=this.extendDateEdit?this.parseCurrentDate(this.extendDateEdit):this.formatDateInput(new Date),console.log("extendDateInput",this.extendDateInput),this.minDate=this.getCurentDateTime("date")},methods:{doExport(){let e=this,t=e.extendDateInput?new Date(e.extendDateInput).getTime():"";var a;return a="overdue"===e.type||"preoverdue"===e.type?{text:e.delayNote,extendDate:t,valid:e.$refs.delayNoteForm.validate()}:{text:e.delayNote,extendDate:t,valid:!0},a},getCurentDateTime(e){let t=new Date;return"datetime"===e?`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()} | ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`:"date"===e?`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`:void 0},formatDateInput(e){return`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")} ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`},showDatePicker(){this.$refs.datepicker.showDatePicker()},parseCurrentDate(e){if(!e)return null;let[t,a]=e.split(" "),[i,s,o]=`${t}`.split("/"),[n,r,l]=`${a}`.split(":");return`${o}-${s.padStart(2,"0")}-${i.padStart(2,"0")} ${n}:${r}`}}},pa=ca,ua=Object(d["a"])(pa,la,da,!1,null,null,null);ua.options.__file="ExtendDateEdit.vue";var ma=ua.exports;p()(ua,{VCard:J["a"],VCardText:Q["b"],VExpansionPanel:X["a"],VExpansionPanelContent:Z["a"],VFlex:ne["a"],VForm:Et["a"],VIcon:P["a"],VLayout:I["a"],VTextField:We["a"]});var ha=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),e.detailView?a("span",[e._v(e._s(e.currentHoSoLienThong?e.currentHoSoLienThong.dossierName:""))]):a("span",[e._v("Danh sách hồ sơ liên thông")])]),a("v-card",{},[a("v-card-text",{staticClass:"px-0 py-0"},[e.detailView?a("div",[a("v-expansion-panel",{staticClass:"expansion-pl ext__form",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",{attrs:{value:!0}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[e._v(" I.")]),e._v("\n                  Tài liệu nộp     \n                ")]),a("thanh-phan-ho-so",{ref:"thanhphanhoso1",attrs:{onlyView:!0,id:"nm",partTypes:e.inputTypes}})],1)],1),a("v-expansion-panel",{staticClass:"expansion-pl ext__form",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",{attrs:{value:!0}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[e._v(" II.")]),e._v("\n                  Tài liệu kết quả\n                ")]),a("thanh-phan-ho-so",{ref:"thanhphanhoso2",attrs:{onlyView:!0,id:"kq",partTypes:e.outputTypes}})],1)],1),a("v-flex",{staticClass:"mt-3 mb-2 text-right",attrs:{xs12:""}},[a("v-btn",{staticClass:"my-0 mx-0",attrs:{color:"primary"},on:{click:function(t){e.detailView=!1}}},[a("v-icon",{attrs:{size:"16"}},[e._v("undo")]),e._v("  \n                Quay lại danh sách \n              ")],1)],1)],1):a("v-data-table",{staticClass:"table-landing table-bordered",attrs:{headers:e.headers,items:e.listLienThong,"hide-actions":"","item-key":"dossierId"},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",[a("td",{staticClass:"text-xs-center",attrs:{width:"5%"}},[a("span",[e._v(e._s(t.index+1))])]),a("td",{staticClass:"text-xs-left",attrs:{width:"30%"}},[e._v("\n                  "+e._s(t.item.dossierName)+"\n                ")]),a("td",{staticClass:"text-xs-left",attrs:{width:"10%"}},[e._v("\n                  "+e._s(t.item.dossierNo)+"\n                ")]),a("td",{staticClass:"text-xs-left",attrs:{width:"25%"}},[e._v("\n                  "+e._s(t.item.govAgencyName)+"\n                ")]),a("td",{staticClass:"text-xs-left",attrs:{width:"10%"}},[e._v("\n                  "+e._s(t.item.submitDate)+"\n                ")]),a("td",{staticClass:"text-xs-left",attrs:{width:"10%"}},[e._v("\n                  "+e._s(t.item.receiveDate)+"\n                ")]),a("td",{staticClass:"text-xs-left",attrs:{width:"10%"}},[e._v("\n                  "+e._s(t.item.dossierSubStatusText?t.item.dossierSubStatusText:t.item.dossierStatusText)+"\n                ")])])]}}])})],1)],1)],1)],1)],1)},_a=[],ga=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-text",{staticClass:"pb-0"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-header"},[e._v("Thủ tục: ")])],1),a("v-flex",{attrs:{xs12:"",sm10:""}},[a("v-subheader",{staticClass:"pl-0 header-text-field text-header"},[e._v("  "+e._s(e.thongTinChiTietHoSo.serviceName)+" ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-header"},[e._v("Mã số hồ sơ: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[e._v("  "+e._s(e.thongTinChiTietHoSo.dossierNo)+" ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-header"},[e._v("Thời hạn giải quyết: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[e._v("  "+e._s(e.durationText(e.thongTinChiTietHoSo.durationUnit,e.thongTinChiTietHoSo.durationCount))+" làm việc  ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-header"},[e._v("Ngày tiếp nhận: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[e._v("  "+e._s(e.thongTinChiTietHoSo.receiveDate)+" ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-header"},[e._v("Ngày hẹn trả: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[e._v("  "+e._s(e.thongTinChiTietHoSo.dueDate)+" ")])],1)],1)],1)],1)},va=[],fa={data:()=>({thongTinChiTietHoSo:{}}),computed:{loading(){return this.$store.getters.loading}},created(){},methods:{initData(e){this.thongTinChiTietHoSo=e},durationText(e,t){var a;if(1===e&&t>8){let e,i=Math.floor(t/8)+" ngày";e=t%8!==0?8*(t/8-Math.floor(t/8))+" giờ":"",a=`${i} ${e}`}else 0===e?a=t+" ngày":1===e&&t<=8&&(a=t+" giờ");return a}},filters:{dateTimeView(e){if(e){let t=new Date(e);return`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()}  ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`}return""}}},ya=fa,Da=Object(d["a"])(ya,ga,va,!1,null,null,null);Da.options.__file="ThongTinChungHoSo.vue";var Ta=Da.exports;p()(Da,{VCard:J["a"],VCardText:Q["b"],VFlex:ne["a"],VLayout:I["a"],VSubheader:Ke["a"]});var Ca={components:{thongtinchunghoso:Ta,"thanh-phan-ho-so":ta},props:{listLienThong:{type:Array,default:()=>[]},dossierDetail:{type:Object,default:()=>{}}},data:()=>({loading:!1,inputTypes:[1,3],outputTypes:[2],detailView:!1,thongTinLienThong:{},hoSoLienThongItems:[],currentHoSoLienThong:"",lienthongPage:1,headers:[{text:"STT",align:"center",sortable:!1},{text:"Tên hồ sơ",align:"center",sortable:!1},{text:"Mã hồ sơ",align:"center",sortable:!1},{text:"Cơ quan liên thông",align:"center",sortable:!1},{text:"Ngày gửi",align:"center",sortable:!1},{text:"Ngày tiếp nhận",align:"center",sortable:!1},{text:"Trạng thái",align:"center",sortable:!1}]}),computed:{},created(){var e=this;e.$nextTick(function(){})},methods:{getDossierLogs(e){var t=this;let a={dossierId:e.dossierId,type:""};t.$store.dispatch("loadDossierLogs",a).then(t=>{t.length>0&&(e.dossierLog=t)}).catch(e=>{console.log(e)})},viewDetail(e){var t=this;console.log("item",e),t.detailView=!0,t.currentHoSoLienThong=e,setTimeout(function(){t.$refs.thanhphanhoso1&&t.$refs.thanhphanhoso1.initData(e),t.$refs.thanhphanhoso2&&t.$refs.thanhphanhoso2.initData(e)},300)},goBack(){window.history.back()}},filters:{dateTimeView(e){if(e){let t=new Date(e);return`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()}  ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`}return""}}},xa=Ca,Pa=a("8fea"),Ia=Object(d["a"])(xa,ha,_a,!1,null,null,null);Ia.options.__file="HoSoLienThong.vue";var ba=Ia.exports;p()(Ia,{VBtn:Ae["a"],VCard:J["a"],VCardText:Q["b"],VDataTable:Pa["a"],VExpansionPanel:X["a"],VExpansionPanelContent:Z["a"],VFlex:ne["a"],VIcon:P["a"]});var wa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"phancong",staticStyle:{"background-color":"white",width:"100%"}},[1===e.type?a("div",[a("v-layout",{attrs:{wrap:""}},e._l(e.data_phancong,function(t,i){return a("v-checkbox",{key:t.userId,staticStyle:{display:"inline-block","min-width":"190px","max-width":"190px"},attrs:{slot:"activator",label:t.userName,title:t.userName},on:{change:function(t){e.changeAssigned(t,i)}},slot:"activator",model:{value:t.assigned,callback:function(a){e.$set(t,"assigned",a)},expression:"item.assigned"}})}),1),e.assignValidate?e._e():a("span",{staticClass:"ml-3",staticStyle:{color:"#f44336"}},[e._v("* Yêu cầu chọn người để thực hiện")])],1):a("v-card-text",[a("v-layout",{staticClass:"my-1",attrs:{wrap:""}},e._l(e.data_phancong,function(t,i){return a("div",{key:t.userId,staticClass:"ml-3"},[a("v-layout",{attrs:{wrap:""}},[a("v-tooltip",{attrs:{top:""}},[a("v-checkbox",{staticStyle:{"min-width":"150px"},attrs:{slot:"activator",label:t.userName},on:{change:function(t){e.checkAsign(t,i)}},slot:"activator",model:{value:t.assigned,callback:function(a){e.$set(t,"assigned",a)},expression:"item.assigned"}}),a("span",{staticClass:"pl-0"},[e._v(" "+e._s(t.userName)+" ")])],1),a("toggle-button",{staticClass:"mx-1 btn-tgl",attrs:{id:"btn-"+i,title_checked:"Thực hiện",title_unchecked:"Phối hợp",labels:{checked:"TH",unchecked:"PH"},color:{checked:"#7DCE94",unchecked:"#82C7EB"},width:50},on:{change:function(t){e.changeTypeAssign(t,i)}},model:{value:e.presenterAddGroup,callback:function(t){e.presenterAddGroup=t},expression:"presenterAddGroup"}})],1)],1)}),0),e.assignValidate?e._e():a("span",{staticClass:"ml-3",staticStyle:{color:"#f44336"}},[e._v("* Yêu cầu chọn người thực hiện")])],1)],1)},Ea=[],Sa={components:{"toggle-button":Ce},props:{reAsignUsers:{type:Array,default:()=>[]},type:{type:Number,default:()=>1},configNote:{type:Object,default:()=>{}}},model:{prop:"reAsignUsers"},data:()=>({data_phancong:[],assignedtype_items:{2:[{text:"Không có phân công",value:0},{text:"Thực hiện chính",value:1},{text:"Thực hiện phối hợp",value:2}],3:[{text:"Không có phân công",value:0},{text:"Thực hiện chính",value:1},{text:"Thực hiện phối hợp",value:2},{text:"Theo dõi",value:3}]},title_asign:{1:"PHÂN CÔNG NGƯỜI THỰC HIỆN",2:"PHÂN CÔNG THỰC HIỆN, PHỐI HỢP",3:"PHÂN CÔNG THỰC HIỆN, PHỐI HỢP VÀ THEO DÕI"},presenterAddGroup:!0,assignValidate:!0}),created(){setTimeout(function(){window.$(".btn-tgl").addClass("btn-hidden")},200)},mounted(){this.data_phancong=this.reAsignUsers},watch:{reAsignUsers(e){this.data_phancong=e}},methods:{changeAssigned(e,t){var a=this;1===a.type&&(a.reAsignUsers[t].assigned=!0===e?1:0)},checkAsign(e,t){var a=this;e?(a.reAsignUsers[t].assigned=1,window.$(`#btn-${t}`).removeClass("btn-hidden")):(a.reAsignUsers[t].assigned=0,window.$(`#btn-${t}`).addClass("btn-hidden"))},changeTypeAssign(e,t){var a=this;e.value?(a.reAsignUsers[t].assigned=1,window.$(`#btn-${t}`).removeClass("btn-hidden")):(a.reAsignUsers[t].assigned=2,window.$(`#btn-${t}`).addClass("btn-hidden"))},doExport(){var e=this;let t=e.reAsignUsers.filter(function(e){return Number(e.assigned)>0});return 0===t.length?(e.assignValidate=!1,e.assignValidate):(e.assignValidate=!0,e.assignValidate)}}},Na=Sa,Fa=Object(d["a"])(Na,wa,Ea,!1,null,null,null);Fa.options.__file="PhanCongLai.vue";var Aa=Fa.exports;p()(Fa,{VCardText:Q["b"],VCheckbox:Ie["a"],VLayout:I["a"],VTooltip:de["a"]});var ka=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),e._v("Thông tin gửi bưu chính\n    ")]),a("v-card",[a("v-layout",{staticClass:"my-2",attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[e._v("Dịch vụ đăng ký: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("p",{staticClass:"mb-0",staticStyle:{"padding-top":"9px"}},[e._v("VNPOST")])]),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[e._v("Bưu cục: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("p",{staticClass:"mb-0",staticStyle:{"padding-top":"9px"}},[e._v(e._s(e.postName))])]),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[e._v("Tên người nhận: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("p",{staticClass:"mb-0",staticStyle:{"padding-top":"9px"}},[e._v(e._s(e.postalService.applicantName))])]),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[e._v("Số điện thoại: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("p",{staticClass:"mb-0",staticStyle:{"padding-top":"9px"}},[e._v(e._s(e.postalService.postalTelNo))])]),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[e._v("Địa chỉ: ")])],1),a("v-flex",{attrs:{xs12:"",sm10:""}},[a("p",{staticClass:"mb-0",staticStyle:{"padding-top":"9px"}},[e._v(e._s(e.postalService.postalAddress))])])],1)],1)],1)],1)},Oa=[],Ma={props:{postalService:{type:Object,default:()=>{}}},data:()=>({postName:""}),computed:{},created(){var e=this;e.$nextTick(function(){let e=this;e.$store.dispatch("getVNPOSTcode").then(t=>{let a=t.filter(function(t){return Number(t.itemCode)===Number(e.postalService.postalCityCode)});a.length>0&&(e.postName=a[0].itemName)})})},methods:{}},Ua=Ma,La=Object(d["a"])(Ua,ka,Oa,!1,null,null,null);La.options.__file="ThongTinGuiBuuChinh.vue";var Va=La.exports;p()(La,{VCard:J["a"],VExpansionPanel:X["a"],VExpansionPanelContent:Z["a"],VFlex:ne["a"],VIcon:P["a"],VLayout:I["a"],VSubheader:Ke["a"]});var Ba={props:["index","id"],components:{comment:te,"thong-tin-co-ban-ho-so":pe,"phan-cong":we,"tra-ket-qua":Le,"thu-phi":je,"thanh-toan-dien-tu":rt,"ky-duyet":xt,"y-kien-can-bo":Nt,"tai-lieu-ket-qua":Ut,"form-bo-sung-thong-tin":Yt,"thanh-phan-ho-so":ta,"ngay-hen-tra":ra,"thong-tin-buu-chinh":Va,"ngay-gia-han":ma,"chi-tiet-thanh-toan":Xe,"ho-so-lien-thong":ba,"phan-cong-lai":Aa},data:()=>({inputTypes:[1,3],outputTypes:[2],actionIdCurrent:0,validateAction:!0,btnIndex:-1,processActionCurrent:0,activeTab:"tabs-1",activeTab2:"",btnDossierDynamics:[],btnStepsDynamics:[],loadingAction:!1,indexAction:-1,indexActionStep:-1,dossierId:"",className:"org.opencps.dossiermgt.model.Dossier",dossierFilesItems:[],dossierTemplatesItems:[],fileViews:[],showContactDetail:!1,listHistoryProcessing:[],dossierTemplatesTN:[],dossierTemplatesKQ:[],thongTinChiTietHoSo:{},dialogPDF:!1,dialogPDFLoading:!0,loadingAlpacajsForm:!1,nextActions:[],createFiles:[],returnFiles:[],processSteps:[],documents:[],payments:"",dossierActions:[],reAsignUsers:[],itemselect:"",dossierSyncs:[],stepModel:null,actionNote:"",actionsSubmitLoading:!1,showThongTinCoBanHoSo:!1,showYkienCanBoThucHien:!1,showFormBoSungThongTinNgan:!1,showPhanCongNguoiThucHien:!1,showTaoTaiLieuKetQua:!1,showKyPheDuyetTaiLieu:!1,dataEsign:"",typeEsign:"",showTraKetQua:!1,showThuPhi:!1,showPostalService:!1,showThanhToanDienTu:!1,showEditDate:!1,showExtendDateEdit:!1,checkInput:0,viaPortalDetail:0,showThucHienThanhToanDienTu:!1,dossierItemDialogPick:"",itemDialogPick:"",resultDialogPick:"",indexDialogPick:"",userNote:0,partView:"",stateView:!1,paymentDetail:"",paymentProfile:"",payment_type:0,type_assign:0,assign_items:[],btnStateVisible:!0,extendDateEdit:"",typeExtendDate:"",dueDateEdit:"",receiveDateEdit:"",dialogActionProcess:!1,rollbackable:!1,configNote:null,actionSpecial:!1,btnPlugins:[],loadingPlugin:!1,listDossierFiles:[],headers:[{text:"#",align:"center",sortable:!1},{text:"Vai trò",align:"center",sortable:!1,class:"vaitro_column"},{text:"Công việc",align:"center",sortable:!1,class:"congviec_column"},{text:"Thời hạn quy định",align:"center",sortable:!1,class:"thoihanquydinh_column"},{text:"Ngày bắt đầu",align:"center",sortable:!1,class:"ngaybatdau_column"},{text:"Người thực hiện",align:"center",sortable:!1,class:"nguoithuchien_column"},{text:"Kết quả",align:"center",sortable:!1,class:"ketqua_column"}],headerSyncs:[{text:"Nhật kí hồ sơ",align:"center",sortable:!1,class:"nhatki_column"},{text:"Trao đổi trực tuyến",align:"center",sortable:!1,class:"traodoitructuyen_column"}],filterDossierActionItems:[{text:"Tất cả",value:""},{text:"Có thao tác thực hiện",value:"1"},{text:"Không thao tác thực hiện",value:"2"}],filterDossierAction:null,filterDossierSyncItems:[{text:"Tất cả",value:"1,2"},{text:"Thông tin trao đổi",value:"2"}],filterDossierSync:null,messageChat:"",isCallBack:!0,printDocument:!1,alertObj:{icon:"check_circle",color:"success",message:"Thực hiện thành công!"},stateViewResult:!0,stateViewDocument:!0,listLienThong:[],modelPlugin:null,dialogPlugin:!1,dialog_reAsign:!1,loadingMermaidgraph:!1,typeTienTrinh:1,votingItems:[],loadingVoting:!1})},Ra=Ba,Ha=a("ba95"),$a=a("5d23"),Ka=a("71a3"),Wa=a("c671"),qa=a("fe57"),ja=a("aac8"),Ya=a("9a96"),za=Object(d["a"])(Ra,$,K,!1,null,null,null);za.options.__file="XemChiTietHoSoDetailCanBo.vue";var Ga=za.exports;p()(za,{VAlert:Kt["a"],VBtn:Ae["a"],VExpansionPanel:X["a"],VExpansionPanelContent:Z["a"],VFlex:ne["a"],VIcon:P["a"],VLayout:I["a"],VList:re["a"],VListTile:Ha["a"],VListTileTitle:$a["b"],VMenu:le["a"],VTab:Ka["a"],VTabItem:Wa["a"],VTabs:qa["a"],VTabsItems:ja["a"],VTabsSlider:Ya["a"]});var Ja={props:["id","formCode"],components:{"xem-chi-tiet-ho-so-detail-can-bo":Ga},data:()=>({initData:null,step:""})},Qa=Ja,Xa=Object(d["a"])(Qa,R,H,!1,null,null,null);Xa.options.__file="DetailForward.vue";var Za=Xa.exports,ei=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"text-xs-center",attrs:{xs12:"","mt-5":""}},[a("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1)],1)],1)},ti=[],ai={},ii=ai,si=a("a523"),oi=Object(d["a"])(ii,ei,ti,!1,null,null,null);oi.options.__file="NotFound.vue";var ni=oi.exports;p()(oi,{VContainer:si["a"],VFlex:ne["a"],VLayout:I["a"],VProgressCircular:Me["a"]});const ri=[{path:"/danh-sach-ho-so/:index",name:"Landing",component:w,props:!0},{path:"/danh-sach-ho-so/:index/tiep-nhan-ho-so/:id/:formCode",name:"TiepNhanHoSoDetail",component:k,props:!0},{path:"/danh-sach-ho-so/:index/bo-sung-ho-so/:id",name:"HoanThienBoSungHoSoDetail",component:B,props:!0},{path:"/danh-sach-ho-so/:index/ho-so/:id/:formCode",name:"DetailForward",component:Za,props:!0},{path:"*",name:"NotFound",component:ni}];i["a"].use(v["a"]);const li=new v["a"]({routes:ri});var di=li,ci=a("4360"),pi=a("967d"),ui=(a("5a9d"),a("a576"),a("470b"),a("bc3a")),mi=a.n(ui);mi.a.defaults.headers.common["Token"]=void 0!==window.Liferay?window.Liferay.authToken:"",i["a"].use(pi["default"]),i["a"].config.productionTip=!0,i["a"].mixin({methods:{getOriginality:function(){return 3}}}),new i["a"]({router:di,store:ci["a"],beforeCreate(){var e=this;e.$store.dispatch("loadInitResource")},render:function(e){return e(g)}}).$mount("#app_dynamic_report")},7056:function(module,__webpack_exports__,__webpack_require__){"use strict";var jquery__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("1157"),jquery__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__),toastr__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("854a"),toastr__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(toastr__WEBPACK_IMPORTED_MODULE_1__);toastr__WEBPACK_IMPORTED_MODULE_1___default.a.options={closeButton:!0,timeOut:"20000"},__webpack_exports__["a"]={props:{onlyView:{type:Boolean,default:()=>!1},id:{type:String,default:()=>"nm"},partTypes:{type:Array,default:()=>[1,3]},checkInput:{type:Number,default:()=>0}},data:()=>({dossierTemplateItems:[],dossierMarksItems:[],dossierFilesItems:[],thongTinHoSo:{},valid:!0,stateView:!1,dialogAddOtherTemp:!1,loadingAddOther:!1,otherDossierTemplate:"",sheet:!1,partView:"",dossierFileIdView:"",stateEdit:!1,progressUploadPart:"",dialogPDF:!1,dialogPDFLoading:!0,stateAddFileOther:!1,dossierTemplatesItemSelect:{},fileViews:[],pdfEform:!1,sampleCount:0,serviceInfoId:0,fileMarkItems:[{text:"Không có",value:0},{text:"Bản chụp",value:1},{text:"Bản sao",value:2},{text:"Bản gốc",value:3}],fileCheckItems:[{text:"Chưa kiểm tra",value:0},{text:"Đạt",value:1},{text:"Không đạt",value:2}],fileTemplateItems:[],fileTemplateNoString:"",dossierFilesApplicant:[],stateViewResult:!0,currentFormView:"",pstFixed:0,pstEl:0,endEl:0,applicantNoteDossier:""}),computed:{loading(){return this.$store.getters.loading},originality(){var e=this;return e.getOriginality()},initDataResource(){return this.$store.getters.loadingInitData},dossierTemplateItemsFilter(){let e=this,t=e.dossierTemplateItems;if(t.length>0){let a=t.filter(function(t){return e.partTypes.includes(t.partType)&&e.checkVisibleTemp(t,0)});return a}},applicantBussinessExit(){return this.$store.getters.getApplicantBussinessExit},applicantId(){return this.$store.getters.getApplicantIdNo},applicantNote(){return this.$store.getters.getApplicantNote}},mounted(){var e=this;e.page=1,e.$nextTick(function(){})},watch:{applicantBussinessExit(e){let t=this;e&&t.fileTemplateNoString&&t.getDossierFileApplicants(e,t.fileTemplateNoString)},applicantId(e){let t=this;e&&t.fileTemplateNoString&&t.getDossierFileApplicants(e,t.fileTemplateNoString)}},methods:{resetCounterTemplate({commit:e,state:t},a){var i=this;i.dossierTemplateItems.forEach(e=>{e.partNo===a.partNo&&(e.hasForm?e.count=1:e.count=0)})},recountFileTemplates(){var e=this;e.dossierTemplateItems.forEach(t=>{t.count=0,e.dossierFilesItems.forEach(e=>{t.partNo!==e.dossierPartNo||e.eForm||t.count++})})},initData(e){var t=this;t.thongTinHoSo=e,t.applicantNoteDossier=e["applicantNote"];var a=[];null!==e["sampleCount"]&&void 0!==e["sampleCount"]&&"undefined"!==e["sampleCount"]&&(t.sampleCount=e["sampleCount"]),a.push(t.$store.dispatch("loadDossierTemplates",e)),a.push(t.$store.dispatch("loadDossierMark",e)),a.push(t.$store.dispatch("loadDossierFiles",e.dossierId)),a.push(t.$store.dispatch("getServiceInfo",{serviceInfoId:e.serviceCode})),Promise.all(a).then(e=>{var a=e[0],i=e[1],s=e[2],o=[];e[3].hasOwnProperty("serviceInfoId")&&(t.serviceInfoId=e[3].serviceInfoId),e[3].fileTemplates&&(Array.isArray(e[3].fileTemplates)?o=e[3].fileTemplates:o.push(e[3].fileTemplates));var n=t.mergeDossierTemplateVsDossierFiles(a,s);if(n=t.mergeDossierTemplateVsDossierMark(n,i),n=t.mergeDossierTemplateVsFileTemplates(n,o),t.dossierFilesItems=s,t.dossierMarksItems=i,t.fileTemplateItems=o,t.dossierTemplateItems=n,t.partTypes.includes(2)&&t.dossierTemplateItems.length>0){let e=[];t.dossierTemplateItems.forEach(a=>{let i=t.dossierFilesItems.find(e=>{return a.partNo===e.dossierPartNo&&2===a.partType});i&&e.push(a)}),t.dossierTemplateItems=e,console.log("dossierTemplateItems555",t.dossierTemplateItems)}t.changeStateViewResult(),setTimeout(function(e){t.genAllAlpacaForm(s,n),t.recountFileTemplates()},500),console.log("dossierTemplateItems",t.dossierTemplateItems);let r=[];for(let l in t.dossierTemplateItems)t.dossierTemplateItems[l]["fileTemplateNo"]&&r.push(t.dossierTemplateItems[l]["fileTemplateNo"]);r.length>0&&(t.fileTemplateNoString=r.toString(),console.log("fileTemplateNoString",t.fileTemplateNoString),t.applicantId&&!t.onlyView&&t.getDossierFileApplicants(t.applicantId,t.fileTemplateNoString))}).catch(e=>{})},genAllAlpacaForm(e,t){var a=this;if(e.length>0){var i=e.filter(e=>{return e.eForm}),s=t.filter(e=>{return e.hasForm&&a.partTypes.includes(e.partType)});i.length>0?i.forEach(e=>{e.eForm&&a.$store.dispatch("loadAlpcaForm",e)}):t.forEach(e=>{e.hasForm&&a.partTypes.includes(e.partType)&&(e["templateFileNo"]=a.thongTinHoSo.dossierTemplateNo,a.showAlpacaJSFORM(e))}),s.length!==i.length&&s.forEach(e=>{let t=i.findIndex(t=>{return e.partNo===t.dossierPartNo});-1===t&&(e["templateFileNo"]=a.thongTinHoSo.dossierTemplateNo,a.showAlpacaJSFORM(e))})}else t.forEach(e=>{e.hasForm&&a.partTypes.includes(e.partType)&&(e["templateFileNo"]=a.thongTinHoSo.dossierTemplateNo,a.showAlpacaJSFORM(e))})},postDossierMark(e,t){var a=this;e["dossierId"]=a.thongTinHoSo.dossierId,a.$store.dispatch("postDossierMark",e).then(e=>{}).catch(e=>{})},mergeDossierTemplateVsDossierFiles(e,t){var a=this;return 0!==t.length?e.forEach(e=>{e["daKhai"]=!1,e["passRequired"]=!1;var i=t.find(t=>{return e.partNo===t.dossierPartNo&&a.partTypes.includes(e.partType)&&t.eForm&&!t.removed});i&&(e["daKhai"]=!0,e["hasForm"]=!0,e["referenceUid"]=i["referenceUid"]),t.forEach(t=>{e.partNo===t.dossierPartNo&&(e["passRequired"]=!0)})}):e.forEach(e=>{e.hasForm&&(e["daKhai"]=!1,e["passRequired"]=!1)}),e},mergeDossierTemplateVsDossierMark(e,t){return 0!==t.length?e.map(e=>{e["count"]=0,e["stateEditFileCheck"]=!1;let a=t.find(t=>{return t.dossierPartNo===e.partNo});return null!==a&&void 0!==a?(e["fileMark"]=a.fileMark,e["fileComment"]=a.fileComment,e["fileCheck"]=a.fileCheck):(e["fileMark"]=0,e["fileComment"]="",e["fileCheck"]=0),e}):e&&e.forEach(e=>{e["stateEditFileCheck"]=!1,e["count"]=0,e["fileMark"]=0,e["fileComment"]="",e["fileCheck"]=0,e["stateEditFileCheck"]=!1}),e},mergeDossierTemplateVsFileTemplates(e,t){return 0!==t.length?e.map(e=>{let a=t.find(t=>{return t.fileTemplateNo===e.fileTemplateNo});return e["hasFileTemp"]=null!==a&&void 0!==a?a.fileTemplateNo:"",e}):e&&e.forEach(e=>{e["hasFileTemp"]=""}),e},showAlpacaJSFORM(item){var vm=this;item["dossierId"]=vm.thongTinHoSo.dossierId,vm.$store.dispatch("loadFormScript",item).then(resScript=>{vm.$store.dispatch("loadFormData",item).then(resData=>{var formScript,formData;window.$("#formAlpaca"+item.partNo+vm.id).empty(),formScript=resScript?eval("("+resScript+")"):{},formData=resData?eval("("+resData+")"):{},formScript.data=formData,window.$("#formAlpaca"+item.partNo+vm.id).alpaca(formScript)})})},saveAlpacaForm(e,t){var a=this,i=a.dossierFilesItems.find(t=>{return t.dossierPartNo===e.partNo&&t.eForm});i?(i["dossierId"]=a.thongTinHoSo.dossierId,i["id"]=a.id,a.$store.dispatch("putAlpacaForm",i).then(e=>{a.$store.dispatch("loadDossierFiles",a.thongTinHoSo.dossierId).then(e=>{a.dossierFilesItems=e}).catch(e=>{}),a.dossierTemplateItems[t]["passRequired"]=!0}).catch(e=>{toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Yêu cầu của bạn thực hiện thất bại.")})):(e["dossierId"]=a.thongTinHoSo.dossierId,e["id"]=a.id,a.$store.dispatch("postEform",e).then(e=>{a.dossierTemplateItems[t].daKhai=!0,a.dossierTemplateItems[t]["passRequired"]=!0,a.$store.dispatch("loadDossierFiles",a.thongTinHoSo.dossierId).then(e=>{a.dossierFilesItems=e}).catch(e=>{toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Yêu cầu của bạn thực hiện thất bại.")})}).catch(e=>{toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Yêu cầu của bạn thực hiện thất bại.")}))},onDeleteAttackFiles(e){var t=this;console.log("delete");let a=confirm("Bạn có muốn xóa toàn bộ file trong thành phần hồ sơ này?");a&&t.dossierFilesItems.forEach(a=>{a.dossierPartNo===e.partNo&&(a["dossierId"]=t.thongTinHoSo.dossierId,t.$store.dispatch("deleteAttackFiles",a).then(function(a){t.resetCounterTemplate(e),t.$store.dispatch("loadDossierFiles",t.thongTinHoSo.dossierId)}).catch(function(e){}))})},changeApplicantNote(){let e=this;console.log("applicantNoteEdit",e.applicantNoteDossier),e.$store.commit("setApplicantNote",e.applicantNoteDossier)},pickFile(e){var t=this;t.stateAddFileOther=!1,document.getElementById("file"+e.partNo).value="",document.getElementById("file"+e.partNo).click()},onUploadSingleFile(e,t,a){var i=this;if(console.log("vm.dossierTemplateItems[index]",i.dossierTemplateItems[a]),i.dossierTemplatesItemSelect=t,i.progressUploadPart=t.partNo,t["dossierId"]=i.thongTinHoSo.dossierId,t["dossierTemplateNo"]=i.thongTinHoSo.dossierTemplateNo,3!==t.partType)i.$store.dispatch("uploadSingleFile",t).then(function(e){i.dossierTemplateItems[a]["passRequired"]=!0,i.progressUploadPart="",i.$store.dispatch("loadDossierFiles",i.thongTinHoSo.dossierId).then(e=>{i.dossierFilesItems=e,i.recountFileTemplates()})}).catch(function(e){i.progressUploadPart=""});else{if(0===window.$("#file"+t.partNo)[0].files.length)return void(i.progressUploadPart="");i.partView=t.partNo,i.stateView=!0,i.dialogAddOtherTemp=!0}},loadAlpcaForm(e){var t=this;t.currentFormView="formAlpaca"+e.partNo+t.id,t.pstEl=t.endEl=0,setTimeout(function(){jquery__WEBPACK_IMPORTED_MODULE_0___default()("#formAlpaca"+e.partNo+t.id).height()>200&&(t.pstEl=jquery__WEBPACK_IMPORTED_MODULE_0___default()("#wrapForm"+e.partNo+t.id).offset().top,t.endEl=jquery__WEBPACK_IMPORTED_MODULE_0___default()("#formAlpaca"+e.partNo+t.id).height(),jquery__WEBPACK_IMPORTED_MODULE_0___default()(window).scroll(function(){t.pstFixed=jquery__WEBPACK_IMPORTED_MODULE_0___default()(window).scrollTop()}))},500);var a=t.dossierFilesItems.find(t=>{return t.dossierPartNo===e.partNo&&t.eForm});a?(a["id"]=t.id,t.$store.dispatch("loadAlpcaForm",a)):t.dossierTemplateItems.forEach(a=>{a.hasForm&&e.partNo===a.partNo&&(a["templateFileNo"]=t.thongTinHoSo.dossierTemplateNo,t.showAlpacaJSFORM(a))})},deleteSingleFileEform(e,t){var a=this;let i=confirm("Bạn có chắc chắn xóa file?");i&&a.dossierFilesItems.forEach(i=>{i.dossierPartNo===e.partNo&&i.eForm&&(i["dossierId"]=a.thongTinHoSo.dossierId,a.$store.dispatch("deleteDossierFile",i).then(i=>{console.log("success!"),a.dossierTemplateItems[t].daKhai=!1,a.$store.dispatch("loadDossierFiles",a.thongTinHoSo.dossierId).then(i=>{if(a.dossierFilesItems=i,a.recountFileTemplates(),0!==a.dossierFilesItems.length){var s=a.dossierFilesItems.filter(t=>{return t.dossierPartNo===e.partNo});a.dossierTemplateItems[t]["passRequired"]=!!s}else a.dossierTemplateItems[t]["passRequired"]=!1})}))})},previewFileEfom(e,t){var a=this;a.dossierFilesItems.forEach(t=>{t.dossierPartNo===e.partNo&&t.eForm&&!t.removed&&(t["dossierId"]=a.thongTinHoSo.dossierId,a.dialogPDFLoading=!0,a.dialogPDF=!0,a.onlyView?a.$store.dispatch("viewFile",t).then(e=>{a.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+a.id).src=e}):(t["id"]=a.id,a.$store.dispatch("putAlpacaForm",t).then(e=>{setTimeout(function(){a.$store.dispatch("viewFile",t).then(e=>{a.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+a.id).src=e})},1e3)}).catch(e=>{toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Yêu cầu của bạn thực hiện thất bại.")})))})},deleteSingleFile(e,t){var a=this;let i=confirm("Bạn có chắc chắn xóa file đính kèm ?");i&&(e["dossierId"]=a.thongTinHoSo.dossierId,a.$store.dispatch("deleteDossierFile",e).then(i=>{a.fileViews.splice(t,1),a.stateView=!0,a.partView=e.dossierPartNo,a.$store.dispatch("loadDossierFiles",a.thongTinHoSo.dossierId).then(t=>{a.dossierFilesItems=t,a.setDaKhai(e)})}).catch(e=>{toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Yêu cầu của bạn thực hiện thất bại.")}))},viewFile(e){var t=this;t.dossierFilesItems.forEach(a=>{a["dossierId"]=t.thongTinHoSo.dossierId,a.dossierPartNo===e.partNo&&this.$store.dispatch("viewFile",a)})},setDaKhai(e){var t=this;let a=t.dossierFilesItems.findIndex(t=>{return t.dossierPartNo===e.dossierPartNo});if(-1===a){for(var i=0;i<t.dossierTemplateItems.length;i++)if(t.dossierTemplateItems[i].partNo===e.dossierPartNo){t.dossierTemplateItems[i]["passRequired"]=!1;break}}else for(i=0;i<t.dossierTemplateItems.length;i++)if(t.dossierTemplateItems[i].partNo===e.dossierPartNo){t.dossierTemplateItems[i]["passRequired"]=!0;break}},checkPartType3(){var e=this;if(0!==e.dossierTemplateItems.length)for(var t=0;t<e.dossierTemplateItems.length;t++)if(3===e.dossierTemplateItems[t].partType)return!0;return!1},viewFile2(e){var t=this;if(0!==e.fileSize)if(e["hasForm"]?t.pdfEform=!0:t.pdfEform=!1,"doc"===e.fileType||"docx"===e.fileType||"xlsx"===e.fileType||"xls"===e.fileType||"zip"===e.fileType||"rar"===e.fileType||"txt"===e.fileType||"mp3"===e.fileType||"mp4"===e.fileType){var a=t.initDataResource.dossierApi+"/"+t.thongTinHoSo.dossierId+"/files/"+e.referenceUid;window.open(a)}else e["dossierId"]=t.thongTinHoSo.dossierId,e.referenceUid?(t.dialogPDFLoading=!0,t.dialogPDF=!0,t.$store.dispatch("viewFile",e).then(e=>{t.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+t.id).src=e})):toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("File dữ liệu không tồn tại")},viewGiayToDaNop(e){var t=this;if(0!==e.fileSize)if(e["hasForm"]?t.pdfEform=!0:t.pdfEform=!1,"doc"===e.fileType||"docx"===e.fileType||"xlsx"===e.fileType||"xls"===e.fileType||"zip"===e.fileType||"rar"===e.fileType||"txt"===e.fileType||"mp3"===e.fileType||"mp4"===e.fileType){var a=t.initDataResource.dossierApi+"/"+e.dossierId+"/files/"+e.referenceUid;window.open(a)}else e.referenceUid?(t.dialogPDFLoading=!0,t.dialogPDF=!0,t.$store.dispatch("viewFile",e).then(e=>{t.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+t.id).src=e})):toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("File dữ liệu không tồn tại")},viewFileWithPartNo(e){var t=this;if(t.dossierFilesItems){var a=t.dossierFilesItems.filter(t=>{return t.dossierPartNo===e.partNo&&!t.eForm});if(!a)return;t.fileViews=a,t.partView!==e.partNo?(t.stateView=!0,t.partView=e.partNo):(t.stateView=!t.stateView,t.partView=e.partNo)}},saveMark(){var e=this;e.dossierTemplateItems&&e.dossierTemplateItems.forEach(function(t,a){1===t.partType&&(t["dossierId"]=e.thongTinHoSo.dossierId,e.$store.dispatch("postDossierMark",t))})},changeFileMark(e,t){var a=this;let i=a.dossierTemplateItems[t];i["dossierId"]=a.thongTinHoSo.dossierId,i["fileMark"]=e,i["checkInput"]=a.checkInput,a.$store.dispatch("postDossierMark",i),a.dossierTemplateItems[t].fileMark=e},changeFileCheck(e,t){var a=this;let i=a.dossierTemplateItems[t];i["dossierId"]=a.thongTinHoSo.dossierId,i["fileCheck"]=e,i["checkInput"]=a.checkInput,2!==e?(i["fileComment"]="",a.$store.dispatch("postDossierMark",i),a.dossierTemplateItems[t].fileCheck=e):i["stateEditFileCheck"]=!0},changeFileComment(e,t){var a=this;null!==e.fileComment&&void 0!==e.fileComment&&""!==e.fileComment&&(e["dossierId"]=a.thongTinHoSo.dossierId,e["fileComment"]=e.fileComment,e["checkInput"]=a.checkInput,e["stateEditFileCheck"]=!e["stateEditFileCheck"],a.$store.dispatch("postDossierMark",e),a.dossierTemplateItems[t].fileComment=e.fileComment)},checkStyle(e){var t=this;if(1===t.checkInput)return"calc(100% - 140px)";{let a=0;return 1===t.originality||1!==e.partType||t.thongTinHoSo.online||1===t.checkInput||(a+=140),e.fileCheck>0&&!t.thongTinHoSo.online&&(a+=20),e.fileCheck>0&&t.thongTinHoSo.online&&(a+=40),t.onlyView||(a+=90),"calc(100% - "+a+"px)"}},checkVisibleTemp(e,t){var a=this;if(!a.onlyView)return!0;if(3===e.partType){if(a.dossierFilesItems.length>0){let t=a.dossierFilesItems.findIndex(t=>{return t.dossierPartNo===e.partNo});return-1!==t}return!1}return!0},changeStateViewResult(){var e=this;if(e.dossierFilesItems.length>0){let t=e.dossierFilesItems.findIndex(e=>{return 2===e.dossierPartType});-1!==t?e.$emit("tp:change-state-view-result",!0):e.$emit("tp:change-state-view-result",!1)}else e.partTypes.includes(2)&&e.$emit("tp:change-state-view-result",!1)},changeOtherDossierTemp(e){var t=this;if(3===t.originality&&t.stateAddFileOther)t.loadingAddOther=!0,t.$store.dispatch("uploadSingleOtherFile",{dossierId:t.thongTinHoSo.dossierId,displayName:e,partNo:t.dossierTemplatesItemSelect.partNo}).then(e=>{t.loadingAddOther=!1,t.dialogAddOtherTemp=!1,t.$store.dispatch("loadDossierFiles",t.thongTinHoSo.dossierId).then(e=>{t.dossierFilesItems=e})}).catch(e=>{t.loadingAddOther=!1});else{let a=t.dossierTemplatesItemSelect;a["dossierId"]=t.thongTinHoSo.dossierId,a["displayName"]=e,a["dossierTemplateNo"]=t.thongTinHoSo.dossierTemplateNo,t.$store.dispatch("uploadSingleFile",a).then(function(e){t.progressUploadPart="",t.dialogAddOtherTemp=!1,t.$store.dispatch("loadDossierFiles",t.thongTinHoSo.dossierId).then(e=>{if(t.dossierFilesItems=e,t.recountFileTemplates(),t.stateView&&t.dossierFilesItems){var a=t.dossierFilesItems.filter(e=>{return e.dossierPartNo===t.dossierTemplatesItemSelect.partNo&&!e.eForm});a&&(t.fileViews=a)}})}).catch(function(e){t.progressUploadPart=""})}},downloadFileTemplate(e,t){var a=this;if(a.fileTemplateItems.length>0){let t=a.fileTemplateItems.find(t=>{return e.fileTemplateNo===t.fileTemplateNo});if(t){let e=a.initDataResource.serviceInfoApi+"/"+a.serviceInfoId+"/filetemplates/"+t.fileTemplateNo;window.open(e)}else console.log("ko thay file")}},addOtherTemplate(){var e=this;e.$refs.form.validate()&&e.changeOtherDossierTemp(e.otherDossierTemplate)},editDisplayName(e,t){var a=this;a.dossierFileIdView!==e.dossierFileId?(a.dossierFileIdView=e.dossierFileId,a.stateEdit=!0):(a.dossierFileIdView=e.dossierFileId,a.stateEdit=!a.stateEdit)},cancelDialog(){var e=this;e.dialogAddOtherTemp=!1,e.progressUploadPart=""},addFileOther(e){var t=this;t.dialogAddOtherTemp=!0,t.stateAddFileOther=!0,t.dossierTemplatesItemSelect=e},validDossierTemplate(){var e=this;if(e.dossierTemplateItems.length>0){for(var t=0;t<e.dossierTemplateItems.length;t++)if(e.dossierTemplateItems[t]["required"]&&!e.dossierTemplateItems[t]["passRequired"]&&e.partTypes.includes(e.dossierTemplateItems[t].partType)){let a="Chú ý :"+e.dossierTemplateItems[t].partName+" là thành phần bắt buộc!";return toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error(a),!1}return!0}return!0},changeDisplayName(e,t){var a=this;let i={dossierId:a.thongTinHoSo.dossierId,value:value};a.$store.dispatch("changeDisplayNameFile",i).then(e=>{a.fileViews[t].displayName=e.displayName,a.stateEdit=!1}).catch(e=>{console.log("error")})},getDossierFileApplicants(e,t){var a=this;let i={dossierId:a.thongTinHoSo.dossierId,applicantIdNo:e,fileTemplateNo:t};a.$store.dispatch("getDossierFilesApplicants",i).then(e=>{a.dossierFilesApplicant=e}).catch(e=>{console.log("error")})},showFilesApplicant(e){console.log(jquery__WEBPACK_IMPORTED_MODULE_0___default()("#fileApplicant-"+e).is(":visible")),jquery__WEBPACK_IMPORTED_MODULE_0___default()("#fileApplicant-"+e).is(":visible")?jquery__WEBPACK_IMPORTED_MODULE_0___default()("#fileApplicant-"+e).hide():jquery__WEBPACK_IMPORTED_MODULE_0___default()("#fileApplicant-"+e).show()},checkKQhasFile(e){var t=this;if(t.partTypes.includes(2)){var a=t.dossierFilesItems.find(t=>{return e.partNo===t.dossierPartNo});return!!a}return!0},partNoApplicantHasFile(e){let t=this,a=t.dossierFilesApplicant.find(a=>{return a.dossierTemplateNo===t.thongTinHoSo["dossierTemplateNo"]&&a.dossierPartNo===e});return!!a}}}},"74ef":function(e,t,a){},"78a5":function(module,__webpack_exports__,__webpack_require__){"use strict";var toastr__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("854a"),toastr__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(toastr__WEBPACK_IMPORTED_MODULE_0__);toastr__WEBPACK_IMPORTED_MODULE_0___default.a.options={closeButton:!0,timeOut:"5000"},__webpack_exports__["a"]={props:{id:{type:String,default:()=>"nm"},detailDossier:{type:Object,default:()=>{}},createFiles:{type:Array,default:()=>[]}},data:()=>({dossierTemplateItems:[],dossierMarksItems:[],dossierFilesItems:[],thongTinHoSo:{},valid:!0,stateView:!1,dialogAddOtherTemp:!1,loadingAddOther:!1,otherDossierTemplate:"",sheet:!1,partView:"",dossierFileIdView:"",stateEdit:!1,progressUploadPart:"",dialogPDF:!1,dialogPDFLoading:!0,stateAddFileOther:!1,dossierTemplatesItemSelect:{},fileViews:[],sampleCount:0,fileTemplateItems:[],currentFormView:"",pstFixed:0,pstEl:0,endEl:0}),computed:{loading(){return this.$store.getters.loading},originality(){var e=this;return e.getOriginality()},initDataResource(){return this.$store.getters.loadingInitData}},created(){var e=this;e.page=1,e.$nextTick(function(){if(e.detailDossier["dossierId"]){var t=[];t.push(e.$store.dispatch("loadDossierFiles",e.detailDossier.dossierId)),t.push(e.$store.dispatch("loadDossierTemplates",e.detailDossier)),Promise.all(t).then(t=>{var a=t[1],i=t[0];e.dossierFilesItems=i,e.createFiles=e.mergeDossierTemplateVsDossierFiles(e.createFiles,i),0!==a.length&&e.createFiles.forEach(e=>{var t=a.find(t=>{return e.partNo===t.partNo});t&&(e["partTip"]=t["partTip"])}),console.log("creataaaaaa",e.createFiles)})}})},mounted(){var e=this;e.$nextTick(function(){e.createFiles.length>0&&setTimeout(function(){e.genAllAlpacaForm(e.dossierFilesItems,e.createFiles)},300)})},methods:{genAllAlpacaForm(e,t){var a=this;if(e.length>0){var i=e.filter(e=>{return e.eForm}),s=t.filter(e=>{return e.eForm});i.length>0?i.forEach(e=>{e.eForm&&a.$store.dispatch("loadAlpcaForm",e)}):t.forEach(e=>{e.eForm&&(e["templateFileNo"]=a.detailDossier.dossierTemplateNo,a.showAlpacaJSFORM(e))}),s.length!==i.length&&s.forEach(e=>{let t=i.findIndex(t=>{return e.partNo===t.dossierPartNo});-1===t&&(e["templateFileNo"]=a.detailDossier.dossierTemplateNo,a.showAlpacaJSFORM(e))})}else t.forEach(e=>{e.eForm&&(e["templateFileNo"]=a.detailDossier.dossierTemplateNo,a.showAlpacaJSFORM(e))})},mergeDossierTemplateVsDossierFiles(e,t){return 0!==t.length?e.forEach(e=>{var a=t.find(t=>{return e.partNo===t.dossierPartNo&&t.eForm});a?e["daKhai"]=!0:!a&&e.eForm&&(e["daKhai"]=!1)}):e.forEach(e=>{e.eForm&&(e["daKhai"]=!1)}),e},showAlpacaJSFORM(item){var vm=this;item["dossierId"]=vm.detailDossier.dossierId,vm.$store.dispatch("loadFormScript",item).then(resScript=>{vm.$store.dispatch("loadFormData",item).then(resData=>{var formScript,formData;window.$("#formAlpaca"+item.partNo+vm.id).empty(),formScript=resScript?eval("("+resScript+")"):{},formData=resData?eval("("+resData+")"):{},formScript.data=formData,window.$("#formAlpaca"+item.partNo+vm.id).alpaca(formScript)})})},saveAlpacaForm(e,t){var a=this;console.log("itemSave",e);var i=a.dossierFilesItems.find(t=>{return t.dossierPartNo===e.partNo&&t.eForm});i?(i["dossierId"]=a.detailDossier.dossierId,i["id"]=a.id,a.$store.dispatch("putAlpacaForm",i).then(e=>{a.$store.dispatch("loadDossierFiles",a.detailDossier.dossierId).then(e=>{a.dossierFilesItems=e}).catch(e=>{})}).catch(e=>{console.log("run saveForm"),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn được thực hiện thất bại.")})):(e["dossierId"]=a.detailDossier.dossierId,e["id"]=a.id,a.$store.dispatch("postEform",e).then(e=>{a.createFiles[t].daKhai=!0,a.$store.dispatch("loadDossierFiles",a.detailDossier.dossierId).then(e=>{a.dossierFilesItems=e}).catch(e=>{toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn được thực hiện thất bại.")})}).catch(e=>{toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn được thực hiện thất bại.")}))},onDeleteAttackFiles(e){var t=this;console.log("delete");let a=confirm("Bạn có muốn xóa toàn bộ file trong thành phần hồ sơ này?");a&&t.dossierFilesItems.forEach(a=>{a.dossierPartNo===e.partNo&&(a["dossierId"]=t.detailDossier.dossierId,t.$store.dispatch("deleteAttackFiles",a).then(function(e){t.$store.dispatch("loadDossierFiles",t.detailDossier.dossierId)}).catch(function(e){}))})},pickFile(e){var t=this;t.stateAddFileOther=!1,document.getElementById("file"+e.partNo).value="",document.getElementById("file"+e.partNo).click()},onUploadSingleFile(e,t){var a=this;a.dossierTemplatesItemSelect=t,a.progressUploadPart=t.partNo,t["dossierId"]=a.detailDossier.dossierId,t["dossierTemplateNo"]=a.detailDossier.dossierTemplateNo,a.$store.dispatch("uploadSingleFile",t).then(function(e){a.progressUploadPart="",a.$store.dispatch("loadDossierFiles",a.detailDossier.dossierId).then(e=>{a.dossierFilesItems=e})}).catch(function(e){a.progressUploadPart=""})},loadAlpcaForm(e){var t=this;t.currentFormView="formAlpaca"+e.partNo+t.id,t.pstEl=t.endEl=0,setTimeout(function(){$("#formAlpaca"+e.partNo+t.id).height()>200&&(t.pstEl=$("#wrapForm"+e.partNo+t.id).offset().top,t.endEl=$("#formAlpaca"+e.partNo+t.id).height(),$(window).scroll(function(){t.pstFixed=$(window).scrollTop()}))},500);var a=t.dossierFilesItems.find(t=>{return t.dossierPartNo===e.partNo&&t.eForm});a?(a["id"]=t.id,t.$store.dispatch("loadAlpcaForm",a)):t.createFiles.forEach(a=>{a.eForm&&e.partNo===a.partNo&&(a["templateFileNo"]=t.detailDossier.dossierTemplateNo,t.showAlpacaJSFORM(a))})},deleteSingleFileEform(e,t){var a=this;let i=confirm("Bạn có muốn xóa?");i&&(a.dossierFilesItems.forEach(t=>{t.dossierPartNo===e.partNo&&t.eForm&&(t["dossierId"]=a.detailDossier.dossierId,a.$store.dispatch("deleteDossierFile",t).then(t=>{console.log("success!"),a.$store.dispatch("loadDossierFiles",a.detailDossier.dossierId).then(t=>{a.dossierFilesItems=t;var i=a.dossierFilesItems.filter(t=>{return t.dossierPartNo===e.partNo&&!t.eForm});i&&(a.fileViews=i)})}))}),a.createFiles[t].daKhai=!1)},previewFileEfom(e,t){var a=this;a.dossierFilesItems.forEach(t=>{t.dossierPartNo===e.partNo&&t.eForm&&(t["dossierId"]=a.detailDossier.dossierId,a.dialogPDFLoading=!0,a.dialogPDF=!0,t["id"]=a.id,a.$store.dispatch("putAlpacaForm",t).then(e=>{setTimeout(function(){a.$store.dispatch("viewFile",t).then(e=>{a.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+a.id).src=e})},1e3)}).catch(e=>{toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn được thực hiện thất bại.")}))})},deleteSingleFile(e,t){var a=this;let i=confirm("Bạn có muốn xóa?");i&&(e["dossierId"]=a.detailDossier.dossierId,a.$store.dispatch("deleteDossierFile",e).then(i=>{a.fileViews.splice(t,1),a.partView=e.dossierPartNo,a.$store.dispatch("loadDossierFiles",a.detailDossier.dossierId).then(e=>{a.dossierFilesItems=e})}).catch(e=>{toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn được thực hiện thất bại.")}))},viewFile(e){var t=this;t.dossierFilesItems.forEach(a=>{a["dossierId"]=t.detailDossier.dossierId,a.dossierPartNo===e.partNo&&this.$store.dispatch("viewFile",a)})},viewFile2(e){var t=this;if("doc"===e.fileType||"docx"===e.fileType||"xlsx"===e.fileType||"xls"===e.fileType||"zip"===e.fileType||"rar"===e.fileType||"txt"===e.fileType){var a=t.initDataResource.dossierApi+"/"+t.detailDossier.dossierId+"/files/"+e.referenceUid;window.open(a)}else t.dialogPDFLoading=!0,t.dialogPDF=!0,e["dossierId"]=t.detailDossier.dossierId,t.$store.dispatch("viewFile",e).then(e=>{t.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+t.id).src=e})},viewFileWithPartNo(e){var t=this;if(t.dossierFilesItems){var a=t.dossierFilesItems.filter(t=>{return t.dossierPartNo===e.partNo&&!t.eForm});if(!a)return;t.fileViews=a,t.partView!==e.partNo?(t.stateView=!0,t.partView=e.partNo):(t.stateView=!t.stateView,t.partView=e.partNo)}},checkStyle(e){return"calc(100% - 50px)"},downloadFileTemplate(e,t){var a=this;if(a.fileTemplateItems.length>0){let t=a.fileTemplateItems.find(t=>{return e.fileTemplateNo===t.fileTemplateNo});if(t){let e=a.initDataResource.serviceInfoApi+"/"+t.serviceCode+"/filetemplates/"+t.fileTemplateNo;window.open(e)}else console.log("ko thay file")}},cancelDialog(){var e=this;e.dialogAddOtherTemp=!1,e.progressUploadPart=""},addFileOther(e){var t=this;t.dialogAddOtherTemp=!0,t.stateAddFileOther=!0,t.dossierTemplatesItemSelect=e},changeDisplayName(e,t){var a=this;let i={dossierId:a.detailDossier.dossierId,value:value};a.$store.dispatch("changeDisplayNameFile",i).then(e=>{a.fileViews[t].displayName=e.displayName,a.stateEdit=!1}).catch(e=>{console.log("error")})},validCreateFileTemplate(){var e=this;if(e.createFiles.length>0){for(var t=0;t<e.createFiles.length;t++)if(e.createFiles[t]["required"]&&!e.createFiles[t]["daKhai"]){let a="Chú ý :"+e.createFiles[t].partName+" là thành phần bắt buộc!";return toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error(a),!1}return!0}return!0}}}},bbd0:function(e){e.exports={initData:{menuConfigToDo:"/o/rest/v2_1/menuconfigs/todo",counterMenuStep:"/o/rest/v2/statistics/dossiers/todo",getListThuTucHanhChinh:"/o/rest/v2/onegate/serviceconfigs/processes",serviceInfoApi:"/o/rest/v2/serviceinfos",regionApi:"/o/rest/v2/dictcollections",postDossierApi:"/o/rest/v2/dossiers",dossierTemplatesApi:"/o/rest/v2/dossiertemplates",applicantApi:"/o/rest/v2/applicants",dossierlogsApi:"/o/rest/v2/dossierlogs",dossierApi:"/o/rest/v2/dossiers",serviceProcessesApi:"/o/rest/v2/serviceprocesses",serviceConfigApi:"/o/rest/v2/serviceconfigs",serviceConfigByGovApi:"/o/rest/v2/serviceconfigs/govagencies",getNextAction:"/o/rest/v2/dossiers",documentApi:"/o/rest/v2_1/dossiers",stepConfigApi:"/o/rest/v2_1/stepconfigs",getServiceConfigs:"/o/rest/v2/serviceconfigs",commentApi:"/o/rest/v2/comments"},renderURLInit:"?p_p_id=OneGate&p_p_lifecycle=2&p_p_state=exclusive&p_p_mode=view&p_p_resource_id=renderURLInit",dossierTemplates:[{partNo:"2",partName:"Giấy đăng ký hợp đồng xuất khẩu sản phẩm thủy sản (tải bản scan)",partTip:"",partType:0,multiple:!1,required:!1,esign:!1,fileTemplateNo:"",hasForm:!0,fileType:0},{partNo:"2",partName:"Giấy đăng ký hợp đồng xuất khẩu sản phẩm thủy sản (tải bản scan)",partTip:"",partType:0,multiple:!1,required:!1,esign:!1,fileTemplateNo:"",hasForm:!0,fileType:0},{partNo:"2",partName:"Giấy đăng ký hợp đồng xuất khẩu sản phẩm thủy sản (tải bản scan)",partTip:"",partType:0,multiple:!1,required:!1,esign:!1,fileTemplateNo:"",hasForm:!0,fileType:0},{partNo:"2",partName:"Giấy đăng ký hợp đồng xuất khẩu sản phẩm thủy sản (tải bản scan)",partTip:"",partType:0,multiple:!1,required:!1,esign:!1,fileTemplateNo:"",hasForm:!0,fileType:0},{partNo:"2",partName:"Giấy đăng ký hợp đồng xuất khẩu sản phẩm thủy sản (tải bản scan)",partTip:"",partType:0,multiple:!1,required:!1,esign:!1,fileTemplateNo:"",hasForm:!0,fileType:0}],advSearchTools:[{index:0,value:"adv_0",text:"Lọc hồ sơ theo năm - tháng - ngày",type:"select",dataSource:"data",spec:"year_month_day",display:!1,disabled:!1},{index:1,value:"adv_1",text:"Lọc hồ sơ theo top",type:"select",dataSource:"data",spec:"top",display:!1,disabled:!1},{index:2,value:"adv_2",text:"Lọc trạng thái hồ sơ",type:"select",dataSource:"getStatusLists",spec:"status",display:!1,disabled:!1},{index:3,value:"adv_3",text:"Lọc trạng thái con",type:"select",dataSource:"getSubstatusLists",spec:"substatus",display:!1,disabled:!1},{index:4,value:"adv_4",text:"Lọc theo mã đơn vị",type:"select",dataSource:"getAgencyLists",spec:"agency",display:!1,disabled:!1},{index:5,value:"adv_5",text:"Lọc theo mã thủ tục",type:"select",dataSource:"getServiceLists",spec:"service",display:!1,disabled:!1},{index:6,value:"adv_6",text:"Lọc theo lĩnh vực",type:"select",dataSource:"getDomainLists",spec:"domain",display:!1,disabled:!1},{index:7,value:"adv_7",text:"Tìm theo mã sổ theo dõi",type:"text",spec:"register",display:!1,disabled:!1}]}}});
//# sourceMappingURL=app.d0d60919.js.map