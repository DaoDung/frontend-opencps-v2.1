(function(e){function t(t){for(var i,n,r=t[0],l=t[1],c=t[2],h=0,u=[];h<r.length;h++)n=r[h],s[n]&&u.push(s[n][0]),s[n]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);d&&d(t);while(u.length)u.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],i=!0,r=1;r<a.length;r++){var l=a[r];0!==s[l]&&(i=!1)}i&&(o.splice(t--,1),e=n(n.s=a[0]))}return e}var i={},s={app:0},o=[];function n(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=i,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var d=l;o.push(["56d7","chunk-vendors"]),a()})({"000e":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{style:e.viewMobile?"":"text-align: left;position: absolute;line-height: 46px;"},[e._v("Tổng số "),a("span",{staticClass:"text-bold primary--text"},[e._v(e._s(e.total))]),e._v(" hồ sơ. ")]),e.total>0?a("div",{staticClass:"vue-tiny-pagination pagination layout",style:e.viewMobile?"":"justify-content: flex-end; -webkit-justify-content: flex-end;"},[a("div",{staticClass:"pr-3 xs4 sm2 flex"},[a("v-autocomplete",{attrs:{items:e.totalPagesData,"item-text":"text","item-value":"value"},on:{input:e.goToPage},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1),a("ul",{staticClass:"tiny-pagination",class:e.customClass},[a("li",{staticClass:"page-item",class:e.classFirstPage},[a("button",{staticClass:"pagination__navigation",class:e.classFirstPage,on:{click:function(t){return t.preventDefault(),e.lastPageLast(t)}}},[a("i",{staticClass:"material-icons icon",attrs:{"aria-hidden":"true"}},[e._v("first_page")])])]),a("li",{staticClass:"page-item",class:e.classFirstPage},[a("button",{staticClass:"pagination__navigation",class:e.classFirstPage,staticStyle:{"border-left":"0"},on:{click:function(t){return t.preventDefault(),e.lastPage(t)}}},[a("i",{staticClass:"material-icons icon",attrs:{"aria-hidden":"true"}},[e._v("chevron_left")])])]),a("li",{staticClass:"page-item",staticStyle:{"margin-right":"0"}},[a("button",{staticClass:"pagination__navigation pagination__navigation--disabled text-bold primary--text",staticStyle:{"border-right":"0","border-left":"0"}},[e._v("\n          "+e._s(e.titlePage)+"\n        ")])]),a("li",{staticClass:"page-item",class:e.classLastPage,staticStyle:{"margin-right":"0"}},[a("button",{staticClass:"pagination__navigation",class:e.classLastPage,staticStyle:{"border-left":"0"},on:{click:function(t){return t.preventDefault(),e.nextPage(t)}}},[a("i",{staticClass:"material-icons icon",attrs:{"aria-hidden":"true"}},[e._v("chevron_right")])])]),a("li",{staticClass:"page-item",class:e.classLastPage},[a("button",{staticClass:"pagination__navigation",class:e.classLastPage,on:{click:function(t){return t.preventDefault(),e.nextPageLast(t)}}},[a("i",{staticClass:"material-icons icon",attrs:{"aria-hidden":"true"}},[e._v("last_page")])])])])]):e._e()])},s=[],o=a("9029");const n="TinyPagination";var r={name:n,props:{total:{type:Number,required:!0},page:{type:Number,default:1},lang:{type:String,default:"en"},customClass:{type:String},limits:{type:Array,default(){return[10,15,20,50,100]}},showLimit:{type:Boolean,default:!0}},data(){return{version:"0.2.1",currentPage:1,currentLimit:15,translations:{en:{prev:"Previous",title:"Page",next:"Next"}},availableLanguages:["en"]}},created(){this.currentPage=this.page},watch:{page(e){this.currentPage=parseInt(e)}},computed:{translation(){return this.availableLanguages.includes(this.lang)?this.translations[this.lang]:this.translations["en"]},totalPages(){return Math.ceil(this.total/this.currentLimit)},totalPagesData(){for(var e=[],t={},a=1;a<=this.totalPages;++a)t={value:a,text:"Trang "+a},e.push(t);return e},titlePage(){return`${this.currentPage}`},classFirstPage(){return{"c-not-allowed pagination__navigation--disabled":1===this.currentPage}},classLastPage(){return{"c-not-allowed pagination__navigation--disabled":this.currentPage===this.totalPages}},viewMobile(){return o["isMobile"]}},methods:{nextPage(){this.currentPage!==this.totalPages&&(this.currentPage+=1,this.$emit("tiny:change-page",{page:this.currentPage}))},lastPage(){this.currentPage>1&&(this.currentPage-=1,this.$emit("tiny:change-page",{page:this.currentPage}))},nextPageLast(){this.currentPage=this.totalPages,this.$emit("tiny:change-page",{page:this.totalPages})},lastPageLast(){this.currentPage=1,this.$emit("tiny:change-page",{page:1})},goToPage(){this.$emit("tiny:change-page",{page:this.currentPage})},onLimitChange(){this.currentPage=1}}},l=r,c=a("2877"),d=a("6544"),h=a.n(d),u=a("c6a6"),p=Object(c["a"])(l,i,s,!1,null,null,null);p.options.__file="hanghai_pagination.vue";t["a"]=p.exports;h()(p,{VAutocomplete:u["a"]})},"0838":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"phancong",staticStyle:{"background-color":"white",width:"100%"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),e._v("Ngày hẹn trả\n      ")]),a("v-card",[a("v-card-text",[a("v-layout",{staticClass:"pl-2",attrs:{wrap:""}},[a("v-icon",{staticClass:"hover-pointer",attrs:{color:"primary"},on:{click:e.showDatePicker}},[e._v("event")]),a("vue-ctk-date-time-picker",{ref:"datepicker",staticClass:"ml-2",staticStyle:{width:"auto!important"},attrs:{format:"YYYY-MM-DDTHH:mm","time-format":"HH:mm","without-header":!0,formatted:"DD/MM/YYYY HH:mm",label:e.dueDateInput?"":"Chọn ngày","min-date":e.minDate},model:{value:e.dueDateInput,callback:function(t){e.dueDateInput=t},expression:"dueDateInput"}})],1)],1)],1)],1)],1)],1)},s=[],o=a("e30a"),n=a.n(o),r={components:{"vue-ctk-date-time-picker":n.a},props:["dueDateEdit"],data:()=>({dueDateInput:"",minDate:null}),created(){var e=this;e.dueDateInput=e.dueDateEdit?e.formatDateInput(e.dueDateEdit):"",console.log("dueDateInput",e.dueDateInput)},watch:{},mounted(){this.dueDateInput=this.dueDateEdit?this.formatDateInput(this.dueDateEdit):"",console.log("dueDateInput",this.dueDateInput),this.minDate=this.getCurentDateTime("date")},methods:{getDateInput(){var e=this;console.log("vm.dueDateInput",e.dueDateInput);let t=e.dueDateInput?new Date(e.dueDateInput).getTime():"";return t},getCurentDateTime(e){let t=new Date;return"datetime"===e?`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()} | ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`:"date"===e?`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`:void 0},formatDateInput(e){return`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")} ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`},showDatePicker(){this.$refs.datepicker.showDatePicker()}}},l=r,c=a("2877"),d=a("6544"),h=a.n(d),u=a("b0af"),p=a("99d9"),m=a("cd55"),g=a("49e2"),v=a("132d"),_=a("a722"),f=Object(c["a"])(l,i,s,!1,null,null,null);f.options.__file="EditDate.vue";t["a"]=f.exports;h()(f,{VCard:u["a"],VCardText:p["b"],VExpansionPanel:m["a"],VExpansionPanelContent:g["a"],VIcon:v["a"],VLayout:_["a"]})},1136:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-expansion-panel",{attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),e._v("Thông tin chung hồ sơ")]),a("v-card",[a("v-card-text",{staticClass:"py-0"},[a("v-layout",{staticClass:"px-2 py-2",attrs:{wrap:""}},[1!==e.originality?a("v-flex",{staticClass:"pr-3",attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[e._v("Chủ hồ sơ: ")]),a("span",{staticClass:"pl-0 text-bold"},[e._v(" "+e._s(e.thongTinChiTietHoSo.applicantName))])]),a("div",{staticClass:"xs12 sm12 pb-1 overHidden"},[a("span",{staticClass:"pr-2"},[e._v("Địa chỉ: ")]),a("v-tooltip",{attrs:{top:""}},[a("span",{staticClass:"text-bold ",attrs:{slot:"activator"},slot:"activator"},[e._v(e._s(e.thongTinChiTietHoSo.address)+" "+e._s(e.thongTinChiTietHoSo.wardName)+", "+e._s(e.thongTinChiTietHoSo.districtName)+", "+e._s(e.thongTinChiTietHoSo.cityName))]),a("span",{staticClass:"pl-0"},[e._v(" "+e._s(e.thongTinChiTietHoSo.address)+" "+e._s(e.thongTinChiTietHoSo.wardName)+", "+e._s(e.thongTinChiTietHoSo.districtName)+", "+e._s(e.thongTinChiTietHoSo.cityName))])])],1),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pl-0"},[e._v("Thư điện tử: ")]),a("span",{staticClass:"pl-0 text-bold "},[e._v(" "+e._s(e.thongTinChiTietHoSo.contactEmail)+" ")])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[e._v("Điện thoại: ")]),a("span",{staticClass:"pl-0 text-bold "},[e._v(" "+e._s(e.thongTinChiTietHoSo.contactTelNo)+" ")])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("v-menu",{staticStyle:{position:"relative !important"},attrs:{"offset-y":""}},[a("span",{staticClass:"pr-2",attrs:{slot:"activator"},slot:"activator"},[e._v("\n                  Thông tin người nộp\n                  "),a("v-icon",{staticStyle:{position:"absolute",right:"-12px",top:"-2px"},attrs:{color:"blue",size:"22"}},[e._v("arrow_drop_down")])],1),a("v-list",{staticClass:"px-3 py-2"},[a("div",{staticClass:"xs12 sm12 py-1"},[a("span",{staticClass:"pr-2"},[e._v("Tên người nộp:")]),e.thongTinChiTietHoSo.online?a("span",{staticClass:"pl-0 text-bold"},[e._v(" \n                      "+e._s(e.thongTinChiTietHoSo.applicantName)+"\n                    ")]):a("span",{staticClass:"pl-0 text-bold "},[e._v(" "+e._s(e.thongTinChiTietHoSo.delegateName)+" ")])]),a("div",{staticClass:"xs12 sm12 py-1"},[a("span",{staticClass:"pr-2"},[e._v("Địa chỉ:")]),e.thongTinChiTietHoSo.online?a("span",{staticClass:"pl-0 text-bold"},[e._v(" \n                      "+e._s(e.thongTinChiTietHoSo.address)+" "+e._s(e.thongTinChiTietHoSo.wardName)+", "+e._s(e.thongTinChiTietHoSo.districtName)+", "+e._s(e.thongTinChiTietHoSo.cityName)+"\n                    ")]):a("span",{staticClass:"pl-0 text-bold"},[e._v(" \n                      "+e._s(e.thongTinChiTietHoSo.delegateAddress)+" "+e._s(e.thongTinChiTietHoSo.delegateWardName)+", "+e._s(e.thongTinChiTietHoSo.delegateDistrictName)+", "+e._s(e.thongTinChiTietHoSo.delegateCityName)+"\n                    ")])]),a("div",{staticClass:"xs12 sm12 py-1"},[a("span",{staticClass:"pr-2"},[e._v("Thư điện tử:")]),e.thongTinChiTietHoSo.online?a("span",{staticClass:"pl-0 text-bold "},[e._v(" "+e._s(e.thongTinChiTietHoSo.contactEmail)+" ")]):a("span",{staticClass:"pl-0 text-bold "},[e._v(" "+e._s(e.thongTinChiTietHoSo.delegateEmail)+" ")])]),a("div",{staticClass:"xs12 sm12 py-1"},[a("span",{staticClass:"pr-2"},[e._v("Số điện thoại:")]),e.thongTinChiTietHoSo.online?a("span",{staticClass:"pl-0 text-bold "},[e._v(" "+e._s(e.thongTinChiTietHoSo.contactTelNo)+" ")]):a("span",{staticClass:"pl-0 text-bold "},[e._v(" "+e._s(e.thongTinChiTietHoSo.delegateTelNo)+" ")])])])],1)],1)]):e._e(),1===e.originality?a("v-flex",{staticClass:"pr-3",attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[e._v("Mã hồ sơ: ")]),a("span",{staticClass:"pl-0 text-bold "},[e._v("  "+e._s(e.thongTinChiTietHoSo.dossierNo)+" ")])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[e._v("Cơ quan: ")]),a("span",{staticClass:"pl-0 text-bold "},[e._v("  "+e._s(e.thongTinChiTietHoSo.govAgencyName)+" ")])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[e._v("Trạng thái: ")]),a("span",{staticClass:"pl-0 text-bold "},[e._v(" "+e._s(e.thongTinChiTietHoSo.dossierStatusText)+" ")])])]):e._e(),1!==e.originality?a("v-flex",{attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[e._v("Ngày gửi trực tuyến: ")]),e.thongTinChiTietHoSo.online?a("span",{staticClass:"pl-0 text-bold"},[e._v(" "+e._s(e.thongTinChiTietHoSo.submitDate)+" ")]):a("span",{staticClass:"pl-0 text-bold"},[e._v(" Một cửa ")])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[e._v("Ngày tiếp nhận: ")]),a("span",{staticClass:"pl-0 text-bold "},[e._v(" "+e._s(e.thongTinChiTietHoSo.receiveDate))])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[e._v("Thời hạn giải quyết: ")]),e.thongTinChiTietHoSo.durationCount>0?a("span",{staticClass:"pl-0 text-bold "},[e._v(" \n                "+e._s(e.durationText(e.thongTinChiTietHoSo.durationUnit,e.thongTinChiTietHoSo.durationCount))+" làm việc \n              ")]):a("span",{staticClass:"pl-0 text-bold "},[e._v("\n                Không quy định\n              ")])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[e._v("Ngày hẹn trả: ")]),a("span",{staticClass:"pl-0 text-bold "},[e._v(" "+e._s(e.thongTinChiTietHoSo.dueDate))])])]):a("v-flex",{attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[e._v("Ngày gửi: ")]),e.thongTinChiTietHoSo.online?a("span",{staticClass:"pl-0 text-bold"},[e._v(" "+e._s(e.thongTinChiTietHoSo.submitDate)+" ")]):a("span",{staticClass:"pl-0 text-bold"},[e._v(" Một cửa ")])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[e._v("Ngày tiếp nhận: ")]),a("span",{staticClass:"pl-0 text-bold "},[e._v(" "+e._s(e.thongTinChiTietHoSo.receiveDate))])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[e._v("Ngày hẹn trả: ")]),a("span",{staticClass:"pl-0 text-bold "},[e._v(" "+e._s(e.thongTinChiTietHoSo.dueDate))])])]),1!==e.originality?a("v-flex",{attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[e._v("Mã hồ sơ: ")]),a("span",{staticClass:"pl-0 text-bold "},[e._v("  "+e._s(e.thongTinChiTietHoSo.dossierNo)+" ")])]),e.thongTinChiTietHoSo.originDossierNo?a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[e._v("Hồ sơ gốc: ")]),a("span",{staticClass:"pl-0 text-bold "},[e._v("  "+e._s(e.thongTinChiTietHoSo.originDossierNo)+" ")])]):e._e(),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[e._v("Trạng thái: ")]),a("span",{staticClass:"pl-0 text-bold "},[e._v(" "+e._s(e.thongTinChiTietHoSo.dossierStatusText)+" ")])]),e.thongTinChiTietHoSo.dossierNote&&"null"!==e.thongTinChiTietHoSo.dossierNote?a("div",{staticClass:"xs12 sm12 pb-1",staticStyle:{color:"#0b72ba"}},[e._v("Ghi chú:")]):e._e(),e.thongTinChiTietHoSo.dossierNote&&"null"!==e.thongTinChiTietHoSo.dossierNote?a("div",{staticClass:"xs12 sm12 pb-1 overHidden"},[a("v-tooltip",{attrs:{top:""}},[a("span",{staticClass:"text-bold ",attrs:{slot:"activator"},slot:"activator"},[e._v(e._s(e.thongTinChiTietHoSo.dossierNote)+" ")]),a("span",{staticClass:"pl-0"},[e._v(" "+e._s(e.thongTinChiTietHoSo.dossierNote)+" ")])])],1):e._e()]):a("v-flex",{attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"xs12 sm12 pb-1",staticStyle:{color:"#0b72ba"}},[e._v("Ghi chú:")]),e.thongTinChiTietHoSo.dossierNote&&"null"!==e.thongTinChiTietHoSo.dossierNote?a("div",{staticClass:"xs12 sm12 pb-1 overHidden"},[a("v-tooltip",{attrs:{top:""}},[a("span",{staticClass:"text-bold ",attrs:{slot:"activator"},slot:"activator"},[e._v(e._s(e.thongTinChiTietHoSo.dossierNote)+" ")]),a("span",{staticClass:"pl-0"},[e._v(" "+e._s(e.thongTinChiTietHoSo.dossierNote)+" ")])])],1):e._e(),e.thongTinChiTietHoSo.extendDate?a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pl-0 text-bold"},[e._v("Hẹn lại: "+e._s(e.thongTinChiTietHoSo.extendDate))])]):e._e()])],1)],1)],1)],1)],1)},s=[],o={props:{detailDossier:{type:Object,default:()=>{}}},watch:{detailDossier(e){console.log("watch",e);var t=this;t.thongTinChiTietHoSo=e}},components:{},data:()=>({thongTinChiTietHoSo:{},showContactDetail:!1}),computed:{loading(){return this.$store.getters.loading},originality(){var e=this;return e.getOriginality()}},created(){var e=this;e.thongTinChiTietHoSo=e.detailDossier},mounted(){var e=this;e.thongTinChiTietHoSo=e.detailDossier},methods:{initData(e){var t=this;t.$store.dispatch("getDetailDossier",e).then(e=>{t.thongTinChiTietHoSo=e,console.log("thongTinChiTietHoSo",t.thongTinChiTietHoSo)})},goBack(){window.history.back()},durationText(e,t){var a;if(1===e&&t>8){let e,i=Math.floor(t/8)+" ngày";e=t%8!==0?8*(t/8-Math.floor(t/8))+" giờ":"",a=`${i} ${e}`}else 0===e?a=t+" ngày":1===e&&t<=8&&(a=t+" giờ");return a}},filters:{dateTimeView(e){if(e){let t=new Date(e);return`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()} | ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`}return""}}},n=o,r=a("2877"),l=a("6544"),c=a.n(l),d=a("b0af"),h=a("99d9"),u=a("cd55"),p=a("49e2"),m=a("0e8f"),g=a("132d"),v=a("a722"),_=a("8860"),f=a("e449"),y=a("3a2f"),C=Object(r["a"])(n,i,s,!1,null,null,null);C.options.__file="ThongTinCoBanHoSo.vue";t["a"]=C.exports;c()(C,{VCard:d["a"],VCardText:h["b"],VExpansionPanel:u["a"],VExpansionPanelContent:p["a"],VFlex:m["a"],VIcon:g["a"],VLayout:v["a"],VList:_["a"],VMenu:f["a"],VTooltip:y["a"]})},"24fb":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"taotailieuketqua",staticStyle:{"background-color":"white",width:"100%"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),e._v(" Kết quả xử lý\n      ")]),a("v-card",e._l(e.createFiles,function(t,i){return a("div",{key:t.partNo+"cr",staticClass:"form_alpaca",staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expaned__list__data",attrs:{value:[!0]}},[a("v-expansion-panel-content",{attrs:{"hide-actions":"",value:e.currentFormView==="formAlpaca"+t.partNo+e.id}},[a("div",{staticStyle:{"background-color":"#fff"},attrs:{slot:"header"},on:{click:function(t){e.stateView=!1}},slot:"header"},[a("div",{staticStyle:{"align-items":"center",background:"#fff","padding-left":"25px"},style:{width:e.checkStyle(t)}},[a("div",{staticClass:"mr-2",staticStyle:{"min-width":"18px",display:"flex"},on:{click:function(a){e.loadAlpcaForm(t)}}},[a("div",{staticClass:"header__tphs"},[a("span",{staticClass:"text-bold"},[e._v(e._s(i+1)+".")]),e._v("  ")]),a("div",{staticClass:"header__tphs"},[e._v("\n                      "+e._s(t.partName)+" "),t.required?a("span",{staticStyle:{color:"red"}},[e._v(" (*)")]):e._e(),e._v("\n                        \n                      "),t.eForm&&t.daKhai?a("v-tooltip",{attrs:{top:""}},[a("i",{staticClass:"fa fa-file-text-o",staticStyle:{color:"#0d71bb","font-size":"13px"},attrs:{slot:"activator","aria-hidden":"true"},slot:"activator"}),a("span",[e._v("Biểu mẫu trực tuyến (Đã khai)")])]):e._e(),t.eForm&&!t.daKhai?a("v-tooltip",{attrs:{top:""}},[a("i",{staticClass:"fa fa-file-o",staticStyle:{color:"#0d71bb","font-size":"13px"},attrs:{slot:"activator"},slot:"activator"}),a("span",[e._v("Biểu mẫu trực tuyến (Chưa khai)")])]):e._e()],1)]),e._l(e.dossierFilesItems,function(i,s){return t.partNo+e.id!==i.dossierPartNo+e.id||i.eForm?e._e():a("div",{key:s+"cr"},[a("div",{staticStyle:{width:"calc(100% - 370px)",display:"flex","align-items":"center",background:"#fff","padding-left":"25px","font-size":"12px"}},[a("span",{staticClass:"ml-3",staticStyle:{cursor:"pointer"},on:{click:function(t){t.stopPropagation(),e.viewFile2(i)}}},[i.eForm?a("v-icon",[e._v("border_color")]):a("v-icon",[e._v("attach_file")]),e._v("\n                        "+e._s(i.displayName)+" - \n                        "),a("i",[e._v(e._s(i.modifiedDate))])],1),a("v-btn",{staticClass:"mx-0 my-0",attrs:{icon:"",ripple:""},on:{click:function(t){t.stopPropagation(),e.deleteSingleFile(i,s)}}},[a("v-icon",{staticStyle:{color:"red"}},[e._v("delete_outline")])],1)],1)])})],2)]),t.eForm?a("v-card",[a("v-card-text",{staticStyle:{"background-color":"rgba(244, 247, 213, 0.19)"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"text-xs-right",attrs:{xs12:""}},[a("div",{style:e.pstFixed>e.pstEl&&e.pstFixed<e.endEl+e.pstEl?"position:fixed;top:5px;z-index:101":"",attrs:{id:"wrapForm"+t.partNo+e.id}},[t.eForm?a("v-btn",{attrs:{color:"primary",id:"saveBtn"+t.partNo+t.templateFileNo},on:{click:function(a){e.saveAlpacaForm(t,i)}}},[e._v("Lưu lại")]):e._e(),t.daKhai&&t.eForm?a("v-btn",{attrs:{color:"primary"},on:{click:function(a){e.deleteSingleFileEform(t,i)}}},[e._v("Xóa")]):e._e(),t.daKhai&&t.eForm?a("v-btn",{attrs:{color:"primary"},on:{click:function(a){e.previewFileEfom(t,i)}}},[e._v("In")]):e._e()],1),a("div",{attrs:{id:"formAlpaca"+t.partNo+e.id}})])],1)],1)],1):e._e()],1)],1),a("div",{staticClass:"absolute__btn group__thanh_phan pr-3 mr-1"},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticStyle:{width:"50px"}},[a("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"file"+t.partNo},on:{change:function(a){e.onUploadSingleFile(a,t)}}}),e.progressUploadPart+e.id===t.partNo+e.id?a("v-progress-circular",{attrs:{width:2,size:25,color:"green",indeterminate:""}}):e.progressUploadPart+e.id!==t.partNo+e.id?a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(a){e.pickFile(t)}},slot:"activator"},[a("v-badge",[a("v-icon",{attrs:{size:"16",color:"primary"}},[e._v("cloud_upload")])],1)],1),t.partTip["extensions"]||t.partTip["maxSize"]?a("span",[e._v("Chấp nhận tải lên các định dạng: "+e._s(t.partTip["extensions"])+". Tối đa "+e._s(t.partTip["maxSize"])+" MB ")]):a("span",[e._v("Tải file lên")])],1):e._e()],1)],1)],1)],1)}),0),a("v-dialog",{staticStyle:{overflow:"hidden"},attrs:{"max-width":"900",transition:"fade-transition"},model:{value:e.dialogPDF,callback:function(t){e.dialogPDF=t},expression:"dialogPDF"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("File đính kèm")]),a("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.dialogPDF=!1}}},[a("v-icon",[e._v("clear")])],1),e.dialogPDFLoading?a("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[a("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):e._e(),a("iframe",{directives:[{name:"show",rawName:"v-show",value:!e.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPDFPreview"+e.id,src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1)],1)],1)],1)},s=[],o=a("78a5"),n=o["a"],r=a("2877"),l=a("6544"),c=a.n(l),d=a("4ca6"),h=a("8336"),u=a("b0af"),p=a("99d9"),m=a("12b2"),g=a("169a"),v=a("cd55"),_=a("49e2"),f=a("0e8f"),y=a("132d"),C=a("a722"),T=a("490a"),x=a("3a2f"),D=Object(r["a"])(n,i,s,!1,null,null,null);D.options.__file="TaoTaiLieuKetQua.vue";t["a"]=D.exports;c()(D,{VBadge:d["a"],VBtn:h["a"],VCard:u["a"],VCardText:p["b"],VCardTitle:m["a"],VDialog:g["a"],VExpansionPanel:v["a"],VExpansionPanelContent:_["a"],VFlex:f["a"],VIcon:y["a"],VLayout:C["a"],VProgressCircular:T["a"],VTooltip:x["a"]})},"26ed":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"background-color":"white",width:"100%"}},["overdue"===e.type||"preoverdue"===e.type?a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),a("span",[e._v("Lý do chậm hạn trả")]),a("span",{staticStyle:{color:"red"}},[e._v(" *")])]),a("v-card",[a("v-card-text",{staticClass:"py-2 px-2"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-form",{ref:"delayNoteForm",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{attrs:{"multi-line":"",rows:3,rules:function(){return""!==e.delayNote||"Trường dữ liệu bắt buộc"}},model:{value:e.delayNote,callback:function(t){e.delayNote=t},expression:"delayNote"}})],1)],1)],1)],1)],1)],1)],1):e._e(),a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),"overdue"===e.type||"preoverdue"===e.type?a("span",[e._v("Ngày hẹn lại")]):e._e(),"betimes"===e.type?a("span",[e._v("Ngày hẹn trả sớm")]):e._e()]),a("v-card",[a("v-card-text",[a("v-layout",{staticClass:"pl-2",attrs:{wrap:""}},[a("v-icon",{staticClass:"hover-pointer ml-3",attrs:{color:"blue"},on:{click:e.showDatePicker}},[e._v("event")]),a("vue-ctk-date-time-picker",{ref:"datepicker",staticClass:"ml-2",staticStyle:{width:"auto!important"},attrs:{format:"YYYY-MM-DDTHH:mm","time-format":"HH:mm","without-header":!0,formatted:"DD/MM/YYYY HH:mm",label:e.extendDateInput?"":"Chọn ngày","min-date":e.minDate},model:{value:e.extendDateInput,callback:function(t){e.extendDateInput=t},expression:"extendDateInput"}})],1)],1)],1)],1)],1)],1)},s=[],o=a("e30a"),n=a.n(o),r={components:{"vue-ctk-date-time-picker":n.a},props:["extendDateEdit","type"],data:()=>({extendDateInput:"",minDate:null,delayNote:""}),created(){},watch:{},mounted(){this.extendDateInput=this.extendDateEdit?this.parseCurrentDate(this.extendDateEdit):this.formatDateInput(new Date),console.log("extendDateInput",this.extendDateInput),this.minDate=this.getCurentDateTime("date")},methods:{doExport(){let e=this,t=e.extendDateInput?new Date(e.extendDateInput).getTime():"";var a;return a="overdue"===e.type||"preoverdue"===e.type?{text:e.delayNote,extendDate:t,valid:e.$refs.delayNoteForm.validate()}:{text:e.delayNote,extendDate:t,valid:!0},a},getCurentDateTime(e){let t=new Date;return"datetime"===e?`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()} | ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`:"date"===e?`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`:void 0},formatDateInput(e){return`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")} ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`},showDatePicker(){this.$refs.datepicker.showDatePicker()},parseCurrentDate(e){if(!e)return null;let[t,a]=e.split(" "),[i,s,o]=`${t}`.split("/"),[n,r,l]=`${a}`.split(":");return`${o}-${s.padStart(2,"0")}-${i.padStart(2,"0")} ${n}:${r}`}}},l=r,c=a("2877"),d=a("6544"),h=a.n(d),u=a("b0af"),p=a("99d9"),m=a("cd55"),g=a("49e2"),v=a("0e8f"),_=a("4bd4"),f=a("132d"),y=a("a722"),C=a("2677"),T=Object(c["a"])(l,i,s,!1,null,null,null);T.options.__file="ExtendDateEdit.vue";t["a"]=T.exports;h()(T,{VCard:u["a"],VCardText:p["b"],VExpansionPanel:m["a"],VExpansionPanelContent:g["a"],VFlex:v["a"],VForm:_["a"],VIcon:f["a"],VLayout:y["a"],VTextField:C["a"]})},"291d":function(module,__webpack_exports__,__webpack_require__){"use strict";var _router__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("a18c"),jquery__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("1157"),jquery__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__),toastr__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("854a"),toastr__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(toastr__WEBPACK_IMPORTED_MODULE_2__),_Comment_vue__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("4ea3"),_form_xu_ly_ThongTinCoBanHoSo_vue__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("1136"),_form_xu_ly_PhanCongNguoiThucHien_vue__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("7121"),_form_xu_ly_TraKetQua_vue__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("c23d"),_form_xu_ly_FeeDetail_vue__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("f374"),_ChiTietThanhToan_vue__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("cb0a"),_form_xu_ly_ThucHienThanhToanDienTu_vue__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("fc7b"),_form_xu_ly_KyPheDuyetTaiLieu_vue__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("4a3a"),_form_xu_ly_YkienCanBoThucHien_vue__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("87c1"),_form_xu_ly_TaoTaiLieuKetQua_vue__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("24fb"),_form_xu_ly_FormBoSungThongTinNgan_vue__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("d80f"),_TiepNhan_TiepNhanHoSo_ThanhPhanHoSo_vue__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("93f5"),_form_xu_ly_EditDate_vue__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("0838"),_form_xu_ly_ExtendDateEdit_vue__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("26ed"),_HoSoLienThong_vue__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("3677"),_form_xu_ly_PhanCongLai_vue__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("885b"),_form_xu_ly_ThongTinGuiBuuChinh_vue__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("8bf2"),mermaid__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("fbdb"),mermaid__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(mermaid__WEBPACK_IMPORTED_MODULE_20__);mermaid__WEBPACK_IMPORTED_MODULE_20___default.a.initialize({theme:"forest",startOnLoad:!1}),__webpack_exports__["a"]={props:["index","id"],components:{comment:_Comment_vue__WEBPACK_IMPORTED_MODULE_3__["a"],"thong-tin-co-ban-ho-so":_form_xu_ly_ThongTinCoBanHoSo_vue__WEBPACK_IMPORTED_MODULE_4__["a"],"phan-cong":_form_xu_ly_PhanCongNguoiThucHien_vue__WEBPACK_IMPORTED_MODULE_5__["a"],"tra-ket-qua":_form_xu_ly_TraKetQua_vue__WEBPACK_IMPORTED_MODULE_6__["a"],"thu-phi":_form_xu_ly_FeeDetail_vue__WEBPACK_IMPORTED_MODULE_7__["a"],"thanh-toan-dien-tu":_form_xu_ly_ThucHienThanhToanDienTu_vue__WEBPACK_IMPORTED_MODULE_9__["a"],"ky-duyet":_form_xu_ly_KyPheDuyetTaiLieu_vue__WEBPACK_IMPORTED_MODULE_10__["a"],"y-kien-can-bo":_form_xu_ly_YkienCanBoThucHien_vue__WEBPACK_IMPORTED_MODULE_11__["a"],"tai-lieu-ket-qua":_form_xu_ly_TaoTaiLieuKetQua_vue__WEBPACK_IMPORTED_MODULE_12__["a"],"form-bo-sung-thong-tin":_form_xu_ly_FormBoSungThongTinNgan_vue__WEBPACK_IMPORTED_MODULE_13__["a"],"thanh-phan-ho-so":_TiepNhan_TiepNhanHoSo_ThanhPhanHoSo_vue__WEBPACK_IMPORTED_MODULE_14__["a"],"ngay-hen-tra":_form_xu_ly_EditDate_vue__WEBPACK_IMPORTED_MODULE_15__["a"],"thong-tin-buu-chinh":_form_xu_ly_ThongTinGuiBuuChinh_vue__WEBPACK_IMPORTED_MODULE_19__["a"],"ngay-gia-han":_form_xu_ly_ExtendDateEdit_vue__WEBPACK_IMPORTED_MODULE_16__["a"],"chi-tiet-thanh-toan":_ChiTietThanhToan_vue__WEBPACK_IMPORTED_MODULE_8__["a"],"ho-so-lien-thong":_HoSoLienThong_vue__WEBPACK_IMPORTED_MODULE_17__["a"],"phan-cong-lai":_form_xu_ly_PhanCongLai_vue__WEBPACK_IMPORTED_MODULE_18__["a"]},data:()=>({inputTypes:[1,3],outputTypes:[2],actionIdCurrent:0,validateAction:!0,btnIndex:-1,processActionCurrent:0,activeTab:"tabs-1",activeTab2:"",btnDossierDynamics:[],btnStepsDynamics:[],loadingAction:!1,indexAction:-1,indexActionStep:-1,dossierId:"",className:"org.opencps.dossiermgt.model.Dossier",dossierFilesItems:[],dossierTemplatesItems:[],fileViews:[],showContactDetail:!1,listHistoryProcessing:[],dossierTemplatesTN:[],dossierTemplatesKQ:[],thongTinChiTietHoSo:{},dialogPDF:!1,dialogPDFLoading:!0,loadingAlpacajsForm:!1,nextActions:[],createFiles:[],returnFiles:[],processSteps:[],documents:[],payments:"",dossierActions:[],reAsignUsers:[],itemselect:"",dossierSyncs:[],stepModel:null,actionNote:"",actionsSubmitLoading:!1,showThongTinCoBanHoSo:!1,showYkienCanBoThucHien:!1,showFormBoSungThongTinNgan:!1,showPhanCongNguoiThucHien:!1,showTaoTaiLieuKetQua:!1,showKyPheDuyetTaiLieu:!1,dataEsign:"",typeEsign:"",showTraKetQua:!1,showThuPhi:!1,showPostalService:!1,showThanhToanDienTu:!1,showEditDate:!1,showExtendDateEdit:!1,checkInput:0,viaPortalDetail:0,showThucHienThanhToanDienTu:!1,dossierItemDialogPick:"",itemDialogPick:"",resultDialogPick:"",indexDialogPick:"",userNote:0,partView:"",stateView:!1,paymentDetail:"",paymentProfile:"",payment_type:0,type_assign:0,assign_items:[],btnStateVisible:!0,extendDateEdit:"",typeExtendDate:"",dueDateEdit:"",receiveDateEdit:"",dialogActionProcess:!1,rollbackable:!1,configNote:null,actionSpecial:!1,btnPlugins:[],loadingPlugin:!1,listDossierFiles:[],headers:[{text:"#",align:"center",sortable:!1},{text:"Vai trò",align:"center",sortable:!1,class:"vaitro_column"},{text:"Công việc",align:"center",sortable:!1,class:"congviec_column"},{text:"Thời hạn quy định",align:"center",sortable:!1,class:"thoihanquydinh_column"},{text:"Ngày bắt đầu",align:"center",sortable:!1,class:"ngaybatdau_column"},{text:"Người thực hiện",align:"center",sortable:!1,class:"nguoithuchien_column"},{text:"Kết quả",align:"center",sortable:!1,class:"ketqua_column"}],headerSyncs:[{text:"Nhật kí hồ sơ",align:"center",sortable:!1,class:"nhatki_column"},{text:"Trao đổi trực tuyến",align:"center",sortable:!1,class:"traodoitructuyen_column"}],filterDossierActionItems:[{text:"Tất cả",value:""},{text:"Có thao tác thực hiện",value:"1"},{text:"Không thao tác thực hiện",value:"2"}],filterDossierAction:null,filterDossierSyncItems:[{text:"Tất cả",value:"1,2"},{text:"Thông tin trao đổi",value:"2"}],filterDossierSync:null,messageChat:"",isCallBack:!0,printDocument:!1,alertObj:{icon:"check_circle",color:"success",message:"Thực hiện thành công!"},stateViewResult:!0,stateViewDocument:!0,listLienThong:[],modelPlugin:null,dialogPlugin:!1,dialog_reAsign:!1,loadingMermaidgraph:!1,typeTienTrinh:1,votingItems:[],loadingVoting:!1}),computed:{loading(){return this.$store.getters.loading},originality(){var e=this;return e.getOriginality()},dataCreateFile(){return this.$store.getters.getDataCreateFile},getCheckInput(){return this.$store.getters.getCheckInput},usersNextAction(){return this.$store.getters.getUsersNextAction},stepOverdueNextAction(){return this.$store.getters.getStepOverdueNextAction},currentUser(){return console.log("AAAAAAA: ",this.$store.getters.loadingInitData.user),this.$store.getters.loadingInitData.user},kysoSuccess(){return this.$store.getters.kysoSuccess}},created(){var e=this;e.$nextTick(function(){e.initData(e.id),e.btnIndex=-1;let t=e.$router.history.current.query;t.hasOwnProperty("activeTab")&&(e.activeTab=t.activeTab,e.btnIndex=t["btnIndex"],t.hasOwnProperty("actionSpecial")&&null!==t["actionSpecial"]&&void 0!==t["actionSpecial"]&&"undefined"!==t["actionSpecial"]&&(e.actionSpecial=t["actionSpecial"]),e.thongTinChiTietHoSo["dossierId"]=e.id,e.btnStateVisible=!0),e.$store.commit("setKysoSuccess",!1)})},updated(){var e=this;e.$nextTick(function(){})},watch:{$route:function(e,t){e.query},kysoSuccess(e){var t=this;e&&(t.loadingAction=!1,t.dialogActionProcess=!1,t.loadingActionProcess=!1,t.alertObj={icon:"check_circle",color:"success",message:"Thực hiện thành công!"},t.btnStateVisible=!1)}},methods:{initData(e){var t=this;t.dossierId=e,t.activeTab2="tabs-2b",t.$store.dispatch("getDetailDossier",e).then(a=>{t.thongTinChiTietHoSo=a,t.loadThanhToan(),t.loadHoSoLienThong(),t.getNextActions(),a["dossierSubStatus"]&&t.$store.dispatch("pullBtnConfigStep",a).then(e=>{t.btnStepsDynamics=e}),1===t.originality&&"done"===a["dossierStatus"]&&(t.activeTab2="tabs-1b",t.loadVoting()),t.runComment(),t.$store.dispatch("loadDossierDocuments",a).then(e=>{Array.isArray(e)?t.documents=e:t.documents.push(e)}),t.$store.dispatch("getListDossierFiles",e).then(e=>{t.listDossierFiles=e}),t.$refs.thanhphanhoso&&t.$refs.thanhphanhoso.initData(a),t.$refs.thanhphanhoso1&&t.$refs.thanhphanhoso1.initData(a),t.$refs.thanhphanhoso2&&t.$refs.thanhphanhoso2.initData(a)})},recountFileTemplates(){var e=this;e.dossierTemplatesItems.forEach(t=>{t.count=0,e.dossierFilesItems.forEach(e=>{t.partNo===e.dossierPartNo&&t.count++})})},runComment(){var e=this;e.$refs.comment&&e.$refs.comment.runComment()},goBack(){window.history.back()},viewFile(e){var t=this;t.dossierFilesItems.forEach(a=>{a["dossierId"]=t.thongTinChiTietHoSo.dossierId,a.dossierPartNo===e.partNo&&this.$store.dispatch("viewFile",a)})},downloadFileLogs(e){var t=this;let a={fileAttachId:e,dossierId:t.id};this.$store.dispatch("downloadFile",a)},loadDossierActions(e){var t=this;if(t.thongTinChiTietHoSo.dossierId){let a={dossierId:t.thongTinChiTietHoSo.dossierId,stepType:e};t.$store.dispatch("loadDossierActions",a).then(e=>{if(e.data){let i=e.data;for(var a=0;a<i.length;a++)if(i[a].hasOwnProperty("actions")&&null!==i[a]["actions"]&&void 0!==i[a]["actions"]&&!Array.isArray(i[a]["actions"])){let e=[];e.push(i[a]["actions"]),i[a]["actions"]=e}t.dossierActions=i}})}},loadMermaidgraph(e){var t=this;if(document.getElementById("mermaid_dossier").innerHTML="",t.thongTinChiTietHoSo.dossierId){let e={dossierId:t.thongTinChiTietHoSo.dossierId};t.loadingMermaidgraph=!0,t.$store.dispatch("loadMermaidgraph",e).then(e=>{t.loadingMermaidgraph=!1,mermaid__WEBPACK_IMPORTED_MODULE_20___default.a.render("theGraph",e,function(e){document.getElementById("mermaid_dossier").innerHTML=e})}).catch(function(){t.loadingMermaidgraph=!1})}},loadDossierSyncs(e){var t=this;if(t.thongTinChiTietHoSo.dossierId){let e={dossierId:t.thongTinChiTietHoSo.dossierId,info:"1,2"};t.$store.dispatch("loadDossierSyncs",e).then(e=>{null!==e&&void 0!==e&&"undefined"!==e?Array.isArray(e)?t.dossierSyncs=e:t.dossierSyncs=[e]:t.dossierSyncs=[]})}},changeTypeTienTrinh(e){let t=this;2===e&&setTimeout(function(){t.loadMermaidgraph()},200)},loadDossierLogs(e){var t=this;let a={dossierId:t.thongTinChiTietHoSo.dossierId},i=t.$store.dispatch("getListHistoryProcessingItems",a);i.then(function(e){t.listHistoryProcessing=[],t.listHistoryProcessing=e})},deleteDossierFileVersion(e){var t=this;e["dossierId"]=t.thongTinChiTietHoSo.dossierId,t.$store.dispatch("deleteAttackFiles",e).then(e=>{})},pickFile(e){document.getElementById("file"+e.partNo).click()},postChat(){var e=this;if(e.messageChat){let t={dossierId:e.thongTinChiTietHoSo.dossierId,actionCode:3===e.originality?"8200":"8100",actionNote:e.messageChat,actionUser:""};e.$store.dispatch("postAction",t).then(t=>{e.loadDossierSyncs()}),e.messageChat=""}},getNextAction(e){var t=this;if(t.actionIdCurrent=e.processActionId,1===e.type){let a={dossierId:t.thongTinChiTietHoSo.dossierId,actionId:e.processActionId};t.$store.dispatch("getNextAction",a).then(e=>{t.stepModel=e}).catch(e=>{t.stepModel=null})}else{let a={dossierId:t.thongTinChiTietHoSo.dossierId,actionId:e.processActionId};t.$store.dispatch("loadPlugin",a).then(e=>{t.stepModel=e}).catch(e=>{t.stepModel=null})}},processPullBtnplugin(e,t){var a=this;let i={dossierId:a.thongTinChiTietHoSo.dossierId,processPluginId:e.processPluginId};a.dialogPlugin=!0,a.loadingPlugin=!0,a.$store.dispatch("loadPlugin",i).then(t=>{a.modelPlugin=t,a.modelPlugin["pluginName"]=e.pluginName,a.loadingPlugin=!1}).catch(e=>{a.modelPlugin=null,a.loadingPlugin=!1})},processPullBtnDetailRouter(e,t,a,i){let s=this,o=!1;if(s.dossierId=e.dossierId,s.showYkienCanBoThucHien=!1,s.showFormBoSungThongTinNgan=!1,s.showPhanCongNguoiThucHien=!1,s.showTaoTaiLieuKetQua=!1,s.showKyPheDuyetTaiLieu=!1,s.showTraKetQua=!1,s.showThuPhi=!1,s.showPostalService=!1,s.showThanhToanDienTu=!1,s.showEditDate=!1,s.showExtendDateEdit=!1,s.showThucHienThanhToanDienTu=!1,s.dossierItemDialogPick=e,s.itemDialogPick=t,s.resultDialogPick=a,s.indexDialogPick=i,s.userNote=0,a.hasOwnProperty("configNote")&&null!==a.configNote&&void 0!==a.configNote&&"undefined"!==a.configNote)try{s.configNote=JSON.parse(a.configNote),s.configNote.confirm&&(o=!0)}catch(n){}if(null!==a&&void 0!==a&&"undefined"!==a&&(a.hasOwnProperty("userNote")||a.hasOwnProperty("extraForm")||a.hasOwnProperty("allowAssignUser")||a.hasOwnProperty("createFiles")||a.hasOwnProperty("eSignature")||a.hasOwnProperty("returnFiles")||a.hasOwnProperty("payment")||a.hasOwnProperty("checkInput")||a.hasOwnProperty("overdue")||a.hasOwnProperty("betimes"))){if(!a.hasOwnProperty("userNote")||1!==a.userNote&&"1"!==a.userNote&&2!==a.userNote&&"2"!==a.userNote||(o=!0,s.showYkienCanBoThucHien=!0,s.userNote=a.userNote),a.hasOwnProperty("extraForm")&&a.extraForm&&(o=!0,s.showFormBoSungThongTinNgan=!0),a.hasOwnProperty("allowAssignUser")&&0!==a.allowAssignUser&&(Array.isArray(a.toUsers)?s.assign_items=a.toUsers:s.assign_items=[a.toUsers],s.type_assign=a.allowAssignUser,o=!0,s.showPhanCongNguoiThucHien=!0),a.hasOwnProperty("createFiles")&&null!==a.createFiles&&void 0!==a.createFiles&&"undefined"!==a.createFiles&&(o=!0,Array.isArray(a.createFiles)?s.createFiles=a.createFiles:s.createFiles=[a.createFiles],s.showTaoTaiLieuKetQua=!0),a.hasOwnProperty("eSignature")&&a.eSignature&&(o=!0,s.showKyPheDuyetTaiLieu=!0,s.dataEsign=a),a.hasOwnProperty("returnFiles")&&null!==a.returnFiles&&void 0!==a.returnFiles&&"undefined"!==a.returnFiles&&(o=!0,Array.isArray(a.returnFiles)?s.returnFiles=a.returnFiles:s.returnFiles=[a.returnFiles],s.showTraKetQua=!0),a.hasOwnProperty("preCondition")&&null!==a.preCondition&&void 0!==a.preCondition&&"undefined"!==a.preCondition&&a.preCondition.indexOf("sendViaPostal=1")>=0&&(o=!0,s.showPostalService=!0),a.hasOwnProperty("payment")&&null!==a.payment&&void 0!==a.payment&&"undefined"!==a.payment&&a.payment.requestPayment>0)if(3!==a.payment.requestPayment&&"3"!==a.payment.requestPayment||610!==e["stepCode"]&&611!==e["stepCode"])o=!0,s.showThuPhi=!0,s.payments=a.payment,s.viaPortalDetail=e.viaPostal;else{o=!0,s.showThanhToanDienTu=!0;let t={dossierId:s.dossierId,referenceUid:e.referenceUid};s.$store.dispatch("loadDossierPayments",t).then(e=>{s.paymentProfile=e}).catch(e=>{})}a.hasOwnProperty("receiving")&&null!==a.receiving&&void 0!==a.receiving&&"undefined"!==a.receiving&&!0===a.receiving.editable&&(o=!0,s.showEditDate=!0,s.dueDateEdit=""!==a.receiving.dueDate?new Date(a.receiving.dueDate):"",s.receiveDateEdit=a.receiving.receiveDate),a.hasOwnProperty("overdue")&&(o=!0,s.showExtendDateEdit=!0,s.extendDateEdit=a.overdue,s.typeExtendDate="overdue"),a.hasOwnProperty("preoverdue")&&(o=!0,s.showExtendDateEdit=!0,s.extendDateEdit=a.preoverdue,s.typeExtendDate="preoverdue"),a.hasOwnProperty("betimes")&&(o=!0,s.showExtendDateEdit=!0,s.extendDateEdit=a.betimes,s.typeExtendDate="betimes")}o?(s.loadingAction=!1,s.dialogActionProcess=!0,s.loadingActionProcess=!1):(s.loadingAction=!0,s.processAction(s.thongTinChiTietHoSo,t,a,i,!1))},processPullBtnDetail(e,t){let a=this;a.btnIndex=t,a.itemAction=e,a.actionIdCurrent=e.processActionId,a.processActionCurrent=e.processActionId;let i={dossierId:a.thongTinChiTietHoSo.dossierId,actionId:e.processActionId};a.dossierId=a.thongTinChiTietHoSo.dossierId,a.loadingAction=!0,a.dialogActionProcess=!1,a.loadingActionProcess=!0,a.$store.dispatch("processPullBtnDetail",i).then(function(i){a.loadingActionProcess=!1,a.processPullBtnDetailRouter(a.thongTinChiTietHoSo,e,i,t)}).catch(function(e){a.loadingAction=!1,a.loadingActionProcess=!1})},btnActionEvent(e,t){let a=this;if(a.itemAction=e,a.indexAction=t,"UPDATE"===String(e.form))_router__WEBPACK_IMPORTED_MODULE_0__["a"].push({path:"/danh-sach-ho-so/"+a.index+"/ho-so/"+a.thongTinChiTietHoSo.dossierId+"/"+a.itemAction.form,query:a.$router.history.current.query});else if("ADD"===String(e.form))_router__WEBPACK_IMPORTED_MODULE_0__["a"].push({path:"/danh-sach-ho-so/"+a.index+"/bo-sung-ho-so/"+a.thongTinChiTietHoSo.dossierId,query:a.$router.history.current.query});else if("COPY"===String(e.form))a.doCopy(a.thongTinChiTietHoSo,e,t);else if("CANCEL"===String(e.form))a.doCancel(a.thongTinChiTietHoSo,e,t);else if("PRINT_01"===String(e.form))a.doPrint01(a.thongTinChiTietHoSo,e,t);else if("PRINT_02"===String(e.form))a.doPrint02(a.thongTinChiTietHoSo,e,t);else if("PRINT_03"===String(e.form))a.doPrint03(a.thongTinChiTietHoSo,e,t);else if("GUIDE"===String(e.form));else if("PREVIEW"===String(e.form))a.doPreview(a.thongTinChiTietHoSo,e,t);else if("ACTIONS"===String(e.form));else if("DELETE"===String(e.form))a.doDeleteDossier(a.thongTinChiTietHoSo,e,t);else if("ROLLBACK_01"===String(e.form)){let e={dossierId:a.thongTinChiTietHoSo.dossierId,actionCode:9e3};a.doActionSpecial(e)}else if("ROLLBACK_02"===String(e.form)){let e={dossierId:a.thongTinChiTietHoSo.dossierId,actionCode:9e3};a.doActionSpecial(e)}else if("OVERDUE"===String(e.form)){a.btnIndex=8500;let e={actionCode:8500,dossierId:a.thongTinChiTietHoSo.dossierId,overdue:a.thongTinChiTietHoSo["extendDate"]?a.thongTinChiTietHoSo["extendDate"]:""};a.processPullBtnDetailRouter(a.thongTinChiTietHoSo,null,e,null)}else if("PREOVERDUE"===String(e.form)){a.btnIndex=8501;let e={actionCode:8501,dossierId:a.thongTinChiTietHoSo.dossierId,preoverdue:a.thongTinChiTietHoSo["extendDate"]?a.thongTinChiTietHoSo["extendDate"]:""};a.processPullBtnDetailRouter(a.thongTinChiTietHoSo,null,e,null)}else if("BETIMES"===String(e.form)){a.btnIndex=8400;let e={actionCode:8400,dossierId:a.thongTinChiTietHoSo.dossierId,betimes:a.thongTinChiTietHoSo["extendDate"]?a.thongTinChiTietHoSo["extendDate"]:""};a.processPullBtnDetailRouter(a.thongTinChiTietHoSo,null,e,null)}},doPrint01(e,t,a){let i=this;i.dialogPDFLoading=!0,i.dialogPDF=!0;let s={dossierId:e.dossierId,document:t.document};i.$store.dispatch("doPrint01",s).then(function(e){i.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=e})},doPreview(e,t,a){let i=this;i.dialogPDFLoading=!0,i.dialogPDF=!0;let s={dossierId:e.dossierId,document:t.document};i.$store.dispatch("doPrint03",s).then(function(e){i.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=e})},doCopy(e,t,a){let i=this,s={dossierId:e.dossierId};i.loadingAction=!0,i.$store.dispatch("doCopy",s).then(function(e){i.loadingAction=!1,_router__WEBPACK_IMPORTED_MODULE_0__["a"].push({path:"/danh-sach-ho-so/"+i.index+"/ho-so/"+e.dossierId+"/"+i.itemAction.form,query:i.$router.history.current.query})}).catch(function(e){i.loadingAction=!1})},doDeleteDossier(e,t,a){let i=this,s=confirm("Bạn có muốn thực hiện hành động này?");if(!s)return!1;{let t={dossierId:e.dossierId};i.$router.history.current.query;i.$store.dispatch("deleteDossier",t).then(function(e){i.dialogActionProcess=!1,i.loadingActionProcess=!1,i.goBack()})}},doCancel(e,t,a){let i=this;i.loadingAction=!0;let s={dossierId:e.dossierId};i.$store.dispatch("doCancel",s).then(function(e){i.loadingAction=!1,i.indexAction=-1,_router__WEBPACK_IMPORTED_MODULE_0__["a"].push({path:"/danh-sach-ho-so/"+i.index+"/ho-so/"+e.dossierId+"/"+i.itemAction.form,query:i.$router.history.current.query})}).catch(function(e){i.loadingAction=!1})},doCreateDossier(){let e=this,t={serviceCode:e.serviceCode,govAgencyCode:e.govAgencyCode,templateNo:e.templateNo,originality:e.getOriginality()};e.loadingAction=!0,e.$store.dispatch("postDossier",t).then(function(t){e.loadingAction=!1,e.indexAction=-1,_router__WEBPACK_IMPORTED_MODULE_0__["a"].push({path:"/danh-sach-ho-so/"+e.index+"/ho-so/"+t.dossierId+"/"+e.itemAction.form,query:e.$router.history.current.query})}).catch(t=>{e.loadingAction=!1})},rollBack(){var e=this;let t={dossierId:e.thongTinChiTietHoSo.dossierId};e.$store.dispatch("rollBack",t).then(t=>{e.getNextActions(),e.rollbackable=!1,e.btnStateVisible=!0}).catch(t=>{e.alertObj={icon:"error",color:"error",message:"Rút lại hồ sơ không thành công!"},e.btnStateVisible=!1})},rollBackDossier(e){var t=this;let a={dossierId:t.thongTinChiTietHoSo.dossierId,actionCode:9e3};e?t.doActionSpecial(a):t.$store.dispatch("postAction",a).then(function(e){t.getNextActions(),t.rollbackable=!1,t.btnStateVisible=!0}).catch(function(e){})},processAction(e,t,a,i,s){let o=this;var n=!0,r=!0,l=!0,c=!0,d=!0,h=!1,u=o.$store.getters.loadingInitData;let p=u.user.userName?u.user.userName:"",m={dossierId:e.dossierId,actionCode:a.actionCode,actionUser:p};if(o.showPhanCongNguoiThucHien){m["toUsers"]=o.assign_items;let e=o.$refs.phancong.doExport();n=!!e}var g=null;if(o.payments&&(g={requestPayment:o.payments["requestPayment"],paymentNote:o.payments["paymentNote"],advanceAmount:Number(o.payments["advanceAmount"].toString().replace(/\./g,"")),feeAmount:Number(o.payments["feeAmount"].toString().replace(/\./g,"")),serviceAmount:Number(o.payments["serviceAmount"].toString().replace(/\./g,"")),shipAmount:Number(o.payments["shipAmount"].toString().replace(/\./g,""))}),o.showThuPhi){m["payment"]=g;let e=g["feeAmount"]+g["serviceAmount"]+g["shipAmount"]-g["advanceAmount"];if(0===e&&3===o.originality){let e=confirm("Tổng phí còn phải nộp: 0 đồng. Bạn có muốn tiếp tục?");if(!e)return void(o.loadingActionProcess=!1)}}if(o.showThanhToanDienTu){o.$refs.epayment.validPayment();let e=o.$refs.epayment.validPayment(),t=o.$store.getters.getPaymentProfile;if(t&&t["paymentFile"]&&e){c=!0,m["payment"]={requestPayment:3,advanceAmount:t.advanceAmount?t.advanceAmount:0,feeAmount:t.feeAmount?t.feeAmount:0,paymentAmount:t.paymentAmount?t.paymentAmount:0,paymentNote:t.paymentNote?t.paymentNote:"",serviceAmount:t.serviceAmount?t.serviceAmount:0,shipAmount:t.shipAmount?t.shipAmount:0};let e=m["payment"],a=e["feeAmount"]+e["serviceAmount"]+e["shipAmount"]-e["advanceAmount"];if(0===a&&3===o.originality){let e=confirm("Tổng phí còn phải nộp: 0 đồng. Bạn có muốn tiếp tục?");if(!e)return void(o.loadingActionProcess=!1)}}else c=!1}if(o.showEditDate){let e=o.$refs.ngayhentra.getDateInput(),t={dueDate:e,receiveDate:o.receiveDateEdit};m["payload"]=t}if(o.showExtendDateEdit){let e=o.$refs.ngaygiahan.doExport();l=!!e.valid;let t={extendDate:e.extendDate};"overdue"===o.typeExtendDate?t={extendDate:e.extendDate,delayNote:e.text,lockState:""}:"preoverdue"===o.typeExtendDate&&(t={extendDate:e.extendDate,delayNote:e.text,lockState:"CONFIRM"}),m["payload"]=t}if(o.showFormBoSungThongTinNgan){m["payload"]=o.$refs.formBoSungThongTinNgan.formSubmitData();let e=o.$refs.formBoSungThongTinNgan.checkValid();d=!!e}if(o.showYkienCanBoThucHien){let e=o.$refs.ykiencanbo.doExport(),t="";e.valid?(r=!0,t=e.text):r=!1,m["userNote"]=t}if(o.showKyPheDuyetTaiLieu){let e=o.$refs.kypheduyettailieu.doExport();e.required?h=!0:(h=!1,"digital"!==o.dataEsign.signatureType&&alert("Yêu cầu xác thực ký duyệt"))}o.validateAction=!!(n&&r&&l&&c&&d),o.dossierId=e.dossierId;let v=o.$router.history.current.query;if(o.loadingActionProcess=!0,s){let e=confirm("Bạn có muốn thực hiện hành động này?");if(!e||!o.validateAction)return!1;o.loadingActionProcess=!0,o.$store.dispatch("processDossierRouter",m).then(function(e){o.loadingAction=!1,o.dialogActionProcess=!1,o.loadingActionProcess=!1,o.alertObj={icon:"check_circle",color:"success",message:"Thực hiện thành công!"},o.btnStateVisible=!1,e.hasOwnProperty("rollbackable")&&null!==e["rollbackable"]&&void 0!==e["rollbackable"]&&(o.rollbackable=e.rollbackable),e.hasOwnProperty("dossierDocumentId")&&null!==e["dossierDocumentId"]&&void 0!==e["dossierDocumentId"]&&0!==e["dossierDocumentId"]&&"0"!==e["dossierDocumentId"]&&(o.printDocument=!0),_router__WEBPACK_IMPORTED_MODULE_0__["a"].push({path:o.$router.history.current.path,query:{recount:Math.floor(100*Math.random())+1,renew:Math.floor(100*Math.random())+1,q:v["q"]}})}).catch(function(e){o.loadingAction=!1,o.loadingActionProcess=!1})}else if(o.validateAction){if(2===o.checkInput&&null!==o.$refs.thanhphanhoso&&void 0!==o.$refs.thanhphanhoso&&"undefined"!==o.$refs.thanhphanhoso){var _=o.$refs.thanhphanhoso.validDossierTemplate();if(!_)return o.loadingAction=!1,void(o.loadingActionProcess=!1)}if(o.loadingActionProcess=!0,o.showKyPheDuyetTaiLieu){if(h){let e={dossierId:o.thongTinChiTietHoSo.dossierId,actionId:o.processActionCurrent};o.$store.dispatch("processPullBtnDetail",e).then(function(e){o.dataEsign=e;let t=o.$refs.kypheduyettailieu.checkCreateFile(o.dataEsign);if(t){var a;if(o.dataEsign.createFiles)if(a=Array.isArray(o.dataEsign.createFiles)?o.dataEsign.createFiles:[o.dataEsign.createFiles],a=a.filter(e=>{return!0===e.eForm}),a.length>0){let e=a.length,t=0;for(let s=0;s<e;s++){let n=a[s];var i=o.listDossierFiles.find(e=>{return e.dossierPartNo===n.partNo});i?(i["dossierId"]=o.thongTinChiTietHoSo.dossierId,o.$store.dispatch("putAlpacaForm",i).then(a=>{t+=1,t===e&&(o.loadingAction=!1,o.loadingActionProcess=!1,o.doAction())}).catch(e=>{})):(n["dossierId"]=o.thongTinChiTietHoSo.dossierId,o.$store.dispatch("postEformEsignature",n).then(a=>{t+=1,t===e&&(o.loadingAction=!1,o.loadingActionProcess=!1,o.doAction())}).catch(e=>{}))}}}else{var s="";if(o.showThuPhi){s={requestPayment:o.payments["requestPayment"],paymentNote:o.payments["paymentNote"],advanceAmount:Number(o.payments["advanceAmount"].toString().replace(/\./g,"")),feeAmount:Number(o.payments["feeAmount"].toString().replace(/\./g,"")),serviceAmount:Number(o.payments["serviceAmount"].toString().replace(/\./g,"")),shipAmount:Number(o.payments["shipAmount"].toString().replace(/\./g,""))},e["payment"]=s;let t=s["feeAmount"]+s["serviceAmount"]+s["shipAmount"]-s["advanceAmount"];if(0===t&&3===o.originality){let e=confirm("Tổng phí còn phải nộp: 0 đồng. Bạn có muốn tiếp tục?");if(!e)return void(o.loadingActionProcess=!1)}}if(o.showYkienCanBoThucHien){let t=o.$refs.ykiencanbo.doExport(),a="";t.valid?(r=!0,a=t.text):r=!1,e["userNote"]=a}o.loadingAction=!1,o.loadingActionProcess=!1,o.$refs.kypheduyettailieu.kySo(e)}}).catch(function(e){o.loadingAction=!1,o.loadingActionProcess=!1})}}else o.$store.dispatch("processDossierRouter",m).then(function(e){2!==o.checkInput&&"2"!==o.checkInput||o.$store.dispatch("updateApplicantNote",o.thongTinChiTietHoSo).then(function(e){}),o.loadingAction=!1,o.dialogActionProcess=!1,o.loadingActionProcess=!1,o.alertObj={icon:"check_circle",color:"success",message:"Thực hiện thành công!"},o.btnStateVisible=!1,e.hasOwnProperty("rollbackable")&&null!==e["rollbackable"]&&void 0!==e["rollbackable"]&&(o.rollbackable=e.rollbackable),e.hasOwnProperty("dossierDocumentId")&&null!==e["dossierDocumentId"]&&void 0!==e["dossierDocumentId"]&&0!==e["dossierDocumentId"]&&"0"!==e["dossierDocumentId"]&&(o.printDocument=!0),"new"===o.thongTinChiTietHoSo.dossierStatus&&1===o.originality&&_router__WEBPACK_IMPORTED_MODULE_0__["a"].push("/danh-sach-ho-so/"+o.index+"/nop-thanh-cong/"+o.thongTinChiTietHoSo.dossierId),o.checkInput=0,o.$store.commit("setCheckInput",0),"ACTIONS"===String(t.form)||_router__WEBPACK_IMPORTED_MODULE_0__["a"].push({path:o.$router.history.current.path,query:{recount:Math.floor(100*Math.random())+1,renew:Math.floor(100*Math.random())+1,q:v["q"]}}),jquery__WEBPACK_IMPORTED_MODULE_1___default()("html, body").animate({scrollTop:0},500,"linear")}).catch(function(e){o.loadingAction=!1,o.loadingActionProcess=!1})}},doPrint02(e,t,a,i){let s=this;if(null===s.thuTucHanhChinhSelected||void 0===s.thuTucHanhChinhSelected||"undefined"===s.thuTucHanhChinhSelected)alert("Loại thủ tục bắt buộc phải chọn");else{let e={document:t.document,serviceCode:s.thuTucHanhChinhSelected.serviceCode,govAgencyCode:s.thuTucHanhChinhSelected.govAgencyCode,dossiers:JSON.stringify(s.selected)};s.dialogPDFLoading=!0,s.dialogPDF=!0,s.$store.dispatch("doPrint02",e).then(function(e){s.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=e})}},doPrint03(e,t,a,i){let s=this;s.dialogPDFLoading=!0,s.dialogPDF=!0;let o={dossierId:e.dossierId,document:t.document};s.$store.dispatch("doPrint03",o).then(function(e){s.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=e})},doGuiding(e,t,a,i){let s=this;if(null===s.thuTucHanhChinhSelected||void 0===s.thuTucHanhChinhSelected||"undefined"===s.thuTucHanhChinhSelected)alert("Loại thủ tục bắt buộc phải chọn");else{let e={serviceConfigId:s.thuTucHanhChinhSelected.serviceConfigId};s.dialogPDFLoading=!0,s.dialogPDF=!0,s.$store.dispatch("doGuiding",e).then(function(e){s.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=e})}},doActionSpecial(e){var t=this;let a=t.$router.history.current.query;t.loadingAction=!0,t.$store.dispatch("postAction",e).then(function(e){t.loadingAction=!1,t.dialogActionProcess=!1,t.loadingActionProcess=!1,t.btnStateVisible=!1,e.hasOwnProperty("rollbackable")&&null!==e["rollbackable"]&&void 0!==e["rollbackable"]&&(t.rollbackable=e.rollbackable),e.hasOwnProperty("dossierDocumentId")&&null!==e["dossierDocumentId"]&&void 0!==e["dossierDocumentId"]&&0!==e["dossierDocumentId"]&&"0"!==e["dossierDocumentId"]&&(t.printDocument=!0),t.checkInput=0,t.$store.commit("setCheckInput",0),_router__WEBPACK_IMPORTED_MODULE_0__["a"].push({path:t.$router.history.current.path,query:{recount:Math.floor(100*Math.random())+1,renew:Math.floor(100*Math.random())+1,q:a["q"]}})}).catch(function(e){t.loadingActionProcess=!1,t.loadingAction=!1})},getNextActions(){let e=this,t=(e.$router.history.current.query,{dossierId:e.thongTinChiTietHoSo.dossierId}),a=e.$router.history.current.query;e.dossierId=e.thongTinChiTietHoSo.dossierId,e.$store.dispatch("pullNextactions",t).then(function(t){if(e.btnDossierDynamics=t,a.hasOwnProperty("btnIndex")&&null!==a.btnIndex&&""!==a.btnIndex)if(e.btnStateVisible=!0,e.dialogActionProcess=!0,"8500"===a.btnIndex.toString()){let t={actionCode:8500,dossierId:e.thongTinChiTietHoSo.dossierId,overdue:e.thongTinChiTietHoSo["extendDate"]};e.processPullBtnDetailRouter(e.thongTinChiTietHoSo,null,t,null)}else if("8501"===a.btnIndex.toString()){let t={actionCode:8501,dossierId:e.thongTinChiTietHoSo.dossierId,preoverdue:e.thongTinChiTietHoSo["extendDate"]};e.processPullBtnDetailRouter(e.thongTinChiTietHoSo,null,t,null)}else if("8400"===a.btnIndex.toString()){let t={actionCode:8400,dossierId:e.thongTinChiTietHoSo.dossierId,betimes:e.thongTinChiTietHoSo["extendDate"]};e.processPullBtnDetailRouter(e.thongTinChiTietHoSo,null,t,null)}else 1===e.btnDossierDynamics[a.btnIndex].enable||2===e.btnDossierDynamics[a.btnIndex].enable?e.processPullBtnDetail(e.btnDossierDynamics[a.btnIndex],a.btnIndex):e.dialogActionProcess=!1;e.checkInput=e.getCheckInput,null!==e.getCheckInput&&void 0!==e.getCheckInput&&0!==e.checkInput&&setTimeout(function(){e.$refs.thanhphanhoso.initData(e.thongTinChiTietHoSo)},300)}),e.$store.dispatch("loadPlugins",{dossierId:e.thongTinChiTietHoSo.dossierId}).then(t=>{e.btnPlugins=t}).catch(t=>{e.btnPlugins=[]}),e.loadDossierSyncs(e.thongTinChiTietHoSo.dossierId)},showAlpacaJSFORM(item){var vm=this;item.eform&&vm.$store.dispatch("loadFormScript",item).then(resScript=>{vm.$store.dispatch("loadFormData",item).then(resData=>{var formScript,formData;formScript=resScript?eval("("+resScript+")"):{},formData=resData?eval("("+resData+")"):{},formScript.data=formData,window.$("#formAlpaca"+item.partNo).alpaca(formScript)})})},onUploadSingleFile(e,t,a){var i=this;e.dataItem=t,e["dossierId"]=i.thongTinChiTietHoSo.dossierId,e["dossierTemplateNo"]=i.thongTinChiTietHoSo.dossierTemplateNo,i.$store.dispatch("uploadSingleFile",e).then(function(e){}).catch(function(e){})},submitAlpacajsForm(e){var t=this;let a={dossierId:t.thongTinChiTietHoSo.dossierId,dossierPartNo:e.partNo};t.$store.dispatch("putAlpacaForm",a)},postNextActions(e){var t=this;if(e["dossierId"]=t.thongTinChiTietHoSo.dossierId,e.allowAssignUser>0)t.$store.dispatch("reassignDossier",e).then(a=>{let i={dossierId:t.dossierId,actionCode:e.actionCode,actionNote:t.actionNote,actionUser:"",payload:"",security:"",assignUsers:"",payment:"",createDossiers:""};t.$store.dispatch("postAction",i).then(e=>{})});else{let a={dossierId:t.dossierId,actionCode:e.actionCode,actionNote:t.actionNote,actionUser:"",payload:"",security:"",assignUsers:"",payment:"",createDossiers:""};t.$store.dispatch("postAction",a).then(e=>{})}},viewFileWithPartNo(e){var t=this;if(t.dossierFilesItems){var a=t.dossierFilesItems.filter(t=>{return t.dossierPartNo===e.partNo});if(!a)return;t.fileViews=a,t.partView!==e.partNo?(t.stateView=!0,t.partView=e.partNo):(t.stateView=!t.stateView,t.partView=e.partNo)}},viewFile2(e){var t=this;t.dialogPDFLoading=!0,t.dialogPDF=!0,e["dossierId"]=t.thongTinChiTietHoSo.dossierId,t.$store.dispatch("viewFile",e).then(e=>{t.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=e})},viewFileDocument(e){var t=this;t.dialogPDFLoading=!0,t.dialogPDF=!0,e["dossierId"]=t.thongTinChiTietHoSo.dossierId,t.$store.dispatch("viewDocument",e).then(e=>{t.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=e})},loadTPHS(){var e=this;e.$refs.thanhphanhoso1&&setTimeout(function(){e.$refs.thanhphanhoso1.initData(e.thongTinChiTietHoSo)},150),e.$refs.thanhphanhoso2&&setTimeout(function(){e.$refs.thanhphanhoso2.initData(e.thongTinChiTietHoSo)},150)},loadThanhToan(){var e=this;let t={dossierId:e.dossierId,referenceUid:e.thongTinChiTietHoSo.referenceUid};e.$store.dispatch("loadDossierPayments",t).then(t=>{e.paymentDetail=t}).catch(e=>{})},loadHoSoLienThong(){var e=this;let t=e.thongTinChiTietHoSo.dossierId;e.$store.dispatch("loadDossierLienThong",t).then(t=>{e.listLienThong=t}).catch(e=>{console.log(e)})},loadVoting(){let e=this,t={className:"dossier",classPK:e.id};e.$store.dispatch("loadVoting",t).then(function(t){e.votingItems=t,console.log("votingItems",e.votingItems)}).catch(function(e){})},submitVoting(){let e=this,t=[];if(e.votingItems.length>0){for(var a in e.loadingVoting=!0,e.votingItems)e.votingItems[a]["className"]="dossier",e.votingItems[a]["classPk"]=e.id,t.push(e.$store.dispatch("submitVoting",e.votingItems[a]));Promise.all(t).then(t=>{e.loadingVoting=!1,e.loadVoting(),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.success("Đánh giá của bạn được gửi thành công")}).catch(t=>{e.loadingVoting=!1,toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Gửi đánh giá không thành công")})}},doAction(){let e=this,t={dossierId:e.thongTinChiTietHoSo.dossierId,actionId:e.processActionCurrent};e.$store.dispatch("processPullBtnDetail",t).then(function(t){var a="";if(e.showThuPhi&&(a={requestPayment:e.payments["requestPayment"],paymentNote:e.payments["paymentNote"],advanceAmount:Number(e.payments["advanceAmount"].toString().replace(/\./g,"")),feeAmount:Number(e.payments["feeAmount"].toString().replace(/\./g,"")),serviceAmount:Number(e.payments["serviceAmount"].toString().replace(/\./g,"")),shipAmount:Number(e.payments["shipAmount"].toString().replace(/\./g,""))},t["payment"]=a),e.showYkienCanBoThucHien){let a=e.$refs.ykiencanbo.doExport();t["userNote"]=a.text}e.$refs.kypheduyettailieu.kySo(t)}).catch(function(t){e.loadingAction=!1,e.loadingActionProcess=!1})},printViewDocument(){let e=this;e.dialogPDFLoading=!0,e.dialogPDF=!0;let t={dossierId:e.thongTinChiTietHoSo.dossierId};e.$store.dispatch("doPrint03",t).then(function(t){e.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=t})},filterNextActionEnable(e){var t=!1;if(e&&Array.isArray(e))for(let a in e)0!==e[a]["enable"]&&(t=!0);return t},checkPemissionSpecialAction(e,t,a){var i=this,s=!0;if("PRINT_01"!==e&&"PRINT_02"!==e&&"PRINT_03"!==e&&"GUIDE"!==e&&"PREVIEW"!==e&&"BETIMES"!==e){let e=i.$store.getters.getUsersNextAction;if(e.length>0){let a=e.filter(function(e){if(void 0!==e&&void 0!==t)return e["userId"].toString()===t["userId"].toString()});s=a.length>0}else s=!1}return"ROLLBACK_01"!==e&&"ROLLBACK_02"!==e&&"ROLLBACK_03"!==e||(s=!1),s},checkPemissionPhanCongLai(e){let t=this,a=!0,i=t.$store.getters.getUsersNextAction,s=[{userId:t.thongTinChiTietHoSo.lastActionUserId?t.thongTinChiTietHoSo.lastActionUserId:""}],o=i.concat(s);if(console.log("checkPemissionPhanCongLai: ",e),o.length>0){let t=o.filter(function(t){if(void 0!==t&&void 0!==e)return t["userId"].toString()===e["userId"].toString()});a=t.length>0}else a=!1;return a},reAsign(){let e=this;e.$store.dispatch("getDossierUserAsign",e.thongTinChiTietHoSo.dossierId).then(function(t){e.reAsignUsers=t,e.dialog_reAsign=!0})},doReAsign(){let e=this,t={dossierId:e.thongTinChiTietHoSo.dossierId,users:e.reAsignUsers},a=e.$refs.phanconglai.doExport();a&&e.checkPemissionPhanCongLai(e.currentUser)&&(e.loadingAction=!0,e.$store.dispatch("postDossierUserAsign",t).then(function(t){setTimeout(function(){e.getNextActions()},300),e.dialog_reAsign=!1,e.loadingAction=!1}).catch(function(t){e.loadingAction=!1,console.log(t)}))},changeStateViewResult(e){var t=this;t.stateViewResult=e},getUser(e){let t=this,a=t.$store.getters.getUser.role;if(!a)return!1;let i=a.findIndex(t=>t===e);return i>=0},checkActionSpecial(e){var t=this;if(Array.isArray(e)){var a=0;return jquery__WEBPACK_IMPORTED_MODULE_1___default()(e).each(function(e,i){if("PRINT_01"!==i.form&&"PRINT_02"!==i.form&&"PRINT_03"!==i.form&&"GUIDE"!==i.form&&"PREVIEW"!==i.form&&"BETIMES"!==i.form){let e=t.$store.getters.getUsersNextAction;if(e.length>0){let t=e.filter(function(e){if(void 0!==e&&void 0!==currentUser)return e["userId"].toString()===currentUser["userId"].toString()});t.length>0&&(a+=1)}}}),a>0}return!1}},filters:{dateTimeView(e){if(e){let t=new Date(Number(e));return`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()} ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`}return""},getMaxDueDate(e){let t=Math.max.apply(Math,e.map(function(e){return e.actionOverdue}));return t},getThoiHanQuyDinh(e){return e>0?e+" ngày":""}}}},"31a3":function(module,__webpack_exports__,__webpack_require__){"use strict";var toastr__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("854a"),toastr__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(toastr__WEBPACK_IMPORTED_MODULE_0__);toastr__WEBPACK_IMPORTED_MODULE_0___default.a.options={closeButton:!0,timeOut:"5000"},__webpack_exports__["a"]={props:{id:{type:String,default:()=>"nm"},detailDossier:{type:Object,default:()=>{}},createFiles:{type:Array,default:()=>[]}},data:()=>({dossierTemplateItems:[],dossierMarksItems:[],dossierFilesItems:[],thongTinHoSo:{},valid:!0,stateView:!1,dialogAddOtherTemp:!1,loadingAddOther:!1,otherDossierTemplate:"",sheet:!1,partView:"",dossierFileIdView:"",stateEdit:!1,progressUploadPart:"",dialogPDF:!1,dialogPDFLoading:!0,stateAddFileOther:!1,dossierTemplatesItemSelect:{},fileViews:[],sampleCount:0,fileTemplateItems:[]}),computed:{loading(){return this.$store.getters.loading},originality(){var e=this;return e.getOriginality()},initDataResource(){return this.$store.getters.loadingInitData}},created(){var e=this;e.page=1,e.$nextTick(function(){console.log("vm.detailDossier------------",e.detailDossier),e.detailDossier["dossierId"]&&e.$store.dispatch("loadDossierFiles",e.detailDossier.dossierId).then(t=>{e.dossierFilesItems=t,e.createFiles=e.mergeDossierTemplateVsDossierFiles(e.createFiles,t),console.log("vm.createFiles------------",e.createFiles),console.log("vm.dossierFilesItems------------",e.dossierFilesItems)}).catch(e=>{})})},mounted(){var e=this;e.$nextTick(function(){e.createFiles.length>0&&setTimeout(function(){console.log("vm.createFiles------------",e.createFiles),console.log("vm.dossierFilesItems------------",e.dossierFilesItems),e.genAllAlpacaForm(e.dossierFilesItems,e.createFiles)},300)})},methods:{genAllAlpacaForm(e,t){var a=this;if(e.length>0){var i=e.filter(e=>{return e.eForm}),s=t.filter(e=>{return e.eForm});i.length>0?i.forEach(e=>{e.eForm&&a.$store.dispatch("loadAlpcaForm",e)}):t.forEach(e=>{e.eForm&&(e["templateFileNo"]=a.detailDossier.dossierTemplateNo,a.showAlpacaJSFORM(e))}),s.length!==i.length&&s.forEach(e=>{let t=i.findIndex(t=>{return e.partNo===t.dossierPartNo});-1===t&&(e["templateFileNo"]=a.detailDossier.dossierTemplateNo,a.showAlpacaJSFORM(e))})}else t.forEach(e=>{e.eForm&&(e["templateFileNo"]=a.detailDossier.dossierTemplateNo,a.showAlpacaJSFORM(e))})},mergeDossierTemplateVsDossierFiles(e,t){return 0!==t.length?e.forEach(e=>{var a=t.find(t=>{return e.partNo===t.dossierPartNo&&t.eForm});a?e["daKhai"]=!0:!a&&e.eForm&&(e["daKhai"]=!1)}):e.forEach(e=>{e.eForm&&(e["daKhai"]=!1)}),e},showAlpacaJSFORM(item){var vm=this;item["dossierId"]=vm.detailDossier.dossierId,vm.$store.dispatch("loadFormScript",item).then(resScript=>{vm.$store.dispatch("loadFormData",item).then(resData=>{var formScript,formData;window.$("#formAlpaca"+item.partNo+vm.id).empty(),formScript=resScript?eval("("+resScript+")"):{},formData=resData?eval("("+resData+")"):{},formScript.data=formData,window.$("#formAlpaca"+item.partNo+vm.id).alpaca(formScript)})})},loadAlpcaForm(e){var t=this,a=t.dossierFilesItems.find(t=>{return t.dossierPartNo===e.partNo&&t.eForm});a?(a["id"]=t.id,t.$store.dispatch("loadAlpcaForm",a)):t.createFiles.forEach(a=>{a.eForm&&e.partNo===a.partNo&&(a["templateFileNo"]=t.detailDossier.dossierTemplateNo,t.showAlpacaJSFORM(a))})},previewFileEfom(e,t){var a=this;a.dossierFilesItems.forEach(t=>{t.dossierPartNo===e.partNo&&t.eForm&&(t["dossierId"]=a.detailDossier.dossierId,a.dialogPDFLoading=!0,a.dialogPDF=!0,t["id"]=a.id,a.$store.dispatch("putAlpacaForm",t).then(e=>{setTimeout(function(){a.$store.dispatch("viewFile",t).then(e=>{a.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+a.id).src=e})},1e3)}).catch(e=>{toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn được thực hiện thất bại.")}))})},viewFile(e){var t=this;t.dossierFilesItems.forEach(a=>{a["dossierId"]=t.detailDossier.dossierId,a.dossierPartNo===e.partNo&&this.$store.dispatch("viewFile",a)})},viewFile2(e){var t=this;if("doc"===e.fileType||"docx"===e.fileType||"xlsx"===e.fileType||"xls"===e.fileType||"zip"===e.fileType||"rar"===e.fileType||"txt"===e.fileType){var a=t.initDataResource.dossierApi+"/"+t.detailDossier.dossierId+"/files/"+e.referenceUid;window.open(a)}else t.dialogPDFLoading=!0,t.dialogPDF=!0,e["dossierId"]=t.detailDossier.dossierId,t.$store.dispatch("viewFile",e).then(e=>{t.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+t.id).src=e})},viewFileWithPartNo(e){var t=this;if(t.dossierFilesItems){var a=t.dossierFilesItems.filter(t=>{return t.dossierPartNo===e.partNo&&!t.eForm});if(!a)return;t.fileViews=a,t.partView!==e.partNo?(t.stateView=!0,t.partView=e.partNo):(t.stateView=!t.stateView,t.partView=e.partNo)}},checkStyle(e){return"calc(100% - 50px)"},downloadFileTemplate(e,t){var a=this;if(a.fileTemplateItems.length>0){let t=a.fileTemplateItems.find(t=>{return e.fileTemplateNo===t.fileTemplateNo});if(t){let e=a.initDataResource.serviceInfoApi+"/"+t.serviceCode+"/filetemplates/"+t.fileTemplateNo;window.open(e)}else console.log("ko thay file")}}}}},3436:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm12:""}},[a("v-subheader",{staticStyle:{"font-weight":"bold"}},[e._v("Tình trạng hồ sơ")]),e._l(e.tinhTrangHoSo,function(t,i){return a("v-btn",{key:t.status,class:{active:t.status===e.statusSearch},attrs:{color:"primary",outline:""},on:{click:function(a){e.changeTinhTrangHoSo(t)}}},[e._v(e._s(t.statusName)+" ("+e._s(t.count)+")")])})],2),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm12:""}},[a("v-subheader",{staticStyle:{"font-weight":"bold"}},[e._v("Đang thụ lý")]),e._l(e.dangThuLy,function(t,i){return a("v-btn",{key:t.dueCode,class:{active:t.dueCode===e.dueSearch},attrs:{color:"primary",outline:""},on:{click:function(a){e.changeDangThuLy(t)}}},[e._v(e._s(t.dueName)+" ("+e._s(t.count)+")")])})],2),a("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm12:""}},[a("v-subheader",{staticStyle:{"font-weight":"bold"}},[e._v("Sổ theo dõi")]),e._l(e.soTheoDoi,function(t,i){return a("v-btn",{key:t.register,class:{active:t.register===e.registerSearch},attrs:{color:"primary",outline:""},on:{click:function(a){e.changeSoTheoDoi(t)}}},[e._v(e._s(t.registerName)+" ("+e._s(t.count)+")")])})],2),a("v-flex",{attrs:{xs12:"",sm9:""}},[a("v-text-field",{staticClass:"ml-3",attrs:{label:"Nhập từ khóa"},model:{value:e.keywordSearch,callback:function(t){e.keywordSearch=t},expression:"keywordSearch"}})],1),a("v-flex",{attrs:{xs12:"",sm3:""}},[a("v-btn",{staticClass:"ml-4",attrs:{color:"primary"},on:{click:e.quickSearch}},[e._v("Tìm kiếm nhanh")])],1),a("v-flex",{attrs:{xs12:"",sm9:""}}),a("v-flex",{attrs:{xs12:"",sm3:""}},[a("v-btn",{staticClass:"ml-4 mb-3",attrs:{color:"primary"},on:{click:e.advancedSearch}},[e._v("Tìm kiếm nâng cao")])],1),a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-data-table",{staticClass:"table-landing table-bordered",attrs:{headers:e.headers,items:e.traCuuDatas,"hide-actions":"","no-data-text":"Không có dữ liệu"},scopedSlots:e._u([{key:"headerCell",fn:function(t){return[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[e._v("\n            "+e._s(t.header.text)+"\n          ")]),a("span",[e._v("\n            "+e._s(t.header.text)+"\n          ")])])]}},{key:"items",fn:function(t){return[a("td",{staticClass:"text-xs-center"},[e._v("\n          "+e._s(t.item.dossierNo)+"\n        ")]),a("td",{staticClass:"text-xs-center"},[e._v("\n          "+e._s(t.item.serviceName)+"\n        ")]),a("td",{staticClass:"text-xs-center"},[e._v("\n          "+e._s(t.item.applicantName)+"\n        ")]),a("td",{staticClass:"text-xs-center"},[e._v("\n          "+e._s(t.item.address)+"\n        ")]),a("td",{staticClass:"text-xs-center"},[e._v("\n          "+e._s(t.item.receiveDate)+"\n        ")]),a("td",{staticClass:"text-xs-center"},[e._v("\n          "+e._s(t.item.releaseDate)+"\n        ")]),a("td",{staticClass:"text-xs-center"},[e._v("\n          "+e._s(t.item.submitDate)+"\n        ")]),a("td",{staticClass:"text-xs-center"},[e._v("\n          "+e._s(t.item.finishDate)+"\n        ")])]}}])}),a("div",{staticClass:"text-xs-right layout wrap",staticStyle:{position:"relative"}},[a("div",{staticClass:"flex pagging-table px-2"},[a("tiny-pagination",{attrs:{total:e.traCuuDatasTotal,page:e.traCuuDatasPage,"custom-class":"custom-tiny-class"},on:{"tiny:change-page":e.paggingDataTraCuu}})],1)])],1)],1)],1)},s=[],o=a("000e"),n=a("a18c"),r={props:["index","id"],components:{"tiny-pagination":o["a"]},data:()=>({tinhTrangHoSo:[{status:"trangThai1",statusName:"trang thai 1",count:"10"},{status:"trangThai2",statusName:"trang thai 2",count:"8"},{status:"trangThai3",statusName:"trang thai 3",count:"9"}],dangThuLy:[{dueCode:"trangThai1",dueName:"trang thai 1",count:"10"},{dueCode:"trangThai2",dueName:"trang thai 2",count:"8"},{dueCode:"trangThai3",dueName:"trang thai 3",count:"9"}],soTheoDoi:[{register:"trangThai1",registerName:"trang thai 1",count:"10"},{register:"trangThai2",registerName:"trang thai 2",count:"8"},{register:"trangThai3",registerName:"trang thai 3",count:"9"}],headers:[{text:"STT",align:"center",sortable:!1,class:"stt_column"},{text:"Mã hồ sơ",align:"center",sortable:!1,class:"mahoso_column"},{text:"Thủ tục",align:"center",sortable:!1,class:"thutuc_column"},{text:"Chủ hồ sơ",align:"center",sortable:!1,class:"chuhoso_column"},{text:"Địa chỉ",align:"center",sortable:!1,class:"diachi_column"},{text:"Ngày tiếp nhận",align:"center",sortable:!1,class:"ngaytiepnhan_column"},{text:"Ngày hẹn trả",align:"center",sortable:!1,class:"ngayhentra_column"},{text:"Ngày gửi",align:"center",sortable:!1,class:"ngaygui_column"},{text:"Ngày trả kết quả",align:"center",sortable:!1,class:"ngaytraketqua_column"}],statusSearch:null,dueSearch:null,registerSearch:null,traCuuDatas:[],traCuuDatasTotal:0,traCuuDatasPage:1,keywordSearch:""}),computed:{loading(){return this.$store.getters.loading}},watch:{},created(){var e=this;e.$nextTick(function(){let t=e.$router.history.current.query;t.hasOwnProperty("page")&&1!==t["page"]?e.traCuuDatasPage=t["page"]:e.traCuuDatasPage=1})},methods:{initData(e){var t=this;t.$store.dispatch("loadDossierCounting",{}).then(e=>{t.tinhTrangHoSo=e.hasOwnProperty("bystatus")?e.bystatus:[],t.dangThuLy=e.hasOwnProperty("bydue")?e.bydue:[],t.soTheoDoi=e.hasOwnProperty("byregister")?e.byregister:[]}),t.doLoadingDataHoSo()},goBack(){window.history.back()},quickSearch(){var e=this;e.doLoadingDataHoSo()},advancedSearch(){var e=this;e.doLoadingDataHoSo()},changeTinhTrangHoSo(e){var t=this;t.statusSearch=e.status},changeDangThuLy(e){var t=this;t.dueSearch=e.dueCode},changeSoTheoDoi(e){var t=this;t.registerSearch=e.register},paggingDataTraCuu(e){let t=this,a=t.$router.history.current,i=a.query,s="?";i["page"]="";for(let o in i)""!==i[o]&&"undefined"!==i[o]&&void 0!==i[o]&&(s+=o+"="+i[o]+"&");s+="page="+e.page,t.$router.push({path:a.path+s})},doLoadingDataHoSo(){let e=this,t=n["a"].history.current.query;console.log(t);let a={queryParams:"/o/rest/v2/dossiers",page:e.traCuuDatasPage,agency:e.govAgencyCode,service:e.serviceCode,template:e.templateNo,status:e.statusSearch,dueCode:e.dueSearch,register:e.registerSearch,keyword:e.keywordSearch};e.$store.dispatch("loadingDataHoSo",a).then(function(t){e.traCuuDatas=t.data,e.traCuuDatasTotal=t.total})}},filters:{dateTimeView(e){if(e){let t=new Date(e);return`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()} | ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`}return""}}},l=r,c=a("2877"),d=a("6544"),h=a.n(d),u=a("8336"),p=a("8fea"),m=a("0e8f"),g=a("a722"),v=a("e0c7"),_=a("2677"),f=a("3a2f"),y=Object(c["a"])(l,i,s,!1,null,null,null);y.options.__file="TraCuuHoSo.vue";t["default"]=y.exports;h()(y,{VBtn:u["a"],VDataTable:p["a"],VFlex:m["a"],VLayout:g["a"],VSubheader:v["a"],VTextField:_["a"],VTooltip:f["a"]})},3677:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),e.detailView?a("span",[e._v(e._s(e.currentHoSoLienThong?e.currentHoSoLienThong.dossierName:""))]):a("span",[e._v("Danh sách hồ sơ liên thông")])]),a("v-card",{},[a("v-card-text",{staticClass:"px-0 py-0"},[e.detailView?a("div",[a("v-expansion-panel",{staticClass:"expansion-pl ext__form",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",{attrs:{value:!0}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[e._v(" I.")]),e._v("\n                  Tài liệu nộp     \n                ")]),a("thanh-phan-ho-so",{ref:"thanhphanhoso1",attrs:{onlyView:!0,id:"nm",partTypes:e.inputTypes}})],1)],1),a("v-expansion-panel",{staticClass:"expansion-pl ext__form",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",{attrs:{value:!0}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[e._v(" II.")]),e._v("\n                  Tài liệu kết quả\n                ")]),a("thanh-phan-ho-so",{ref:"thanhphanhoso2",attrs:{onlyView:!0,id:"kq",partTypes:e.outputTypes}})],1)],1),a("v-flex",{staticClass:"mt-3 mb-2 text-right",attrs:{xs12:""}},[a("v-btn",{staticClass:"my-0 mx-0",attrs:{color:"primary"},on:{click:function(t){e.detailView=!1}}},[a("v-icon",{attrs:{size:"16"}},[e._v("undo")]),e._v("  \n                Quay lại danh sách \n              ")],1)],1)],1):a("v-data-table",{staticClass:"table-landing table-bordered",attrs:{headers:e.headers,items:e.listLienThong,"hide-actions":"","item-key":"dossierId"},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",[a("td",{staticClass:"text-xs-center",attrs:{width:"5%"}},[a("span",[e._v(e._s(t.index+1))])]),a("td",{staticClass:"text-xs-left",attrs:{width:"30%"}},[e._v("\n                  "+e._s(t.item.dossierName)+"\n                ")]),a("td",{staticClass:"text-xs-left",attrs:{width:"10%"}},[e._v("\n                  "+e._s(t.item.dossierNo)+"\n                ")]),a("td",{staticClass:"text-xs-left",attrs:{width:"25%"}},[e._v("\n                  "+e._s(t.item.govAgencyName)+"\n                ")]),a("td",{staticClass:"text-xs-left",attrs:{width:"10%"}},[e._v("\n                  "+e._s(t.item.submitDate)+"\n                ")]),a("td",{staticClass:"text-xs-left",attrs:{width:"10%"}},[e._v("\n                  "+e._s(t.item.receiveDate)+"\n                ")]),a("td",{staticClass:"text-xs-left",attrs:{width:"10%"}},[e._v("\n                  "+e._s(t.item.dossierSubStatusText?t.item.dossierSubStatusText:t.item.dossierStatusText)+"\n                ")])])]}}])})],1)],1)],1)],1)],1)},s=[],o=(a("a18c"),a("76eb")),n=a("93f5"),r={components:{thongtinchunghoso:o["a"],"thanh-phan-ho-so":n["a"]},props:{listLienThong:{type:Array,default:()=>[]},dossierDetail:{type:Object,default:()=>{}}},data:()=>({loading:!1,inputTypes:[1,3],outputTypes:[2],detailView:!1,thongTinLienThong:{},hoSoLienThongItems:[],currentHoSoLienThong:"",lienthongPage:1,headers:[{text:"STT",align:"center",sortable:!1},{text:"Tên hồ sơ",align:"center",sortable:!1},{text:"Mã hồ sơ",align:"center",sortable:!1},{text:"Cơ quan liên thông",align:"center",sortable:!1},{text:"Ngày gửi",align:"center",sortable:!1},{text:"Ngày tiếp nhận",align:"center",sortable:!1},{text:"Trạng thái",align:"center",sortable:!1}]}),computed:{},created(){var e=this;e.$nextTick(function(){})},methods:{getDossierLogs(e){var t=this;let a={dossierId:e.dossierId,type:""};t.$store.dispatch("loadDossierLogs",a).then(t=>{t.length>0&&(e.dossierLog=t)}).catch(e=>{console.log(e)})},viewDetail(e){var t=this;console.log("item",e),t.detailView=!0,t.currentHoSoLienThong=e,setTimeout(function(){t.$refs.thanhphanhoso1&&t.$refs.thanhphanhoso1.initData(e),t.$refs.thanhphanhoso2&&t.$refs.thanhphanhoso2.initData(e)},300)},goBack(){window.history.back()}},filters:{dateTimeView(e){if(e){let t=new Date(e);return`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()}  ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`}return""}}},l=r,c=a("2877"),d=a("6544"),h=a.n(d),u=a("8336"),p=a("b0af"),m=a("99d9"),g=a("8fea"),v=a("cd55"),_=a("49e2"),f=a("0e8f"),y=a("132d"),C=Object(c["a"])(l,i,s,!1,null,null,null);C.options.__file="HoSoLienThong.vue";t["a"]=C.exports;h()(C,{VBtn:u["a"],VCard:p["a"],VCardText:m["b"],VDataTable:g["a"],VExpansionPanel:v["a"],VExpansionPanelContent:_["a"],VFlex:f["a"],VIcon:y["a"]})},"38ec":function(e,t,a){"use strict";a.r(t);var i,s,o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",["NEW"===e.formCode||"UPDATE"===e.formCode||"COPY"===e.formCode?a("tiep-nhan-ho-so-detail",{ref:"tiepnhanhosodetail",attrs:{formCode:e.formCode}}):e._e()],1)},n=[],r=a("2877"),l={},c=Object(r["a"])(l,i,s,!1,null,null,null);c.options.__file="ChamQuaHanDetail.vue";var d=c.exports,h=a("aa35"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-expansion-panel",{staticClass:"expansion-p0",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",{attrs:{value:!0}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[e._v("I. ")]),e._v("THÔNG TIN HỒ SƠ\n      ")]),a("thongtinchunghoso",{attrs:{dataDetail:e.thongTinLienThong}}),a("v-card",{staticClass:"bdt-0"},[a("v-card-text",{staticClass:"py-0"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[e._v("Cơ quan liên thông: ")])],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-select",{attrs:{items:e.govAgencyItems,"item-text":"itemName","item-value":"itemCode",placeholder:"Chọn cơ quan liên thông",autocomplete:"","return-object":"","hide-selected":""},model:{value:e.govAgency,callback:function(t){e.govAgency=t},expression:"govAgency"}})],1)],1)],1)],1)],1)],1),a("v-expansion-panel",{staticClass:"expansion-pl",staticStyle:{position:"relative"},attrs:{value:[!0]}},[a("v-expansion-panel-content",{attrs:{value:!0}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[e._v(" II.")]),e._v("\n        KẾT QUẢ LIÊN THÔNG\n      ")]),a("thanh-phan-ho-so",{ref:"thanhphanhoso"})],1)],1),a("v-card-actions",{staticClass:"mt-2",staticStyle:{float:"right"}},[a("v-btn",{attrs:{color:"primary",loading:e.loadingAction,disabled:e.loadingAction},on:{click:e.goBack}},[e._v("\n      Đã nhận kết quả\n      "),a("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])]),a("v-btn",{staticStyle:{height:"30px"},attrs:{color:"primary",loading:e.loadingAction,disabled:e.loadingAction},on:{click:e.postDossierLienThong}},[a("v-icon",[e._v("undo")]),e._v("  \n      Quay lại\n      "),a("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])],1)],1)],1)},p=[],m=(a("a18c"),a("76eb")),g=a("93f5"),v={components:{thongtinchunghoso:m["a"],"thanh-phan-ho-so":g["a"]},data:()=>({thongTinLienThong:{},govAgencyItems:[],govAgency:"",loadingAction:!1}),computed:{loading(){return this.$store.getters.loading}},watch:{},created(){var e=this;e.$nextTick(function(){})},methods:{initData(e){var t=this;t.$store.dispatch("getDetailDossier",e).then(e=>{t.thongTinLienThong=e,t.$refs.thanhphanhoso.initData(e)}).catch(e=>{console.log(e)}),t.$store.dispatch("getGovAgency").then(e=>{console.log("govAgency",e),t.govAgencyItems=e}).catch(e=>{console.log(e)})},postDossierLienThong(){console.log("đã nhận kết quả")},goBack(){var e=this;let t=e.$router.history.current.params,a=e.$router.history.current.query;e.$router.push({path:"/danh-sach-ho-so/"+t.index,query:a})}},filters:{dateTimeView(e){if(e){let t=new Date(e);return`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()}  ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`}return""}}},_=v,f=a("6544"),y=a.n(f),C=a("8336"),T=a("b0af"),x=a("99d9"),D=a("cd55"),S=a("49e2"),b=a("0e8f"),P=a("132d"),I=a("a722"),A=a("b56d"),N=a("e0c7"),w=Object(r["a"])(_,u,p,!1,null,null,null);w.options.__file="HoSoLienThongDetail.vue";var k=w.exports;y()(w,{VBtn:C["a"],VCard:T["a"],VCardActions:x["a"],VCardText:x["b"],VExpansionPanel:D["a"],VExpansionPanelContent:S["a"],VFlex:b["a"],VIcon:P["a"],VLayout:I["a"],VSelect:A["a"],VSubheader:N["a"]});var E=a("5338"),F=a("bbba"),O={props:["id","formCode"],components:{"cham-qua-han-detail":d,"hoan-thien-bo-sung-ho-so-detail":h["default"],"ho-so-lien-thong-detail":k,"tiep-nhan-ho-so-detail":E["default"],"xem-chi-tiet-ho-so-detail-can-bo":F["default"],"chi-tiet-ho-so-lien-thong":k},data:()=>({initData:null,step:""}),beforeCreate(){var e=this;e.$nextTick(function(){let t=e.$router.history.current.query;t.hasOwnProperty("step")&&(e.step=t.step),e.$store.dispatch("loadInitResource").then(function(t){if(e.initData=t,null!==e.initData){let t=e.$refs.tiepnhanhosodetail,a=e.$refs.hoanthienbosunghosodetail,i=e.$refs.traketquadetail,s=e.$refs.chuyenphatketquadetail,o=e.$refs.xemchitiethosodetailcanbo,n=e.$refs.xemchitiethosotinhtrangxulylienthong,r=e.$refs.xemchitiethosolienthong;null!==t&&void 0!==t&&"undefined"!==t?e.$refs.tiepnhanhosodetail.initData(e.id):null!==a&&void 0!==a&&"undefined"!==a?e.$refs.hoanthienbosunghosodetail.initData(e.id):null!==i&&void 0!==i&&"undefined"!==i?e.$refs.traketquadetail.initData(e.id):null!==s&&void 0!==s&&"undefined"!==s?e.$refs.chuyenphatketquadetail.initData(e.id):null!==o&&void 0!==o&&"undefined"!==o?e.$refs.xemchitiethosodetailcanbo.initData(e.id):null!==n&&void 0!==n&&"undefined"!==n?e.$refs.xemchitiethosotinhtrangxulylienthong.initData(e.id):null!==r&&void 0!==r&&"undefined"!==r&&e.$refs.xemchitiethosolienthong.initData(e.id)}})})},watch:{$route:function(e,t){let a=this,i=e.query;i.hasOwnProperty("step")&&(a.step=i.step),a.$store.dispatch("loadInitResource").then(function(e){if(a.initData=e,null!==a.initData){let e=a.$refs.tiepnhanhosodetail,t=a.$refs.hoanthienbosunghosodetail,i=a.$refs.traketquadetail,s=a.$refs.chuyenphatketquadetail,o=a.$refs.xemchitiethosodetailcanbo,n=a.$refs.xemchitiethosotinhtrangxulylienthong,r=a.$refs.xemchitiethosolienthong;null!==e&&void 0!==e&&"undefined"!==e?a.$refs.tiepnhanhosodetail.initData(a.id):null!==t&&void 0!==t&&"undefined"!==t?a.$refs.hoanthienbosunghosodetail.initData(a.id):null!==i&&void 0!==i&&"undefined"!==i?a.$refs.traketquadetail.initData(a.id):null!==s&&void 0!==s&&"undefined"!==s?a.$refs.chuyenphatketquadetail.initData(a.id):null!==o&&void 0!==o&&"undefined"!==o?a.$refs.xemchitiethosodetailcanbo.initData(a.id):null!==n&&void 0!==n&&"undefined"!==n?a.$refs.xemchitiethosotinhtrangxulylienthong.initData(a.id):null!==r&&void 0!==r&&"undefined"!==r&&a.$refs.xemchitiethosolienthong.initData(a.id)}})}}},H=O,L=Object(r["a"])(H,o,n,!1,null,null,null);L.options.__file="DetailForward.vue";t["default"]=L.exports},4360:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return store});var vue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("a026"),vuex__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("2f62"),toastr__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("854a"),toastr__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(toastr__WEBPACK_IMPORTED_MODULE_2__),axios__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("bc3a"),axios__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_3__),_support_json__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("bbd0"),_support_json__WEBPACK_IMPORTED_MODULE_4___namespace=__webpack_require__.t("bbd0",1),jquery__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("1157"),jquery__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_5__),file_saver__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("21a6"),file_saver__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(file_saver__WEBPACK_IMPORTED_MODULE_6__);vue__WEBPACK_IMPORTED_MODULE_0__["a"].use(toastr__WEBPACK_IMPORTED_MODULE_2___default.a),vue__WEBPACK_IMPORTED_MODULE_0__["a"].use(vuex__WEBPACK_IMPORTED_MODULE_1__["a"]),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.options={closeButton:!0,timeOut:"15000"};const store=new vuex__WEBPACK_IMPORTED_MODULE_1__["a"].Store({state:{initData:_support_json__WEBPACK_IMPORTED_MODULE_4__.initData,endPointApi:"/o/rest/v2",loading:!1,loadingTable:!1,loadingDynamicBtn:!1,loadingGov:!1,validFileUpload:!1,fileTypeTPHS:["png","jpg","jpeg","pdf","docx","doc","xls","xlsx","txt","rtf"],fileTypePAYMENT:["png","jpg","jpeg"],error:null,user:{role:""},index:0,kysoSuccess:!1,activeGetCounter:!1,activeLoadingDataHoSo:!1,trangThaiHoSoList:null,listThuTucHanhChinh:null,checkInput:0,stepOverdueNextAction:"",usersNextAction:[],lePhi:{fee:"",feeNote:"",request:""},dossier:{applicantIdNo:"ccc"},dossierSelected:[],actionActive:{},serviceConfigObj:{},dossierTemplateName:"",thongTinChungHoSo:{serviceName:"",dossierTemplateName:"",serviceConfig:"",serviceOption:"",dossierNo:"",receiveDate:new Date,dueDate:(new Date).toString(),durationDate:"",dossierId:"",dossierIdCTN:"",dossierStatus:"",dossierStatusText:""},vnpostCodeItems:[],serviceConfigItems:null,serviceOptionItems:[],citys:null,cityVal:null,districtVal:null,wardVal:null,resultServices:null,dossierFiles:[],listHistoryProcessingItems:[],thanhPhanHoSo:{dossierTemplates:_support_json__WEBPACK_IMPORTED_MODULE_4__.dossierTemplates},dossierTemplates:_support_json__WEBPACK_IMPORTED_MODULE_4__.dossierTemplates,applicantId:"",applicantBussinessExit:!1,applicantNote:"",thongTinChuHoSo:{userType:!0,cityCode:"",districtCode:"",wardCode:"",applicantIdNo:"",contactEmail:"",contactName:"",address:"",applicantName:""},thongTinChuHoSoBindChuyenPhat:{cityCode:"",districtCode:"",wardCode:"",address:"",contactTelNo:""},thongTinNguoiNopHoSo:{sameUser:!0,delegateName:"",delegateCityCode:"",delegateAddress:"",delegateDistrictCode:"",delegateWardCode:"",delegateEmail:"",delegateTelNo:"",delegateIdNo:""},dichVuChuyenPhatKetQua:{viaPostal:0,postalServiceCode:"",postalAddress:"",postalCityCode:"",postalDistrictCode:"",postalWardCode:"",postalTelNo:""},viaPostal:0,data_phancong:[],dataCreateDossier:{},dataCreateFile:[],paymentProfile:"",paymentFileName:""},actions:{clearError({commit:e}){e("clearError")},loadInitResource({commit:e,state:t}){return new Promise((a,i)=>{null!==window.themeDisplay&&void 0!==window.themeDisplay?(t.initData["groupId"]=window.themeDisplay.getScopeGroupId(),t.initData["user"]={userName:window.themeDisplay.getUserName(),userEmail:"",userId:window.themeDisplay.getUserId()}):(t.initData["groupId"]=0,t.initData["user"]={userName:"",userEmail:"",userId:20164}),""===t["user"].role&&store.dispatch("getRoleUser").then(function(e){t["user"].role=e}).catch(function(e){t["user"].role=["default"],console.log(e)}),e("setInitData",t.initData),a(t.initData)})},getRoleUser({commit:e,state:t},a){return new Promise((e,a)=>{let i={headers:{groupId:window.themeDisplay.getScopeGroupId()?window.themeDisplay.getScopeGroupId():""}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.endPointApi+"/users/login",i).then(function(t){let a=t.data;if(a&&a.length>0){let t=[];for(let e in a)a[e]["role"]&&t.push(a[e]["role"]);console.log("roles",t),e(t)}else e(["default"])}).catch(function(e){console.log(e),a("default")})})},loadMenuConfigToDo({commit:commit,state:state}){return commit("setLoadingDynamicBtn",!0),null===state.trangThaiHoSoList?new Promise((resolve,reject)=>{store.dispatch("loadInitResource").then(function(result){let param={headers:{groupId:state.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(state.initData.menuConfigToDo,param).then(function(response){let serializable=response.data,menuData=[],index=0;for(let key in serializable.data){let current=serializable.data[key],menuDetail={index:index,active:!1,title:current["menuName"],id:current["menuGroup"],action:"description",action_active:"play_arrow",counter:-1,menuType:parseInt(current["menuType"]),queryParams:current["queryParams"]};index+=1;let tableConfig=current["tableConfig"],buttonConfig=current["buttonConfig"];if(""!==tableConfig&&void 0!==tableConfig&&"undefined"!==tableConfig&&-1!==String(tableConfig).indexOf("{")&&-1!==String(tableConfig).indexOf("}")&&(menuDetail["tableConfig"]=eval("("+tableConfig+")")),""!==buttonConfig&&void 0!==buttonConfig&&"undefined"!==buttonConfig&&-1!==String(buttonConfig).indexOf("{")&&-1!==String(buttonConfig).indexOf("}")&&(menuDetail["buttonConfig"]=eval("("+buttonConfig+")")),current.hasOwnProperty("steps"))if(current.steps.length>1)menuDetail["items"]=current.steps;else{let e=[];e.push(current.steps),menuDetail["items"]=e}menuData.push(menuDetail)}commit("setLoadingDynamicBtn",!1),commit("setMenuConfigToDo",menuData),resolve(menuData)}).catch(function(e){commit("setLoadingDynamicBtn",!1),console.log(e),reject(e)})})}):new Promise((e,t)=>{commit("setLoadingDynamicBtn",!1),e(state.trangThaiHoSoList)})},loadListThuTucHanhChinh({commit:e,state:t}){return null===t.listThuTucHanhChinh?new Promise((a,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.getListThuTucHanhChinh,o).then(function(t){let i=t.data,s=Array.from(i.data);e("setListThuTucHanhChinh",s),a(s)}).catch(function(e){console.log(e),i(e)})})}):new Promise((e,a)=>{let i=Array.from(t.listThuTucHanhChinh);e(i)})},loadingDataHoSo({commit:e,state:t},a){return e("setLoadingTable",!0),new Promise((i,s)=>{store.dispatch("loadInitResource").then(function(o){let n={start:15*a.page-15,end:15*a.page,agency:a.agency?a.agency:"",service:a.service?a.service:"",template:a.template?a.template:"",status:a.status?a.status:"",register:a.register?a.register:"",keyword:a.keyword?a.keyword:"",domain:a.domain?a.domain:"",substatus:a.substatus?a.substatus:"",year:a.year?a.year:0,month:a.month?a.month:0,day:a.day?a.day:0,top:a.top?a.top:"",dossierNo:a.dossierNo?a.dossierNo:""};a["originality"]&&(n["originality"]=a.originality);let r={headers:{groupId:t.initData.groupId},params:n};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.queryParams,r).then(function(t){let a=t.data;e("setLoadingTable",!1),e("setUserNextAction",[]),i(a)}).catch(function(t){e("setLoadingTable",!1),e("setUserNextAction",[]),console.log(t),s(t)})})})},loadingCounterNotStep({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={agency:a.agency?a.agency:"",service:a.service?a.service:"",template:a.template?a.template:"",status:a.status?a.status:"",register:a.register?a.register:"",keyword:a.keyword?a.keyword:"",domain:a.domain?a.domain:"",substatus:a.substatus?a.substatus:"",year:a.year?a.year:0,month:a.month?a.month:0,day:a.day?a.day:0,top:a.top?a.top:"",dossierNo:a.dossierNo?a.dossierNo:""};a["originality"]&&(o["originality"]=a.originality);let n={headers:{groupId:t.initData.groupId},params:o};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(a.queryParams,n).then(function(t){let a=t.data;e(a)}).catch(function(e){i(e)})})})},loadingCounterHoSo({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId}};a.hasOwnProperty("originality")&&1===a.originality&&(o["params"]={owner:!0}),axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.counterMenuStep,o).then(function(t){let a=t.data;e(a)}).catch(function(e){console.log(e),i(e)})})})},loadDossierSelected({commit:e,state:t},a){e("dossierSelected",a)},loadActionActive({commit:e,state:t},a){e("actionActive",a)},loadDictItems({commit:e,state:t},a){return new Promise((i,s)=>{store.dispatch("loadInitResource").then(function(o){let n={headers:{groupId:t.initData.groupId},params:{parent:a.parent}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.regionApi+"/"+a.collectionCode+"/dictitems",n).then(function(t){let s=t.data;"ADMINISTRATIVE_REGION"===a.collectionCode&&0===a.level&&e("setCitys",s.data),i(t.data)},e=>{s(e)})})})},resetThongTinChungHoSo({commit:e}){let t={serviceConfig:{},serviceOption:"",receiveDate:new Date,dueDate:(new Date).toString(),durationDate:"",dossierId:"",dossierNo:"",govAgencyName:"",dossierIdCTN:"",processBlock:"",processUnit:"",dossierStatus:"",dossierStatusText:"",submitDate:""};e("setThongTinChungHoSo",t)},resetThongTinChuHoSo({commit:e}){let t={userType:!0,cityCode:25,districtCode:"",wardCode:"",applicantIdNo:"",contactEmail:"",contactName:"",address:"",applicantName:""};e("setThongTinChuHoSo",t)},resetThongTinNguoiNopHoSo({commit:e}){let t={sameUser:"",delegateName:"",delegateCityCode:25,delegateAddress:"",delegateDistrictCode:"",delegateWardCode:"",delegateEmail:"",delegateTelNo:"",delegateIdNo:""};e("setThongTinNguoiNopHoSo",t)},resetThanhPhanHoSo({commit:e}){e("setDossierTemplates",[])},loadDossierMark({commit:e,state:t},a){return new Promise((e,i)=>{let s={headers:{groupId:t.initData.groupId},params:{type:1}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.dossierApi+"/"+a.dossierId+"/marks",s).then(function(t){let a=t.data;a.data?e(a.data):e([])},e=>{i(e)})})},loadDossierTemplates({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.dossierTemplatesApi+"/"+a.dossierTemplateNo,o).then(function(t){let a=t.data,i=function(e){try{return JSON.parse(e),JSON.parse(e)}catch(t){let a={tip:e,maxSize:10,extensions:"pdf,doc,docx,xls,xlsx,png,jpg,jpeg,txt,rtf"};return a}};if(a&&a["dossierParts"])for(let e in a["dossierParts"]){let t=a["dossierParts"][e]["partTip"];a["dossierParts"][e]["partTip"]=i(t)}e(a.dossierParts)},e=>{i(e)})})})},loadAllDossierTemplates({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.dossierTemplatesApi+"/"+a.dossierTemplateNo,o).then(function(t){let a=t.data,i=function(e){try{return JSON.parse(e),JSON.parse(e)}catch(t){let a={tip:e,maxSize:10,extensions:"pdf,doc,docx,xls,xlsx,png,jpg,jpeg,txt,rtf"};return a}};if(a&&a["dossierParts"])for(let e in a["dossierParts"]){let t=a["dossierParts"][e]["partTip"];a["dossierParts"][e]["partTip"]=i(t)}e(a.dossierParts)},e=>{i(e)})})})},deleteAttackFiles({commit:e,state:t,dispatch:a},i){return new Promise((e,a)=>{let s={headers:{groupId:t.initData.groupId}};console.log("data -delete-----",i),console.log("data-- dossier file-------",t.dossierFiles);var o=new URLSearchParams;i.hasForm||i.eform?axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(t.initData.dossierApi+"/"+i.dossierId+"/files/"+i.referenceUid+"/resetformdata",o,s).then(function(t){console.log("success"),e(t)}).catch(function(e){console.log(e),a(e)}):axios__WEBPACK_IMPORTED_MODULE_3___default.a.delete(t.initData.dossierApi+"/"+i.dossierId+"/files/"+i.fileTemplateNo+"/all",s).then(function(t){console.log("success!"),e(t)}).catch(function(e){console.log(e),a(e)})})},deleteDossierFile({commit:e,state:t},a){return new Promise((e,i)=>{let s={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.delete(t.initData.dossierApi+"/"+a.dossierId+"/files/"+a.referenceUid,s).then(function(t){console.log("success!"),e(t)}).catch(function(e){console.log(e),i(e)})})},resetCounterTemplate({commit:e,state:t},a){t.dossierTemplates.forEach(e=>{e.partNo===a.partNo&&(e.hasForm?e.count=1:e.count=0)})},deleteSingleFile({commit:e,state:t},a){let i={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.delete(t.initData.dossierApi+"/"+t.thonTinChungHoSo.dossierId+"/files/"+a.referenceUid,i).then(function(e){console.log("success")}).catch(function(e){console.log(e)})},uploadSingleFile({commit:e,state:t},a){return new Promise((e,i)=>{let s=jquery__WEBPACK_IMPORTED_MODULE_5___default()("#file"+a.partNo)[0].files,o=s[0],n=o["name"];o["name"]&&(n=o["name"].replace(/\%/g,""),n=n.replace(/\//g,""),n=n.replace(/\\/g,""));let r=new FormData;3===a.partType?(a["displayName"]&&(n=a["displayName"].replace(/\%/g,""),n=n.replace(/\//g,""),n=n.replace(/\\/g,"")),r.append("displayName",n)):r.append("displayName",n),r.append("fileType",o.type),r.append("fileSize",o.size),r.append("isSync","false"),r.append("file",o,n),r.append("dossierPartNo",a.partNo),r.append("dossierTemplateNo",a.dossierTemplateNo),r.append("fileTemplateNo",a.fileTemplateNo),r.append("formData",""),r.append("referenceUid","");let l={partTip:a.partTip,file:o};store.dispatch("validFileUpload",l),o&&t.validFileUpload?axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(t.initData.dossierApi+"/"+a.dossierId+"/files",r,{headers:{groupId:t.initData.groupId,"Content-Type":"multipart/form-data"}}).then(function(t){e(t.data),console.log("upload file success!")}).catch(function(e){console.log(e),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),i(e)}):i("error")})},uploadSingleOtherFile({commit:e,state:t},a){return new Promise((e,i)=>{let s=new FormData,o=a["displayName"];a["displayName"]&&(o=a["displayName"].replace(/\%/g,""),o=o.replace(/\//g,""),o=o.replace(/\\/g,"")),s.append("displayName",a.displayName?o:""),s.append("dossierPartNo",a.partNo?a.partNo:""),s.append("file",""),s.append("fileType",""),s.append("fileSize",""),s.append("isSync","false"),s.append("dossierTemplateNo",""),s.append("fileTemplateNo",""),s.append("formData",""),s.append("referenceUid",""),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(t.initData.dossierApi+"/"+a.dossierId+"/files",s,{headers:{groupId:t.initData.groupId,"Content-Type":"multipart/form-data"}}).then(function(t){e(t.data),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.success("Yêu cầu của bạn được thực hiện thành công."),console.log("upload file success!")}).catch(function(e){console.log(e),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),i(e)})})},uploadPaymentFile({commit:e,state:t},a){return new Promise((e,i)=>{let s=jquery__WEBPACK_IMPORTED_MODULE_5___default()("#"+a.selector)[0].files,o=s[0],n=o["name"];o["name"]&&(n=o["name"].replace(/\%/g,""),n=n.replace(/\//g,""),n=n.replace(/\\/g,""));let r=new FormData;r.append("file",o,n);let l={partTip:a["partTip"],file:o};store.dispatch("validFileUpload",l),o&&t.validFileUpload?axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(t.initData.dossierApi+"/"+a.dossierId+"/payments/"+a.referenceUid+"/confirmfile",r,{headers:{groupId:t.initData.groupId,"Content-Type":"multipart/form-data"}}).then(function(t){e(t.data),console.log("Tải file lên thành công")}).catch(function(e){console.log(e),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Tải file lên thất bại"),i(e)}):i("error")})},getDetailDossier({commit:e,state:t},a){return new Promise((i,s)=>{store.dispatch("loadInitResource").then(function(o){let n={headers:{groupId:t.initData.groupId}};console.log("run"),a>0?(e("setLoading",!0),axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.postDossierApi+"/"+a,n).then(function(t){let a={delegateName:t.data.delegateName,delegateCityCode:t.data.delegateCityCode,delegateAddress:t.data.delegateAddress,delegateDistrictCode:t.data.delegateDistrictCode,delegateWardCode:t.data.delegateWardCode,delegateEmail:t.data.delegateEmail,delegateTelNo:t.data.delegateTelNo,delegateIdNo:t.data.delegateIdNo};i(t.data),e("setLoading",!1),e("setDossier",t.data),e("setThongTinChuHoSo",t.data),e("setLePhi",t.data),e("setThongTinNguoiNopHoSo",a),e("setThongTinChungHoSo",t.data),e("setDichVuChuyenPhatKetQua",t.data)},t=>{e("setLoading",!1),s(t)}).catch(function(e){console.log(e)})):i()})})},getGovAgency({commit:e,state:t},a){return new Promise((e,a)=>{let i={headers:{groupId:t.initData.groupId},params:{sort:"sibling"}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.regionApi+"/GOVERMENT_AGENCY/dictitems",i).then(function(t){e(t.data.data)}).catch(function(e){console.log(e)})})},loadDossierFiles({commit:e,state:t},a){return new Promise((i,s)=>{let o={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.dossierApi+"/"+a+"/files",o).then(function(t){e("setDossierFiles",t.data.data),t.data.data?i(t.data.data):i([])}).catch(function(e){console.log(e),s(e)})})},getPaymentFiles({commit:e,state:t},a){return new Promise((i,s)=>{let o={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.dossierApi+"/"+a.dossierId+"/payments/"+a.referenceUid+"/confirmfile",o).then(function(t){200===t.status||"200"===t.status?i("hasPayment"):i(""),t.headers["content-disposition"]?e("setPaymentFileName",t.headers["content-disposition"].split(";")[1].split("=")[1].replace(/\"/g,"")):e("setPaymentFileName","file báo thanh toán")}).catch(function(e){console.log(e),s(e)})})},putPayments({commit:e,state:t},a){return new Promise((e,i)=>{let s={headers:{groupId:t.initData.groupId}},o=new URLSearchParams;axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(t.initData.dossierApi+"/keypay/"+a.referenceUid+"/"+a.referenceUid,o,s).then(function(a){store.dispatch("getActiveGetCounter",!t.activeGetCounter),a.data?e(a.data):e([])}).catch(function(e){console.log(e),i(e)})})},viewFile({commit:e,state:t,dispatch:a},i){return new Promise((e,a)=>{let s={headers:{groupId:t.initData.groupId},responseType:"blob"};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.dossierApi+"/"+i.dossierId+"/files/"+i.referenceUid,s).then(function(t){var a=window.URL.createObjectURL(t.data);e(a)}).catch(function(e){console.log(e)})})},viewPaymentFile({commit:e,state:t,dispatch:a},i){return new Promise((e,a)=>{let s={headers:{groupId:t.initData.groupId},responseType:"blob"};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.dossierApi+"/"+i.dossierId+"/payments/"+i.referenceUid+"/confirmfile",s).then(function(t){var a=window.URL.createObjectURL(t.data);e(a)}).catch(function(e){console.log(e)})})},viewDocument({commit:e,state:t,dispatch:a},i){return new Promise((e,a)=>{let s={headers:{groupId:t.initData.groupId},responseType:"blob"};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.dossierApi+"/"+i.dossierId+"/documents/"+i.referenceUid,s).then(function(t){var a=window.URL.createObjectURL(t.data);e(a)}).catch(function(e){console.log(e)})})},postDossier({commit:e,state:t},a){return console.log("data-------------",a),new Promise((i,s)=>{e("setLoading",!0);let o={headers:{groupId:t.initData.groupId,Accept:"application/json","Content-Type":"application/x-www-form-urlencoded",cps_auth:t.initData.cps_auth}};var n=new URLSearchParams;n.append("serviceCode",a.serviceCode),n.append("govAgencyCode",a.govAgencyCode),n.append("dossierTemplateNo",a.templateNo),n.append("originality",a.originality),console.log("dataPostdossier-------------",n),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(t.initData.postDossierApi,n,o).then(function(a){a.data.serviceConfig=t.serviceConfigObj,e("setLoading",!1),e("setDossier",a.data),e("setThongTinChuHoSo",a.data),e("setLePhi",a.data),e("setThongTinChungHoSo",a.data),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.success("Yêu cầu của bạn được thực hiện thành công."),i(a.data)}).catch(function(t){s(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),e("setLoading",!1)})})},doCopy({commit:e,state:t},a){return new Promise((i,s)=>{e("setLoading",!0);let o={headers:{groupId:t.initData.groupId,Accept:"application/json"}};var n=new URLSearchParams;axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(t.initData.postDossierApi+"/"+a.dossierId+"/cloning",n,o).then(function(e){toastr__WEBPACK_IMPORTED_MODULE_2___default.a.success("Yêu cầu của bạn được thực hiện thành công."),i(e.data)}).catch(function(t){s(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),e("setLoading",!1)})})},doCancel({commit:e,state:t},a){return new Promise((i,s)=>{e("setLoading",!0);let o={headers:{groupId:t.initData.groupId,Accept:"application/json"}};var n=new URLSearchParams;axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(t.initData.postDossierApi+"/"+a.dossierId+"/cancel",n,o).then(function(e){toastr__WEBPACK_IMPORTED_MODULE_2___default.a.success("Yêu cầu của bạn được thực hiện thành công."),i(e.data)}).catch(function(t){s(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),e("setLoading",!1)})})},putDossier({commit:e,state:t},a){return new Promise((i,s)=>{e("setLoading",!1);let o={headers:{groupId:t.initData.groupId,Accept:"application/json","Content-Type":"application/x-www-form-urlencoded",cps_auth:t.initData.cps_auth}};var n="";n=a.userType?"citizen":"business";let r=!1;null!==a["sameUser"]&&void 0!==a["sameUser"]&&"undefined"!==a["sameUser"]&&(r=a["sameUser"]);var l=new URLSearchParams;l.append("applicantName",a.applicantName),l.append("dossierNo",a.dossierNo?a.dossierNo:""),l.append("applicantIdType",n),l.append("applicantIdNo",a.applicantIdNo),l.append("address",a.address),l.append("cityCode",a.cityCode),l.append("districtCode",a.districtCode),l.append("wardCode",a.wardCode),l.append("contactTelNo",a.contactTelNo),l.append("contactEmail",a.contactEmail),l.append("delegateName",a.delegateName),l.append("delegateIdNo",a.delegateIdNo),l.append("delegateTelNo",a.delegateTelNo),l.append("delegateEmail",a.delegateEmail),l.append("delegateAddress",a.delegateAddress),l.append("delegateCityCode",a.delegateCityCode),l.append("delegateDistrictCode",a.delegateDistrictCode),l.append("delegateWardCode",a.delegateWardCode),l.append("applicantNote",t.applicantNote),1!==a.originality&&l.append("dossierName",a.dossierName),l.append("isSameAsApplicant",r),a.editable&&l.append("dueDate",a.dueDate?a.dueDate:""),a.viaPostal&&(l.append("viaPostal",a.viaPostal),l.append("postalServiceCode",a.postalServiceCode),l.append("postalAddress",a.postalAddress),l.append("postalCityCode",a.postalCityCode),l.append("postalTelNo",a.postalTelNo)),l.append("sampleCount",a.sampleCount?a.sampleCount:0),axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(t.initData.postDossierApi+"/"+a.dossierId,l,o).then(function(t){i(t.data),e("setLoading",!1),e("setDossier",t.data),e("setThongTinChuHoSo",t.data),e("setThongTinChungHoSo",t.data),e("setLePhi",t.data),e("setDichVuChuyenPhatKetQua",t.data)}).catch(e=>{s(e)})})},updateApplicantNote({commit:e,state:t},a){return new Promise((e,i)=>{let s={headers:{groupId:t.initData.groupId,Accept:"application/json","Content-Type":"application/x-www-form-urlencoded",cps_auth:t.initData.cps_auth}};var o=new URLSearchParams;o.append("applicantNote",t.applicantNote),axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(t.initData.postDossierApi+"/"+a.dossierId,o,s).then(function(t){e(t.data)}).catch(e=>{i(e)})})},getApplicantInfos({commit:e,state:t},a){return new Promise((e,i)=>{let s={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.endPointApi+"/applicants/ngsp/"+a.applicantIdNo,s).then(function(t){t.data&&t.data["Data"]&&e(t.data["Data"])}).catch(function(e){console.log(e),i(e)})})},checkApplicantInfos({commit:e,state:t},a){return new Promise((e,i)=>{let s={headers:{groupId:t.initData.groupId?t.initData.groupId:"",Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}};var o=t.endPointApi+"/applicants/ngsp/verify",n=new URLSearchParams;n.append("applicantIdNo",a.applicantIdNo?a.applicantIdNo:""),n.append("applicantName",a.applicantName?a.applicantName:""),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(o,n,s).then(t=>{e(t.data)}).catch(e=>{i(e)})})},getDossierFilesApplicants({commit:e,state:t},a){return new Promise((e,i)=>{let s={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.dossierApi+"/"+a.dossierId+"/applicant/"+a.applicantIdNo+"/files/"+a.fileTemplateNo+"/search",s).then(function(t){t.data.data?e(t.data.data):e([])}).catch(function(e){console.log(e),i(e)})})},putDuedateDossier({commit:e,state:t},a){return new Promise((i,s)=>{e("setLoading",!1);let o={headers:{groupId:t.initData.groupId,Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}};var n=new URLSearchParams;n.append("dueDate",a),axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(t.initData.postDossierApi+"/"+t.thongTinChungHoSo.dossierId,n,o).then(function(e){i(e.data)}).catch(function(e){s(e)})})},submitDossier({commit:e,state:t},a){return new Promise((e,a)=>{let i={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.dossierApi+"/"+t.thongTinChungHoSo.dossierId+"/submitting",i).then(function(t){e(t.data)}).catch(function(e){a(e),console.log(e)})})},postDossierMark({commit:e,state:t},a){return new Promise((e,i)=>{let s={headers:{groupId:t.initData.groupId,Accept:"application/json","Content-Type":"application/x-www-form-urlencoded",cps_auth:t.initData.cps_auth}};var o=new URLSearchParams;1===a["checkInput"]?(void 0!==a.fileCheck&&"undefined"!==a.fileCheck&&null!==a.fileCheck&&o.append("fileCheck",a.fileCheck),void 0!==a.fileComment&&"undefined"!==a.fileComment&&null!==a.fileComment&&o.append("fileComment",a.fileComment)):void 0!==a.fileMark&&"undefined"!==a.fileMark&&null!==a.fileMark&&o.append("fileMark",a.fileMark);let n=t.initData.dossierApi+"/"+a.dossierId+"/marks/"+a.partNo;axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(n,o,s).then(function(t){e(t.data)}).catch(function(e){i(e)})})},postAction({commit:e,state:t},a){return new Promise((i,s)=>{e("setLoading",!0);let o={headers:{groupId:t.initData.groupId}};var n=new URLSearchParams;n.append("actionCode",a.actionCode?a.actionCode:""),n.append("actionNote",a.actionNote?a.actionNote:""),n.append("actionUser",a.actionUser?a.actionUser:""),n.append("payload",a.payload?JSON.stringify(a.payload):""),n.append("security",a.security?a.security:""),n.append("assignUsers",a.assignUsers?JSON.stringify(a.assignUsers):""),n.append("payment",a.payment?JSON.stringify(a.payment):""),n.append("createDossiers",a.createDossiers?a.createDossiers:"");let r=t.initData.dossierApi+"/"+a.dossierId+"/actions";axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(r,n,o).then(function(a){i(a.data),e("setLoading",!1),store.dispatch("getActiveGetCounter",!t.activeGetCounter)}).catch(function(e){s(e),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),store.commit("setLoading",!1)})})},getUserInfoFromApplicantIdNo({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId},params:{start:0,end:5,idNo:a.idNo}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.applicantApi,o).then(function(t){e(t.data.data)}).catch(function(e){console.log(e),i(e)})})})},loadAlpcaForm({commit:commit,state:state,dispatch:dispatch},data){console.log("alpaca");let id=data["id"]?data["id"]:"nm";var formScript,formData;window.$("#formAlpaca"+data.dossierPartNo+id).empty(),formScript=data.formScript?eval("("+data.formScript+")"):{},formData=data.formData?eval("("+data.formData+")"):{},formScript.data=formData,window.$("#formAlpaca"+data.dossierPartNo+id).alpaca(formScript)},putAlpacaForm({commit:e,state:t,dispatch:a},i){return new Promise((e,a)=>{let s={headers:{groupId:t.initData.groupId,cps_auth:t.initData.cps_auth}},o=i["id"]?i["id"]:"nm";try{var n=window.$("#formAlpaca"+i.dossierPartNo+o).alpaca("get"),r=n.getValue();let h=window.$("#formAlpaca"+i.dossierPartNo+o).alpaca("get").childrenByPropertyId;if(h)for(var l in h)if(h[l].isRequired()&&""===h[l].getValue())return void toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error(h[l].options.placeholder?h[l].options.placeholder+" là trường dữ liệu bắt buộc":h[l].options["name"]+" là trường dữ liệu bắt buộc");var c=new URLSearchParams;c.append("formdata",JSON.stringify(r));let u=t.initData.dossierApi+"/"+i.dossierId+"/files/"+i.referenceUid+"/formdata";axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(u,c,s).then(function(t){e(t.data)}).catch(function(e){a(i)})}catch(d){console.log(d),a(i)}})},rollBack({state:e,commit:t},a){return new Promise((t,i)=>{let s={headers:{groupId:e.initData.groupId}};try{var o=new URLSearchParams;let r=e.initData.dossierApi+"/"+a.dossierId+"/rollback";axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(r,o,s).then(function(a){t(a.data),store.dispatch("getActiveGetCounter",!e.activeGetCounter)}).catch(function(e){i(a)})}catch(n){console.log(n),i(a)}})},goToStep({state:e,commit:t},a){return new Promise((t,i)=>{let s={headers:{groupId:e.initData.groupId}};try{var o=new URLSearchParams;let r=e.initData.dossierApi+"/"+a.dossierId+"/goto/"+a.stepCode;axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(r,o,s).then(function(a){t(a.data),store.dispatch("getActiveGetCounter",!e.activeGetCounter)}).catch(function(e){i(a)})}catch(n){console.log(n),i(a)}})},postEform({commit:e,state:t},a){return new Promise((e,i)=>{let s={headers:{groupId:t.initData.groupId,"Content-Type":"multipart/form-data"}};try{let d=a["id"]?a["id"]:"nm";var o=new FormData,n=window.$("#formAlpaca"+a.partNo+d).alpaca("get"),r=n.getValue();o.append("formData",JSON.stringify(r)),o.append("file","");let h=window.$("#formAlpaca"+a.partNo+d).alpaca("get").childrenByPropertyId;if(h)for(var l in h)if(h[l].isRequired()&&""===h[l].getValue())return void toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error(h[l].options.placeholder?h[l].options.placeholder+" là trường dữ liệu bắt buộc":h[l].options["name"]+" là trường dữ liệu bắt buộc");let u=t.initData.dossierApi+"/"+a.dossierId+"/eforms/"+a.partNo;axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(u,o,s).then(function(t){e(t.data)}).catch(function(e){i(a)})}catch(c){console.log(c),i(a)}})},postEformEsignature({commit:e,state:t},a){return new Promise((e,i)=>{let s={headers:{groupId:t.initData.groupId,"Content-Type":"multipart/form-data"}};try{var o=new FormData;o.append("formData",JSON.stringify(JSON.parse(a.formData))),o.append("file","");let r=t.initData.dossierApi+"/"+a.dossierId+"/eforms/"+a.partNo;axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(r,o,s).then(function(t){e(t.data)}).catch(function(e){i(a)})}catch(n){console.log(n),i(a)}})},postVNPOST({commit:e,state:t},a){return new Promise((i,s)=>{e("setLoading",!0);let o={headers:{groupId:t.initData.groupId,Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}};var n=new URLSearchParams;n.append("customerCode","ccth"),n.append("orderNumber",t.thongTinChungHoSo.dossierId),n.append("senderProvince",a.senderProvince),n.append("senderAddress",a.senderAddress),n.append("senderName",a.senderName),n.append("senderTel",a.senderTel),n.append("receiverName",a.receiverName),n.append("receiverAddress",a.receiverAddress),n.append("receiverTel",a.receiverTel),n.append("receiverProvince",a.receiverProvince);let r="/o/rest/v2/postal/vnpost";axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(r,n,o).then(function(t){i(t.data),e("setLoading",!1)}).catch(function(t){s(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),e("setLoading",!1)})})},getDossierTemplateEdit({commit:e,state:t}){return new Promise((e,a)=>{var i=t.dossierTemplates,s=[];try{0===t.dossierFiles.length?dispatch("loadDossierFiles").then(t=>{t.forEach(e=>{i.forEach(t=>{e.dossierPartNo===t.partNo&&s.push({partName:t.partName,partNo:t.partNo,displayName:e.displayName,dossierFileId:e.dossierFileId,partType:t.partType,hasForm:t.hasForm,fileType:e.fileType,referenceUid:e.referenceUid})})}),e(s)}).catch(t=>{console.log(t),e([])}):t.dossierFiles.forEach(e=>{i.forEach(t=>{e.dossierPartNo===t.partNo&&s.push({partName:t.partName,partNo:t.partNo,displayName:e.displayName,dossierFileId:e.dossierFileId,partType:t.partType,hasForm:t.hasForm,fileType:e.fileType,referenceUid:e.referenceUid})})}),e(s),console.log(s)}catch(o){console.log(o),a([])}})},loadPlugin({commit:commit,state:state},item){return new Promise((resolve,reject)=>{item.plugin=!0;var urlPluginFormData=state.initData.dossierApi+"/"+item.dossierId+"/plugins/"+item.processPluginId+"/formdata",urlPluginFormScript=state.initData.dossierApi+"/"+item.dossierId+"/plugins/"+item.processPluginId+"/formscript",config_plugins={headers:{groupId:state.initData.groupId,Token:window.Liferay?window.Liferay.authToken:""},dataType:"text"};axios__WEBPACK_IMPORTED_MODULE_3___default.a.all([axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(urlPluginFormScript,config_plugins),axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(urlPluginFormData,config_plugins)]).then(axios__WEBPACK_IMPORTED_MODULE_3___default.a.spread(function(urlResponesFormScript,urlResponesFormData){var responseScript=urlResponesFormScript.data,responseData=urlResponesFormData.data;if(console.log("responseScript==============",responseScript),item.plugin=!0,-1!==responseScript.indexOf("#preview@pdf")){console.log("view pdf");var url=state.initData.dossierApi+"/"+item.dossierId+"/plugins/"+item.processPluginId+"/preview",config_blob={headers:{groupId:state.initData.groupId},responseType:"blob"};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(url,config_blob).then(function(e){var t=window.URL.createObjectURL(e.data);item.pdf=!0,item.url=t,item.no_pdf="",resolve(item)}).catch(function(e){console.log(e),item.pdf=!0,item.url="",item.no_pdf="Tài liệu đính kèm không tồn tại!",resolve(item)})}if(-1!==responseScript.indexOf("#preview@html")){console.log("view html");var config_view={headers:{groupId:state.initData.groupId},dataType:"json"};item.html=!0,item.no_html="";var url=state.initData.dossierApi+"/"+item.dossierId+"/plugins/"+item.processPluginId+"/previewhtml";axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(url,config_view).then(function(response){item.no_html="",vm.stepModel=item;var serializable=response.data,partNo=serializable.partNo,dossierFileId=serializable.dossierFileId,formReport=eval("("+serializable.formReport+")"),formData=eval("("+serializable.formData+")");console.log("formReport======",formReport),console.log("formData======",formData),formReport.data=formData,console.log("formReport_____FINAL=======",formReport),window.$("#alpacajs_form_plugin").alpaca(formReport),window.$(".dossierFilePartNo").val(""),window.$(".dossierFilePartNo").attr("id","dossierFileId"+partNo),window.$(".dossierFilePartNo").val(dossierFileId)}).catch(function(e){console.log(e),item.html=!0,item.no_html="Tài liệu đính kèm không tồn tại!",resolve(item)})}})).catch(function(e){console.log(e),reject(e)})})},getActiveGetCounter({commit:e,state:t},a){e("setActiveGetCounter",a)},getActiveLoadingDataHoSo({commit:e,state:t},a){e("setActiveLoadingDataHoSo",a)},setDefaultCityCode({commit:e,state:t},a){t.thongTinChuHoSo.cityCode=a},getListHistoryProcessingItems({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId}};var n=[];axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.dossierlogsApi+"/"+a.dossierId+"/logs",o).then(function(t){var a=t.data;for(var i in a.data)"PROCESS_TYPE"===a.data[i].notificationType&&n.push(a.data[i]);e(n)}).catch(function(e){i(e)})})})},loadDossierLogs({commit:e,state:t},a){return new Promise((e,i)=>{let s={headers:{groupId:t.initData.groupId},params:{notificationType:a.type}},o=t.initData.dossierApi+"/"+a.dossierId+"/logs";axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(o,s).then(function(t){e(t.data.data)}).catch(function(e){i(e)})})},loadPlugins({commit:e,state:t},a){return new Promise((e,i)=>{let s={headers:{groupId:t.initData.groupId}},o=t.initData.dossierApi+"/"+a.dossierId+"/plugins";axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(o,s).then(function(t){e(t.data.data)}).catch(function(e){i(e)})})},downloadFile({commit:e,state:t},a){let i={headers:{groupId:t.initData.groupId},responseType:"blob"};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.dossierApi+"/"+a.dossierId+"/files/"+a.fileAttachId,i).then(function(e){var t=window.URL.createObjectURL(e.data);window.open(t)}).catch(function(e){console.log(e)})},getCpsAuthen({commit:e,state:t}){return new Promise((e,a)=>{let i={headers:{groupId:t.initData.groupId},params:{}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get("http://127.0.0.1:8081/api/onegate/token",i).then(function(t){e(t.data)}).catch(function(e){a(e)})})},loadUsersComment({commit:e,state:t},a){return new Promise((e,i)=>{var s=[];let o={headers:{groupId:t.initData.groupId},params:{userMapping:!0}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.dossierApi+"/"+a+"/contacts",o).then(function(t){if(null!=t&&t.hasOwnProperty("data")){let e=t.data;jquery__WEBPACK_IMPORTED_MODULE_5___default.a.each(e,function(e,t){var a={};a.id=t.userId,a.fullname=t.userName,a.email=t.email,a.profilePictureURL=t.profileUrl,s.push(a)})}else s=[];e(s)}).catch(function(e){s=[],i(s)})})},loadCommentItems({commit:e,state:t},a){return new Promise((e,i)=>{let s={headers:{groupId:t.initData.groupId},params:{}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.commentApi+"/"+a.className+"/"+a.classPK,s).then(function(t){e(t.data.data)}).catch(function(e){i(e)})})},postComment({commit:e,state:t},a){return new Promise((e,i)=>{const s={headers:{groupId:t.initData.groupId}};var o=a.pings.join(),n=new URLSearchParams;n.append("className",a.className),n.append("classPK",a.classPK),n.append("parent",null!=a.parent?a.parent:0),n.append("pings",o),n.append("content",a.content),n.append("upvoteCount",null!=a.upvoteCount?a.upvoteCount:0),n.append("opinion",a.opinion),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(t.initData.commentApi,n,s).then(function(t){var a={};null!=t&&(a=t.data,console.log("resPostCmt",a)),e(a)}).catch(function(e){toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),console.log(e)})})},putComment({commit:e,state:t},a){return new Promise((e,i)=>{const s={headers:{groupId:t.initData.groupId}};var o=a.pings.join(),n=new URLSearchParams;n.append("pings",o),n.append("content",a.content),console.log("dataPut",a),axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(t.initData.commentApi+"/"+a.commentId,n,s).then(function(t){var a={};null!=t&&(a=t.data),e(a)}).catch(function(e){console.log(e)})})},deleteComment({commit:e,state:t},a){return new Promise((e,i)=>{const s={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.delete(t.initData.commentApi+"/"+a.commentId,s).then(function(t){e(t)}).catch(function(e){i(e)})})},upvoteComment({commit:e,state:t},a){return new Promise((e,i)=>{const s={headers:{groupId:t.initData.groupId}};if(a.userHasUpvoted){var o=new URLSearchParams;o.append("className",a.className),o.append("classPK",a.classPK),o.append("commentId",a.commentId),o.append("upvoteCount",null!=a.upvoteCount?a.upvoteCount:0),axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(t.initData.commentApi+"/"+a.commentId+"/upvotes",o,s).then(function(t){var a={};null!=t&&(a=t.data),e(a)}).catch(function(e){console.log(e)})}else axios__WEBPACK_IMPORTED_MODULE_3___default.a.delete(t.initData.commentApi+"/"+a.commentId+"/upvotes",s).then(function(t){var a={};null!=t&&(a=t.data),e(a)}).catch(function(e){console.log(e)})})},loadProcessStep({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId}};var n=t.initData.dossierApi+"/"+a.dossierId+"/nextactions",r=t.initData.dossierApi+"/"+a.dossierId+"/plugins";axios__WEBPACK_IMPORTED_MODULE_3___default.a.all([axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(n,o),axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(r,o)]).then(axios__WEBPACK_IMPORTED_MODULE_3___default.a.spread(function(t,a){var i=t.data.data,s=a.data.data,o=[],n=[];if(i)for(var r=0;r<i.length;r++){if(i[r].type=1,i[r].configNote){var l=JSON.parse(i[r].configNote);i[r].configNote=l}n.push(i[r])}else i=[],n=[];if(s)for(r=0;r<s.length;r++){var c={type:2,processActionId:s[r].processPluginId,actionName:s[r].pluginName};o.push(c)}var d=n,h=o;console.log("nextactions++++++++++++",d),console.log("plugins++++++++++++",h),d.push(...h),console.log("nextactions2++++++++++++",d),e(d)})).catch(function(e){i(e)})})})},pullNextactions({commit:e,state:t},a){return new Promise((i,s)=>{store.dispatch("loadInitResource").then(function(o){console.log("result",o);let n={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.getNextAction+"/"+a.dossierId+"/nextactions",n).then(function(t){let a=t.data;e("setUserNextAction",[]),e("setCheckInput",a["checkInput"]),e("setStepOverdueNextAction",a["stepOverdue"]),a["users"]&&(Array.isArray(a["users"])?e("setUserNextAction",a["users"]):e("setUserNextAction",[a["users"]])),i(a.data)}).catch(function(t){console.log(t),s(t),e("setUserNextAction",[])})})})},pullBtnConfigStep({commit:e,state:t},a){return new Promise((e,i)=>{const s={headers:{groupId:t.initData.groupId}};new URLSearchParams;axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.stepConfigApi+"/status/"+a.dossierStatus+"/"+a.dossierSubStatus,s).then(function(t){let a,i=t.data.data;a=i[0].buttonConfig&&i[0].buttonConfig.indexOf("{")>=0&&JSON.parse(i[0].buttonConfig)["buttons"]?JSON.parse(i[0].buttonConfig)["buttons"]:[],e(a)}).catch(function(e){console.log(e),i(e)})})},loadDossierDocuments({commit:e,state:t},a){let i={headers:{groupId:t.initData.groupId},params:{}},s=t.initData.documentApi+"/"+a.dossierId+"/documents";return new Promise((e,t)=>{axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(s,i).then(function(t){t.data.data?e(t.data.data):e([])}).catch(function(e){t(e)})})},loadDossierPayments({commit:e,state:t},a){let i={headers:{groupId:t.initData.groupId},params:{}},s=t.initData.dossierApi+"/"+a.dossierId+"/payment";return new Promise((e,t)=>{axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(s,i).then(function(t){e(t.data)}).catch(function(e){t(e)})})},postDossierPayments({commit:e,state:t},a){let i={headers:{groupId:t.initData.groupId}};var s=new URLSearchParams;s.append("paymentFee",a.paymentFee),s.append("paymentNote",a.paymentNote);let o=t.initData.dossierApi+"/"+a.dossierId+"/payment";return new Promise((e,t)=>{axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(o,s,i).then(function(t){e(t.data)}).catch(function(e){t(e)})})},loadDossierActions({commit:e,state:t},a){let i={headers:{groupId:t.initData.groupId},params:{stepType:a.stepType}},s=t.initData.dossierApi+"/"+a.dossierId+"/sequences";return new Promise((e,t)=>{axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(s,i).then(function(t){e(t.data)}).catch(function(e){t(e)})})},loadMermaidgraph({commit:e,state:t},a){let i={headers:{groupId:t.initData.groupId},params:{stepType:a.stepType}},s=t.initData.dossierApi+"/"+a.dossierId+"/mermaidgraph";return new Promise((e,t)=>{axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(s,i).then(function(t){e(t.data)}).catch(function(e){t(e)})})},loadDossierLienThong({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId},params:{originDossierId:a}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.dossierApi,o).then(function(t){let a=t.data;a.data?e(a.data):e([])}).catch(function(e){i(e)})})})},getDossierUserAsign({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.dossierApi+"/"+a+"/users",o).then(function(t){let a=t.data;a["data"]?Array.isArray(a["data"])?e(a.data):e([a["data"]]):e([])}).catch(function(e){i(e)})})})},postDossierUserAsign({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId}},n=new URLSearchParams;n.append("assignUsers",a.users?JSON.stringify(a.users):""),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(t.initData.dossierApi+"/"+a.dossierId+"/users",n,o).then(function(t){e(t)}).catch(function(e){i(e)})})})},loadDossierSyncs({commit:e,state:t},a){return new Promise((e,i)=>{let s={headers:{groupId:t.initData.groupId}},o=t.endPointApi+"/dossiers/"+a.dossierId+"/syncs";axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(o,s).then(function(t){e(t.data.data)}).catch(function(e){i(e)})})},processDossierRouter({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId,Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}},n=new URLSearchParams;n.append("actionCode",a.actionCode?a.actionCode:""),n.append("payment",a.payment?JSON.stringify(a.payment):""),n.append("assignUsers",a.toUsers?JSON.stringify(a.toUsers):""),n.append("actionNote",a.userNote?JSON.stringify(a.userNote):""),n.append("payload",a.payload?JSON.stringify(a.payload):""),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(t.initData.getNextAction+"/"+a.dossierId+"/actions",n,o).then(function(a){store.dispatch("getActiveGetCounter",!t.activeGetCounter);let i=a.data;e(i)}).catch(function(e){console.log(e),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),i(e)})})})},deleteDossier({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId,Accept:"application/json"}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.delete(t.initData.getNextAction+"/"+a.dossierId,o).then(function(a){let i=a.data;store.dispatch("getActiveGetCounter",!t.activeGetCounter),e(i)}).catch(function(e){console.log(e),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),i(e)})})})},restoreDossier({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId,Accept:"application/json"}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.post("/o/rest/v2/dossiers/"+a.dossierId+"/restore",o).then(function(t){let a=t.data;e(a)}).catch(function(e){console.log(e),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),i(e)})})})},getListDossierFiles({commit:e,state:t},a){return new Promise((e,i)=>{let s={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.dossierApi+"/"+a+"/files",s).then(function(t){t.data.data?e(t.data.data):e([])}).catch(function(e){console.log(e),i(e)})})},deleteDossierPatch({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId,Accept:"application/json"}};var n=0;let r=a["dossierId"].length;for(let l in a.dossierId)axios__WEBPACK_IMPORTED_MODULE_3___default.a.delete(t.initData.getNextAction+"/"+a.dossierId[l],o).then(function(a){let i=a.data;n+=1,n===r&&(store.dispatch("getActiveGetCounter",!t.activeGetCounter),store.dispatch("getActiveLoadingDataHoSo",!t.activeLoadingDataHoSo)),e(i)}).catch(function(e){console.log(e),n+=1,n===r&&(store.dispatch("getActiveGetCounter",!t.activeGetCounter),store.dispatch("getActiveLoadingDataHoSo",!t.activeLoadingDataHoSo)),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),i(e)})})})},doPrint01({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId},responseType:"blob",params:{payload:a.payload}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.getNextAction+"/"+a.dossierId+"/documents/preview/"+a.document,o).then(function(t){let a=t.data,i=window.URL.createObjectURL(a);e(i)}).catch(function(e){console.log(e),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),i(e)})})})},doPrint03({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId},responseType:"blob",params:{payload:a.payload}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.getNextAction+"/"+a.dossierId+"/documents/print",o).then(function(t){let a=t.data,i=window.URL.createObjectURL(a);e(i)}).catch(function(e){console.log(e),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),i(e)})})})},doGuiding({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={serviceCode:a.serviceCode?a.serviceCode:"",serviceName:a.serviceName?a.serviceName:"",typeCode:a.typeCode?a.typeCode:"",templateNo:a.templateNo?a.templateNo:"",applicantName:a.applicantName?a.applicantName:"",applicantAddress:a.applicantAddress?a.applicantAddress:"",applicantEmail:a.applicantEmail?a.applicantEmail:"",applicantTelNo:a.applicantTelNo?a.applicantTelNo:"",employeeName:a.employeeName?a.employeeName:""};a.reportType&&(o["reportType"]=a.reportType);let n={headers:{groupId:t.initData.groupId},responseType:"blob",params:o};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.getServiceConfigs+"/"+a.serviceConfigId+"/guide",n).then(function(t){let i=t.data;a.reportType&&file_saver__WEBPACK_IMPORTED_MODULE_6___default()(i,"HDTT"+(new Date).getTime()+".doc");let s=window.URL.createObjectURL(i);e(s)}).catch(function(e){console.log(e),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),i(e)})})})},doPrint02({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId},responseType:"blob"},n=new URLSearchParams;n.append("serviceCode",a.serviceCode),n.append("govAgencyCode",a.govAgencyCode),n.append("dossiers",a.dossiers),n.append("payload",a.payload),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(t.initData.getNextAction+"/preview/"+a.document,n,o).then(function(t){let a=t.data,i=window.URL.createObjectURL(a);e(i)}).catch(function(e){console.log(e),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),i(e)})})})},printPay({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId},responseType:"blob"};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.getNextAction+"/"+a.dossierId+"/payments/"+a.referenceUid+"/invoicefile/preview",o).then(function(t){let a=t.data,i=window.URL.createObjectURL(a);e(i)}).catch(function(e){console.log(e),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),i(e)})})})},processPullBtnDetail({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.getNextAction+"/"+a.dossierId+"/nextactions/"+a.actionId,o).then(function(t){let a=t.data;e(a)}).catch(function(e){console.log(e),i(e)})})})},getNextAction({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.dossierApi+"/"+a.dossierId+"/nextactions/"+a.actionId,o).then(function(t){let a=t.data;e(a)}).catch(function(t){console.log(t),e([]),i(t)})})})},loadFormScript({state:e,commit:t},a){return new Promise((t,i)=>{store.dispatch("loadInitResource").then(function(s){jquery__WEBPACK_IMPORTED_MODULE_5___default.a.ajax({url:e.initData.dossierTemplatesApi+"/"+a.templateFileNo+"/parts/"+a.partNo+"/formscript",type:"GET",headers:{groupId:e.initData.groupId,Token:window.Liferay?window.Liferay.authToken:""},dataType:"text",success:function(e){let a=e;t(a)},error:function(e){console.log(e),t(e),i(e)}})})})},loadFormData({state:e,commit:t},a){return new Promise((t,i)=>{store.dispatch("loadInitResource").then(function(s){jquery__WEBPACK_IMPORTED_MODULE_5___default.a.ajax({url:e.initData.dossierApi+"/"+a.dossierId+"/eforms/"+a.partNo+"/formdata",type:"GET",headers:{groupId:e.initData.groupId,Token:window.Liferay?window.Liferay.authToken:""},dataType:"text",success:function(e){let a=e;t(a)},error:function(e){console.log(e),t(e),i(e)}})})})},loadDossierCounting({state:e,commit:t},a){let i={headers:{groupId:e.initData.groupId}},s="/o/rest/v2/statistics/dossiers/counting";return new Promise((e,t)=>{axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(s,i).then(function(t){e(t.data)}).catch(function(e){t(e)})})},reassignDossier({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId}},n=new URLSearchParams;n.append("toUsers",JSON.stringify(a.toUsers)),axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(t.initData.dossierApi+"/"+a.dossierId+"/reassign",n,o).then(function(t){let a=t.data;e(a)}).catch(function(e){console.log(e),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),i(e)})})})},pullProcessSteps({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.stepConfigApi+"/"+a.stepCode,o).then(function(t){let a=t.data;e(a)}).catch(function(e){console.log(e),i(e)})})})},loadServiceConfigsGov({commit:e,state:t},a){return new Promise((a,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId},params:{}};e("setLoadingGov",!0),axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.serviceConfigByGovApi,o).then(function(t){e("setLoadingGov",!1);let i=t.data;i.govAgencies?a(i.govAgencies):a([])}).catch(function(t){console.log(t),e("setLoadingGov",!1),i(t)})})})},processCheckNextActions({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId}},n=a.actionCode.split(",");axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.dossierApi+"/"+a.dossierId+"/nextactions",o).then(function(t){let i=t.data,s=i.data,o=a,r=!1;for(let e in n)if(!r)for(let t in s)if(String(n[e])===String(s[t].actionCode)){o.actionCode=s[t].actionCode,r=!0;break}e(o)}).catch(function(e){console.log(e),i(e)})})})},getServiceOpionByProcess({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId},params:{}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.getServiceConfigs+"/"+a.serviceConfigId+"/processes",o).then(function(t){let a=t.data;a.data?e(a.data):e({})}).catch(function(e){console.log(e),i(e)})})})},getStatusLists({commit:e,state:t},a){return new Promise((e,a)=>{store.dispatch("loadInitResource").then(function(i){let s={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.endPointApi+"/dictcollections/DOSSIER_STATUS/dictitems?parent=0",s).then(function(t){let a=t.data;if(a.data){let t=a.data;null!==t&&void 0!==t&&"undefined"!==t&&t.unshift({itemCode:"",itemName:"toàn bộ"}),e(t)}else e([])}).catch(function(e){console.log(e),a(e)})})})},getVNPOSTcode({commit:e,state:t},a){return new Promise((e,a)=>{store.dispatch("loadInitResource").then(function(i){let s={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get("/o/rest/v2/dictcollections/VNPOST_CITY_CODE/dictitems",s).then(function(t){let a=t.data;if(a.data){let t=a.data;e(t)}else e([])}).catch(function(e){console.log(e),a(e)})})})},getSubstatusLists({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get("/o/rest/v2/dictcollections/DOSSIER_STATUS/dictitems?parent="+a.itemCode,o).then(function(t){let a=t.data;if(a.data){let t=a.data;null!==t&&void 0!==t&&"undefined"!==t&&t.unshift({itemCode:"",itemName:"toàn bộ"}),e(t)}else e([])}).catch(function(e){console.log(e),i(e)})})})},getAgencyLists({commit:e,state:t},a){return new Promise((e,a)=>{store.dispatch("loadInitResource").then(function(i){let s={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get("/o/rest/v2/serviceinfos/statistics/agencies",s).then(function(t){let a=t.data;if(a.data){let t=a.data;null!==t&&void 0!==t&&"undefined"!==t&&t.unshift({administrationCode:"",administrationName:"toàn bộ"}),e(t)}else e([])}).catch(function(e){console.log(e),a(e)})})})},getServiceLists({commit:e,state:t},a){return new Promise((e,a)=>{store.dispatch("loadInitResource").then(function(i){let s={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.endPointApi+"/serviceinfos",s).then(function(t){let a=t.data;if(a.data){let t=a.data;null!==t&&void 0!==t&&"undefined"!==t&&t.unshift({serviceCode:"",serviceName:"toàn bộ"}),e(t)}else e([])}).catch(function(e){console.log(e),a(e)})})})},getServiceinfoFilter({commit:e,state:t},a){return new Promise((i,s)=>{store.dispatch("loadInitResource").then(function(o){let n={headers:{groupId:t.initData.groupId},params:{domain:a.domain}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.getListThuTucHanhChinh,n).then(function(t){let a=t.data,s=Array.from(a.data);e("setListThuTucHanhChinh",s),i(s)}).catch(function(e){console.log(e),s(e)})})})},getDomainLists({commit:e,state:t},a){return new Promise((e,a)=>{store.dispatch("loadInitResource").then(function(i){let s={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.endPointApi+"/serviceinfos/statistics/domains",s).then(function(t){let a=t.data;if(a.data){let t=a.data;e(t)}else e([])}).catch(function(e){console.log(e),a(e)})})})},getExtraForm({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.dossierApi+"/"+a.dossierId+"/nextactions/"+a.actionId+"/payload",o).then(function(t){let a=t.data;a.data?e(a.data):e([])}).catch(function(e){console.log(e),i(e)})})})},getServiceInfo({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.initData.serviceInfoApi+"/"+a.serviceInfoId,o).then(function(t){let a=t.data;e(a)}).catch(function(e){console.log(e),i(e)})})})},changeDisplayNameFile({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId}};var n=new URLSearchParams;n.append("displayName",a.displayName),axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(t.initData.serviceInfoApi+"/"+a.dossierId+"/files/"+a.dossierFileId,n,o).then(function(t){let a=t.data;e(a)}).catch(function(e){console.log(e),i(e)})})})},loadingDossierCounting({commit:e,state:t},a){return new Promise((e,a)=>{store.dispatch("loadInitResource").then(function(i){let s={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t.endPointApi+"/statistics/dossiers/counting",s).then(function(t){let a=t.data;a.hasOwnProperty("data")?e(a.data):e(null)}).catch(function(e){console.log(e),a(e)})})})},loadVoting({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:t.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get("/o/rest/v2/postal/votings/"+a.className+"/"+a.classPK,o).then(t=>{let a=t.data;a&&a.data?e(a.data):e([])}).catch(e=>{i(e)})})})},submitVoting({commit:e,state:t},a){return new Promise((e,i)=>{store.dispatch("loadInitResource").then(function(s){var o=new URLSearchParams;const n={headers:{groupId:t.initData.groupId}};o.append("className",a.className),o.append("classPk",a.classPk),o.append("votingCode",a.votingCode?a.votingCode:""),o.append("selected",a.selected),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post("/o/rest/v2/postal/votings/"+a.votingId+"/results",o,n).then(t=>{e(t.data)}).catch(e=>{i(e)})})})},validFileUpload({commit:e,state:t},a){let i=a.file.name?a.file.name.split("."):"",s=i?i[i.length-1]:"",o=a.partTip["extensions"]?a.partTip["extensions"].split(","):"",n=(a.partTip["maxSize"],o?o.filter(function(e){return e===s}):"");store.commit("setValidFileUpload",!1),n&&n.length>0?Number(a.file.size)<=1048576*a.partTip["maxSize"]||!a.partTip["maxSize"]?store.commit("setValidFileUpload",!0):(toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Tài liệu tải lên dung lượng tối đa là "+a.partTip["maxSize"]+" MB"),store.commit("setValidFileUpload",!1)):a.partTip["extensions"]?(toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Tài liệu tải lên chỉ chấp nhận các định dạng "+a.partTip["extensions"]),store.commit("setValidFileUpload",!1)):store.commit("setValidFileUpload",!0)}},mutations:{setLoading(e,t){e.loading=t},setLoadingTable(e,t){e.loadingTable=t},setLoadingGov(e,t){e.loadingGov=t},setValidFileUpload(e,t){e.validFileUpload=t},setError(e,t){e.error=t},clearError(e){e.error=null},setIndex(e,t){e.index=t},setInitData(e,t){e.initData=t},setMenuConfigToDo(e,t){e.trangThaiHoSoList=t},setDataPhanCong(e,t){e.data_phancong=t},setLoadingDynamicBtn(e,t){e.loadingDynamicBtn=t},setListThuTucHanhChinh(e,t){e.listThuTucHanhChinh=t},setDossierTemplateName(e,t){e.dossierTemplateName=t},setIsDetail(e,t){e.isDetail=t},setLePhi(e,t){e.lePhi.fee=t.paymentFee,e.lePhi.feeNote=t.paymentFeeNote},setThanhPhanHoso(e,t){e.thanhPhanHoSo=t},setThanhPhanHosoTemplates(e,t){e.thanhPhanHoSo.dossierTemplates=t},setDataCreateFile(e,t){e.dataCreateFile=t},setCheckInput(e,t){e.checkInput=t},setUserNextAction(e,t){e.usersNextAction=t||[]},setStepOverdueNextAction(e,t){e.stepOverdueNextAction=t},setThongTinChuHoSo(e,t){let a=!0;"business"===t.applicantIdType&&(a=!1);let i={applicantIdNo:t.applicantIdNo,applicantName:t.applicantName,address:t.address,cityCode:t.cityCode,districtCode:t.districtCode,wardCode:t.wardCode,contactEmail:t.contactEmail,contactTelNo:t.contactTelNo,userType:a};e.thongTinChuHoSo=i},setThongTinChuHoSoBindChuyenPhat(e,t){e.thongTinChuHoSoBindChuyenPhat={cityCode:t.cityCode,districtCode:t.districtCode,wardCode:t.wardCode,address:t.address,contactTelNo:t.contactTelNo}},setThongTinNguoiNopHoSo(e,t){e.thongTinNguoiNopHoSo=Object.assign(e.thongTinNguoiNopHoSo,t)},setDichVuChuyenPhatKetQua(e,t){let a={viaPostal:t.viaPostal,postalServiceCode:t.postalServiceCode?t.postalServiceCode:"",postalAddress:t.postalAddress?t.postalAddress:"",postalCityCode:t.postalCityCode?t.postalCityCode:"",postalDistrictCode:t.postalDistrictCode?t.postalDistrictCode:"",postalWardCode:t.postalWardCode?t.postalWardCode:"",postalTelNo:t.postalTelNo?t.postalTelNo:""};e.dichVuChuyenPhatKetQua=a},setViaPostal(e,t){e.viaPostal=t},setServiceConfigObj(e,t){e.serviceConfigObj=t},setThongTinChungHoSo(e,t){var a;if(1===t.processUnit&&t.processBlock>8){let e,i=Math.floor(t.processBlock/8)+" ngày";e=t.processBlock%8!==0?8*(t.processBlock/8-Math.floor(t.processBlock/8))+" giờ":"",a=`${i} ${e}`}else 0===t.processUnit?a=t.processBlock+" ngày":1===t.processUnit&&t.processBlock<=8&&(a=t.processBlock+" giờ");let i={dossierTemplateNo:t.dossierTemplateNo,dossierTemplateName:t.dossierTemplateName,serviceName:t.serviceName,serviceConfig:t.serviceConfig,serviceOption:t.dossierTemplateNo,receiveDate:new Date(t.receiveDate),dueDate:new Date(t.dueDate).toString(),durationDate:a,dossierId:t.dossierId,dossierIdCTN:t.dossierIdCTN,dossierStatus:t.dossierStatus,dossierNo:t.dossierNo,govAgencyName:t.govAgencyName,dossierStatusText:t.dossierStatusText,submitDate:t.submitDate};e.thongTinChungHoSo=i},setThongTinChungHoSoDueDate(e,t){e.thongTinChungHoSo.dueDate=t},setThongTinChungHoSoDurationDate(e,t){e.thongTinChungHoSo.durationDate=t},setThongTinChungHoSoReceiveDate(e,t){e.thongTinChungHoSo.receiveDate=t},setserviceConfigItems(e,t){e.serviceConfigItems=t},setServiceOptionItems(e,t){e.serviceOptionItems=t},setServiceOptionThongTinChungHoSo(e,t){e.thongTinChungHoSo.serviceOption=t},setCitys(e,t){e.citys=t},dossierSelected(e,t){e.dossierSelected=t},actionActive(e,t){e.actionActive=t},setResultServices(e,t){e.resultServices=t},setDossierTemplates(e,t){e.dossierTemplates=t},setDossier(e,t){e.dossier=t},setDanhSachHoSo(e,t){e.danhSachHoSo=t},setCityVal(e,t){e.cityVal=t},setDistrictVal(e,t){e.districtVal=t},setWardVal(e,t){e.wardVal=t},setDossierFiles(e,t){e.dossierFiles=t},setSameUser(e,t){e.thongTinNguoiNopHoSo.sameUser=t},setSameUser2(e,t){e.sameUser2=t},setPrintPH(e,t){e.printPH=t},setlistHistoryProcessingItems(e,t){e.listHistoryProcessingItems=t},setUsersComment(e,t){e.usersComment=t},setCommentItems(e,t){e.commentItems=t},setKysoSuccess(e,t){e.kysoSuccess=t},setActiveGetCounter(e,t){e.activeGetCounter=t},setActiveLoadingDataHoSo(e,t){e.activeLoadingDataHoSo=t},setDataCreateDossier(e,t){e.dataCreateDossier=t},setPaymentProfile(e,t){e.paymentProfile=t},setPaymentFileName(e,t){e.paymentFileName=t},setApplicantBussinessExit(e,t){e.applicantBussinessExit=t},setApplicantNote(e,t){e.applicantNote=t},setApplicantId(e,t){e.applicantId=t}},getters:{loading(e){return e.loading},loadingTable(e){return e.loadingTable},loadingGov(e){return e.loadingGov},error(e){return e.error},index(e){return e.index},dossierSelected(e){return e.dossierSelected},actionActive(e){return e.actionActive},loadingMenuConfigToDo(e){return new Promise((e,t)=>{store.dispatch("loadMenuConfigToDo").then(function(t){e(t)})})},loadingInitData(e){return console.log("loadingInitDataloadingInitDataloadingInitDataloadingInitData: ",e.initData),e.initData},loadingDynamicBtn(e){return e.loadingDynamicBtn},loadingListThuTucHanhChinh(e){store.dispatch("loadListThuTucHanhChinh")},lePhi(e){return e.lePhi},isDetail(e){return e.isDetail},dossierTemplateName(e){return e.dossierTemplateName},thongTinChungHoSo(e,t){return e.thongTinChungHoSo},thongTinChuHoSo(e){return e.thongTinChuHoSo},thongTinChuHoSoBindChuyenPhat(e){return e.thongTinChuHoSoBindChuyenPhat},kysoSuccess(e){return e.kysoSuccess},activeGetCounter(e){return e.activeGetCounter},activeLoadingDataHoSo(e){return e.activeLoadingDataHoSo},thanhPhanHoSo(e){return e.thanhPhanHoSo},thongTinNguoiNopHoSo(e){return e.thongTinNguoiNopHoSo},dichVuChuyenPhatKetQua(e){return e.dichVuChuyenPhatKetQua},viaPostal(e){return e.viaPostal},serviceOptionItems(e){return e.serviceOptionItems},getDictItems(e){return t=>{return"ADMINISTRATIVE_REGION"===t.collectionCode&&0===t.level?null==e.citys?store.dispatch("loadDictItems",t):new Promise((t,a)=>{t({total:e.citys.length,data:e.citys})}):store.dispatch("loadDictItems",t)}},getDataCreateFile(e){return e.dataCreateFile},getCheckInput(e){return e.checkInput},getUsersNextAction(e){return e.usersNextAction},getStepOverdueNextAction(e){return e.stepOverdueNextAction},resultServices(e){return e.resultServices},dossierTemplates(e){return e.dossierTemplates},dataDetailDossier(e){return e.dossier},dossier(e){return e.dossier},getCityVal(e){return e.cityVal},getDistrictVal(e){return e.districtVal},getWardVal(e){return e.wardVal},dossierFiles(e){return e.dossierFiles},sameUser2(e){return e.sameUser2},getVnpostCodeItems(e){return e.vnpostCodeItems},listHistoryProcessingItems(e){return e.listHistoryProcessingItems},subStatusNew(e){return e.subStatusNew},usersComment(e){return e.usersComment},commentItems(e){return e.commentItems},dataPhanCong(e){return e.data_phancong},getDataCreateDossier(e){return e.dataCreateDossier},getPaymentProfile(e){return e.paymentProfile},getPaymentFileName(e){return e.paymentFileName},getUser(e){return e.user},getApplicantIdNo(e){return e.applicantId},getApplicantNote(e){return e.applicantNote},getApplicantBussinessExit(e){return e.applicantBussinessExit}}})},4678:function(e,t,a){var i={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb718","./de-ch.js":"bb718","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"73332","./en-il.js":"73332","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(e){var t=o(e);return a(t)}function o(e){var t=i[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}s.keys=function(){return Object.keys(i)},s.resolve=o,e.exports=s,s.id="4678"},"4a3a":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"phancong",staticStyle:{"background-color":"white",width:"100%"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"1"}},[""!==e.esignType&&"digital"!==e.esignType?a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),e._v("Duyệt hồ sơ\n      ")]):e._e(),a("v-card",[a("v-card-text",{staticClass:"px-0 py-0"},["captcha"===e.esignType?a("v-flex",{staticClass:"my-3",attrs:{xs12:"",sm12:""}},[a("span",{staticClass:"ml-3",staticStyle:{color:"#ec0f0f"}},[e._v("(*) Xác thực ký duyệt hồ sơ")]),a("v-captcha",{ref:"captcha"})],1):e._e(),"password"===e.esignType?a("v-flex",{staticClass:"my-3 pl-3",attrs:{xs12:"",sm4:""}},[a("span",{staticClass:"ml-3",staticStyle:{color:"#ec0f0f"}},[e._v("(*) Xác thực ký duyệt hồ sơ")]),a("v-text-field",{attrs:{box:"",label:"Nhập mật khẩu xác thực","append-icon":e.e1?"visibility":"visibility_off","append-icon-cb":function(){return e.e1=!e.e1},rules:[function(e){return!!e||"Yêu cầu nhập mật khẩu"}],type:e.e1?"password":"text",name:"input-10-2",required:""},model:{value:e.passWord,callback:function(t){e.passWord=t},expression:"passWord"}})],1):e._e()],1)],1)],1)],1)],1)},s=[],o=a("1157"),n=a.n(o),r=a("854a"),l=a.n(r),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-flex",{staticClass:"text-xs-center",attrs:{xs12:"",sm12:""}},[a("span",[e._v("Kéo thả các ô vuông đúng thứ tự của từ")]),a("br"),a("v-chip",{staticStyle:{"background-color":"#81D4FA"},attrs:{label:"","text-color":"white"}},[e._v("\n      "+e._s(e.captcha)+"\n    ")])],1),a("div",{directives:[{name:"drag-and-drop",rawName:"v-drag-and-drop:options",value:e.options,expression:"options",arg:"options"}],staticClass:"drag-wrapper text-xs-center mt-3"},[a("ul",{attrs:{id:"captcha"}},e._l(e.arrCaptcha,function(t,i){return a("li",{key:i,staticClass:"item-captcha",staticStyle:{padding:"10px 15px","background-color":"#81D4FA","margin-right":"2px",color:"#fff","font-weight":"bold"}},[e._v(e._s(t))])}),0)])],1)},d=[],h=(a("a18c"),a("a026")),u=a("d8c5"),p=a.n(u);h["a"].use(p.a);var m={props:["index"],components:{},data:()=>({options:{},arrCaptcha:[],captcha:"",currentlyDragging:null,loggedEvent:"",images:[{name:"Image 1",src:"http://placehold.it/100/000000/ffffff"},{name:"Image 2",src:"http://placehold.it/100/C93742/ffffff"},{name:"Image 3",src:"http://placehold.it/100/6894D1/ffffff"}]}),computed:{loading(){return this.$store.getters.loading}},created(){var e=this;e.makeRandomString(),e.shuffleArrCaptcha(e.arrCaptcha)},watch:{},methods:{makeRandomString(){for(var e=this,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<4;i++)t+=a.charAt(Math.floor(Math.random()*a.length));t&&(e.arrCaptcha=e.shuffleArrCaptcha(t.split(""))),e.captcha=t},shuffleArrCaptcha(e){var t=e.length,a=null,i=0;while(t>0)i=Math.floor(Math.random()*t),t--,a=e[t],e[t]=e[i],e[i]=a;return e},checkValidCatcha(){var e=this,t="";let a=n()("#captcha").children();console.log(a);for(var i=0;i<a.length;i++)t+=a[i].innerHTML;return e.captcha===t}},filters:{dateTimeView(e){if(e){let t=new Date(e);return`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()}`}return""}}},g=m,v=a("2877"),_=a("6544"),f=a.n(_),y=a("cc20"),C=a("0e8f"),T=Object(v["a"])(g,c,d,!1,null,null,null);T.options.__file="Captcha.vue";var x=T.exports;function D(){return document.getElementById("plugin0")}f()(T,{VChip:y["a"],VFlex:C["a"]}),l.a.options={closeButton:!0,timeOut:"5000"};var S=D,b={props:{detailDossier:{},dataEsign:{}},components:{"v-captcha":x},data:()=>({tabActive:"tabs-1",activeKS:!1,noteReason:"",thongTinHoSo:{},passWord:"",e1:!0}),created(){""!==this.esignType&&"digital"!==this.esignType||(this.activeKS=!0)},computed:{kysoSuccess(){return this.$store.getters.kysoSuccess},esignType(){return this.dataEsign.signatureType}},watch:{},mounted(){""!==this.esignType&&"digital"!==this.esignType||(this.activeKS=!0)},methods:{changeActive(){var e=this;console.log("tabActive",e.tabActive)},doExport(){let e=this,t={textValue:e.noteReason,required:"password"===e.esignType?e.passWord:"digital"===e.esignType||""===e.esignType?e.activeKS:e.$refs.captcha.checkValidCatcha()};return console.log("exportData",t),t},checkCreateFile(e){var t;t=Array.isArray(e.createFiles)?e.createFiles:[e.createFiles];var a=!1;if(t.length>0)for(var i=t.length,s=0;s<i;s++){var o=t[s];0===o.counter&&(a=!0)}else a=!0;return a},kySo(e){console.log("run ky so data payload",e);var t,a=this;t=Array.isArray(e.createFiles)?e.createFiles:[e.createFiles];var i=[],s=!1;if(t.length>0)for(var o=t.length,n=0;n<o;n++){var r=t[n];if(0===r.counter){s=!0;break}var l=r.dossierFileId,c=r.dossierPartId;if(l&&c&&"digital"===a.esignType){let e=l+","+c;i.push(e)}else if(l&&"digital"!==a.esignType){let e=l;i.push(e)}}else alert("Không tồn tại tệp điện tử. Vui lòng kiểm tra lại");console.log("idArr",i);var d=e.eSignature;if(d){if(s)return void alert("Tệp điện tử chưa sẵn sàng. Xin vui lòng chờ trong giây lát");if(i){var h={};h.actionCode=e.actionCode,h.actionUser=window.themeDisplay.getUserName()?window.themeDisplay.getUserName():"",h.actionNote="",h.postStepCode=e.postStepCode?e.postStepCode:"",h.payload=e.payload?e.payload:"",h.assignUsers=e.assignUsers?e.assignUsers:"",h.payment=e.payment?e.payment:"",h.userNote=e.userNote?e.userNote:"";var u=i.join(";"),p=e.actionName;if(console.log("strIdArr",u),console.log("paramObj",h),"digital"===a.esignType){if(!S().valid)return d=!1,void alert("Plugin ký số không hoạt động");a.kyDuyetYCGiamDinh(u,h,p)}else"captcha"!==a.esignType&&"password"!==a.esignType&&""!==a.esignType||a.completeKyDuyetCaptchaSignature(u,h,p)}}},kyDuyetYCGiamDinh(e,t,a){var i=this,s="/o/rest/v2/defaultsignature/digitalSignature/"+i.detailDossier.dossierId+"/hashComputed";console.log(i.detailDossier.dossierId),n.a.ajax({type:"POST",url:s,async:!1,dataType:"json",headers:{groupId:window.themeDisplay.getScopeGroupId(),Token:window.Liferay.authToken},data:{strIdArr:e,actionCode:t.actionCode,postStepCode:t.postStepCode},success:function(e){console.log(e);var s=e.msg;if("fileEntryId"!==s){var o=e.hashComputers,n=e.signFieldNames,r=e.fileNames,l=e.fileEntryId;console.log("hashComputers: "+o),console.log("signFieldNames: "+n),console.log("fileNames: "+r),console.log("msgs: "+s);var c=[];if(S().valid){for(var d=0;d<o.length;d++){var h=o[d],u=S().Sign(h);if(0===u||7===u){var p=S().Signature,m=n[d],g=r[d];console.log("sign: "+p),console.log("signFieldName: "+m),console.log("fileName: "+g),c.push(p)}else alert(S().ErrorMessage)}i.completeKyDuyetManyYCGiamDinh(c.join(","),n.join(","),r.join(","),l.join(","),t,a)}else alert("Plugin ký số không hoạt động")}else alert("Không tìm thấy file bản thảo. Tạm dừng tiến trình ký số")},error:function(e){}})},completeKyDuyetManyYCGiamDinh(e,t,a,i,s,o){var r=this,c="/o/rest/v2/defaultsignature/digitalSignature/"+r.detailDossier.dossierId+"/dossierFiles";n.a.ajax({type:"PUT",url:c,async:!1,dataType:"json",headers:{groupId:window.themeDisplay.getScopeGroupId(),Token:window.Liferay.authToken},data:{actionCode:s["actionCode"],actionUser:s["actionUser"],actionNote:s["actionNote"],assignUserId:s["assignUserId"],postStepCode:s["postStepCode"],subUsers:s["subUsers"],payload:s["payload"]?JSON.stringify(s["payload"]):"",assignUsers:s["assignUsers"],payment:s["payment"]?JSON.stringify(s["payment"]):"",userNote:s["userNote"],sign:e,signFieldName:t,fileName:a,fileEntryId:i},success:function(e){console.log(e);var t=e.msg;"success"===t?(r.$store.commit("setKysoSuccess",!0),l.a.success("Thực hiện ký số thành công.")):"fileEntryId"===t?alert("Cảnh báo: Không tìm thấy file bản thảo. Tạm dừng tiến trình đóng dấu số"):alert(t)},error:function(){alert("Thực hiện ký số thất bại")}})},completeKyDuyetCaptchaSignature(e,t,a){var i=this,s="/o/rest/v2/defaultsignature/"+i.detailDossier.dossierId+"/dossierFiles";n.a.ajax({type:"PUT",url:s,async:!1,dataType:"json",headers:{groupId:window.themeDisplay.getScopeGroupId()?window.themeDisplay.getScopeGroupId():"",Token:window.Liferay.authToken?window.Liferay.authToken:""},data:{actionCode:t["actionCode"],actionUser:t["actionUser"],actionNote:t["actionNote"],assignUserId:t["assignUserId"],postStepCode:t["postStepCode"],subUsers:t["subUsers"],payload:t["payload"]?JSON.stringify(t["payload"]):"",assignUsers:t["assignUsers"],payment:t["payment"]?JSON.stringify(t["payment"]):"",userNote:t["userNote"],fileEntryId:e},success:function(e){i.$store.commit("setKysoSuccess",!0),l.a.success("Thực hiện ký số thành công.")},error:function(){l.a.error("Thực hiện ký số thất bại")}})},completeKyDuyetYCGiamDinh(e,t,a,i,s,o){var r=this,c="/o/rest/v2/defaultsignature/digitalSignature/"+r.detailDossier.dossierId+"/dossierFile";n.a.ajax({type:"PUT",url:c,async:!1,dataType:"json",headers:{groupId:window.themeDisplay.getScopeGroupId(),Token:window.Liferay?window.Liferay.authToken:"","Cache-Control":"no-cache"},data:{actionCode:s["actionCode"],actionUser:s["actionUser"],actionNote:s["actionNote"],assignUserId:s["assignUserId"],postStepCode:s["postStepCode"],subUsers:s["subUsers"],sign:e,signFieldName:t,fileName:a,fileEntryId:i},success:function(e){console.log(e);var t=e.msg;"success"===t?l.a.success("Yêu cầu của bạn được thực hiện thành công."):"fileEntryId"===t?alert("Cảnh báo: Không tìm thấy file bản thảo. Tạm dừng tiến trình đóng dấu số"):alert(t)},error:function(){alert("ky so false")}})}}},P=b,I=a("b0af"),A=a("99d9"),N=a("cd55"),w=a("49e2"),k=a("132d"),E=a("2677"),F=Object(v["a"])(P,i,s,!1,null,null,null);F.options.__file="KyPheDuyetTaiLieu.vue";t["a"]=F.exports;f()(F,{VCard:I["a"],VCardText:A["b"],VExpansionPanel:N["a"],VExpansionPanelContent:w["a"],VFlex:C["a"],VIcon:k["a"],VTextField:E["a"]})},"4d55":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row-header no__hidden_class"},[null!==e.trangThaiHoSoList?a("div",{staticClass:"background-triangle-big"},[a("span",[e._v(e._s(e.trangThaiHoSoList[e.index]["title"]))])]):e._e(),a("div",{staticClass:"layout row wrap header_tools row-blue"},[a("div",{staticClass:"flex pl-3 text-ellipsis text-bold",staticStyle:{position:"relative"}},[a("v-combobox",{attrs:{placeholder:"Tìm kiếm theo tên hồ sơ, tên thủ tục ...",solo:"",chips:"",multiple:"","deletable-chips":"","item-value":"value","item-text":"text","content-class":"adv__search__select","return-object":""},on:{input:e.keywordEventChange},model:{value:e.advSearchItems,callback:function(t){e.advSearchItems=t},expression:"advSearchItems"}}),a("v-fade-transition",[e.menusss?a("div",{staticClass:"adv__search_container"},[e._l(e.advSearchTools,function(t,i){return t.display?a("v-layout",{key:i,attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm5:""}},[a("v-select",{attrs:{items:e.advSearchTools,label:"Chọn điều kiện lọc","single-line":"","item-value":"value","item-text":"text",disabled:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}})],1),a("v-flex",{staticClass:"text-center",attrs:{xs12:"",sm1:""}},[a("v-btn",{staticClass:"my-0 mx-0",attrs:{icon:""}},[a("v-icon",{attrs:{size:"16"}},[e._v("drag_handle")])],1)],1),"year_month_day"===t.spec?a("v-flex",{staticClass:"pr-2",attrs:{xs2:"",sm2:""}},[a("v-autocomplete",{attrs:{items:e.itemFilterSupport.years,label:"Chọn năm","single-line":"","item-value":"value","item-text":"name","hide-selected":""},on:{change:function(a){e.changeAdvFilterData(a,"year",t.index)}},model:{value:e.itemFilterSupport.year,callback:function(t){e.$set(e.itemFilterSupport,"year",t)},expression:"itemFilterSupport.year"}})],1):e._e(),"year_month_day"===t.spec?a("v-flex",{staticClass:"pr-2",attrs:{xs2:"",sm2:""}},[a("v-autocomplete",{attrs:{items:e.itemFilterSupport.months,label:"Chọn tháng","single-line":"","item-value":"value","item-text":"name"},on:{change:function(a){e.changeAdvFilterData(a,"month",t.index)}},model:{value:e.itemFilterSupport.month,callback:function(t){e.$set(e.itemFilterSupport,"month",t)},expression:"itemFilterSupport.month"}})],1):e._e(),"year_month_day"===t.spec?a("v-flex",{attrs:{xs2:"",sm2:""}},[a("v-autocomplete",{attrs:{items:e.itemFilterSupport.days,label:"Chọn ngày","single-line":"","item-value":"value","item-text":"name"},on:{change:function(a){e.changeAdvFilterData(a,"day",t.index)}},model:{value:e.itemFilterSupport.day,callback:function(t){e.$set(e.itemFilterSupport,"day",t)},expression:"itemFilterSupport.day"}})],1):e._e(),"top"===t.spec?a("v-flex",{attrs:{xs:"",12:"",sm6:""}},[a("v-autocomplete",{attrs:{items:e.itemFilterSupport.tops,label:t.text+":","single-line":"","item-value":"value","item-text":"name"},on:{change:function(a){e.changeAdvFilterData(a,t.spec,t.index)}},model:{value:e.itemFilterSupport.top,callback:function(t){e.$set(e.itemFilterSupport,"top",t)},expression:"itemFilterSupport.top"}})],1):e._e(),"status"===t.spec?a("v-flex",{attrs:{xs:"",12:"",sm6:""}},[a("v-autocomplete",{attrs:{items:e.itemFilterSupport.statusLists,label:t.text+":","single-line":"","item-value":"itemCode","item-text":"itemName"},on:{change:function(a){e.changeAdvFilterData(a,t.spec,t.index)}},model:{value:e.itemFilterSupport.status,callback:function(t){e.$set(e.itemFilterSupport,"status",t)},expression:"itemFilterSupport.status"}})],1):e._e(),"substatus"===t.spec?a("v-flex",{attrs:{xs:"",12:"",sm6:""}},[a("v-autocomplete",{attrs:{items:e.itemFilterSupport.substatusLists,label:t.text+":","single-line":"","item-value":"itemCode","item-text":"itemName"},on:{change:function(a){e.changeAdvFilterData(a,t.spec,t.index)}},model:{value:e.itemFilterSupport.substatus,callback:function(t){e.$set(e.itemFilterSupport,"substatus",t)},expression:"itemFilterSupport.substatus"}})],1):e._e(),"agency"===t.spec?a("v-flex",{attrs:{xs:"",12:"",sm6:""}},[a("v-autocomplete",{attrs:{items:e.itemFilterSupport.agencyLists,label:t.text+":","single-line":"","item-value":"administrationCode","item-text":"administrationName"},on:{change:function(a){e.changeAdvFilterData(a,t.spec,t.index)}},model:{value:e.itemFilterSupport.agency,callback:function(t){e.$set(e.itemFilterSupport,"agency",t)},expression:"itemFilterSupport.agency"}})],1):e._e(),"service"===t.spec?a("v-flex",{attrs:{xs:"",12:"",sm6:""}},[a("v-autocomplete",{attrs:{items:e.itemFilterSupport.serviceLists,label:t.text+":","single-line":"","item-value":"serviceCode","item-text":"serviceName"},on:{change:function(a){e.changeAdvFilterData(a,t.spec,t.index)}},model:{value:e.itemFilterSupport.service,callback:function(t){e.$set(e.itemFilterSupport,"service",t)},expression:"itemFilterSupport.service"}})],1):e._e(),"domain"===t.spec?a("v-flex",{attrs:{xs:"",12:"",sm6:""}},[a("v-autocomplete",{attrs:{items:e.itemFilterSupport.domainLists,label:t.text+":","single-line":"","item-value":"domainCode","item-text":"domainName"},on:{change:function(a){e.changeAdvFilterData(a,t.spec,t.index)}},model:{value:e.itemFilterSupport.domain,callback:function(t){e.$set(e.itemFilterSupport,"domain",t)},expression:"itemFilterSupport.domain"}})],1):e._e(),"register"===t.spec?a("v-flex",{attrs:{xs:"",12:"",sm6:""}},[a("v-text-field",{attrs:{placeholder:t.text},model:{value:e.itemFilterSupport.register,callback:function(t){e.$set(e.itemFilterSupport,"register",t)},expression:"itemFilterSupport.register"}})],1):e._e()],1):e._e()}),a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"no__selected__items",attrs:{xs12:"",sm10:""}},[a("v-autocomplete",{attrs:{items:e.advSearchTools,label:"Chọn điều kiện lọc","single-line":"","item-value":"text","item-text":"text","return-object":"","hide-selected":""},on:{change:e.selectedAdvFilter},model:{value:e.advSearchToolsSelected,callback:function(t){e.advSearchToolsSelected=t},expression:"advSearchToolsSelected"}})],1),a("v-flex",{staticClass:"text-right",attrs:{xs12:"",sm2:""}},[a("v-btn",{staticClass:"mx-0 my-0 mt-1",attrs:{color:"primary"},nativeOn:{click:function(t){e.menusss=!1}}},[a("v-icon",{staticClass:"mr-2"},[e._v("clear")]),e._v("\n                  Quay lại\n                ")],1)],1)],1)],2):e._e()])],1),a("div",{staticClass:"flex text-right",staticStyle:{"margin-left":"auto","max-width":"50px"}},[a("v-btn",{staticClass:"my-0 mx-2",attrs:{icon:""},nativeOn:{click:function(t){return e.showAdvFilter(t)}}},[a("v-icon",{attrs:{size:"16"}},[e._v("filter_list")])],1)],1)])]),a("v-layout",{staticClass:"menu_header_list pt-3 pb-2",class:{no__border__bottom:null===e.btnDynamics||void 0===e.btnDynamics||"undefined"===e.btnDynamics||null!==e.btnDynamics&&void 0!==e.btnDynamics&&"undefined"!==e.btnDynamics&&0===e.btnDynamics.length},attrs:{wrap:""}},[1!==e.originality?a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"pl-2 pr-2 input-group--text-field-box",attrs:{xs12:"",sm3:""}},[a("v-autocomplete",{attrs:{items:e.listLinhVuc,label:"Chọn lĩnh vực","item-text":"displayName","item-value":"domainCode","return-object":"","hide-selected":!0,clearable:"",box:""},on:{change:e.changeDomain},model:{value:e.linhVucSelected,callback:function(t){e.linhVucSelected=t},expression:"linhVucSelected"}})],1),a("v-flex",{staticClass:"pl-2 pr-2 input-group--text-field-box",attrs:{xs12:"",sm3:""}},[a("v-autocomplete",{attrs:{items:e.listThuTucHanhChinh,label:"Chọn thủ tục hành chính","item-text":"displayName","item-value":"serviceConfigId","return-object":"","hide-selected":!0,clearable:"",box:""},on:{change:e.changeServiceConfigs},model:{value:e.thuTucHanhChinhSelected,callback:function(t){e.thuTucHanhChinhSelected=t},expression:"thuTucHanhChinhSelected"}})],1),a("v-flex",{staticClass:"pl-2 pr-2 input-group--text-field-box",attrs:{xs12:"",sm3:""}},[a("v-autocomplete",{attrs:{items:e.listDichVu,label:"Chọn dịch vụ","item-text":"optionName","item-value":"processOptionId","return-object":"","hide-selected":!0,box:""},on:{change:e.changeDichVuConfigs},model:{value:e.dichVuSelected,callback:function(t){e.dichVuSelected=t},expression:"dichVuSelected"}})],1),a("v-flex",{staticClass:"pl-2 pr-2",attrs:{xs12:"",sm3:""}},[a("div",{staticStyle:{position:"relative"}},[a("v-text-field",{attrs:{label:"Nhập mã hồ sơ","append-icon":"search",box:""},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.changeDossierNoKey(t):null},"click:append":e.changeDossierNoKey},model:{value:e.dossierNoKey,callback:function(t){e.dossierNoKey=t},expression:"dossierNoKey"}})],1)])],1):e._e(),null!==e.dossierCounting&&void 0!==e.dossierCounting&&e.dossierCounting.length>0&&e.dossierCountingShow?a("div",{staticClass:"py-1 px-1",staticStyle:{background:"#f6f6f6","border-top":"1px solid lightgrey"}},e._l(e.dossierCounting,function(t,i){return a("v-chip",{key:i,on:{click:function(a){e.changeAdvFilterDataChips(t)}}},["deleted"===t.key?a("v-avatar",{staticStyle:{"background-color":"#da0e0e","border-color":"#da0e0e",color:"#fff"}},[a("v-icon",{attrs:{size:"16"}},[e._v("delete")])],1):a("v-avatar",{staticStyle:{"background-color":"#0b72ba","border-color":"#0b72ba",color:"#fff"}},[e._v(e._s(t.count))]),e._v("\n        "+e._s(t.title)+"\n      ")],1)}),1):e._e()],1),e.loadingDynamicBtn?a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:""}}),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("content-placeholders",{staticClass:"mt-3"},[a("content-placeholders-text",{attrs:{lines:1}})],1)],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("content-placeholders",{staticClass:"mt-3"},[a("content-placeholders-text",{attrs:{lines:1}})],1)],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("content-placeholders",{staticClass:"mt-3"},[a("content-placeholders-text",{attrs:{lines:1}})],1)],1)],1):e._e(),e.loadingDynamicBtn?e._e():a("div",{staticClass:"btn_wrap_actions"},[e.getUser("Administrator_data")&&"deleted"!==e.currentQueryState["status"]?a("v-btn",{attrs:{color:"red",dark:""},nativeOn:{click:function(t){e.btnActionEvent(null,{form:"UNDO_DOSSIER"},0,!0)}}},[e._v("\n         Undo   \n    ")]):e._e(),e.getUser("Administrator_data")?a("v-menu",{staticStyle:{position:"relative !important"},attrs:{bottom:""}},[a("v-btn",{attrs:{slot:"activator",color:"red",dark:""},slot:"activator"},[e._v("Go to   "),a("v-icon",{attrs:{size:"18"}},[e._v("arrow_drop_down")])],1),a("v-list",[a("v-list-tile",{on:{click:function(t){e.btnActionEvent(e.selectedDoAction[e.selectedDoAction.length-1],{form:"GOTO_DONE"},0,!0)}}},[a("v-list-tile-title",[e._v("Hoàn thành")])],1),a("v-list-tile",{on:{click:function(t){e.btnActionEvent(e.selectedDoAction[e.selectedDoAction.length-1],{form:"GOTO_CANCEL"},0,!0)}}},[a("v-list-tile-title",[e._v("Rút hồ sơ")])],1),a("v-list-tile",{on:{click:function(t){e.btnActionEvent(e.selectedDoAction[e.selectedDoAction.length-1],{form:"GOTO_DENY"},0,!0)}}},[a("v-list-tile-title",[e._v("Từ chối")])],1)],1)],1):e._e(),e.getUser("Administrator_data")&&"deleted"!==e.currentQueryState["status"]?a("v-btn",{attrs:{color:"red",dark:""},nativeOn:{click:function(t){e.btnActionEvent(null,{form:"CHANGE_DATA_DOSSIER"},0,!0)}}},[e._v("\n      Điều chỉnh dữ liệu\n    ")]):e._e(),e.getUser("Administrator")&&"deleted"!==e.currentQueryState["status"]?a("v-btn",{attrs:{color:"red",dark:""},nativeOn:{click:function(t){e.btnActionEvent(null,{form:"DELETE"},0,!0)}}},[e._v("\n      DELETE\n    ")]):e._e(),e.getUser("Administrator_data")&&e.currentQueryState.hasOwnProperty("status")&&"deleted"===e.currentQueryState["status"]?a("v-btn",{attrs:{color:"red",dark:""},nativeOn:{click:function(t){e.btnActionEvent(null,{form:"RESTORE_DOSSIER"},0,!0)}}},[e._v("\n      Khôi phục hồ sơ\n    ")]):e._e(),e._l(e.btnDynamics,function(t,i){return String(t.form).indexOf("VIEW")<0&&3!==e.menuType?a("v-btn",{key:i,attrs:{color:"primary",loading:e.loadingAction&&i===e.indexAction,disabled:e.loadingAction&&i===e.indexAction},nativeOn:{click:function(a){e.btnActionEvent(null,t,i,!0)}}},[e._v("\n      "+e._s(t.title)+e._s(t.tiltle)+"\n      "),a("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])]):e._e()})],2),a("v-data-table",{staticClass:"table-landing table-bordered",attrs:{headers:e.headers,items:e.hosoDatas,"total-items":e.hosoDatasTotal,"item-key":"dossierId","select-all":3!==e.menuType&&1!==e.originality&&e.btnDynamics.length>0||e.getUser("Administrator")||e.getUser("Administrator_data"),"no-data-text":"Không có hồ sơ nào","hide-actions":""},scopedSlots:e._u([{key:"headers",fn:function(t){return[a("tr",[3!==e.menuType&&1!==e.originality&&e.btnDynamics.length>0||e.getUser("Administrator")||e.getUser("Administrator_data")?a("th",{staticClass:"v_data_table_check_all"},[e.getUser("Administrator")?a("v-checkbox",{attrs:{"input-value":t.all,indeterminate:t.indeterminate,primary:"","hide-details":""},nativeOn:{click:function(t){return e.toggleAll(t)}}}):a("v-checkbox",{attrs:{"input-value":t.all,indeterminate:t.indeterminate,disabled:!e.thuTucHanhChinhSelected||e.thuTucHanhChinhSelected&&"0"===e.thuTucHanhChinhSelected.serviceConfigId||e.thuTucHanhChinhSelected&&""===e.thuTucHanhChinhSelected.serviceConfigId,primary:"","hide-details":""},nativeOn:{click:function(t){return e.toggleAll(t)}}})],1):e._e(),e._l(t.headers,function(t){return a("th",{key:t.text,class:t["class"]?t["class"]:"",attrs:{width:t["width"]?t["width"]+"px":""}},[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[e._v(e._s(t.text))]),a("span",[e._v(e._s(t.text))])])],1)})],2)]}},{key:"items",fn:function(t){return[a("tr",[3!==e.menuType&&1!==e.originality&&e.btnDynamics.length>0||e.getUser("Administrator")||e.getUser("Administrator_data")?a("td",{staticClass:"v_data_table_check_all"},[e.getUser("Administrator")||e.getUser("Administrator_data")?a("v-checkbox",{attrs:{primary:"","hide-details":"",color:"primary"},on:{change:e.changeSelected},model:{value:t.selected,callback:function(a){e.$set(t,"selected",a)},expression:"props.selected"}}):a("v-checkbox",{attrs:{disabled:0===t.item["assigned"]||!e.thuTucHanhChinhSelected||e.thuTucHanhChinhSelected&&"0"===e.thuTucHanhChinhSelected.serviceConfigId||e.thuTucHanhChinhSelected&&""===e.thuTucHanhChinhSelected.serviceConfigId,primary:"","hide-details":"",color:"primary"},on:{change:e.changeSelected},model:{value:t.selected,callback:function(a){e.$set(t,"selected",a)},expression:"props.selected"}})],1):e._e(),a("td",{staticClass:"text-xs-center px-0 py-0"},[e.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("span",{class:{no_acction__event:!t.item["permission"]},staticStyle:{cursor:"pointer"},on:{click:function(a){e.viewDetail(t.item,t.index)}}},[e._v("\n            "+e._s(15*e.hosoDatasPage-15+t.index+1)+"\n          ")])],1),e._l(e.headers,function(i,s){return i.hasOwnProperty("value")?a("td",{key:s+"_"+t.item.dossierId,class:i["class_column"]},[e.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",{class:{no_acction__event:!t.item["permission"]},staticStyle:{cursor:"pointer"},on:{click:function(a){e.viewDetail(t.item,t.index)}}},[i.hasOwnProperty("layout_view")?a("template-rendering",{attrs:{item:t.item,layout_view:i.layout_view}}):a("span",[e._v("\n              "+e._s(t.item[i.value])+"\n            ")])],1)],1):e._e()}),e.hideAction?e._e():a("td",{staticClass:"text-xs-center px-0 py-0"},[e.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):e._e(),e.loadingTable||null===e.btnDynamics&&void 0===e.btnDynamics&&"undefined"===e.btnDynamics&&null===e.btnDossierDynamics&&void 0===e.btnDossierDynamics&&"undefined"===e.btnDossierDynamics?e._e():a("v-menu",{attrs:{left:"","nudge-left":50,"nudge-top":15}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(a){e.processPullBtnDynamics(t.item)}},slot:"activator"},[a("v-icon",[e._v("more_vert")])],1),a("v-list",[e._l(e.btnDynamics,function(i,s){return 3===e.menuType?a("v-list-tile",{key:s+"_menu_"+t.item.dossierId,attrs:{disabled:-1===String(t.item["permission"]).indexOf("write")},on:{click:function(a){e.btnActionEvent(t.item,i,t.index,!1)}}},[a("v-list-tile-title",[e._v(e._s(i.title)+e._s(i.tiltle))])],1):e._e()}),e._l(e.btnDossierDynamics,function(i,s){return(i["enable"]>0||"special"===i["autoEvent"])&&3!==e.menuType?a("v-list-tile",{key:s+"_"+t.item.dossierId,attrs:{disabled:2===i["enable"]||-1===String(t.item["permission"]).indexOf("write")},on:{click:function(a){e.processPullBtnDetail(t.item,i,t.index,s)}}},[a("v-list-tile-title",[e._v(e._s(i.actionName))])],1):e._e()}),e._l(e.btnStepsDynamics,function(i,s){return-1!==String(t.item["permission"]).indexOf("write")&&"NEW"!==String(i.form)&&3!==e.menuType?a("v-list-tile",{key:s+"_"+t.item.dossierId+"_"+t.item.dossierId,on:{click:function(a){e.btnActionEvent(t.item,i,e.index,!1)}}},[a("v-list-tile-title",[e._v(e._s(i.title))])],1):e._e()}),a("v-list-tile",{attrs:{disabled:!t.item["permission"]},on:{click:function(a){e.viewDetail(t.item,t.index)}}},[e._v("\n                Xem chi tiết\n              ")])],2)],1)],1)],2)]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),a("div",{staticClass:"text-xs-right layout wrap",staticStyle:{position:"relative"}},[a("div",{staticClass:"flex pagging-table px-2"},[a("tiny-pagination",{attrs:{total:e.hosoDatasTotal,page:e.hosoDatasPage,"custom-class":"custom-tiny-class"},on:{"tiny:change-page":e.paggingData}})],1)]),a("v-dialog",{attrs:{"max-width":"400",transition:"fade-transition",persistent:""},model:{value:e.dialogAction,callback:function(t){e.dialogAction=t},expression:"dialogAction"}},[a("v-card",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-card-title",{staticClass:"headline"},[e._v(e._s(e.itemAction.title)+e._s(e.itemAction.tiltle))]),a("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.dialogAction=!1}}},[a("v-icon",[e._v("clear")])],1),e.loadingAction?a("v-progress-linear",{staticClass:"my-0",attrs:{indeterminate:!0}}):e._e(),a("v-card-text",{staticClass:"pb-0 pt-4"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"px-2 pb-3",attrs:{xs12:""}},[a("v-autocomplete",{attrs:{items:e.listThuTucHanhChinh,placeholder:"chọn thủ tục hành chính","item-text":"serviceName","item-value":"serviceConfigId","return-object":"","hide-selected":!0},on:{change:e.changeServiceConfigs},model:{value:e.thuTucHanhChinhSelected,callback:function(t){e.thuTucHanhChinhSelected=t},expression:"thuTucHanhChinhSelected"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[e.thuTucHanhChinhSelected&&e.listDichVu.length>1?a("v-autocomplete",{attrs:{items:e.listDichVu,label:"Dịch vụ:",placeholder:"chọn dịch vụ","item-text":"optionName","item-value":"processOptionId","return-object":"","hide-selected":!0,rules:[function(e){return!!e||"dịch vụ bắt buộc phải chọn."}],required:""},on:{change:e.changeDichVuConfigs},model:{value:e.dichVuSelected,callback:function(t){e.dichVuSelected=t},expression:"dichVuSelected"}}):e._e()],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"red darken-3",flat:"flat",loading:e.loadingAction,disabled:e.loadingAction},nativeOn:{click:function(t){e.dialogAction=!1}}},[a("v-icon",[e._v("undo")]),e._v(" \n            Quay lại\n            "),a("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])],1),a("v-btn",{attrs:{color:"primary",flat:"flat",loading:e.loadingAction,disabled:e.loadingAction},nativeOn:{click:function(t){e.doSubmitDialogAction(e.itemAction)}}},[a("v-icon",[e._v("save")]),e._v(" \n            Đồng ý\n            "),a("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])],1)],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"1000",transition:"fade-transition",persistent:""},model:{value:e.dialogActionProcess,callback:function(t){e.dialogActionProcess=t},expression:"dialogActionProcess"}},[a("v-card",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.validProcess,callback:function(t){e.validProcess=t},expression:"validProcess"}},[a("v-card-title",{staticClass:"headline"},[e._v(e._s(e.itemAction.actionName))]),a("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.dialogActionProcess=!1}}},[a("v-icon",[e._v("clear")])],1),e.loadingActionProcess?a("v-progress-linear",{staticClass:"my-0",attrs:{indeterminate:!0}}):e._e(),a("v-card-text",{staticClass:"py-0 px-0"},[a("v-layout",{attrs:{wrap:""}},[e.dialogActionProcess?a("thong-tin-co-ban-ho-so",{attrs:{detailDossier:e.thongtinhoso}}):e._e(),e.dialogActionProcess&&e.showPhanCongNguoiThucHien?a("phan-cong",{attrs:{type:e.type_assign},model:{value:e.assign_items,callback:function(t){e.assign_items=t},expression:"assign_items"}}):e._e(),e.dialogActionProcess&&e.showTraKetQua?a("tra-ket-qua",{attrs:{resultFiles:e.returnFiles}}):e._e(),e.dialogActionProcess&&e.showThuPhi?a("thu-phi",{attrs:{viaPortal:e.viaPortalDetail},model:{value:e.payments,callback:function(t){e.payments=t},expression:"payments"}}):e._e(),e.dialogActionProcess&&e.showYkienCanBoThucHien?a("y-kien-can-bo",{ref:"ykiencanbo",attrs:{user_note:e.userNote}}):e._e()],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",loading:e.loadingActionProcess,disabled:e.loadingActionProcess},nativeOn:{click:function(t){e.submitFormXuLy(e.dossierItemDialogPick,e.itemDialogPick,e.resultDialogPick,e.indexDialogPick,!1)}}},[a("v-icon",[e._v("save")]),e._v(" \n          Xác nhận\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])],1),a("v-btn",{attrs:{color:"red",dark:"",loading:e.loadingActionProcess,disabled:e.loadingActionProcess},nativeOn:{click:function(t){e.dialogActionProcess=!1}}},[a("v-icon",[e._v("undo")]),e._v(" \n          Quay lại\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])],1)],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"900",transition:"fade-transition"},model:{value:e.dialogPDF,callback:function(t){e.dialogPDF=t},expression:"dialogPDF"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v(e._s(e.itemAction.title)+e._s(e.itemAction.tiltle))]),a("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.dialogPDF=!1}}},[a("v-icon",[e._v("clear")])],1),e.dialogPDFLoading?a("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[a("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):e._e(),a("iframe",{directives:[{name:"show",rawName:"v-show",value:!e.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPDFPreview",src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1),a("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"700px"},model:{value:e.dialog_statusAction,callback:function(t){e.dialog_statusAction=t},expression:"dialog_statusAction"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("\n        Trạng thái xử lý\n      ")]),a("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.closeDialogStatusAction(t)}}},[a("v-icon",[e._v("clear")])],1),a("v-card-text",{staticStyle:{"max-height":"350px"}},e._l(e.selected,function(t,i){return a("div",{key:t.dossierIdCTN},[a("v-layout",{staticClass:"py-1 align-center row-list-style",staticStyle:{"border-bottom":"1px solid #ddd",position:"relative"},attrs:{wrap:""}},[a("v-flex",{attrs:{xs11:""}},[a("span",{staticClass:"text-bold",staticStyle:{position:"absolute"}},[e._v(e._s(i+1)+".")]),a("div",{staticClass:"ml-4"},[a("span",{staticClass:"text-bold"},[e._v(e._s(t.dossierNo))]),e._v(" - "+e._s(t.serviceName))])]),a("v-flex",{staticClass:"text-right",attrs:{xs1:""}},[t.statusAction?a("v-tooltip",{attrs:{top:""}},[a("v-icon",{attrs:{slot:"activator",size:"20",color:"primary"},slot:"activator"},[e._v("\n                  check\n                ")]),a("span",[e._v("Thành công")])],1):a("v-tooltip",{attrs:{top:""}},[a("v-icon",{attrs:{slot:"activator",size:"20",color:"red darken-3"},slot:"activator"},[e._v("\n                  block\n                ")]),a("span",[e._v("Thất bại")])],1)],1)],1)],1)}),0),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",loading:e.loadingAction,disabled:e.loadingAction},nativeOn:{click:function(t){return e.resend(t)}}},[a("v-icon",{attrs:{size:"20"}},[e._v("refresh")]),e._v(" \n          Thử lại\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])],1),a("v-btn",{attrs:{color:"red",dark:"",loading:e.loadingAction,disabled:e.loadingAction},nativeOn:{click:function(t){return e.closeDialogStatusAction(t)}}},[a("v-icon",[e._v("undo")]),e._v(" \n          Thoát\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])],1)],1)],1)],1),a("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"700px"},model:{value:e.dialog_printGuide,callback:function(t){e.dialog_printGuide=t},expression:"dialog_printGuide"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("\n        Thông tin phiếu hướng dẫn hoàn thiện hồ sơ\n      ")]),a("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.dialog_printGuide=!1}}},[a("v-icon",[e._v("clear")])],1),a("v-card-text",[a("v-form",{ref:"formGuide",attrs:{"lazy-validation":""},model:{value:e.validGuide,callback:function(t){e.validGuide=t},expression:"validGuide"}},[a("v-layout",{staticClass:"py-1 align-center row-list-style",attrs:{wrap:""}},[a("v-flex",{staticClass:"px-2 pb-3",attrs:{xs12:""}},[a("div",{staticClass:"my-2"},[e._v("Thủ tục hành chính:")]),a("v-autocomplete",{staticClass:"input-group--text-field-box",attrs:{items:e.listThuTucHanhChinh,placeholder:"Chọn thủ tục hành chính","item-text":"serviceName","item-value":"serviceConfigId","return-object":"","hide-selected":!0,rules:[function(e){return!!e||"Thủ tục bắt buộc phải chọn."}],required:""},on:{change:e.changeServiceConfigsGuide},model:{value:e.thuTucHanhChinhSelectedGuide,callback:function(t){e.thuTucHanhChinhSelectedGuide=t},expression:"thuTucHanhChinhSelectedGuide"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2"},[e._v("Dịch vụ:")]),a("v-autocomplete",{staticClass:"input-group--text-field-box",attrs:{items:e.listDichVuGuide,placeholder:"Chọn dịch vụ","item-text":"optionName","item-value":"processOptionId","return-object":"","hide-selected":!0,rules:[function(e){return!!e||"dịch vụ bắt buộc phải chọn."}],required:""},model:{value:e.dichVuSelectedGuide,callback:function(t){e.dichVuSelectedGuide=t},expression:"dichVuSelectedGuide"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2"},[e._v("Tên người làm thủ tục:")]),a("v-text-field",{attrs:{placeholder:"Nhập tên người làm thủ tục",box:"",rules:[function(e){return!!e||"Trường dữ liệu bắt buộc"}],required:""},model:{value:e.applicantNameGuide,callback:function(t){e.applicantNameGuide=t},expression:"applicantNameGuide"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2"},[e._v("Địa chỉ:")]),a("v-text-field",{attrs:{placeholder:"Nhập địa chỉ",box:""},model:{value:e.applicantAddressGuide,callback:function(t){e.applicantAddressGuide=t},expression:"applicantAddressGuide"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2"},[e._v("Thư điện tử:")]),a("v-text-field",{attrs:{box:"",placeholder:"Nhập thư điện tử"},model:{value:e.applicantEmailGuide,callback:function(t){e.applicantEmailGuide=t},expression:"applicantEmailGuide"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2"},[e._v("Số điện thoại:")]),a("v-text-field",{attrs:{box:""},model:{value:e.applicantTelNoGuide,callback:function(t){e.applicantTelNoGuide=t},expression:"applicantTelNoGuide"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"mr-3",attrs:{color:"primary",loading:e.loadingAction,disabled:e.loadingAction},on:{click:function(t){e.doGuiding("doc")}}},[a("v-icon",[e._v("save")]),e._v("  \n          Lưu phiếu hướng dẫn\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])],1),a("v-btn",{staticClass:"mr-3",attrs:{color:"primary",loading:e.loadingAction,disabled:e.loadingAction},on:{click:function(t){e.doGuiding("pdf")}}},[a("v-icon",[e._v("print")]),e._v("  \n          In phiếu hướng dẫn\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])],1)],1)],1)],1),a("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"700px"},model:{value:e.dialog_extraForm,callback:function(t){e.dialog_extraForm=t},expression:"dialog_extraForm"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("\n        Điều chỉnh dữ liệu mã hồ sơ: "+e._s(e.selectedDoAction.length>0?e.selectedDoAction[e.selectedDoAction.length-1]["dossierNo"]:"")+"\n      ")]),a("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.dialog_extraForm=!1}}},[a("v-icon",[e._v("clear")])],1),a("v-card-text",{staticClass:"px-0",attrs:{flat:""}},[a("form-bo-sung-thong-tin",{ref:"formBoSungThongTinNgan",attrs:{dossier_id:e.dossierIdSelected,action_id:e.actionId,type:"dieuchinhdulieu"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"mr-3",attrs:{color:"primary"},on:{click:function(t){e.doChangeDossierExtraForm()}}},[a("v-icon",[e._v("save")]),e._v("  \n          Xác nhận\n        ")],1),a("v-btn",{staticClass:"mr-3",attrs:{color:"primary"},on:{click:function(t){e.dialog_extraForm=!1}}},[a("v-icon",[e._v("clear")]),e._v("  \n          Hủy\n        ")],1)],1)],1)],1)],1)},s=[],o=a("e4e5"),n=a("000e"),r=a("1136"),l=a("7121"),c=a("c23d"),d=a("bf3f"),h=a("f374"),u=a("87c1"),p=a("bbd0"),m=a("d80f"),g={props:["index"],components:{"tiny-pagination":n["a"],"thong-tin-co-ban-ho-so":r["a"],"phan-cong":l["a"],"tra-ket-qua":c["a"],"xac-nhan-thu-phi":d["a"],"thu-phi":h["a"],"y-kien-can-bo":u["a"],"template-rendering":o["a"],"form-bo-sung-thong-tin":m["a"]},data:()=>({isAdminSuper:!1,actionId:"",dossierIdSelected:"",dossierCountingShow:!1,dossierCounting:[],advSearchToolsSelected:[],advSearchTools:p.advSearchTools,advSearchItems:[],advObjectSearch:{},menusss:!1,itemFilterSupport:{years:[{value:"",name:"Lọc theo năm"},{value:"2017",name:"năm 2017"},{value:"2018",name:"năm 2018"},{value:"2019",name:"năm 2019"}],year:"",months:[{value:"",name:"Lọc theo tháng"},{value:"1",name:"tháng 1"},{value:"2",name:"tháng 2"},{value:"3",name:"tháng 3"},{value:"4",name:"tháng 4"},{value:"5",name:"tháng 5"},{value:"6",name:"tháng 6"},{value:"7",name:"tháng 7"},{value:"8",name:"tháng 8"},{value:"9",name:"tháng 9"},{value:"10",name:"tháng 10"},{value:"11",name:"tháng 11"},{value:"12",name:"tháng 12"}],month:"",days:[],day:"",tops:[{value:"",name:"toàn bộ"},{value:"overdue",name:"hồ sơ đang quá hạn cần giải quyết"},{value:"delay",name:"chậm hạn trả"},{value:"coming",name:"sắp đến hạn"}],top:"",statusLists:[],status:"",substatusLists:[{itemCode:"",itemName:"toàn bộ"}],substatus:"",agencyLists:[],agency:"",serviceLists:[],service:"",domainLists:[],domain:"",keyword:"",register:""},itemFilterKey:["year","month","day","top","status","substatus","agency","service","domain","keyword","register"],menuType:0,type_assign:"",assign_items:[],returnFiles:[],payments:"",viaPortalDetail:0,countSelected:0,statusFailed:0,dialog_statusAction:!1,dialog_printGuide:!1,dialog_extraForm:!1,validGuide:!1,applicantNameGuide:"",applicantEmailGuide:"",applicantTelNoGuide:"",applicantAddressGuide:"",dossierSelected:[{dossierNo:"18ACE289",serviceName:"Đăng ký, cấp Giấy chứng nhận quyền sử dụng đất, quyền sở hữu nhà ở và tài sản khác gắn liền với đất lần đầu đối với tài sản gắn liền với đất mà chủ sở hữu không đồng thời là người sử dụng đất",statusAction:!1}],buttonConfigItem:{},textNote:"",thongtinhoso:{},dossierId:0,valid:!0,isCallBack:!0,trangThaiHoSoList:null,listDichVu:[],dichVuSelected:null,btnDynamics:[],btnDossierDynamics:[],btnStepsDynamics:[],loading:!0,headers:[],hideAction:!1,hosoDatas:[],hosoDatasTotal:0,hosoDatasPage:1,hosoTotalPage:0,selectedDoAction:[],selectMultiplePage:[],selected:[],listThuTucHanhChinh:[],listThuTuc:[],thuTucHanhChinhSelected:null,thuTucHanhChinhSelectedGuide:null,listLinhVuc:[],linhVucSelected:null,listDichVuGuide:[],dichVuSelectedGuide:null,templateNoGuide:"",domainCode:"",govAgencyCode:"",serviceCode:"",templateNo:"",dossierNoKey:"",dialogAction:!1,loadingAction:!1,dialogActionProcess:!1,loadingActionProcess:!1,validProcess:!1,indexAction:-1,itemAction:{title:""},showThongTinCoBanHoSo:!1,showYkienCanBoThucHien:!1,showFormBoSungThongTinNgan:!1,showPhanCongNguoiThucHien:!1,showTaoTaiLieuKetQua:!1,showKyPheDuyetTaiLieu:!1,showTraKetQua:!1,showXacNhanThuPhi:!1,showThuPhi:!1,showThucHienThanhToanDienTu:!1,dossierItemDialogPick:null,itemDialogPick:null,resultDialogPick:null,indexDialogPick:0,userNote:0,dialogPDF:!1,dialogPDFLoading:!0,filterForm:null,checkSelectAll:!1,titleLanding:"",currentQueryState:""}),computed:{loadingDynamicBtn(){return this.$store.getters.loadingDynamicBtn},loadingTable(){return this.$store.getters.loadingTable},originality(){var e=this;return e.getOriginality()},currentUser(){return this.$store.getters.loadingInitData.user},activeLoadingDataHoSo(){return this.$store.getters.activeLoadingDataHoSo}},created(){var e=this;e.selectMultiplePage=[],e.checkSelectAll=3!==e.menuType&&1!==e.originality,e.itemFilterSupport["days"]=[{value:"",name:"Lọc theo ngày"}];for(let t=1;t<=31;t++){let a={value:t,name:"Ngày "+t};e.itemFilterSupport.days.push(a)}e.$nextTick(function(){let t=e.$router.history.current.query,a=e.$router.history.current.query;e.currentQueryState=t,t.hasOwnProperty("page")&&"1"!==t["page"]?e.hosoDatasPage=parseInt(t["page"]):e.hosoDatasPage=1,e.setStateAdvSearch(a)})},updated(){var e=this;e.$nextTick(function(){let t=e.$router.history.current.params,a=e.$router.history.current.query;e.currentQueryState=a,t.hasOwnProperty("index")&&e.isCallBack&&(e.isCallBack=!1,e.$store.commit("setLoadingDynamicBtn",!0),setTimeout(()=>{e.$store.dispatch("loadMenuConfigToDo").then(function(t){e.btnDynamics=[],e.trangThaiHoSoList=t,e.menuType=parseInt(e.trangThaiHoSoList[e.index]["menuType"]),e.checkSelectAll=3!==e.menuType&&1!==e.originality,e.processListTTHC(a),e.processListDomain(a),null!==e.trangThaiHoSoList[e.index]["tableConfig"]&&void 0!==e.trangThaiHoSoList[e.index]["tableConfig"]&&e.trangThaiHoSoList[e.index]["tableConfig"].hasOwnProperty("headers")&&(e.headers=e.trangThaiHoSoList[e.index]["tableConfig"]["headers"]),null!==e.trangThaiHoSoList[e.index]["tableConfig"]&&void 0!==e.trangThaiHoSoList[e.index]["tableConfig"]&&e.trangThaiHoSoList[e.index]["tableConfig"].hasOwnProperty("hideAction")&&(e.hideAction=e.trangThaiHoSoList[e.index]["tableConfig"]["hideAction"]),null!==e.trangThaiHoSoList[e.index]["buttonConfig"]&&void 0!==e.trangThaiHoSoList[e.index]["buttonConfig"]&&e.trangThaiHoSoList[e.index]["buttonConfig"].hasOwnProperty("buttons")&&(e.btnDynamics=e.trangThaiHoSoList[e.index]["buttonConfig"]["buttons"]),null!==e.trangThaiHoSoList[e.index]["buttonConfig"]&&void 0!==e.trangThaiHoSoList[e.index]["buttonConfig"]&&e.trangThaiHoSoList[e.index]["buttonConfig"].hasOwnProperty("layout_view")&&(e.filterForm=e.trangThaiHoSoList[e.index]["buttonConfig"]["layout_view"]);let i=[],s=[];for(let a in e.btnDynamics)e.btnDynamics[a].hasOwnProperty("onlySteps")?i.push(e.btnDynamics[a]):s.push(e.btnDynamics[a]);if(e.btnDynamics=[],e.btnDynamics=s,e.btnStepsDynamics=[],a.hasOwnProperty("step"))for(let n in e.trangThaiHoSoList[e.index]["items"]){let t=e.trangThaiHoSoList[e.index]["items"][n];if(String(t.stepCode)===String(a.step)){for(let a in i)for(var o=0;o<i[a].onlySteps.length;o++)String(i[a].onlySteps[o])===String(t.stepCode)&&e.btnDynamics.push(i[a]);break}}e.$store.commit("setLoadingDynamicBtn",!1)})},200))})},watch:{$route:function(e,t){let a=this,i=e.query,s=t.query;if(a.currentQueryState=i,i.hasOwnProperty("q")){a.btnDynamics=[],a.$store.commit("setLoadingDynamicBtn",!0),a.menuType=a.trangThaiHoSoList[a.index]["menuType"],a.checkSelectAll=3!==a.menuType&&1!==a.originality,a.headers=a.trangThaiHoSoList[a.index]["tableConfig"]["headers"],null!==a.trangThaiHoSoList[a.index]["tableConfig"]&&void 0!==a.trangThaiHoSoList[a.index]["tableConfig"]&&a.trangThaiHoSoList[a.index]["tableConfig"].hasOwnProperty("hideAction")&&(a.hideAction=a.trangThaiHoSoList[a.index]["tableConfig"]["hideAction"]),null!==a.trangThaiHoSoList[a.index]["buttonConfig"]&&void 0!==a.trangThaiHoSoList[a.index]["buttonConfig"]&&a.trangThaiHoSoList[a.index]["buttonConfig"].hasOwnProperty("buttons")&&(a.btnDynamics=a.trangThaiHoSoList[a.index]["buttonConfig"]["buttons"]),null!==a.trangThaiHoSoList[a.index]["buttonConfig"]&&void 0!==a.trangThaiHoSoList[a.index]["buttonConfig"]&&a.trangThaiHoSoList[a.index]["buttonConfig"].hasOwnProperty("layout_view")&&(a.filterForm=a.trangThaiHoSoList[a.index]["buttonConfig"]["layout_view"]);let e=[],t=[];for(let i in a.btnDynamics)a.btnDynamics[i].hasOwnProperty("onlySteps")?e.push(a.btnDynamics[i]):t.push(a.btnDynamics[i]);if(a.btnDynamics=[],a.btnDynamics=t,a.btnStepsDynamics=[],i.hasOwnProperty("step"))for(let s in a.trangThaiHoSoList[a.index]["items"]){let t=a.trangThaiHoSoList[a.index]["items"][s];if(String(t.stepCode)===String(i.step)){for(let i in e)for(var o=0;o<e[i].onlySteps.length;o++)String(e[i].onlySteps[o])===String(t.stepCode)&&a.btnDynamics.push(e[i]);break}}if(i.hasOwnProperty("page")?(a.hosoDatasPage=parseInt(i.page),i.page===s["page"]&&(a.selectMultiplePage=[])):(a.hosoDatasPage=1,a.selectMultiplePage=[]),a.$store.commit("setLoadingDynamicBtn",!1),null===a.listLinhVuc||void 0===a.listLinhVuc||null!==a.listLinhVuc&&void 0!==a.listLinhVuc&&0===a.listLinhVuc.length)a.processListDomain(i);else for(let s in a.listLinhVuc)String(a.listLinhVuc[s]["domainCode"])===String(i.domain)&&(a.linhVucSelected=a.listLinhVuc[s],a.domainCode=a.linhVucSelected["domainCode"]);null===a.listThuTucHanhChinh||void 0===a.listThuTucHanhChinh||null!==a.listThuTucHanhChinh&&void 0!==a.listThuTucHanhChinh&&0===a.listThuTucHanhChinh.length?a.processListTTHC(i):a.doLoadingDataHoSo(),a.setStateAdvSearch(i)}},activeLoadingDataHoSo(e){var t=this;setTimeout(function(){t.doLoadingDataHoSo()},100)},selectMultiplePage:{handler:function(e){let t=this;if(e.length>0){t.selectedDoAction=[];for(let a in e)t.selectedDoAction=t.selectedDoAction.concat(e[a]["selected"])}else t.selectedDoAction=[]},deep:!0}},methods:{toggleAll(){var e=this;if(e.getUser("Administrator"))e.selected.length?e.selected=[]:e.selected=e.hosoDatas;else{if(!e.thuTucHanhChinhSelected||e.thuTucHanhChinhSelected&&"0"===e.thuTucHanhChinhSelected.serviceConfigId||e.thuTucHanhChinhSelected&&""===e.thuTucHanhChinhSelected.serviceConfigId)return;e.selected.length?e.selected=[]:e.selected=e.hosoDatas.filter(function(e){return 0!==e["assigned"]})}e.selectMultiplePage[e.hosoDatasPage-1]["selected"]=e.selected},getUser(e){let t=this,a=t.$store.getters.getUser.role;if(!a)return!1;let i=a.findIndex(t=>t===e);return i>=0},changeSelected(){let e=this;e.selectMultiplePage[e.hosoDatasPage-1]["selected"]=e.selected},setStateAdvSearch(e){let t=this;if(e.hasOwnProperty("adv_renew")){t.advSearchItems=[];for(let a in t.itemFilterKey)for(let i in e){if(t.itemFilterKey[a]===i&&e[i]){t.itemFilterSupport[t.itemFilterKey[a]]=e[i];break}t.itemFilterSupport[t.itemFilterKey[a]]=""}for(let e in t.itemFilterKey){let a=t.itemFilterKey[e],i=t.advSearchTools.find(function(e){return e.spec===a});if(t.itemFilterSupport[a])if("keyword"===a)t.advSearchItems.push({spec:a,value:a+":"+t.itemFilterSupport[a],text:a+":"+t.itemFilterSupport[a],index:-1});else if("year"===a){let e=t.advSearchItems.find(function(e){return"year_month_day"===e.spec});e?(e["value"]="year_month_day:"+t.itemFilterSupport[a]+"_"+t.itemFilterSupport["month"]+"_"+t.itemFilterSupport["day"],e["text"]="year_month_day:"+t.itemFilterSupport[a]+"_"+t.itemFilterSupport["month"]+"_"+t.itemFilterSupport["day"],e["index"]=0):t.advSearchItems.push({spec:"year_month_day",value:"year_month_day:"+t.itemFilterSupport[a]+"_"+t.itemFilterSupport["month"]+"_"+t.itemFilterSupport["day"],text:"year_month_day:"+t.itemFilterSupport[a]+"_"+t.itemFilterSupport["month"]+"_"+t.itemFilterSupport["day"],index:0})}else if("month"===a){let e=t.advSearchItems.find(function(e){return"year_month_day"===e.spec});e?(e["value"]="year_month_day:"+t.itemFilterSupport["year"]+"_"+t.itemFilterSupport[a]+"_"+t.itemFilterSupport["day"],e["text"]="year_month_day:"+t.itemFilterSupport["year"]+"_"+t.itemFilterSupport[a]+"_"+t.itemFilterSupport["day"],e["index"]=0):t.advSearchItems.push({spec:"year_month_day",value:"year_month_day:"+t.itemFilterSupport["year"]+"_"+t.itemFilterSupport[a]+"_"+t.itemFilterSupport["day"],text:"year_month_day:"+t.itemFilterSupport["year"]+"_"+t.itemFilterSupport[a]+"_"+t.itemFilterSupport["day"],index:0})}else if("day"===a){let e=t.advSearchItems.find(function(e){return"year_month_day"===e.spec});e?(e["value"]="year_month_day:"+t.itemFilterSupport["year"]+"_"+t.itemFilterSupport["month"]+"_"+t.itemFilterSupport[a],e["text"]="year_month_day:"+t.itemFilterSupport["year"]+"_"+t.itemFilterSupport["month"]+"_"+t.itemFilterSupport[a],e["index"]=0):t.advSearchItems.push({spec:"year_month_day",value:"year_month_day:"+t.itemFilterSupport["year"]+"_"+t.itemFilterSupport["month"]+"_"+t.itemFilterSupport[a],text:"year_month_day:"+t.itemFilterSupport["year"]+"_"+t.itemFilterSupport["month"]+"_"+t.itemFilterSupport[a],index:0})}else t.advSearchItems.push({spec:a,value:a+":"+t.itemFilterSupport[a],text:a+":"+t.itemFilterSupport[a],index:i["index"]})}}else t.advSearchItems=[];for(let a in t.advSearchTools){t.advSearchTools[a].display=!1,t.advSearchTools[a].disabled=!1;let e=t.advSearchItems.find(function(e){return e.spec===t.advSearchTools[a].spec});e&&(t.advSearchTools[a].display=!0,t.advSearchTools[a].disabled=!0)}},resend(){var e=this;e.doActions(null,e.buttonConfigItem,null,!0)},closeDialogStatusAction(){var e=this;e.dialog_statusAction=!1,e.selectedDoAction=e.selectedDoAction.filter(function(e){return!e.statusAction})},submitFormXuLy(e,t,a,i,s){var o=this;if(o.showYkienCanBoThucHien){let s=o.$refs.ykiencanbo.doExport();s.valid&&(o.textNote=s.text,o.processAction(e,t,a,i,!1))}else o.processAction(e,t,a,i,!1)},processListTTHC(e){let t=this;t.$store.dispatch("loadListThuTucHanhChinh").then(function(a){if((!e.hasOwnProperty("domain")||e.hasOwnProperty("domain")&&""===String(e.domain))&&(t.listThuTucHanhChinh=a.map(e=>{return e["displayName"]=e["serviceCode"]+" - "+e["serviceName"],e})),t.listThuTuc=a.map(e=>{return e["displayName"]=e["serviceCode"]+" - "+e["serviceName"],e}),e.hasOwnProperty("service_config")&&"0"!==String(e.service_config)){for(let i in t.listThuTucHanhChinh)if(String(t.listThuTucHanhChinh[i].serviceConfigId)===String(e.service_config)){if(t.thuTucHanhChinhSelected=t.listThuTucHanhChinh[i],null!==t.thuTucHanhChinhSelected&&void 0!==t.thuTucHanhChinhSelected&&t.thuTucHanhChinhSelected.hasOwnProperty("options"))if(t.govAgencyCode=t.thuTucHanhChinhSelected.govAgencyCode,t.serviceCode=t.thuTucHanhChinhSelected.serviceCode,e.hasOwnProperty("template_no")){t.listDichVu=t.thuTucHanhChinhSelected.options;for(let a in t.listDichVu)t.listDichVu[a].templateNo===e.template_no&&(t.dichVuSelected=t.listDichVu[a],t.templateNo=t.dichVuSelected.templateNo)}else t.listDichVu=[],t.dichVuSelected=null,t.govAgencyCode="",t.serviceCode="",t.templateNo="";break}}else t.thuTucHanhChinhSelected=null,t.dichVuSelected=null,t.govAgencyCode="",t.serviceCode="",t.templateNo="";t.doLoadingDataHoSo()})},processListDomain(e){let t=this;t.$store.dispatch("getDomainLists").then(function(a){if(a.length>0&&(t.listLinhVuc=a.map(e=>{return e["displayName"]=e["domainCode"]+" - "+e["domainName"],e})),e.hasOwnProperty("domain")&&""!==String(e.domain)){for(let i in t.listLinhVuc)String(t.listLinhVuc[i]["domainCode"])===String(e.domain)&&(t.linhVucSelected=t.listLinhVuc[i],t.domainCode=t.linhVucSelected["domainCode"]);let a={domain:t.linhVucSelected.domainCode};t.$store.dispatch("getServiceinfoFilter",a).then(e=>{t.listThuTucHanhChinh=e.map(e=>{return e["displayName"]=e["serviceCode"]+" - "+e["serviceName"],e})})}else t.linhVucSelected=null})},checkPemissionSpecialAction(e,t,a){var i=this,s=!0;if("PRINT_01"!==e&&"PRINT_02"!==e&&"PRINT_03"!==e&&"GUIDE"!==e&&"PREVIEW"!==e&&"BETIMES"!==e){let e=i.$store.getters.getUsersNextAction;if(e.length>0){let a=e.filter(function(e){if(void 0!==e&&void 0!==t)return e["userId"].toString()===t["userId"].toString()});s=a.length>0}else s=!1}return"ROLLBACK_01"!==e&&"ROLLBACK_02"!==e&&"ROLLBACK_03"!==e||(s=!1),s},paggingData(e){let t=this,a=t.$router.history.current,i=a.query,s="?";i["page"]="";for(let o in i)""!==i[o]&&"undefined"!==i[o]&&void 0!==i[o]&&(s+=o+"="+i[o]+"&");s+="page="+e.page,t.$router.push({path:a.path+s})},doLoadingDataHoSo(){let e=this;e.selected=[];let t=e.$router.history.current.query;if(console.log("currentQuery======",t),t.hasOwnProperty("q")){let i;i=t.q.indexOf("step")>0?t.q:t["step"]?t.q+"&step="+t["step"]:t.q;var a=null;if(3!==e.menuType)a={queryParams:i,page:e.hosoDatasPage,agency:t.hasOwnProperty("agency")?t.agency:e.govAgencyCode,service:t.hasOwnProperty("service")?t.service:e.serviceCode,template:t.hasOwnProperty("template")?t.template:e.templateNo,domain:t.hasOwnProperty("domain")?t.domain:e.domainCode,status:t.hasOwnProperty("status")?t.status:"",substatus:t.hasOwnProperty("substatus")?t.substatus:"",year:t.hasOwnProperty("year")?t.year:0,month:t.hasOwnProperty("month")?t.month:0,day:t.hasOwnProperty("day")?t.day:0,top:t.hasOwnProperty("top")?t.top:"",keyword:t.hasOwnProperty("keyword")?t.keyword:"",register:t.hasOwnProperty("register")?t.register:"",dossierNo:e.dossierNoKey?e.dossierNoKey:""};else{let s=t.hasOwnProperty("status")&&"deleted"===t["status"]?-1:"";a={queryParams:i,page:e.hosoDatasPage,agency:t.hasOwnProperty("agency")?t.agency:e.govAgencyCode,service:t.hasOwnProperty("service")?t.service:e.serviceCode,template:t.hasOwnProperty("template")?t.template:e.templateNo,domain:t.hasOwnProperty("domain")?t.domain:e.domainCode,status:t.hasOwnProperty("status")&&t["status"]&&"deleted"!==t["status"]?t.status:"",substatus:t.hasOwnProperty("substatus")?t.substatus:"",year:t.hasOwnProperty("year")?t.year:0,month:t.hasOwnProperty("month")?t.month:0,day:t.hasOwnProperty("day")?t.day:0,top:t.hasOwnProperty("top")?t.top:"",keyword:t.hasOwnProperty("keyword")?t.keyword:"",register:t.hasOwnProperty("register")?t.register:"",originality:t.hasOwnProperty("originality")&&t["originality"]?t.originality:s,dossierNo:e.dossierNoKey?e.dossierNoKey:""}}e.$store.dispatch("loadingDataHoSo",a).then(function(t){if(e.hosoDatas=t.data,e.hosoDatasTotal=t.total,e.hosoTotalPage=Math.ceil(e.hosoDatasTotal/15),e.hosoTotalPage>0&&0===e.selectMultiplePage.length){for(let t=0;t<e.hosoTotalPage;t++){let a={selected:[],page:t+1};e.selectMultiplePage.push(a)}console.log("selectMultiplePage",e.selectMultiplePage)}e.selected=e.selectMultiplePage[e.hosoDatasPage-1]["selected"]}).catch(t=>{e.hosoDatas=[],e.hosoDatasTotal=0})}3===e.menuType||"3"===String(e.menuType)?setTimeout(()=>{e.$store.dispatch("loadingDossierCounting").then(function(t){if(null!==t&&void 0!==t){if(e.dossierCounting=t,e.getUser("Administrator_data")){let t={key:"deleted",title:"Hồ sơ đã xóa",count:0};e.dossierCounting.push(t)}}else e.dossierCounting=[];e.dossierCountingShow=!0})},200):e.dossierCountingShow=!1},changeServiceConfigs(e){let t=this;t.selectMultiplePage=[],null!==e&&"null"!==e&&void 0!==e&&e.hasOwnProperty("options")?t.listDichVu=e.options:t.listDichVu=[],null!==t.listDichVu&&void 0!==t.listDichVu&&"undefined"!==t.listDichVu&&t.listDichVu.length>0?(t.dichVuSelected=t.listDichVu[0],t.templateNo=t.dichVuSelected.templateNo):t.dichVuSelected=null;let a=t.$router.history.current,i=a.query,s="?";i["service_config"]="",i["template_no"]="";for(let o in i)"page"===o?s+=o+"=1&":""!==i[o]&&"undefined"!==i[o]&&void 0!==i[o]&&"step"!==o&&(s+=o+"="+i[o]+"&");-1===String(i["q"]).indexOf("&step")&&3!==t.menuType&&(s+="step="+i["step"]+"&"),null!==t.listDichVu&&void 0!==t.listDichVu&&"undefined"!==t.listDichVu&&t.listDichVu.length>0?(s+="service_config="+e.serviceConfigId,s+="&template_no="+t.dichVuSelected.templateNo,t.govAgencyCode=e.govAgencyCode,t.serviceCode=e.serviceCode):(t.templateNo="",t.govAgencyCode="",t.serviceCode=""),t.$router.push({path:a.path+s})},changeServiceConfigsGuide(e){let t=this;null!==e&&"null"!==e&&void 0!==e&&e.hasOwnProperty("options")?t.listDichVuGuide=e.options:t.listDichVuGuide=[],null!==t.listDichVuGuide&&void 0!==t.listDichVuGuide&&"undefined"!==t.listDichVuGuide&&t.listDichVuGuide.length>0?(t.dichVuSelectedGuide=t.listDichVuGuide[0],t.templateNoGuide=t.dichVuSelectedGuide.templateNo):t.dichVuSelectedGuide=null},changeDomain(e){let t=this;t.selectMultiplePage=[],t.linhVucSelected=e,e?setTimeout(function(){let e={domain:t.linhVucSelected.domainCode};t.$store.dispatch("getServiceinfoFilter",e).then(e=>{t.listThuTucHanhChinh=e.map(e=>{return e["displayName"]=e["serviceCode"]+" - "+e["serviceName"],e})})},100):t.listThuTucHanhChinh=t.listThuTuc,t.domainCode=null!==e&&void 0!==e?t.linhVucSelected["domainCode"]:"";let a=t.$router.history.current,i=a.query,s="?";i["domain"]="";for(let o in i)"page"===o?s+=o+"=1&":""!==i[o]&&"undefined"!==i[o]&&void 0!==i[o]&&"step"!==o&&(s+=o+"="+i[o]+"&");-1===String(i["q"]).indexOf("&step")&&3!==t.menuType&&(s+="step="+i["step"]+"&"),s+="domain="+t.domainCode,t.$router.push({path:a.path+s,query:{renew:Math.floor(100*Math.random())+1}})},changeDossierNoKey(){var e=this;e.selectMultiplePage=[],setTimeout(function(){e.dossierNoKey?(e.dossierNoKey.length>3||""===e.dossierNoKey)&&e.doLoadingDataHoSo():e.doLoadingDataHoSo()},200)},clearDossierNoKey(){this.dossierNoKey="",this.changeDossierNoKey()},changeDichVuConfigs(e){let t=this;t.selectMultiplePage=[];let a=t.$router.history.current,i=a.query,s="?";i["template_no"]="";for(let o in i)""!==i[o]&&"undefined"!==i[o]&&void 0!==i[o]&&(s+=o+"="+i[o]+"&");null!==e&&void 0!==e&&(s+="template_no="+e.templateNo,t.templateNo=e.templateNo),t.$router.push({path:a.path+s})},btnActionEvent(e,t,a,i){let s=this;if(s.buttonConfigItem={},s.buttonConfigItem=t,s.itemAction=t,s.indexAction=a,"NEW"===String(t.form)){let e=!0;null!==s.dichVuSelected&&void 0!==s.dichVuSelected&&"undefined"!==s.dichVuSelected&&null!==s.listDichVu&&void 0!==s.listDichVu&&1===s.listDichVu.length&&(e=!1),e?s.dialogAction=!0:s.doCreateDossier()}else if("UPDATE"===String(t.form))s.$router.push({path:"/danh-sach-ho-so/"+s.index+"/ho-so/"+e.dossierId+"/"+s.itemAction.form,query:s.$router.history.current.query});else if("ADD"===String(t.form))s.$router.push({path:"/danh-sach-ho-so/"+s.index+"/bo-sung-ho-so/"+e.dossierId,query:s.$router.history.current.query});else if("COPY"===String(t.form))s.doCopy(e,t,a,i);else if("CANCEL"===String(t.form))s.doCancel(e,t,a,i);else if("PRINT_01"===String(t.form))s.doPrint01(e,t,a,i);else if("PRINT_02"===String(t.form))s.doPrint02(e,t,a,i);else if("PRINT_03"===String(t.form))s.doPrint03(e,t,a,i);else if("GUIDING"===String(t.form))s.dialog_printGuide=!0;else if("PREVIEW"===String(t.form))s.doPreview(e,t,a,i);else if("ACTIONS"===String(t.form))s.doActions(e,t,a,i);else if("DELETE"===String(t.form))s.doDeleteDossier(e,t,a,i);else if("ROLLBACK_01"===String(t.form)){let i={actionCode:9e3};s.processAction(e,t,i,a,!0)}else if("ROLLBACK_02"===String(t.form)){let i={actionCode:9e3};s.processAction(e,t,i,a,!0)}else if("OVERDUE"===String(t.form)){let t={actionCode:8500,dossierId:e.dossierId,overdue:e["extendDate"]};s.processPullBtnDetailRouter(e,null,t,null,8500)}else if("PREOVERDUE"===String(t.form)){let t={actionCode:8501,dossierId:e.dossierId,preoverdue:e["extendDate"]};s.processPullBtnDetailRouter(e,null,t,null,8501)}else if("BETIMES"===String(t.form)){let t={actionCode:8400,dossierId:e.dossierId,betimes:e["extendDate"]};s.processPullBtnDetailRouter(e,null,t,null,8400)}else if("CHANGE_DATA_DOSSIER"===String(t.form))s.doChangeDossier(e,t,a,i);else if("UNDO_DOSSIER"===String(t.form))s.doUndoDossier(e,t,a,i);else if("RESTORE_DOSSIER"===String(t.form))s.doRestoreDossier(e,t,a,i);else if("GOTO_DONE"===String(t.form)){if(!e)return void alert("Chọn hồ sơ để thực hiện");let t={stepCode:400,stepName:"hoàn thành"};s.gotoStep(e,t)}else if("GOTO_CANCEL"===String(t.form)){if(!e)return void alert("Chọn hồ sơ để thực hiện");let t={stepCode:410,stepName:"rút"};s.gotoStep(e,t)}else if("GOTO_DENY"===String(t.form)){if(!e)return void alert("Chọn hồ sơ để thực hiện");let t={stepCode:420,stepName:"từ chối"};s.gotoStep(e,t)}},doPrint01(e,t,a,i){let s=this;s.dialogPDFLoading=!0,s.dialogPDF=!0;let o={dossierId:e.dossierId,document:t.document};s.$store.dispatch("doPrint01",o).then(function(e){s.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=e})},doPrint02(e,t,a,i){let s=this;if(console.log("vm.selectedDoAction",s.selectedDoAction),null===s.thuTucHanhChinhSelected||void 0===s.thuTucHanhChinhSelected||"undefined"===s.thuTucHanhChinhSelected)alert("Loại thủ tục bắt buộc phải chọn");else{let e={document:t.document,serviceCode:s.thuTucHanhChinhSelected.serviceCode,govAgencyCode:s.thuTucHanhChinhSelected.govAgencyCode,dossiers:JSON.stringify(s.selectedDoAction)};s.dialogPDFLoading=!0,s.dialogPDF=!0,s.$store.dispatch("doPrint02",e).then(function(e){s.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=e})}},doPrint03(e,t,a,i){let s=this;s.dialogPDFLoading=!0,s.dialogPDF=!0;let o={dossierId:e.dossierId,document:t.document};s.$store.dispatch("doPrint03",o).then(function(e){s.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=e})},doGuiding(e){let t=this;if(t.$refs.formGuide.validate()){t.loadingAction=!0;let a={serviceConfigId:t.thuTucHanhChinhSelectedGuide.serviceConfigId,serviceCode:t.thuTucHanhChinhSelectedGuide.serviceCode,serviceName:t.thuTucHanhChinhSelectedGuide.serviceName,templateNo:t.templateNoGuide,applicantName:t.applicantNameGuide,applicantAddress:t.applicantAddressGuide,applicantEmail:t.applicantEmailGuide,applicantTelNo:t.applicantTelNoGuide,typeCode:"DOC_03"};"doc"===e&&(a["reportType"]="word"),"doc"!==e&&(t.dialogPDFLoading=!0,t.dialogPDF=!0),t.$store.dispatch("doGuiding",a).then(function(a){t.loadingAction=!1,t.dialog_printGuide=!1,t.dialogPDFLoading=!1,"doc"!==e&&(document.getElementById("dialogPDFPreview").src=a)}).catch(function(){t.loadingAction=!1})}},doPreview(e,t,a,i){let s=this;s.dialogPDFLoading=!0,s.dialogPDF=!0;let o={dossierId:e.dossierId,document:t.document};s.$store.dispatch("doPrint03",o).then(function(e){s.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=e})},doActions(e,t,a,i){let s=this;s.$router.history.current.query,t.action;if(i)if(s.countSelected=0,1===s.selectedDoAction.length)for(let o in s.selectedDoAction){let e=s.selectedDoAction[o];s.$router.push({path:"/danh-sach-ho-so/"+s.index+"/chi-tiet-ho-so/"+e["dossierId"],query:{activeTab:"tabs-1",btnIndex:null}})}else s.selectedDoAction.length>1?s.$store.dispatch("loadActionActive",t).then(function(){s.$store.dispatch("loadDossierSelected",s.selectedDoAction).then(function(){let e=s.selectedDoAction.map(e=>{return e.dossierId}).join(","),a=s.$router.history.current.query;a["dossiers"]=e,a["actionActive"]=JSON.stringify(t),s.$router.push({path:"/danh-sach-ho-so/"+s.index+"/xu-ly-ho-so",query:a})})}):alert("Chọn hồ sơ để thao tác")},doCopy(e,t,a,i){let s=this,o={dossierId:e.dossierId};s.loadingAction=!0,s.$store.dispatch("doCopy",o).then(function(e){s.loadingAction=!1,s.indexAction=-1,s.$router.push({path:"/danh-sach-ho-so/"+s.index+"/ho-so/"+e.dossierId+"/"+s.itemAction.form,query:s.$router.history.current.query})}).catch(e=>{s.loadingAction=!1})},doCancel(e,t,a,i){let s=this;if(s.loadingAction=!0,i);else{let t={dossierId:e.dossierId};s.$store.dispatch("doCancel",t).then(function(e){s.loadingAction=!1,s.indexAction=-1,s.$router.push({path:"/danh-sach-ho-so/"+s.index+"/ho-so/"+e.dossierId+"/"+s.itemAction.form,query:s.$router.history.current.query})}).catch(e=>{s.loadingAction=!1})}},doChangeDossier(e,t,a,i){let s=this;s.$router.history.current.query;if(i)if(s.selectedDoAction.length>0){let e=s.selectedDoAction.length;s.actionId=9100,s.dossierIdSelected=s.selectedDoAction[e-1].dossierId,s.dialog_extraForm=!0}else alert("Chọn hồ sơ để thực hiện")},doUndoDossier(e,t,a,i){let s=this;s.$router.history.current.query;if(s.selectedDoAction.length>0){let e=s.selectedDoAction.length,t=confirm("Xác thực Undo hồ sơ với mã: "+s.selectedDoAction[e-1].dossierNo);if(t){let t={dossierId:s.selectedDoAction[e-1].dossierId};s.$store.dispatch("rollBack",t).then(function(e){setTimeout(function(){s.doLoadingDataHoSo()},300)}).catch(function(){setTimeout(function(){s.doLoadingDataHoSo()},300)})}}else alert("Chọn hồ sơ để thực hiện")},gotoStep(e,t){let a=this;a.$router.history.current.query;if(a.selectedDoAction.length>0){let e=a.selectedDoAction.length,i=confirm("Xác thực "+t["stepName"]+" hồ sơ với mã: "+a.selectedDoAction[e-1].dossierNo);if(i){let i={dossierId:a.selectedDoAction[e-1].dossierId,stepCode:t["stepCode"]};a.$store.dispatch("goToStep",i).then(function(e){setTimeout(function(){a.doLoadingDataHoSo()},300)}).catch(function(){setTimeout(function(){a.doLoadingDataHoSo()},300)})}}else alert("Chọn hồ sơ để thực hiện")},doChangeDossierExtraForm(){let e=this,t=e.$refs.formBoSungThongTinNgan.checkValid();if(t){let t=e.$refs.formBoSungThongTinNgan.formSubmitData();if(t){let a=confirm("Bạn có chắc chắn thực hiện hành động điều chỉnh dữ liệu?");if(a){let a=e.selectedDoAction.length,i={dossierId:e.selectedDoAction[a-1].dossierId,actionCode:e.actionId,payload:t};e.$store.dispatch("processDossierRouter",i).then(function(t){e.doLoadingDataHoSo(),e.dialog_extraForm=!1}).catch(function(){e.dialog_extraForm=!1,e.doLoadingDataHoSo()})}}else e.dialog_extraForm=!1}},doRestoreDossier(){let e=this,t=confirm("Bạn có chắc chắn thực hiện hành động khôi phục hồ sơ?");if(t)if(e.selectedDoAction.length>0){let t=0,a=e.selectedDoAction.length;for(let i in e.selectedDoAction){let s={dossierId:e.selectedDoAction[i]["dossierId"]};console.log("filter Restore",s),e.selectedDoAction[i]["originality"]&&e.$store.dispatch("restoreDossier",s).then(function(i){t+=1,t===a&&e.doLoadingDataHoSo()}).catch(function(){t+=1,t===a&&e.doLoadingDataHoSo()})}}else alert("Chọn hồ sơ để thực hiện")},doDeleteDossier(e,t,a,i){let s=this,o=confirm("Bạn có chắc chắn thực hiện hành động xóa hồ sơ?");if(!o)return!1;{let t=s.$router.history.current.query;if(i){let e={dossierId:0};if(s.selectedDoAction.length>0){let t=[];for(let e in s.selectedDoAction)t.push(s.selectedDoAction[e]["dossierId"]);e["dossierId"]=t,s.$store.dispatch("deleteDossierPatch",e).then(function(e){})}else alert("Chọn hồ sơ để thực hiện")}else{let a={dossierId:e.dossierId};s.$store.dispatch("deleteDossier",a).then(function(e){s.dialogActionProcess=!1,s.loadingActionProcess=!1,s.$router.push({path:s.$router.history.current.path,query:{recount:Math.floor(100*Math.random())+1,renew:Math.floor(100*Math.random())+1,q:t["q"]}})})}}},doCreateDossier(){let e=this,t={serviceCode:e.serviceCode,govAgencyCode:e.govAgencyCode,templateNo:e.templateNo,originality:e.getOriginality()};e.$store.commit("setDataCreateDossier",t),e.loadingAction=!0,e.$store.dispatch("postDossier",t).then(function(t){e.loadingAction=!1,e.indexAction=-1,e.$router.push({path:"/danh-sach-ho-so/"+e.index+"/ho-so/"+t.dossierId+"/"+e.itemAction.form,query:e.$router.history.current.query})}).catch(t=>{e.loadingAction=!1})},doSubmitDialogAction(e){let t=this;t.$refs.form.validate()&&t.doCreateDossier()},processPullBtnDynamics(e){let t=this;t.btnDossierDynamics=[];let a={dossierId:e.dossierId,dossierStatus:e.dossierStatus,dossierSubStatus:e.dossierSubStatus};if(t.dossierId=e.dossierId,""===e.dossierStatus||""===e.dossierSubStatus)t.$store.dispatch("pullNextactions",a).then(e=>{t.btnDossierDynamics=e});else{t.btnStepsDynamics=[];var i=[t.$store.dispatch("pullNextactions",a),t.$store.dispatch("pullBtnConfigStep",a)];Promise.all(i).then(e=>{t.btnDossierDynamics=e[0],t.btnStepsDynamics=e[1]}).catch(e=>{t.$store.dispatch("pullNextactions",a).then(e=>{t.btnDossierDynamics=e})})}},processAction(e,t,a,i,s){let o=this;var n=null;o.payments&&(n={requestPayment:o.payments["requestPayment"],advanceAmount:Number(o.payments["advanceAmount"].toString().replace(/\./g,"")),feeAmount:Number(o.payments["feeAmount"].toString().replace(/\./g,"")),serviceAmount:Number(o.payments["serviceAmount"].toString().replace(/\./g,"")),shipAmount:Number(o.payments["shipAmount"].toString().replace(/\./g,""))});let r={dossierId:e.dossierId,actionCode:a.actionCode,toUsers:o.assign_items,payment:n,userNote:o.textNote?o.textNote:""};o.dossierId=e.dossierId;let l=o.$router.history.current.query,c="?";l["recount"]=Math.floor(100*Math.random())+1,l["renew"]=Math.floor(100*Math.random())+1;for(let d in l)""!==l[d]&&"undefined"!==l[d]&&void 0!==l[d]&&(c+=d+"="+l[d]+"&");if(o.loadingActionProcess=!0,s){let e=confirm("Bạn có muốn thực hiện hành động này?");if(!e)return!1;o.$store.dispatch("processDossierRouter",r).then(function(e){o.dialogActionProcess=!1,o.loadingActionProcess=!1,o.$router.push({path:o.$router.history.current.path+c})})}else e.statusAction||o.$store.dispatch("processCheckNextActions",r).then(function(e){o.$store.dispatch("processDossierRouter",e).then(function(e){o.dialogActionProcess=!1,o.loadingActionProcess=!1,"ACTIONS"===String(t.form)?(o.hosoDatas.splice(i,1),o.selectedDoAction[i].statusAction=!0,o.countSelected+=1,o.countSelected===o.selectedDoAction.length&&o.statusFailed>0&&o.selectedDoAction.length>1?o.dialog_statusAction=!0:o.countSelected===o.selectedDoAction.length&&0===o.statusFailed&&o.$router.push({path:o.$router.history.current.path,query:{recount:Math.floor(100*Math.random())+1,renew:Math.floor(100*Math.random())+1,q:l["q"]}})):o.$router.push({path:o.$router.history.current.path,query:{recount:Math.floor(100*Math.random())+1,renew:Math.floor(100*Math.random())+1,q:l["q"]}})}).catch(function(){o.loadingActionProcess=!1,"ACTIONS"===String(t.form)&&(o.countSelected+=1,o.statusFailed+=1,o.selectedDoAction[i].statusAction=!1,o.countSelected===o.selectedDoAction.length&&o.statusFailed>0&&o.selectedDoAction.length>1&&(o.dialog_statusAction=!0))})})},processPullBtnDetailRouter(e,t,a,i,s){let o=this,n=!1;if(o.dossierId=e.dossierId,o.showYkienCanBoThucHien=!1,o.showFormBoSungThongTinNgan=!1,o.showPhanCongNguoiThucHien=!1,o.showTaoTaiLieuKetQua=!1,o.showKyPheDuyetTaiLieu=!1,o.showTraKetQua=!1,o.showXacNhanThuPhi=!1,o.showThuPhi=!1,o.showThucHienThanhToanDienTu=!1,o.dossierItemDialogPick=e,o.itemDialogPick=t,o.resultDialogPick=a,o.indexDialogPick=i,o.userNote=0,null!==a&&void 0!==a&&"undefined"!==a&&(a.hasOwnProperty("userNote")||a.hasOwnProperty("extraForm")||a.hasOwnProperty("allowAssignUser")||a.hasOwnProperty("createFiles")||a.hasOwnProperty("eSignature")||a.hasOwnProperty("returnFiles")||a.hasOwnProperty("payment")||a.hasOwnProperty("overdue")||a.hasOwnProperty("betimes"))){if(!a.hasOwnProperty("userNote")||1!==a.userNote&&"1"!==a.userNote&&2!==a.userNote&&"2"!==a.userNote||(n=!0,o.showYkienCanBoThucHien=!0,o.userNote=a.userNote),a.hasOwnProperty("extraForm")&&a.extraForm&&(n=!0,o.showFormBoSungThongTinNgan=!0),a.hasOwnProperty("allowAssignUser")&&0!==a.allowAssignUser&&(o.assign_items=a.toUsers,o.type_assign=a.allowAssignUser,n=!0,o.showPhanCongNguoiThucHien=!0),a.hasOwnProperty("returnFiles")&&null!==a.createFiles&&void 0!==a.createFiles&&"undefined"!==a.createFiles&&a.createFiles.length>0&&(n=!0,o.showTaoTaiLieuKetQua=!0),a.hasOwnProperty("eSignature")&&a.eSignature&&(n=!0,o.showKyPheDuyetTaiLieu=!0),a.hasOwnProperty("returnFiles")&&null!==a.returnFiles&&void 0!==a.returnFiles&&"undefined"!==a.returnFiles&&a.returnFiles.length>0&&(n=!0,o.showTraKetQua=!0,o.returnFiles=a.returnFiles),a.hasOwnProperty("payment")&&null!==a.payment&&void 0!==a.payment&&"undefined"!==a.payment&&a.payment.requestPayment>0)if(2===a.payment.requestPayment||"2"===a.payment.requestPayment){n=!0;let e={dossierId:o.dossierId};o.$store.dispatch("loadDossierPayments",e).then(e=>{o.paymentProfile=e}).catch(e=>{})}else n=!0,o.showThuPhi=!0,o.payments=a.payment,o.viaPortalDetail=e.viaPostal;a.hasOwnProperty("overdue")&&(n=!0),a.hasOwnProperty("betimes")&&(n=!0)}if(n){let t={activeTab:"tabs-1",btnIndex:s};o.$router.push({path:"/danh-sach-ho-so/"+o.index+"/chi-tiet-ho-so/"+e["dossierId"],query:t})}else o.processAction(e,t,a,i,!0)},processPullBtnDetail(e,t,a,i){let s=this;if(1===t["enable"]||"special"===t["autoEvent"]){s.itemAction=t;let o={dossierId:e.dossierId,actionId:t.processActionId};s.dossierId=e.dossierId,s.loadingActionProcess=!0,s.$store.dispatch("processPullBtnDetail",o).then(function(o){s.processPullBtnDetailRouter(e,t,o,a,i)})}},goBack(){window.history.back()},viewDetail(e,t){let a=this;console.log("permission: ",e.permission),null!==e.permission&&""!==e.permission&&a.$router.push("/danh-sach-ho-so/"+this.index+"/chi-tiet-ho-so/"+e["dossierId"])},keywordEventChange(e){let t=this;t.selectMultiplePage=[],console.log("keywordEventChange",e),t.advObjectSearch={};for(let a in e)if("string"===typeof e[a]&&null!==e[a]&&void 0!==e[a]&&"undefined"!==e[a])if(e[a].startsWith("keyword:")||e[a].startsWith("year_month_day:")||e[a].startsWith("top:")||e[a].startsWith("status:")||e[a].startsWith("substatus:")||e[a].startsWith("agency:")||e[a].startsWith("service:")||e[a].startsWith("domain:")||e[a].startsWith("register:")||(t.advObjectSearch["keyword"]=e[a]),e[a].startsWith("keyword:"))t.advObjectSearch["keyword"]=e[a].replace("keyword:","");else for(let i in t.advSearchItems)e[a].startsWith(t.advSearchItems[i].spec+":")&&(t.advObjectSearch[t.advSearchItems[i].spec]=e[a].replace(t.advSearchItems[i].spec+":",""));else{let i=e[a].value;t.advObjectSearch[e[a].spec]=i.replace(e[a].spec+":","")}t.advSearchItems=[];for(let a in t.advObjectSearch){if(!t.advObjectSearch.hasOwnProperty(a))continue;let e=t.advObjectSearch[a];if("string"===typeof e&&null!==e&&void 0!==e&&""!==e)if("keyword"===a)t.advSearchItems.push({spec:a,value:a+":"+e,text:a+":"+e,index:-1});else{let i=-2;for(let e in t.advSearchTools)if(t.advSearchTools[e].spec===a){i=t.advSearchTools[e].index;break}t.advSearchItems.push({spec:a,value:a+":"+e,text:a+":"+e,index:i})}else"string"!==typeof e&&null!==e&&void 0!==e&&""!==e&&t.advSearchItems.push({spec:a,value:a+":"+e.value,text:a+":"+e.value,index:a+":"+e.index})}for(let a in t.advSearchTools)t.advSearchTools[a].display=!1,t.advSearchTools[a].disabled=!1,null!==t.advObjectSearch[t.advSearchTools[a].spec]&&void 0!==t.advObjectSearch[t.advSearchTools[a].spec]&&""!==t.advObjectSearch[t.advSearchTools[a].spec]&&(t.advSearchTools[a].display=!0,t.advSearchTools[a].disabled=!0);console.log("vm.advSearchItems",t.advSearchItems),t.doRedirectFilter()},selectedAdvFilter(e){let t=this;t.advSearchTools[e.index].display=!0,t.advSearchTools[e.index].disabled=!0;let a=!1;for(let i in t.advSearchItems)if(t.advSearchItems[i].index===e.index){a=!0;break}a||t.advSearchItems.push({spec:t.advSearchTools[e.index].spec,value:t.advSearchTools[e.index].spec+":__",text:t.advSearchTools[e.index].spec+":__",index:e.index})},showAdvFilter(){let e=this;e.menusss=!e.menusss,e.$store.dispatch("getStatusLists").then(function(t){e.itemFilterSupport.statusLists=t;let a={itemCode:"deleted",itemName:"Đã xóa"};e.getUser("Administrator_data")&&e.itemFilterSupport.statusLists.push(a)});let t={itemCode:""};e.$store.dispatch("getSubstatusLists",t).then(function(t){e.itemFilterSupport.substatusLists=t}),e.$store.dispatch("getAgencyLists").then(function(t){e.itemFilterSupport.agencyLists=t}),e.$store.dispatch("getServiceLists").then(function(t){e.itemFilterSupport.serviceLists=t}),e.$store.dispatch("getDomainLists").then(function(t){e.itemFilterSupport.domainLists=t})},changeAdvFilterData(e,t,a){let i=this;if(console.log("data change advSearch",e,t,a),"status"===t){let t={itemCode:e};i.$store.dispatch("getSubstatusLists",t).then(function(e){i.itemFilterSupport.substatusLists=e})}let s=e;"year"===t?(i.itemFilterSupport.year=e,s=i.itemFilterSupport.year+"_"+i.itemFilterSupport.month+"_"+i.itemFilterSupport.day,t="year_month_day"):"month"===t?(i.itemFilterSupport.month=e,s=i.itemFilterSupport.year+"_"+i.itemFilterSupport.month+"_"+i.itemFilterSupport.day,t="year_month_day"):"day"===t?(i.itemFilterSupport.day=e,s=i.itemFilterSupport.year+"_"+i.itemFilterSupport.month+"_"+i.itemFilterSupport.day,t="year_month_day"):i.itemFilterSupport[t]=e;for(let o in i.advSearchItems)if(console.log("adv Search index",i.advSearchItems[o].index),i.advSearchItems[o].index===a){console.log("vm.itemFilterSupport2",i.itemFilterSupport),i.advSearchItems[o].value=t+":"+s,i.advSearchItems[o].text=t+":"+s;break}i.doRedirectFilter()},doRedirectFilter(){let e=this;e.selectMultiplePage=[];let t=e.$router.history.current,a=t.query,i="?";for(let s in a)""!==a[s]&&"undefined"!==a[s]&&void 0!==a[s]&&"top"!==s&&"status"!==s&&"substatus"!==s&&"agency"!==s&&"service"!==s&&"domain"!==s&&"register"!==s&&"year"!==s&&"month"!==s&&"day"!==s&&"adv_renew"!==s&&"keyword"!==s&&(i+=s+"="+a[s]+"&");for(let s in e.advSearchItems){let t=e.advSearchItems[s];if("year_month_day"===t.spec){let e=t.text.replace(t.spec+":","");const[a,s,o]=e.split("_");i+="year="+a+"&month="+s+"&day="+o+"&"}else console.log("currentItemFilter.spec",t.text.replace(t.spec+":","")),i+=t.spec+"="+t.text.replace(t.spec+":","")+"&"}i+="adv_renew="+Math.floor(100*Math.random())+1,i=i.replace(/=__/g,"="),e.$router.push({path:t.path+i})},changeAdvFilterDataChips(e){let t=this,a=-2;for(let o in t.advSearchTools)"delay"===e.key||"overdue"===e.key||"coming"===e.key?"top"===t.advSearchTools[o]["spec"]&&(a=t.advSearchTools[o]["index"],t.advSearchTools[o].display=!0,t.advSearchTools[o].disabled=!0):"status"===t.advSearchTools[o]["spec"]&&(a=t.advSearchTools[o]["index"],t.advSearchTools[o].display=!0,t.advSearchTools[o].disabled=!0);let i="";i="delay"===e.key||"overdue"===e.key||"coming"===e.key?"top":"status";let s=!0;for(let o in t.advSearchItems)if("status"===t.advSearchItems[o]["spec"]){if("delay"!==e.key&&"overdue"!==e.key&&"coming"!==e.key){t.advSearchItems[o].value="status:"+e.key,t.advSearchItems[o].text="status:"+e.key,s=!1;break}}else if("top"===t.advSearchItems[o]["spec"]&&("delay"===e.key||"overdue"===e.key||"coming"===e.key)){t.advSearchItems[o].value="top:"+e.key,t.advSearchItems[o].text="top:"+e.key,s=!1;break}s&&t.advSearchItems.push({spec:i,value:i+":"+e.key,text:i+":"+e.key,index:a}),t.doRedirectFilter()},validate(){return!0},callback(e){e?alert(e):alert("please check you are not robot")}}},v=g,_=a("2877"),f=a("6544"),y=a.n(f),C=a("c6a6"),T=a("8212"),x=a("8336"),D=a("b0af"),S=a("99d9"),b=a("12b2"),P=a("ac7c"),I=a("cc20"),A=a("2b5d"),N=a("8fea"),w=a("169a"),k=a("0789"),E=a("0e8f"),F=a("4bd4"),O=a("132d"),H=a("a722"),L=a("8860"),$=a("ba95"),V=a("5d23"),M=a("e449"),U=a("490a"),B=a("8e36"),R=a("b56d"),K=a("9910"),q=a("2677"),j=a("3a2f"),W=Object(_["a"])(v,i,s,!1,null,null,null);W.options.__file="Landing.vue";t["default"]=W.exports;y()(W,{VAutocomplete:C["a"],VAvatar:T["a"],VBtn:x["a"],VCard:D["a"],VCardActions:S["a"],VCardText:S["b"],VCardTitle:b["a"],VCheckbox:P["a"],VChip:I["a"],VCombobox:A["a"],VDataTable:N["a"],VDialog:w["a"],VFadeTransition:k["b"],VFlex:E["a"],VForm:F["a"],VIcon:O["a"],VLayout:H["a"],VList:L["a"],VListTile:$["a"],VListTileTitle:V["c"],VMenu:M["a"],VProgressCircular:U["a"],VProgressLinear:B["a"],VSelect:R["a"],VSpacer:K["a"],VTextField:q["a"],VTooltip:j["a"]})},"4ea3":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"comment-temp"},[a("div",[a("v-expansion-panel",{staticClass:"expansion-pl-transparent",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("v-card",{staticClass:"comments__container"},[a("v-card-text",{staticClass:"pl-4"},[a("div",{attrs:{id:"comments-container-el"}})])],1)],1)],1)],1)])},s=[],o=a("854a"),n=a.n(o);n.a.options={closeButton:!0,timeOut:"10000"};var r={props:["classPK","className"],data:()=>({usersComment:[],comment:[],argShowMore:!0,checkOpinion:!0,validFileUpload:!0,fileTypeAllow:["png","jpg","jpeg","pdf","docx","doc","xls","xlsx","txt","rtf"]}),computed:{loading(){return this.$store.getters.loading},initData(){return this.$store.getters.loadingInitData}},watch:{classPK(e){var t=this;t.$store.dispatch("loadUsersComment",e).then(e=>{t.usersComment=e,t.initComment()}).catch(e=>{t.initComment()})}},created(){},mounted(){},methods:{runComment(){var e=this;e.classPK&&e.initComment()},validateFile(e){let t=this,a=e.file.name?e.file.name.split("."):"",i=a?a[a.length-1]:"",s=t.fileTypeAllow,o=10,r=s?s.filter(function(e){return e===i}):"";t.validFileUpload=!1,r&&r.length>0?Number(e.file.size)<=1048576*o?t.validFileUpload=!0:(n.a.error("Tài liệu tải lên dung lượng tối đa là "+o+" MB"),t.validFileUpload=!1):(n.a.error("Tài liệu tải lên chỉ chấp nhận các định dạng "+s.toString()),t.validFileUpload=!1)},initComment:function(){var e=this;window.$("#comments-container-el").comments({profilePictureURL:"https://png.icons8.com/material/50/000000/guest-male.png",textareaRows:2,enableAttachments:!0,enableHashtags:!0,enablePinging:!1,postCommentOnEnter:!1,forceResponsive:!1,readOnly:!1,textareaPlaceholderText:"Thêm bình luận mới",newestText:"Mới nhất",oldestText:"Cũ nhất",popularText:"Phổ biến",attachmentsText:"Đính kèm",sendText:"Gửi",replyText:"Trả lời",editText:"Sửa",editedText:"Đã sửa",youText:"Bạn",saveText:"Ghi lại",deleteText:"Xóa",hideRepliesText:"Ẩn câu trả lời",noCommentsText:"Không có bình luận nào",noAttachmentsText:"Không có tệp đính kèm",attachmentDropText:"Kéo thả tệp đính kèm",fieldMappings:{id:"commentId",parent:"parent",userId:"userId",created:"createdDate",modified:"modifiedDate",content:"content",fileURL:"fileUrl",fileMimeType:"fileType",fileName:"fileName",pings:"pings",creator:"userId",fullname:"fullname",profileURL:"profileUrl",profilePictureURL:"pictureUrl",isNew:"isNew",createdByAdmin:"isAdmin",createdByCurrentUser:"createdByCurrentUser",upvoteCount:"upvoteCount",userHasUpvoted:"userHasUpvoted",email:"email",opinion:"opinion",className:"className",classPK:"classPK"},timeFormatter:function(e){if(e){let t=new Date(e);return t.setHours(t.getHours()-7),`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()} ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`}return""},getUsers:function(t,a){t(e.usersComment)},getComments:function(t,a){var i={classPK:e.classPK,className:e.className};let s=e.$store.dispatch("loadCommentItems",i);s.then(a=>{var i=[];window.$.each(a,function(t,a){e.comment=a,e.formatComment(e.comment),i.push(e.comment)}),t(i)}).catch(e=>{t([]),a()})},postComment:function(t,a,i){t.classPK=e.classPK,t.className=e.className,t.opinion=document.getElementById("opinion").checked,e.$store.dispatch("postComment",t).then(t=>{t.opinion&&window.$(".opinion").hide(),document.getElementById("opinion").checked=!1,e.comment=t,e.formatComment(e.comment),a(e.comment)})},putComment:function(t,a,i){t.classPK=e.classPK,t.className=e.className,e.$store.dispatch("putComment",t).then(t=>{e.comment=t,e.formatComment(e.comment),a(e.comment)})},deleteComment:function(t,a,i){t.classPK=e.classPK,t.className=e.className,e.$store.dispatch("deleteComment",t).then(e=>{a()}).catch(e=>{i(),console.log(e)})},upvoteComment:function(t,a,i){t.classPK=e.classPK,t.className=e.className,e.$store.dispatch("upvoteComment",t).then(t=>{e.comment=t,e.formatComment(e.comment),a(e.comment)}).catch(e=>{console.log(e)})},uploadAttachments:function(t,a,i){var s=0,o=[],n=function(){s++,s===t.length&&(0===o.length?i():a(o))};window.$(t).each(function(t,a){var i=new FormData;window.$(Object.keys(a)).each(function(e,t){var s=a[t];s&&i.append(t,s)}),i.append("file",a.file),i.append("className",e.className),i.append("classPK",e.classPK),i.append("parent",null!=a.parent?a.parent:0),i.append("fileName",a.file.name),i.append("fileType",a.file.type),i.append("fileSize",a.file.size),i.append("pings",a.pings.join()),i.append("opinion",document.getElementById("opinion").checked),i.append("email",""),i.append("fullname",e.initData.user.userName),i.append("opinion",document.getElementById("opinion").checked);let s={file:a.file};e.validateFile(s),e.validFileUpload?window.$.ajax({url:e.initData.commentApi+"/uploads",dataType:"json",type:"POST",headers:{groupId:e.initData.groupId},data:i,cache:!1,contentType:!1,processData:!1,success:function(t){t.opinion&&window.$(".opinion").hide(),document.getElementById("opinion").checked=!1,e.formatComment(t),o.push(e.comment),n(),t.opinion&&window.$(".opinion").hide(),document.getElementById("opinion").checked=!1},error:function(e,t){n()}}):n()})}})},formatComment:function(e){var t=this;t.comment=e,0===e.parent&&(t.comment.parent=null),""===e.fileName&&(t.comment.fileName=null),""===e.fileType&&(t.comment.fileType=null),""===e.fileUrl&&(t.comment.fileUrl=null),""===e.pictureUrl&&(t.comment.pictureUrl="https://png.icons8.com/material/50/000000/guest-male.png"),t.comment.fullname=e.fullname,t.comment.opinion=e.opinion,t.comment.pings=e.pings.toString().split(","),t.comment.createdDate=t.comment.createDate,t.comment.modifiedDate=t.comment.modifiedDate},dateTimeView(e){if(e){let t=new Date(e);return`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()} ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`}return""}},filters:{dateTimeView(e){if(e){let t=new Date(e);return`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()}  ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`}return""}}},l=r,c=a("2877"),d=a("6544"),h=a.n(d),u=a("b0af"),p=a("99d9"),m=a("cd55"),g=a("49e2"),v=Object(c["a"])(l,i,s,!1,null,null,null);v.options.__file="Comment.vue";t["a"]=v.exports;h()(v,{VCard:u["a"],VCardText:p["b"],VExpansionPanel:m["a"],VExpansionPanelContent:g["a"]})},5338:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-form",{ref:"formTiepNhanHoSo",attrs:{"lazy-validation":""},model:{value:e.validTNHS,callback:function(t){e.validTNHS=t},expression:"validTNHS"}},[a("div",{staticClass:"row-header"},[a("div",{staticClass:"background-triangle-big"},["UPDATE"===e.formCode?a("span",[e._v("SỬA HỒ SƠ")]):"COPY"===e.formCode?a("span",[e._v("SAO CHÉP HỒ SƠ")]):a("span",[e._v("THÊM MỚI HỒ SƠ")])]),a("div",{staticClass:"layout row wrap header_tools row-blue"},[a("div",{staticClass:"flex xs8 sm10 pl-3 text-ellipsis text-bold",attrs:{title:e.thongTinChiTietHoSo.serviceName}},[e._v("\n        "+e._s(e.thongTinChiTietHoSo.serviceName)+"\n      ")]),a("div",{staticClass:"flex xs4 sm2 text-right",staticStyle:{"margin-left":"auto"}},[a("v-btn",{staticClass:"my-0 mx-0 btn-border-left",attrs:{flat:"","active-class":"temp_active"},on:{click:e.goBack}},[a("v-icon",{attrs:{size:"18"}},[e._v("reply")]),e._v("  \n          Quay lại\n        ")],1)],1)])]),1!==e.originality?a("div",{staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",[a("thong-tin-chung",{ref:"thongtinchunghoso"})],1)],1)],1):a("div",{staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),e._v("\n          HƯỚNG DẪN      \n        ")]),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:""}},[a("div",{staticClass:"ml-3 mr-3",domProps:{innerHTML:e._s(e.thongTinChiTietHoSo.dossierNote)}})])],1)],1)],1)],1),a("thong-tin-chu-ho-so",{ref:"thongtinchuhoso"}),1!==e.originality?a("div",[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",[a("div",{staticStyle:{display:"flex","align-items":"center"},attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),e._v("\n          Tên hồ sơ     \n        ")]),a("div",[a("v-card",[a("v-card-text",[a("v-text-field",{attrs:{"multi-line":"",rows:2,box:"",label:"nhập tên hồ sơ..."},model:{value:e.briefNote,callback:function(t){e.briefNote=t},expression:"briefNote"}})],1)],1)],1)])],1)],1):e._e(),a("div",{staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",[a("div",{staticStyle:{display:"flex","align-items":"center"},attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),e._v("\n          Thành phần hồ sơ     \n          "),e.stateEditSample||1===e.originality?1!==e.originality?a("v-text-field",{staticClass:"px-0 py-0",staticStyle:{width:"90px","max-width":"90px"},attrs:{type:"number"},model:{value:e.thongTinChiTietHoSo.sampleCount,callback:function(t){e.$set(e.thongTinChiTietHoSo,"sampleCount",t)},expression:"thongTinChiTietHoSo.sampleCount"}}):e._e():a("span",[e._v("("+e._s(0===e.thongTinChiTietHoSo.sampleCount?"?":e.thongTinChiTietHoSo.sampleCount)+" bộ hồ sơ)")]),e._v("  \n          "),e.stateEditSample||1===e.originality?1!==e.originality?a("v-icon",{staticStyle:{cursor:"pointer"},attrs:{size:"16",color:"primary"},on:{click:function(t){t.stopPropagation(),e.stateEditSample=!e.stateEditSample}}},[e._v("done")]):e._e():a("v-icon",{staticStyle:{cursor:"pointer"},attrs:{size:"16",color:"primary"},on:{click:function(t){t.stopPropagation(),e.stateEditSample=!e.stateEditSample}}},[e._v("edit")])],1),a("thanh-phan-ho-so",{ref:"thanhphanhoso",attrs:{onlyView:!1,id:"nm",partTypes:e.inputTypes}})],1)],1)],1),0!==e.viaPortalDetail?a("div",{staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"2"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),e._v("Dịch vụ chuyển phát kết quả")]),a("dich-vu-chuyen-phat-ket-qua",{ref:"dichvuchuyenphatketqua",on:{changeViapostal:e.changeViapostal}})],1)],1)],1):e._e(),a("div",{staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"2"}},[e.showThuPhi?a("thu-phi",{attrs:{viaPortal:e.viaPortalDetail},model:{value:e.payments,callback:function(t){e.payments=t},expression:"payments"}}):e._e()],1)],1)],1),a("v-tabs",{staticClass:"mb-4",attrs:{"icons-and-text":"",centered:""}},[a("v-tabs-slider",{attrs:{color:"primary"}}),1!==e.originality&&e.tiepNhanState?a("v-tab",{attrs:{href:"#tab-2"},on:{click:function(t){e.tiepNhanHoSo()}}},[a("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{flat:"",loading:e.loadingAction,disabled:e.loadingAction}},[a("v-icon",{attrs:{size:"20"}},[e._v("save")]),e._v("   \n        "),"UPDATE"===e.formCode?a("span",[e._v("Lưu hồ sơ")]):a("span",[e._v("Tiếp nhận")]),a("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])],1)],1):e._e(),1!==e.originality&&"UPDATE"!==e.formCode&&"COPY"!==e.formCode&&e.tiepNhanState?a("v-tab",{attrs:{href:"#tab-4"},on:{click:function(t){e.tiepNhanHoSo("add")}}},[a("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{flat:"",loading:e.loadingAction,disabled:e.loadingAction}},[a("v-icon",{attrs:{size:"20"}},[e._v("note_add")]),e._v("   \n        "),a("span",[e._v("Tiếp nhận và thêm mới")]),a("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])],1)],1):e._e(),1===e.originality?a("v-tab",{attrs:{href:"#tab-3"},on:{click:e.luuHoSo}},[a("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{flat:"",loading:e.loadingAction,disabled:e.loadingAction}},[a("v-icon",{attrs:{size:"20"}},[e._v("save")]),e._v("  \n        Lưu\n        "),a("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])],1)],1):e._e(),a("v-tab",{attrs:{href:"#tab-5"},on:{click:e.goBack}},[a("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{flat:"",loading:e.loadingAction,disabled:e.loadingAction}},[a("v-icon",{attrs:{size:"18"}},[e._v("reply")]),e._v("  \n        Quay lại\n        "),a("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])],1)],1)],1)],1)},s=[],o=a("a18c"),n=a("854a"),r=a.n(n),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-form",{ref:"formChuHoSo",attrs:{"lazy-validation":""},model:{value:e.valid_thongtinchuhoso,callback:function(t){e.valid_thongtinchuhoso=t},expression:"valid_thongtinchuhoso"}},[a("div",[a("div",{staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),e._v(" Thông tin chủ hồ sơ")]),a("v-card",[(!e.thongTinChuHoSo.userType||1===e.originality&&"business"===e.thongTinChuHoSo.applicantIdType)&&e.bussinessExits?a("v-tooltip",{staticStyle:{position:"absolute",right:"5px","z-index":"101"},attrs:{left:""}},[a("v-btn",{staticClass:"my-0 mt-1",staticStyle:{width:"32px!important",height:"32px!important"},attrs:{slot:"activator",fab:"",icon:"",small:"",dark:"",color:"primary"},nativeOn:{click:function(t){e.getApplicantInfos()}},slot:"activator"},[a("v-icon",{attrs:{dark:""}},[e._v("account_balance")])],1),a("span",[e._v("Đối chiếu thông tin doanh nghiệp")])],1):e._e(),a("v-card-text",{staticClass:"pt-3"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[e._v(" "+e._s(e.labelSwitch[e.thongTinChuHoSo.userType].cmtnd)+" "),a("span",{staticStyle:{color:"red"}},[e._v(" * ")]),e._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[1===e.originality||"1"===e.originality?a("v-text-field",{attrs:{rules:[function(e){return!!e||"Trường dữ liệu bắt buộc"}],required:"",disabled:e.loadingVerify},on:{input:e.changeApplicantInfos},model:{value:e.thongTinChuHoSo.applicantIdNo,callback:function(t){e.$set(e.thongTinChuHoSo,"applicantIdNo",t)},expression:"thongTinChuHoSo.applicantIdNo"}}):e._e(),3===e.originality||"3"===e.originality?a("suggestions",{class:e.loadingVerify?"input-group--disabled":"",style:e.loadingVerify?"color:#00000061":"",attrs:{options:e.searchOptions,onItemSelected:e.onSearchItemSelected,onInputChange:e.onInputChange},scopedSlots:e._u([{key:"item",fn:function(t){return a("div",{staticClass:"single-item"},[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:e._s(t.item.applicantName)}}),a("v-list-tile-sub-title",{domProps:{innerHTML:e._s(t.item.applicantIdNo)}})],1)],1)}}]),model:{value:e.thongTinChuHoSo.applicantIdNo,callback:function(t){e.$set(e.thongTinChuHoSo,"applicantIdNo",t)},expression:"thongTinChuHoSo.applicantIdNo"}}):e._e()],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[e._v(" "+e._s(e.labelSwitch[e.thongTinChuHoSo.userType].nguoi_nop)),a("span",{staticStyle:{color:"red"}},[e._v(" * ")]),e._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-text-field",{attrs:{rules:[function(e){return!!e||"Trường dữ liệu bắt buộc"}],required:"",disabled:e.loadingVerify},on:{input:e.changeApplicantInfos},model:{value:e.thongTinChuHoSo.applicantName,callback:function(t){e.$set(e.thongTinChuHoSo,"applicantName",t)},expression:"thongTinChuHoSo.applicantName"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[e._v("Địa chỉ "),1===e.originality?a("span",{staticStyle:{color:"red"}},[e._v(" * ")]):e._e(),e._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm10:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-text-field",{attrs:{"multi-line":"",rows:"2",rules:1===e.originality?[function(e){return!!e||"Trường dữ liệu bắt buộc"}]:"",required:""},model:{value:e.thongTinChuHoSo.address,callback:function(t){e.$set(e.thongTinChuHoSo,"address",t)},expression:"thongTinChuHoSo.address"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[e._v("Tỉnh/Thành phố"),a("span",{staticStyle:{color:"red"}},[e._v(" * ")]),e._v(" : ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-select",{attrs:{items:e.citys,"item-text":"itemName","item-value":"itemCode",autocomplete:"",rules:[function(e){return!!e||"Trường dữ liệu bắt buộc"}],required:""},on:{change:e.onChangeCity},model:{value:e.thongTinChuHoSo.cityCode,callback:function(t){e.$set(e.thongTinChuHoSo,"cityCode",t)},expression:"thongTinChuHoSo.cityCode"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[e._v("Quận/Huyện "),a("span",{staticStyle:{color:"red"}},[e._v(" * ")]),e._v(" : ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-select",{attrs:{items:e.districts,"item-text":"itemName","item-value":"itemCode",autocomplete:"",rules:[function(e){return!!e||"Trường dữ liệu bắt buộc"}],required:""},on:{change:e.onChangeDistrict},model:{value:e.thongTinChuHoSo.districtCode,callback:function(t){e.$set(e.thongTinChuHoSo,"districtCode",t)},expression:"thongTinChuHoSo.districtCode"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[e._v("Xã/Phường "),a("span",{staticStyle:{color:"red"}},[e._v(" * ")]),e._v(" : ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-select",{attrs:{items:e.wards,"item-text":"itemName","item-value":"itemCode",autocomplete:"",rules:[function(e){return!!e||"Trường dữ liệu bắt buộc"}],required:""},on:{change:e.onChangeWard},model:{value:e.thongTinChuHoSo.wardCode,callback:function(t){e.$set(e.thongTinChuHoSo,"wardCode",t)},expression:"thongTinChuHoSo.wardCode"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[e._v("Số điện thoại "),a("span",{staticStyle:{color:"red"}},[e._v(" * ")]),e._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-text-field",{attrs:{"append-icon":"phone",rules:[e.rules.telNo,e.rules.required],required:""},model:{value:e.thongTinChuHoSo.contactTelNo,callback:function(t){e.$set(e.thongTinChuHoSo,"contactTelNo",t)},expression:"thongTinChuHoSo.contactTelNo"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[e._v("Địa chỉ E-mail "),1===e.originality?a("span",{staticStyle:{color:"red"}},[e._v(" * ")]):e._e(),e._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-text-field",{attrs:{rules:1===e.originality?[e.rules.email,e.rules.required]:e.thongTinChuHoSo.contactEmail&&1!==e.originality?[e.rules.email]:"",required:""},model:{value:e.thongTinChuHoSo.contactEmail,callback:function(t){e.$set(e.thongTinChuHoSo,"contactEmail",t)},expression:"thongTinChuHoSo.contactEmail"}})],1)],1)],1)],1)],1)],1),1!==e.originality?a("div",{staticClass:"absolute__btn",staticStyle:{width:"380px"}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-radio-group",{attrs:{row:""},on:{change:e.checkApplicantInfos},model:{value:e.thongTinChuHoSo.userType,callback:function(t){e.$set(e.thongTinChuHoSo,"userType",t)},expression:"thongTinChuHoSo.userType"}},[a("v-radio",{attrs:{label:"Công dân",value:!0}}),a("v-radio",{attrs:{label:"Tổ chức, doanh nghiệp",value:!1}})],1)],1):e._e(),1!==e.originality?a("div",{staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),e._v(" Thông tin người nộp hồ sơ")]),a("v-card",[a("v-card-text",[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[e._v("CMND/Hộ chiếu "),a("span",{staticStyle:{color:"red"}},[e._v(" * ")]),e._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):e._e(),1===e.originality||"1"===e.originality?a("v-text-field",{attrs:{rules:[function(e){return!!e||"Trường dữ liệu bắt buộc"}],required:""},model:{value:e.thongTinNguoiNopHoSo.delegateIdNo,callback:function(t){e.$set(e.thongTinNguoiNopHoSo,"delegateIdNo",t)},expression:"thongTinNguoiNopHoSo.delegateIdNo"}}):e._e(),3===e.originality||"3"===e.originality?a("suggestions",{attrs:{options:e.searchOptions,onItemSelected:e.onSearchItemSelected1,onInputChange:e.onInputChange1},scopedSlots:e._u([{key:"item",fn:function(t){return a("div",{staticClass:"single-item"},[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:e._s(t.item.applicantName)}}),a("v-list-tile-sub-title",{domProps:{innerHTML:e._s(t.item.applicantIdNo)}})],1)],1)}}]),model:{value:e.thongTinNguoiNopHoSo.delegateIdNo,callback:function(t){e.$set(e.thongTinNguoiNopHoSo,"delegateIdNo",t)},expression:"thongTinNguoiNopHoSo.delegateIdNo"}}):e._e()],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[e._v("Họ và tên "),a("span",{staticStyle:{color:"red"}},[e._v(" * ")]),e._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-text-field",{attrs:{rules:[function(e){return!!e||"Trường dữ liệu bắt buộc"}],required:""},model:{value:e.thongTinNguoiNopHoSo.delegateName,callback:function(t){e.$set(e.thongTinNguoiNopHoSo,"delegateName",t)},expression:"thongTinNguoiNopHoSo.delegateName"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[e._v("Địa chỉ: ")])],1),a("v-flex",{attrs:{xs12:"",sm10:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-text-field",{attrs:{"multi-line":"",rows:"2"},model:{value:e.thongTinNguoiNopHoSo.delegateAddress,callback:function(t){e.$set(e.thongTinNguoiNopHoSo,"delegateAddress",t)},expression:"thongTinNguoiNopHoSo.delegateAddress"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[e._v("Tỉnh/Thành phố "),a("span",{staticStyle:{color:"red"}},[e._v(" * ")]),e._v(" : ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-select",{attrs:{items:e.citys,"item-text":"itemName","item-value":"itemCode",autocomplete:"",rules:[function(e){return!!e||"Trường dữ liệu bắt buộc"}],required:""},on:{change:e.onChangeDelegateCity},model:{value:e.thongTinNguoiNopHoSo.delegateCityCode,callback:function(t){e.$set(e.thongTinNguoiNopHoSo,"delegateCityCode",t)},expression:"thongTinNguoiNopHoSo.delegateCityCode"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[e._v("Quận/Huyện "),a("span",{staticStyle:{color:"red"}},[e._v(" * ")]),e._v(" : ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-select",{attrs:{items:e.delegateDistricts,"item-text":"itemName","item-value":"itemCode",autocomplete:"",rules:[function(e){return!!e||"Trường dữ liệu bắt buộc"}],required:""},on:{change:e.onChangeDelegateDistrict},model:{value:e.thongTinNguoiNopHoSo.delegateDistrictCode,callback:function(t){e.$set(e.thongTinNguoiNopHoSo,"delegateDistrictCode",t)},expression:"thongTinNguoiNopHoSo.delegateDistrictCode"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[e._v("Xã/Phường "),a("span",{staticStyle:{color:"red"}},[e._v(" * ")]),e._v(" : ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-select",{attrs:{items:e.delegateWards,"item-text":"itemName","item-value":"itemCode",autocomplete:"",rules:[function(e){return!!e||"Trường dữ liệu bắt buộc"}],required:""},model:{value:e.thongTinNguoiNopHoSo.delegateWardCode,callback:function(t){e.$set(e.thongTinNguoiNopHoSo,"delegateWardCode",t)},expression:"thongTinNguoiNopHoSo.delegateWardCode"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[e._v("Số điện thoại: ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-text-field",{attrs:{rules:[e.rules.telNo],"append-icon":"phone"},model:{value:e.thongTinNguoiNopHoSo.delegateTelNo,callback:function(t){e.$set(e.thongTinNguoiNopHoSo,"delegateTelNo",t)},expression:"thongTinNguoiNopHoSo.delegateTelNo"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[e._v("Email: ")])],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-text-field",{attrs:{rules:e.thongTinNguoiNopHoSo.delegateEmail?[e.rules.email]:""},model:{value:e.thongTinNguoiNopHoSo.delegateEmail,callback:function(t){e.$set(e.thongTinNguoiNopHoSo,"delegateEmail",t)},expression:"thongTinNguoiNopHoSo.delegateEmail"}})],1)],1)],1)],1)],1)],1),a("div",{staticClass:"absolute__btn",staticStyle:{width:"150px","margin-top":"4px"}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-checkbox",{attrs:{label:"Giống chủ hồ sơ"},model:{value:e.thongTinNguoiNopHoSo.sameUser,callback:function(t){e.$set(e.thongTinNguoiNopHoSo,"sameUser",t)},expression:"thongTinNguoiNopHoSo.sameUser"}})],1)],1):e._e()],1)])]),a("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"700px"},model:{value:e.dialog_applicantInfos,callback:function(t){e.dialog_applicantInfos=t},expression:"dialog_applicantInfos"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("\n        Thông tin doanh nghiệp\n      ")]),a("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.dialog_applicantInfos=!1}}},[a("v-icon",[e._v("clear")])],1),a("v-card-text",{staticClass:"py-1"},[a("v-layout",{staticClass:"py-1 align-center",attrs:{wrap:""}},[a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2"},[a("span",{staticClass:"text-bold"},[e._v("Tên tổ chức, doanh nghiệp: ")]),a("span",[e._v(e._s(e.applicantInfos.applicantName))])])]),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2"},[a("span",{staticClass:"text-bold"},[e._v("Mã số thuế: ")]),a("span",[e._v(e._s(e.applicantInfos.applicantIdNo))])])]),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2"},[a("span",{staticClass:"text-bold"},[e._v("Loại hình doanh nghiệp: ")]),a("span",[e._v(e._s(e.applicantInfos.companyType))])])]),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2"},[a("span",{staticClass:"text-bold"},[e._v("Địa chỉ:")]),a("span",[e._v(e._s(e.applicantInfos.address))])])]),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2"},[a("span",{staticClass:"text-bold"},[e._v("Người đại diện: ")]),a("span",[e._v(e._s(e.applicantInfos.representatives))])])]),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2"},[a("span",{staticClass:"text-bold"},[e._v("Tình trạng: ")]),a("span",[e._v(e._s(e.applicantInfos.companyStatus))])])])],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"mr-3",attrs:{color:"primary"},nativeOn:{click:function(t){e.dialog_applicantInfos=!1}}},[a("v-icon",[e._v("clear")]),e._v("  \n          Thoát\n        ")],1)],1)],1)],1)],1)},c=[],d=a("bc3a"),h=a.n(d),u=a("c4f6"),p=a.n(u);r.a.options={closeButton:!0,timeOut:"5000"};var m={components:{suggestions:p.a},data:()=>({valid_thongtinchuhoso:!1,loadingVerify:!1,citys:[],delegateDistricts:[],districts:[],delegateWards:[],wards:[],applicantItems:[],applicantItems2:[],applicantIdNo:"",labelSwitch:{true:{cmtnd:"CMND/ Hộ chiếu",nguoi_nop:"Họ và tên"},false:{cmtnd:"Mã số thuế",nguoi_nop:"Tên tổ chức, doanh nghiệp"}},thongTinChuHoSo:{userType:!0,cityCode:"",districtCode:"",wardCode:"",applicantIdNo:"",applicantIdType:"",contactEmail:"",contactTelNo:"",contactName:"",address:"",applicantName:""},thongTinNguoiNopHoSo:{sameUser:!1,delegateName:"",delegateCityCode:"",delegateAddress:"",delegateDistrictCode:"",delegateWardCode:"",delegateEmail:"",delegateTelNo:"",delegateIdNo:""},applicantInfos:{applicantName:"",applicantIdNo:"",companyType:"",companyStatus:"",address:"",representatives:""},bussinessExits:!1,validBussinessInfos:!0,messageCheckApplicant:"",search:null,search2:null,searchQuery:"",selectedSearchItem:null,searchOptions:{},functionTimeOut:null,dialog_applicantInfos:!1,rules:{required:e=>!!e||"Trường dữ liệu bắt buộc",email:e=>{const t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)||"Địa chỉ Email không hợp lệ"},passWord:e=>{const t=/^(?![0-9]{6,})[0-9a-zA-Z]{6,}$/;return t.test(e)||"Gồm các ký tự 0-9, a-z và ít nhất 6 ký tự"},telNo:e=>{const t=/^([0-9]{0,})$/;return t.test(e)||"Gồm các ký tự 0-9"}}}),computed:{loading(){return this.$store.getters.loading},originality(){var e=this;return console.log("originality",e.getOriginality()),e.getOriginality()},viaPostal(){return this.$store.getters.viaPostal},dichVuChuyenPhatKetQua(){return this.$store.getters.dichVuChuyenPhatKetQua},ThongTinChuHoSoBindChuyenPhat(){let e={cityCode:this.thongTinChuHoSo.cityCode,address:this.thongTinChuHoSo.address,districtCode:this.thongTinChuHoSo.districtCode,wardCode:this.thongTinChuHoSo.wardCode,contactTelNo:this.thongTinChuHoSo.contactTelNo};return e}},created(){},watch:{thongTinChuHoSo:{handler:function(e){let t=this,a={delegateName:e.applicantName,delegateCityCode:e.cityCode,delegateAddress:e.address,delegateDistrictCode:e.districtCode,delegateWardCode:e.wardCode,delegateEmail:e.contactEmail,delegateTelNo:e.contactTelNo,delegateIdNo:e.applicantIdNo};t.thongTinNguoiNopHoSo.sameUser&&(e.cityCode&&e.cityCode!==t.thongTinNguoiNopHoSo["delegateCityCode"]&&t.onChangeDelegateCity(e.cityCode),e.districtCode&&e.districtCode!==t.thongTinNguoiNopHoSo["delegateDistrictCode"]&&t.onChangeDelegateDistrict(e.districtCode),t.thongTinNguoiNopHoSo=Object.assign(t.thongTinNguoiNopHoSo,a))},deep:!0},thongTinNguoiNopHoSo:{handler:function(e){var t=this;let a=t.thongTinChuHoSo;if(e.sameUser){let e={delegateName:a.applicantName,delegateCityCode:a.cityCode,delegateAddress:a.address,delegateDistrictCode:a.districtCode,delegateWardCode:a.wardCode,delegateEmail:a.contactEmail,delegateTelNo:a.contactTelNo,delegateIdNo:a.applicantIdNo};a.cityCode&&a.cityCode!==t.thongTinNguoiNopHoSo["delegateCityCode"]&&t.onChangeDelegateCity(a.cityCode),a.districtCode&&a.districtCode!==t.thongTinNguoiNopHoSo["delegateDistrictCode"]&&t.onChangeDelegateDistrict(a.districtCode),t.thongTinNguoiNopHoSo=Object.assign(t.thongTinNguoiNopHoSo,e)}else this.$store.dispatch("resetThongTinNguoiNopHoSo")},deep:!0},ThongTinChuHoSoBindChuyenPhat(e){this.$store.commit("setThongTinChuHoSoBindChuyenPhat",e)},search(e){e&&this.querySelections(e)},search2(e){e&&this.querySelections2(e)}},methods:{initData(e){var t=this;t.$store.commit("setApplicantId",e.applicantIdNo);let a={delegateName:e.delegateName,delegateCityCode:e.delegateCityCode,delegateAddress:e.delegateAddress,delegateDistrictCode:e.delegateDistrictCode,delegateWardCode:e.delegateWardCode,delegateEmail:e.delegateEmail,delegateTelNo:e.delegateTelNo,delegateIdNo:e.delegateIdNo},i=Object.assign(t.thongTinNguoiNopHoSo,a);t.thongTinNguoiNopHoSo=i;let s=!0;"business"===e.applicantIdType&&(s=!1);let o={userType:s,cityCode:e.cityCode,districtCode:e.districtCode,wardCode:e.wardCode,applicantIdNo:e.applicantIdNo,applicantIdType:e.applicantIdType,contactEmail:e.contactEmail,contactName:e.contactName,contactTelNo:e.contactTelNo,address:e.address,applicantName:e.applicantName,cityName:e.cityName,districtName:e.districtName,wardName:e.wardName},n=Object.assign(t.thongTinChuHoSo,o);t.thongTinChuHoSo=n,t.checkApplicantInfos(),t.$nextTick(function(){var a={collectionCode:"ADMINISTRATIVE_REGION",level:0,parent:0};t.$store.getters.getDictItems(a).then(function(e){t.citys=e.data}),setTimeout(function(){e.cityCode&&t.$store.getters.getDictItems({collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:e.cityCode}).then(function(e){t.districts=e.data}),console.log("districtCode-----------",e.districtCode),e.districtCode&&t.$store.getters.getDictItems({collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:e.districtCode}).then(function(e){t.wards=e.data}),e.delegateCityCode&&t.$store.getters.getDictItems({collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:e.delegateCityCode}).then(function(e){t.delegateDistricts=e.data}),e.delegateDistrictCode&&t.$store.getters.getDictItems({collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:e.delegateDistrictCode}).then(function(e){t.delegateWards=e.data})},200)})},onChangeCity(e){var t=this;let a={collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:e};t.thongTinChuHoSo.districtCode="",t.thongTinChuHoSo.wardCode="",t.$store.commit("setCityVal",e),t.$store.getters.getDictItems(a).then(function(e){t.districts=e.data,t.wards=[],t.thongTinNguoiNopHoSo.sameUser&&(t.delegateDistricts=e.data,t.wards=[])})},onChangeDistrict(e){var t=this;let a={collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:e};t.thongTinChuHoSo.wardCode="",t.$store.commit("setDistrictVal",e),t.$store.getters.getDictItems(a).then(function(e){t.wards=e.data,t.thongTinNguoiNopHoSo.sameUser&&(t.delegateWards=e.data)})},onChangeWard(e){this.$store.commit("setWardVal",e)},querySelections(e){var t=this;let a={idNo:e};t.$store.dispatch("getUserInfoFromApplicantIdNo",a).then(e=>{t.applicantItems=e}).catch(e=>{})},querySelections2(e){var t=this;let a={idNo:e};t.$store.dispatch("getUserInfoFromApplicantIdNo",a).then(e=>{t.applicantItems2=e}).catch(e=>{})},onChangeDelegateCity(e){var t=this;t.thongTinNguoiNopHoSo.delegateDistrictCode="",t.thongTinNguoiNopHoSo.delegateWardCode="";let a={collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:e};t.$store.getters.getDictItems(a).then(function(e){t.delegateDistricts=e.data,t.thongTinNguoiNopHoSo.sameUser&&(t.districts=e.data)})},showValid(){var e=this;let t={validForm:e.$refs.formChuHoSo.validate(),message:e.messageCheckApplicant,validApplicant:e.validBussinessInfos};return t},onChangeDelegateDistrict(e){var t=this;t.thongTinNguoiNopHoSo.delegateWardCode="";let a={collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:e};t.$store.getters.getDictItems(a).then(function(e){t.delegateWards=e.data,t.thongTinNguoiNopHoSo.sameUser&&(t.wards=e.data)})},onInputChange(e){let t=this;if(t.functionTimeOut&&clearTimeout(t.functionTimeOut),t.functionTimeOut=setTimeout(function(){(3===t.originality&&!t.thongTinChuHoSo.userType||1===t.originality&&"business"===t.thongTinChuHoSo.applicantIdType)&&t.checkApplicantInfos(),t.$store.commit("setApplicantId",e)},2e3),0===e.trim().length)return null;const a=`/o/rest/v2/applicants?start=0&end=5&idNo=${e}`;return new Promise(e=>{t.$store.dispatch("loadInitResource").then(t=>{let i={headers:{}};h.a.get(a,i).then(t=>{let a=[];t.data.hasOwnProperty("data")&&(a=t.data.data),e(a)})})})},onInputChange1(e){let t=this;if(0===e.trim().length)return null;const a=`/o/rest/v2/applicants?start=0&end=5&idNo=${e}`;return new Promise(e=>{t.$store.dispatch("loadInitResource").then(t=>{let i={headers:{}};h.a.get(a,i).then(t=>{let a=[];t.data.hasOwnProperty("data")&&(a=t.data.data),e(a)})})})},onSearchItemSelected(e){var t=this;function a(e){return new Promise((a,i)=>{setTimeout(()=>{t.onChangeCity(e),a()},Math.floor(100*Math.random())+1)})}function i(e){return new Promise((a,i)=>{setTimeout(()=>{t.onChangeDistrict(e),a()},Math.floor(100*Math.random())+1)})}t.selectedSearchItem=e,console.log("selectedSearchItem",t.selectedSearchItem),t.thongTinChuHoSo["applicantIdNo"]=e.applicantIdNo.toString(),t.thongTinChuHoSo["applicantName"]=e["applicantName"]?e["applicantName"]:"",t.thongTinChuHoSo["address"]=e["address"]?e["address"]:"",t.thongTinChuHoSo["contactTelNo"]=e["contactTelNo"]?e["contactTelNo"]:"",t.thongTinChuHoSo["contactEmail"]=e["contactEmail"]?e["contactEmail"]:"",t.thongTinChuHoSo.cityCode=e["cityCode"]?e["cityCode"]:"",t.$store.commit("setApplicantId",t.thongTinChuHoSo["applicantIdNo"]),t.checkApplicantInfos(),""!==t.thongTinChuHoSo["cityCode"]&&null!==t.thongTinChuHoSo["cityCode"]&&void 0!==t.thongTinChuHoSo["cityCode"]&&0!==t.thongTinChuHoSo["cityCode"]&&"0"!==t.thongTinChuHoSo["cityCode"]&&a(t.thongTinChuHoSo["cityCode"]).then(function(){t.thongTinChuHoSo.districtCode=e["districtCode"]?e["districtCode"]:"",""!==t.thongTinChuHoSo["districtCode"]&&null!==t.thongTinChuHoSo["districtCode"]&&void 0!==t.thongTinChuHoSo["districtCode"]&&0!==t.thongTinChuHoSo["districtCode"]&&"0"!==t.thongTinChuHoSo["districtCode"]&&i(t.thongTinChuHoSo["districtCode"]).then(function(){t.thongTinChuHoSo.wardCode=e["wardCode"]?e["wardCode"]:""})})},onSearchItemSelected1(e){var t=this;function a(e){return new Promise((a,i)=>{setTimeout(()=>{t.onChangeCity(e),a()},Math.floor(100*Math.random())+1)})}function i(e){return new Promise((a,i)=>{setTimeout(()=>{t.onChangeDistrict(e),a()},Math.floor(100*Math.random())+1)})}t.selectedSearchItem=e,console.log("selectedSearchItem1",e),t.thongTinNguoiNopHoSo["delegateIdNo"]=e.applicantIdNo.toString(),t.thongTinNguoiNopHoSo["delegateName"]=e["applicantName"]?e["applicantName"]:"",t.thongTinNguoiNopHoSo["delegateAddress"]=e["address"]?e["address"]:"",t.thongTinNguoiNopHoSo["delegateTelNo"]=e["contactTelNo"]?e["contactTelNo"]:"",t.thongTinNguoiNopHoSo["delegateEmail"]=e["contactEmail"]?e["contactEmail"]:"",t.thongTinNguoiNopHoSo["delegateCityCode"]=e["cityCode"]?e["cityCode"]:"",null!==t.thongTinNguoiNopHoSo["delegateCityCode"]&&void 0!==t.thongTinNguoiNopHoSo["delegateCityCode"]&&0!==t.thongTinNguoiNopHoSo["delegateCityCode"]&&"0"!==t.thongTinNguoiNopHoSo["delegateCityCode"]&&a(t.thongTinNguoiNopHoSo["delegateCityCode"]).then(function(){t.thongTinNguoiNopHoSo["delegateDistrictCode"]=e["districtCode"]?e["districtCode"]:"",null!==t.thongTinNguoiNopHoSo["delegateDistrictCode"]&&void 0!==t.thongTinNguoiNopHoSo["delegateDistrictCode"]&&0!==t.thongTinNguoiNopHoSo["delegateDistrictCode"]&&"0"!==t.thongTinNguoiNopHoSo["delegateDistrictCode"]&&i(t.thongTinNguoiNopHoSo["delegateDistrictCode"]).then(function(){t.thongTinNguoiNopHoSo["delegateWardCode"]=e["wardCode"]?e["wardCode"]:""})})},getThongTinChuHoSo(){return this.thongTinChuHoSo},getThongTinNguoiNopHoSo(){return this.thongTinNguoiNopHoSo},changeApplicantInfos(){let e=this;e.functionTimeOut&&clearTimeout(e.functionTimeOut),e.functionTimeOut=setTimeout(function(){(3===e.originality&&!e.thongTinChuHoSo.userType||1===e.originality&&"business"===e.thongTinChuHoSo.applicantIdType)&&e.checkApplicantInfos(),e.$store.commit("setApplicantId",e.thongTinChuHoSo.applicantIdNo)},2e3)},checkApplicantInfos(){let e=this;if(3===e.originality&&!e.thongTinChuHoSo.userType&&e.thongTinChuHoSo.applicantIdNo||1===e.originality&&"business"===e.thongTinChuHoSo.applicantIdType){let t={applicantIdNo:e.thongTinChuHoSo.applicantIdNo,applicantName:e.thongTinChuHoSo.applicantName};e.$store.dispatch("checkApplicantInfos",t).then(t=>{t&&t.hasOwnProperty("error")&&!0===t.error?(e.bussinessExits=!1,e.validBussinessInfos=!1,e.messageCheckApplicant=t.message):t&&t.hasOwnProperty("warning")&&!0===t.warning?(e.bussinessExits=!0,e.validBussinessInfos=!1,e.messageCheckApplicant=t.message):!t||t.hasOwnProperty("error")||t.hasOwnProperty("warning")||(e.bussinessExits=!0,e.validBussinessInfos=!0)}).catch(function(){e.loadingVerify=!1})}},getApplicantInfos(){let e=this,t={applicantIdNo:e.thongTinChuHoSo.applicantIdNo};e.$store.dispatch("getApplicantInfos",t).then(t=>{e.applicantInfos["applicantName"]=t["MainInformation"]["NAME"],e.applicantInfos["applicantIdNo"]=t["MainInformation"]["ENTERPRISE_GDT_CODE"],e.applicantInfos["address"]=t["HOAdress"]["AddressFullText"],e.applicantInfos["representatives"]=t["Representatives"]["FULL_NAME"],e.applicantInfos["companyType"]=t["MainInformation"]["ENTERPRISE_TYPE_NAME"],e.applicantInfos["companyStatus"]=t["MainInformation"]["ENTERPRISE_STATUS_NAME"],e.dialog_applicantInfos=!0})}}},g=m,v=a("2877"),_=a("6544"),f=a.n(_),y=a("8336"),C=a("b0af"),T=a("99d9"),x=a("12b2"),D=a("ac7c"),S=a("169a"),b=a("cd55"),P=a("49e2"),I=a("0e8f"),A=a("4bd4"),N=a("132d"),w=a("a722"),k=a("5d23"),E=a("67b6"),F=a("43a6"),O=a("b56d"),H=a("9910"),L=a("e0c7"),$=a("2677"),V=a("3a2f"),M=Object(v["a"])(g,l,c,!1,null,null,null);M.options.__file="TiepNhanHoSo_ThongTinChuHoSo.vue";var U=M.exports;f()(M,{VBtn:y["a"],VCard:C["a"],VCardActions:T["a"],VCardText:T["b"],VCardTitle:x["a"],VCheckbox:D["a"],VDialog:S["a"],VExpansionPanel:b["a"],VExpansionPanelContent:P["a"],VFlex:I["a"],VForm:A["a"],VIcon:N["a"],VLayout:w["a"],VListTileContent:k["a"],VListTileSubTitle:k["b"],VListTileTitle:k["c"],VRadio:E["a"],VRadioGroup:F["a"],VSelect:O["a"],VSpacer:H["a"],VSubheader:L["a"],VTextField:$["a"],VTooltip:V["a"]});var B=a("93f5"),R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-card",[a("v-card-text",[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[e._v("\n            Mã hồ sơ: \n          ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"text-bold",staticStyle:{float:"left"}},[a("span",{staticClass:"text-bold"},[e._v("\n              "+e._s(e.thongTinChungHoSo.dossierNo)+"\n            ")])])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[e._v("Thời gian giải quyết: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):e._e(),e.loading?e._e():a("v-subheader",{staticStyle:{float:"left"}},[a("span",{staticClass:"text-bold"},[e._v("\n              "+e._s(e.durationText(e.thongTinChungHoSo.durationUnit,e.thongTinChungHoSo.durationCount))+" làm việc\n            ")])])],1),a("v-flex",{attrs:{xs12:""}}),a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[e._v("Ngày tiếp nhận: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticStyle:{float:"left"}},[a("span",{staticClass:"text-bold"},[e._v(e._s(e.thongTinChungHoSo.receiveDate))])])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[e._v("Ngày hẹn trả: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):e._e(),e.loading||!1!==e.editable&&null!==e.editable&&void 0!==e.editable&&"undefined"!==e.editable?e._e():a("v-subheader",{staticStyle:{float:"left",height:"100%"}},[a("span",{staticClass:"text-bold"},[e._v("\n              "+e._s(e.thongTinChungHoSo.dueDate)+"\n            ")])]),e.loading||!0!==e.editable?e._e():a("v-subheader",{staticStyle:{float:"left",height:"100%"}},[a("vue-ctk-date-time-picker",{ref:"datepicker",attrs:{format:"YYYY-MM-DDTHH:mm",formatted:"DD/MM/YYYY HH:mm","time-format":"HH:mm","without-header":!0,label:e.dueDateInput?"":"Chọn ngày","min-date":e.minDate},model:{value:e.dueDateInput,callback:function(t){e.dueDateInput=t},expression:"dueDateInput"}}),a("v-icon",{staticClass:"hover-pointer",on:{click:e.showDatePicker}},[e._v("event")])],1)],1)],1)],1)],1)],1)},K=[],q=a("e30a"),j=a.n(q),W={components:{"vue-ctk-date-time-picker":j.a},data:()=>({minDate:null,editable:!1,dueDateInput:null,dataPostDossier:{serviceCode:"",govAgencyCode:"",processOptionId:""},thongTinChungHoSo:{serviceName:"",dossierTemplateName:"",serviceConfig:"",serviceOption:"",dossierNo:"",receiveDate:"",dueDate:"",durationDate:"",dossierId:"",dossierIdCTN:"",dossierStatus:"",dossierStatusText:"",durationUnit:"",durationCount:""}}),created(){var e=this;e.$nextTick(function(){e.minDate=e.getCurentDateTime("date")})},computed:{loading(){return this.$store.getters.loading},isDetail(){return this.$store.getters.isDetail}},watch:{dueDateInput(e){this.thongTinChungHoSo["dueDate"]=this.getDuedateF(e)}},methods:{initData(e){var t=this;let a={serviceName:e.serviceName,dossierTemplateName:e.dossierTemplateName,dossierNo:e.dossierNo?e.dossierNo:"",dueDate:null,receiveDate:e.receivingDate?t.dateTimeView(e.receivingDate):e.receiveDate,durationDate:e.durationDate,dossierId:e.dossierId,dossierIdCTN:e.dossierIdCTN,dossierStatus:e.dossierStatus,dossierStatusText:e.dossierStatusText,durationUnit:e.durationUnit,durationCount:e.durationCount};e.receivingDuedate&&e.editable?a.dueDate=e.receivingDuedate:e.receivingDuedate&&!e.editable?a.dueDate=e.receivingDuedate?t.dateTimeView(e.receivingDuedate):e.dueDate:a.dueDate=e.dueDate,t.thongTinChungHoSo=a,t.editable=e.editable,t.thongTinChungHoSo["editable"]=t.editable,t.editable&&(t.dueDateInput=t.thongTinChungHoSo.dueDate?t.formatDateInput(new Date(Number(t.thongTinChungHoSo.dueDate))):null),t.minDate=t.getCurentDateTime("date")},getthongtinchunghoso(){return this.thongTinChungHoSo},getCurentDateTime(e){let t=new Date;return"datetime"===e?`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()} | ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`:"date"===e?`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate()}`:void 0},changeDate(){this.thongTinChungHoSo["dueDate"]=this.getDuedate()},changeDossierNo(e){this.thongTinChungHoSo["dossierNo"]=e},getDuedate(){let e=this.dueDateInput?new Date(this.dueDateInput).getTime():"";return e},getDuedateF(e){let t=new Date(e).getTime();return t},durationText(e,t){var a;if(1===e&&t>8){let e,i=Math.floor(t/8)+" ngày";e=t%8!==0?8*(t/8-Math.floor(t/8))+" giờ":"",a=`${i} ${e}`}else 0===e?a=t+" ngày":1===e&&t<=8&&(a=t+" giờ");return a},goBack(){let e=this,t=e.$router.history.current.params,a=e.$router.history.current.query;e.$router.push({path:"/danh-sach-ho-so/"+t.index,query:a})},dateTimeView(e){if(e){let t=new Date(e);return`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()} ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`}},formatDateInput(e){return`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")} ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`},showDatePicker(){this.$refs.datepicker.showDatePicker()}},filters:{dateTimeView(e){if(e){let t=new Date(e);return`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()} ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`}return""}}},G=W,z=Object(v["a"])(G,R,K,!1,null,null,null);z.options.__file="TiepNhanHoSo_ThongTinChung.vue";var Y=z.exports;f()(z,{VCard:C["a"],VCardText:T["b"],VFlex:I["a"],VIcon:N["a"],VLayout:w["a"],VSubheader:L["a"]});var Q=a("f374"),J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-card",[a("v-card-text",[a("v-slide-y-transition",[2===e.dichVuChuyenPhatKetQua.viaPostal?a("v-form",{ref:"formDichVuChuyenPhat",attrs:{"lazy-validation":""},model:{value:e.valid_dichvuchuyenphat,callback:function(t){e.valid_dichvuchuyenphat=t},expression:"valid_dichvuchuyenphat"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[e._v("Dịch vụ đăng ký "),a("span",{staticStyle:{color:"red"}},[e._v(" * ")]),e._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm10:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-select",{attrs:{items:e.postalServiceItems,"item-text":"itemName","item-value":"itemCode",autocomplete:"",rules:[function(e){return!!e||"Trường dữ liệu bắt buộc"}],required:""},model:{value:e.dichVuChuyenPhatKetQua.postalServiceCode,callback:function(t){e.$set(e.dichVuChuyenPhatKetQua,"postalServiceCode",t)},expression:"dichVuChuyenPhatKetQua.postalServiceCode"}})],1),a("v-flex",{attrs:{xs12:""}}),a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[e._v("Địa chỉ trả kết quả"),a("span",{staticStyle:{color:"red"}},[e._v(" * ")]),e._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-text-field",{attrs:{rules:[function(e){return!!e||"Trường dữ liệu bắt buộc"}],required:""},model:{value:e.dichVuChuyenPhatKetQua.postalAddress,callback:function(t){e.$set(e.dichVuChuyenPhatKetQua,"postalAddress",t)},expression:"dichVuChuyenPhatKetQua.postalAddress"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[e._v("SĐT người nhận"),a("span",{staticStyle:{color:"red"}},[e._v(" * ")]),e._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-text-field",{attrs:{"append-icon":"phone",rules:[e.rules.telNo,e.rules.required],required:""},model:{value:e.dichVuChuyenPhatKetQua.postalTelNo,callback:function(t){e.$set(e.dichVuChuyenPhatKetQua,"postalTelNo",t)},expression:"dichVuChuyenPhatKetQua.postalTelNo"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0"},[e._v("Bưu cục"),a("span",{staticStyle:{color:"red"}},[e._v(" * ")]),e._v(": ")])],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-select",{attrs:{items:e.vnPostItems,"item-text":"itemName","item-value":"itemCode",autocomplete:"",rules:[function(e){return!!e||"Trường dữ liệu bắt buộc"}],required:""},model:{value:e.dichVuChuyenPhatKetQua.postalCityCode,callback:function(t){e.$set(e.dichVuChuyenPhatKetQua,"postalCityCode",t)},expression:"dichVuChuyenPhatKetQua.postalCityCode"}})],1)],1)],1):e._e()],1)],1)],1),a("div",{staticClass:"absolute__btn",staticStyle:{width:"400px","margin-top":"4px"}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):e._e(),a("v-radio-group",{attrs:{row:""},on:{change:function(t){e.changeViaPostal(t)}},model:{value:e.dichVuChuyenPhatKetQua.viaPostal,callback:function(t){e.$set(e.dichVuChuyenPhatKetQua,"viaPostal",t)},expression:"dichVuChuyenPhatKetQua.viaPostal"}},[a("v-radio",{attrs:{label:"Nhận kết quả trực tiếp",value:1}}),a("v-radio",{attrs:{label:"Nhận kết quả tại nhà",value:2}})],1)],1)],1)},X=[],Z={data:()=>({valid_dichvuchuyenphat:!1,citys:[],resultDistricts:[],resultWards:[],vnPostItems:[],postalServiceItems:[{itemName:"VNPOST",itemCode:"VNPOST"}],rules:{required:e=>!!e||"Trường dữ liệu bắt buộc",email:e=>{const t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)||"Địa chỉ Email không hợp lệ"},telNo:e=>{const t=/^([0-9]{0,})$/;return t.test(e)||"Gồm các ký tự 0-9"}}}),computed:{loading(){return this.$store.getters.loading},thongTinChuHoSoBindChuyenPhat(){return this.$store.getters.thongTinChuHoSoBindChuyenPhat},dichVuChuyenPhatKetQua(){return this.$store.getters.dichVuChuyenPhatKetQua}},created(){let e=this;e.$store.dispatch("getVNPOSTcode").then(t=>{e.vnPostItems=t}),this.postalServiceItems.length>0&&(this.dichVuChuyenPhatKetQua.postalServiceCode=this.postalServiceItems[0].itemCode)},watch:{thongTinChuHoSoBindChuyenPhat(e){}},mounted(){var e=this,t={collectionCode:"ADMINISTRATIVE_REGION",level:0,parent:0},a=e.dichVuChuyenPhatKetQua;e.$store.getters.getDictItems(t).then(function(t){e.citys=t.data}),a.postalCityCode&&(t.parent=a.postalCityCode,t.level=1,e.$store.getters.getDictItems(t).then(function(t){e.resultDistricts=t.data})),a.postalDistrictCode&&(t.parent=a.postalDistrictCode,t.level=1,e.$store.getters.getDictItems(t).then(function(t){e.resultWards=t.data}))},methods:{initData(e){var t=this;t.$nextTick(function(){})},onChangeResultCity(e){var t=this;let a={collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:e};console.log("onChangeResultCity",e),t.$store.getters.getDictItems(a).then(function(e){t.resultDistricts=e.data})},onChangeResultDistrict(e){var t=this;let a={collectionCode:"ADMINISTRATIVE_REGION",level:2,parent:e};console.log("onChangeResultDistrict",e),t.$store.getters.getDictItems(a).then(function(e){t.resultWards=e.data})},changeViaPostal(e){console.log("changeViaPostal",e),this.$store.commit("setViaPostal",2===e?2:1),this.$emit("changeViapostal",e);let t={viaPostal:2===e?2:1,postalServiceCode:this.dichVuChuyenPhatKetQua.postalServiceCode?this.dichVuChuyenPhatKetQua.postalServiceCode:"",postalAddress:this.dichVuChuyenPhatKetQua.postalAddress?this.dichVuChuyenPhatKetQua.postalAddress:"",postalCityCode:this.dichVuChuyenPhatKetQua.postalCityCode?this.dichVuChuyenPhatKetQua.postalCityCode:"",postalDistrictCode:this.dichVuChuyenPhatKetQua.postalDistrictCode?this.dichVuChuyenPhatKetQua.postalDistrictCode:"",postalWardCode:this.dichVuChuyenPhatKetQua.postalWardCode?this.dichVuChuyenPhatKetQua.postalWardCode:"",postalTelNo:this.dichVuChuyenPhatKetQua.postalTelNo?this.dichVuChuyenPhatKetQua.postalTelNo:""};this.$store.commit("setDichVuChuyenPhatKetQua",t),console.log("dichVuChuyenPhatKetQua",this.dichVuChuyenPhatKetQua)},validDichVuChuyenPhat(){var e=this;return e.$refs.formDichVuChuyenPhat.validate()}}},ee=Z,te=a("0789"),ae=Object(v["a"])(ee,J,X,!1,null,null,null);ae.options.__file="TiepNhanHoSo_DichVuChuyenPhatKetQua.vue";var ie=ae.exports;f()(ae,{VCard:C["a"],VCardText:T["b"],VFlex:I["a"],VForm:A["a"],VLayout:w["a"],VRadio:E["a"],VRadioGroup:F["a"],VSelect:O["a"],VSlideYTransition:te["d"],VSubheader:L["a"],VTextField:$["a"]}),r.a.options={closeButton:!0,timeOut:"5000"};var se={props:["index","id","formCode"],components:{"thong-tin-chu-ho-so":U,"thanh-phan-ho-so":B["a"],"thong-tin-chung":Y,"thu-phi":Q["a"],"dich-vu-chuyen-phat-ket-qua":ie},data:()=>({validTNHS:!1,dossierId:"",mark:!0,stateEditSample:!1,tiepNhanState:!0,thongTinChiTietHoSo:{},payments:{},paymentProfile:{},briefNote:"",receiveDateEdit:"",editableDate:!1,dueDateEdit:"",viaPortalDetail:0,showThuPhi:!1,inputTypes:[1,3],outputTypes:[2],sampleCount:0,loadingAction:!1}),computed:{loading(){return this.$store.getters.loading},originality(){var e=this;return e.getOriginality()},dichVuChuyenPhatKetQua(){return this.$store.getters.dichVuChuyenPhatKetQua},thongTinChuHoSo(){return this.$store.getters.thongTinChuHoSo}},created(){var e=this;e.$nextTick(function(){e.dossierId=e.id})},watch:{},methods:{initData:function(e){var t=this;t.$store.dispatch("getDetailDossier",e).then(e=>{if(t.dossierId=e.dossierId,t.briefNote=e.dossierName?e.dossierName:"",e["editable"]=!1,""===e.dossierStatus?t.$store.dispatch("pullNextactions",e).then(a=>{if(a){var i=a.filter(function(e){return 1100===e.actionCode||"1100"===e.actionCode});t.$store.dispatch("processPullBtnDetail",{dossierId:e.dossierId,actionId:i[0]?i[0].processActionId:""}).then(a=>{e["editable"]=!(!a||!a.receiving)&&a.receiving.editable,e["receivingDuedate"]=a&&a.receiving&&a.receiving.dueDate?a.receiving.dueDate:null,e["receivingDate"]=a&&a.receiving?a.receiving.receiveDate:"",t.editableDate=!(!a||!a.receiving)&&a.receiving.editable,t.dueDateEdit=a&&a.receiving&&a.receiving.dueDate?a.receiving.dueDate:"",t.receiveDateEdit=a&&a.receiving?a.receiving.receiveDate:"",a&&a.payment&&a.payment.requestPayment>0&&(t.showThuPhi=!0,t.payments=a.payment),t.$refs.thongtinchunghoso&&t.$refs.thongtinchunghoso.initData(e)})}else t.$refs.thongtinchunghoso&&t.$refs.thongtinchunghoso.initData(e)}):t.$refs.thongtinchunghoso&&(console.log("has thong tin chung ho so"),t.$refs.thongtinchunghoso.initData(e)),t.thongTinChiTietHoSo=e,t.$refs.thongtinchuhoso.initData(e),t.$refs.thanhphanhoso.initData(e),t.viaPortalDetail=e.viaPostal,e.viaPostal>0){let a=e.address?e.address+", "+e.wardName+" - "+e.districtName+" - "+e.cityName:"";"NEW"===t.formCode&&1===t.originality&&(e["postalAddress"]=a,e["postalTelNo"]=t.thongTinChuHoSo["contactTelNo"]),t.$store.commit("setDichVuChuyenPhatKetQua",e)}}).catch(e=>{})},luuHoSo(){var e=this;console.log("luu Ho So--------------------"),e.$store.commit("setPrintPH",!1);let t=this.$refs.thongtinchunghoso?this.$refs.thongtinchunghoso.getthongtinchunghoso():{},a=this.$refs.thongtinchuhoso.thongTinChuHoSo,i=this.$refs.thongtinchuhoso?this.$refs.thongtinchuhoso.thongTinNguoiNopHoSo:{},s=(this.$refs.thanhphanhoso.dossierTemplateItems,this.$refs.dichvuchuyenphatketqua?this.$refs.dichvuchuyenphatketqua.dichVuChuyenPhatKetQua:{});console.log("validate TNHS formThongtinchuhoso.validate()",e.$refs.thongtinchuhoso.showValid());let n=e.$refs.thongtinchuhoso.showValid();if(n["validForm"]){let l=!1;if(n["validApplicant"])l=!0;else{let e=confirm(n["message"]+" Bạn có muốn tiếp tục?");e&&(l=!0)}if(l){if(!e.$refs.thanhphanhoso.validDossierTemplate())return;if(2===s.viaPostal&&!e.$refs.dichvuchuyenphatketqua.validDichVuChuyenPhat())return;let n=e.$refs.thanhphanhoso.dossierFilesItems,l=[];n&&n.forEach(function(t,a){t.eForm&&(t["dossierId"]=e.dossierId,l.push(e.$store.dispatch("putAlpacaForm",t)))});let c=Object.assign(a,i,s,t);c["dossierId"]=e.dossierId,c["sampleCount"]=e.thongTinChiTietHoSo.sampleCount,c["originality"]=e.originality,console.log("data put dossier --\x3e",c),setTimeout(function(){e.$store.dispatch("putDossier",c).then(function(t){if("UPDATE"===e.formCode)e.goBack();else{var a=e.$store.getters.loadingInitData;let t=a.user.userName?a.user.userName:"",i={dossierId:e.dossierId,actionCode:1100,actionNote:"",actionUser:t,payload:"",security:"",assignUsers:"",payment:e.payments,createDossiers:"",dueDate:c.dueDate};e.$store.dispatch("postAction",i).then(function(t){e.$router.history.current.query;o["a"].push({path:"/danh-sach-ho-so/4/chi-tiet-ho-so/"+t.dossierId,query:{activeTab:"tabs-1"}}),e.tiepNhanState=!1})}}).catch(function(e){r.a.error("Yêu cầu của bạn thực hiện thất bại.")})},500)}}},tiepNhanHoSo(e){var t=this;console.log("luu Ho So--------------------"),t.$store.commit("setPrintPH",!1);var a=this.$refs.thongtinchunghoso.getthongtinchunghoso();let i=this.$refs.thongtinchuhoso.getThongTinChuHoSo(),s=this.$refs.thongtinchuhoso.getThongTinNguoiNopHoSo(),o=(this.$refs.thanhphanhoso.dossierTemplateItems,t.dichVuChuyenPhatKetQua);console.log("validate TNHS formThongtinchuhoso.validate()",t.$refs.thongtinchuhoso.showValid());let n=t.$refs.thongtinchuhoso.showValid();if(n["validForm"]){let c=!1;if(n["validApplicant"])c=!0;else{let e=confirm(n["message"]+" Bạn có muốn tiếp tục?");e&&(c=!0)}if(c){if(console.log("valid confirm2",c),t.loadingAction=!0,!t.$refs.thanhphanhoso.validDossierTemplate())return void(t.loadingAction=!1);if(2===o.viaPostal&&!t.$refs.dichvuchuyenphatketqua.validDichVuChuyenPhat())return void(t.loadingAction=!1);let n=t.$refs.thanhphanhoso.dossierFilesItems,d=[];n&&n.forEach(function(e,a){e.eForm&&(e["dossierId"]=t.dossierId,d.push(t.$store.dispatch("putAlpacaForm",e)))});var l=Object.assign(i,s,o,a);l["dossierId"]=t.dossierId,l["sampleCount"]=t.thongTinChiTietHoSo.sampleCount,l["dossierName"]=t.briefNote,l["originality"]=t.originality,console.log("data put dossier --\x3e",l),t.$store.dispatch("putDossier",l).then(function(a){if(t.loadingAction=!1,"UPDATE"===t.formCode)t.goBack();else{var i=t.$store.getters.loadingInitData;let a=i.user.userName?i.user.userName:"";var s={};t.showThuPhi&&(s={requestPayment:t.payments["requestPayment"],paymentNote:t.payments["paymentNote"],advanceAmount:Number(t.payments["advanceAmount"].toString().replace(/\./g,"")),feeAmount:Number(t.payments["feeAmount"].toString().replace(/\./g,"")),serviceAmount:Number(t.payments["serviceAmount"].toString().replace(/\./g,"")),shipAmount:Number(t.payments["shipAmount"].toString().replace(/\./g,""))});var o={dueDate:t.editableDate&&l.dueDate?l.dueDate:t.dueDateEdit,receiveDate:t.receiveDateEdit};let n={dossierId:t.dossierId,actionCode:1100,actionNote:"",actionUser:a,payload:o,security:"",assignUsers:"",payment:s,createDossiers:""};t.loadingAction=!0,t.$store.dispatch("postAction",n).then(function(a){if(t.loadingAction=!1,e){let e=t.$router.history.current,a=e.query,i=t.$store.getters.getDataCreateDossier;t.loadingAction=!0,t.$store.dispatch("postDossier",i).then(function(e){t.loadingAction=!1,t.dossierId=e.dossierId,t.$refs.thongtinchunghoso.changeDossierNo(e.dossierNo);let i="?";for(let t in a)""!==a[t]&&"undefined"!==a[t]&&void 0!==a[t]&&(i+=t+"="+a[t]+"&");console.log("queryString=====",i),t.$router.push({path:"/danh-sach-ho-so/0/ho-so/"+e.dossierId+"/NEW"+i,query:{renew:Math.floor(100*Math.random())+1}})}).catch(e=>{t.loadingAction=!1})}else t.goBack(),t.tiepNhanState=!1}).catch(e=>{t.loadingAction=!1})}}).catch(e=>{t.loadingAction=!1,console.log("rejectXhr==========",e),r.a.error("Yêu cầu của bạn thực hiện thất bại.")})}}},boSungHoSo(){var e=this;console.log("luu Ho So--------------------"),e.$store.commit("setPrintPH",!1);let t=this.$refs.thongtinchunghoso.getthongtinchunghoso(),a=this.$refs.thongtinchuhoso.thongTinChuHoSo,i=this.$refs.thongtinchuhoso.thongTinNguoiNopHoSo,s=this.$refs.thanhphanhoso.dossierTemplateItems,o=this.$refs.lephi.lePhi,n=this.$refs.dichvuchuyenphatketqua.dichVuChuyenPhatKetQua;if(console.log("validate TNHS formThongtinchuhoso.validate()",e.$refs.thongtinchuhoso.showValid()),e.$refs.thongtinchuhoso.showValid()){let r=e.$refs.thanhphanhoso.dossierFilesItems,l=s,c=[],d=[];l&&(l.forEach(function(t,a){1===t.partType&&(t["dossierId"]=e.dossierId,d.push(e.$store.dispatch("postDossierMark",t)))}),r.forEach(function(t,a){t.eForm&&(t["dossierId"]=e.dossierId,c.push(e.$store.dispatch("putAlpacaForm",t)))})),Promise.all(d).then(e=>{}).catch(function(e){}),Promise.all(c).then(r=>{console.log(r);let l=Object.assign(a,i,s,o,n,t);console.log("data put dossier --\x3e",l),l["dossierId"]=e.dossierId,e.$store.dispatch("putDossier",l).then(function(t){let a={dossierId:e.dossierId,actionCode:7100,payload:"",security:"",assignUsers:{},payment:{},createDossiers:{},dueDate:l.dueDate};e.$store.dispatch("postAction",a).then(function(e){})})}).catch(e=>{})}},changeViapostal(e){this.viaPortalDetail=e?2:1},goBack(){let e=this,t=e.$router.history.current.params,a=e.$router.history.current.query;e.$router.push({path:"/danh-sach-ho-so/"+t.index,query:a})}}},oe=se,ne=a("71a3"),re=a("fe57"),le=a("9a96"),ce=Object(v["a"])(oe,i,s,!1,null,null,null);ce.options.__file="TiepNhanHoSoDetail.vue";t["default"]=ce.exports;f()(ce,{VBtn:y["a"],VCard:C["a"],VCardText:T["b"],VExpansionPanel:b["a"],VExpansionPanelContent:P["a"],VFlex:I["a"],VForm:A["a"],VIcon:N["a"],VLayout:w["a"],VTab:ne["a"],VTabs:re["a"],VTabsSlider:le["a"],VTextField:$["a"]})},"56d7":function(e,t,a){"use strict";a.r(t);a("0f18");var i=a("a026"),s=a("bb71");a("74ef");i["a"].use(s["a"],{theme:{primary:"#001f4d",secondary:"#424242",accent:"#001f4d",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"},customProperties:!0,iconfont:"md"});var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{staticClass:"onegate__fe",attrs:{id:"app_login_hight_bee"}},[e._v("\n  sfas fs \n")])},n=[],r=a("9029"),l={data:()=>({isCallBack:!0,trangThaiHoSoList:[],loading:!0,currentStep:"0",counterData:[],detailState:0}),computed:{currentIndex(){return this.$store.getters.index},activeGetCounter(){return this.$store.getters.activeGetCounter},viewMobile(){return r["isMobile"]},pathLanding(){return r["isMobile"]?"/m/danh-sach-ho-so":"/danh-sach-ho-so"}},created(){var e=this;e.$nextTick(function(){e.loading=!0,e.$store.dispatch("loadMenuConfigToDo").then(function(t){if(e.loading=!1,t){e.trangThaiHoSoList=t;let a=e.$router.history.current.params;Array.isArray(e.trangThaiHoSoList)&&e.trangThaiHoSoList.length>0&&(a.hasOwnProperty("index")||a.hasOwnProperty("serviceCode")?e.trangThaiHoSoList[a.index]["active"]=!0:(e.trangThaiHoSoList[0]["active"]=!0,e.$router.push({path:e.pathLanding+"/0",query:{q:e.trangThaiHoSoList[0]["queryParams"]}}))),e.loadingCounter(),e.loading=!1}})})},updated(){var e=this;e.$nextTick(function(){let t=e.$router.history.current.params;t.hasOwnProperty("index")&&e.isCallBack&&(e.isCallBack=!1,e.$store.commit("setIndex",t.index),t.hasOwnProperty("id")?e.detailState=1:e.detailState=0)})},watch:{$route:function(e,t){let a=this,i=e.params,s=e.query;s.hasOwnProperty("step")?(a.currentStep=String(s.step),console.log("currentStep",String(s.step))):a.currentStep="0",s.hasOwnProperty("recount")&&a.loadingCounter(),i.hasOwnProperty("id")?a.detailState=1:a.detailState=0},activeGetCounter(e){var t=this;setTimeout(function(){t.loadingCounter()},300)}},methods:{toTableIndexing(e,t){let a=this;this.$store.commit("setIndex",t),a.$router.push({path:a.pathLanding+"/"+t,query:{renew:Math.floor(100*Math.random())+1,q:e.queryParams}})},filterSteps(e){let t=this,a=t.$router.history.current.query,i=t.$router.history.current.params;console.log("currentParams",i),console.log("currentQuery",a);let s=t.trangThaiHoSoList[i.index].queryParams;if(console.log("queryString++++++1111111+++++",s),null!==a&&void 0!==a){let e=s.lastIndexOf("=");e>0&&(s=s.substr(0,e+1))}t.currentStep=String(e.stepCode),console.log("queryString++++++++22222222+++",s),t.$router.push({path:t.pathLanding+"/"+i.index,query:{renew:Math.floor(100*Math.random())+1,q:s+e.stepCode,step:e.stepCode}})},loadingCounter(){let e=this,t={originality:e.getOriginality()};e.$store.dispatch("loadingCounterHoSo",t).then(function(t){e.counterData=t.data;for(let a in e.trangThaiHoSoList)if(e.trangThaiHoSoList[a]["counter"]=0,e.trangThaiHoSoList[a].hasOwnProperty("items")){let t=0;for(let i in e.trangThaiHoSoList[a].items){e.trangThaiHoSoList[a].items[i]["counter"]=0;for(let s in e.counterData)if(String(e.counterData[s].stepCode)===String(e.trangThaiHoSoList[a].items[i].stepCode)){let o=e.counterData[s].totalCount;e.trangThaiHoSoList[a].items[i]["counter"]=o,t+=o;break}}e.trangThaiHoSoList[a]["counter"]=t}else if(e.trangThaiHoSoList[a].queryParams.indexOf("step")>=0){let t=e.trangThaiHoSoList[a].queryParams.split("step="),i=0;for(let a in e.counterData)if(String(e.counterData[a].stepCode)===String(t[1])){e.counterData[a].totalCount;break}e.trangThaiHoSoList[a]["counter"]=i}else{let t={queryParams:e.trangThaiHoSoList[a].queryParams};e.$store.dispatch("loadingCounterNotStep",t).then(function(t){e.trangThaiHoSoList[a]["counter"]=t.total}).catch(function(){e.trangThaiHoSoList[a]["counter"]=0})}e.loading=!1})}}},c=l,d=a("2877"),h=a("6544"),u=a.n(h),p=a("7496"),m=Object(d["a"])(c,o,n,!1,null,null,null);m.options.__file="App.vue";var g=m.exports;u()(m,{VApp:p["a"]});var v=a("8c4f"),_=a("4d55"),f=a("dfd7"),y=a("3436"),C=a("5338"),T=a("bbba"),x=a("5de0"),D=a("aa35"),S=a("38ec"),b=a("eaee"),P=a("9190"),I=a("d4a9"),A=a("be4d");const N=[{path:"/danh-sach-ho-so/:index",name:"Landing",component:_["default"],props:!0},{path:"/m/danh-sach-ho-so/:index",name:"LandingMobile",component:f["default"],props:!0},{path:"/tra-cuu-ho-so",name:"TraCuuHoSo",component:y["default"],props:!0},{path:"/danh-sach-ho-so/:index/tiep-nhan-ho-so/:id/:formCode",name:"TiepNhanHoSoDetail",component:C["default"],props:!0},{path:"/danh-sach-ho-so/:index/chi-tiet-ho-so/:id",name:"XemChiTietHoSoDetailCanBo",component:T["default"],props:!0},{path:"/danh-sach-ho-so/:index/xu-ly-ho-so",name:"XuLyHoSo",component:x["default"],props:!0},{path:"/danh-sach-ho-so/:index/bo-sung-ho-so/:id",name:"HoanThienBoSungHoSoDetail",component:D["default"],props:!0},{path:"/danh-sach-ho-so/:index/ho-so/:id/:formCode",name:"DetailForward",component:S["default"],props:!0},{path:"/add-dvc/:serviceCode",name:"DanhSachThuTuc",component:b["default"],props:!0},{path:"/danh-sach-ho-so/:index/nop-thanh-cong/:id",name:"NopThanhCong",component:P["default"],props:!0},{path:"/thanh-toan-thanh-cong",name:"ThanhToanThanhCong",component:I["default"],props:!0},{path:"*",name:"NotFound",component:A["a"]}];i["a"].use(v["a"]);const w=new v["a"]({routes:N});var k=w,E=a("4360"),F=a("967d"),O=(a("5a9d"),a("a576"),a("470b"),a("bc3a")),H=a.n(O);H.a.defaults.headers.common["Token"]=void 0!==window.Liferay?window.Liferay.authToken:"",i["a"].use(F["default"]),i["a"].config.productionTip=!0,i["a"].mixin({methods:{getOriginality:function(){return 3}}}),new i["a"]({router:k,store:E["a"],beforeCreate(){var e=this;e.$store.dispatch("loadInitResource")},render:function(e){return e(g)}}).$mount("#app_login_hight_bee")},"5de0":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.loading?a("content-placeholders",{staticClass:"mt-3"},[a("content-placeholders-text",{attrs:{lines:1}})],1):e.dossierSelected.length>0?a("div",{staticClass:"row-header"},[a("div",{staticClass:"background-triangle-big"},[a("span",[e._v(e._s(e.actionActive["tiltle"]?e.actionActive["tiltle"]:"XỬ LÝ HỒ SƠ"))])]),a("div",{staticClass:"layout row wrap header_tools row-blue"},[a("div",{staticClass:"flex xs8 sm10 pl-3 text-ellipsis text-bold",attrs:{title:e.dossierSelected[0].serviceName}},[e._v("\n        "+e._s(e.dossierSelected[0].serviceName)+"\n      ")]),a("div",{staticClass:"flex xs4 sm2 text-right",staticStyle:{"margin-left":"auto"}},[a("v-btn",{staticClass:"my-0 mx-0 btn-border-left",attrs:{flat:"","active-class":"temp_active"},on:{click:e.goBack}},[a("v-icon",{attrs:{size:"16"}},[e._v("reply")]),e._v("  \n          Quay lại\n        ")],1)],1)])]):e._e(),e.dossierSelected.length>0?a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",[a("v-card",[a("v-card-text",{staticClass:"px-0 pt-0"},[a("v-data-table",{staticClass:"table-landing table-bordered",attrs:{headers:e.headersTable,items:e.dossierSelected,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",{class:{active:t.index%2==1}},[a("td",{staticClass:"text-xs-center"},[a("div",[a("span",[e._v(e._s(t.index+1))])])]),a("td",{staticClass:"text-xs-left"},[a("div",[a("span",[e._v(e._s(t.item.dossierNo))]),a("br"),t.item.online?a("span",{staticStyle:{color:"blue"}},[e._v("Hồ sơ trực tuyến")]):a("span",{staticStyle:{color:"green"}},[e._v("Hồ sơ một cửa")])])]),a("td",{staticClass:"text-xs-left"},[a("div",[a("span",[e._v(e._s(t.item.applicantName))])])]),a("td",{staticClass:"text-xs-left"},[a("div",[a("span",[e._v(e._s(t.item.wardName)+", "+e._s(t.item.districtName)+", "+e._s(t.item.cityName))])])]),a("td",{staticClass:"text-xs-left"},[a("div",[a("span",[e._v(" Tiếp nhận: "+e._s(t.item.receiveDate)),a("br"),e._v("\n                      Hẹn trả: "+e._s(t.item.receiveDate)),a("br"),a("span",[e._v(e._s(t.item.dossierOverdue))])])])])])]}}])})],1)],1)],1)],1):e._e(),a("v-dialog",{attrs:{"max-width":"900",transition:"fade-transition"},model:{value:e.dialogPDF,callback:function(t){e.dialogPDF=t},expression:"dialogPDF"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("File đính kèm")]),a("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.dialogPDF=!1}}},[a("v-icon",[e._v("clear")])],1),e.dialogPDFLoading?a("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[a("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):e._e(),a("iframe",{directives:[{name:"show",rawName:"v-show",value:!e.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPDFPreview",src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1),a("div",[e.btnStateVisible?a("v-layout",{attrs:{wrap:""}},[e.showFormBoSungThongTinNgan?a("form-bo-sung-thong-tin",{ref:"formBoSungThongTinNgan",attrs:{dossier_id:Number(e.id),action_id:Number(e.actionIdCurrent)}}):e._e(),e.showPhanCongNguoiThucHien?a("phan-cong",{ref:"phancong",attrs:{type:e.type_assign},model:{value:e.assign_items,callback:function(t){e.assign_items=t},expression:"assign_items"}}):e._e(),e.showTaoTaiLieuKetQua?a("tai-lieu-ket-qua",{attrs:{detailDossier:e.thongTinChiTietHoSo,createFiles:e.createFiles}}):e._e(),e.showExtendDateEdit?a("ngay-gia-han",{ref:"ngaygiahan",attrs:{type:e.typeExtendDate,extendDateEdit:e.extendDateEdit}}):e._e(),e.showEditDate?a("ngay-hen-tra",{ref:"ngayhentra",attrs:{dueDateEdit:e.dueDateEdit}}):e._e(),e.showTraKetQua?a("tra-ket-qua",{attrs:{detailDossier:e.thongTinChiTietHoSo,createFiles:e.returnFiles}}):e._e(),e.showThuPhi?a("thu-phi",{attrs:{viaPortal:e.viaPortalDetail,detailDossier:e.thongTinChiTietHoSo},model:{value:e.payments,callback:function(t){e.payments=t},expression:"payments"}}):e._e(),e.showPostalService?a("thong-tin-buu-chinh",{attrs:{postalService:e.thongTinChiTietHoSo}}):e._e(),e.showYkienCanBoThucHien?a("y-kien-can-bo",{ref:"ykiencanbo",attrs:{user_note:e.userNote}}):e._e(),a("div",{staticClass:"my-2 mx-3"},[a("v-btn",{attrs:{color:"primary",loading:e.loadingActionProcess,disabled:e.loadingActionProcess},nativeOn:{click:function(t){e.processAction()}}},[a("v-icon",[e._v("save")]),e._v(" \n          Xác nhận\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])],1),a("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.goBack()}}},[a("v-icon",{attrs:{size:"16"}},[e._v("reply")]),e._v("  \n          Quay lại\n        ")],1)],1)],1):e._e(),e.btnStateVisible?e._e():a("v-alert",{attrs:{outline:"",color:"success",icon:"check_circle",value:!0}},[e._v("\n      Thực hiện thành công!\n    ")])],1),a("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"700px"},model:{value:e.dialog_statusAction,callback:function(t){e.dialog_statusAction=t},expression:"dialog_statusAction"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("\n        Trạng thái xử lý\n      ")]),a("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.closeDialogStatusAction(t)}}},[a("v-icon",[e._v("clear")])],1),a("v-card-text",{staticStyle:{"max-height":"350px"}},e._l(e.dossierSelected,function(t,i){return a("div",{key:t.dossierId},[a("v-layout",{staticClass:"py-1 align-center row-list-style",staticStyle:{"border-bottom":"1px solid #ddd",position:"relative"},attrs:{wrap:""}},[a("v-flex",{attrs:{xs11:""}},[a("span",{staticClass:"text-bold",staticStyle:{position:"absolute"}},[e._v(e._s(i+1)+".")]),a("div",{staticClass:"ml-4"},[a("span",{staticClass:"text-bold"},[e._v(e._s(t.dossierNo))]),e._v(" - "+e._s(t.applicantName))])]),a("v-flex",{staticClass:"text-right",attrs:{xs1:""}},[t.statusAction?a("v-tooltip",{attrs:{top:""}},[a("v-icon",{attrs:{slot:"activator",size:"20",color:"primary"},slot:"activator"},[e._v("\n                  check\n                ")]),a("span",[e._v("Thành công")])],1):a("v-tooltip",{attrs:{top:""}},[a("v-icon",{attrs:{slot:"activator",size:"20",color:"red darken-3"},slot:"activator"},[e._v("\n                  block\n                ")]),a("span",[e._v("Thất bại")])],1)],1)],1)],1)}),0),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",loading:e.loadingAction,disabled:e.loadingAction},nativeOn:{click:function(t){e.processAction()}}},[a("v-icon",{attrs:{size:"20"}},[e._v("refresh")]),e._v(" \n          Thử lại\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])],1),a("v-btn",{attrs:{color:"red",dark:"",loading:e.loadingAction,disabled:e.loadingAction},nativeOn:{click:function(t){return e.closeDialogStatusAction(t)}}},[a("v-icon",[e._v("undo")]),e._v(" \n          Thoát\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])],1)],1)],1)],1)],1)},s=[],o=a("a18c"),n=(a("4ea3"),a("1136")),r=a("7121"),l=a("c23d"),c=a("f374"),d=a("4a3a"),h=a("87c1"),u=a("24fb"),p=a("d80f"),m=a("93f5"),g=a("0838"),v=a("26ed"),_=a("8bf2"),f={props:["index"],components:{"thong-tin-co-ban-ho-so":n["a"],"phan-cong":r["a"],"tra-ket-qua":l["a"],"thu-phi":c["a"],"ky-duyet":d["a"],"y-kien-can-bo":h["a"],"tai-lieu-ket-qua":u["a"],"form-bo-sung-thong-tin":p["a"],"thanh-phan-ho-so":m["a"],"ngay-hen-tra":g["a"],"ngay-gia-han":v["a"],"thong-tin-buu-chinh":_["a"]},data:()=>({headersTable:[{text:"#",align:"center",sortable:!1},{text:"Mã hồ sơ",align:"center",sortable:!1},{text:"Chủ hồ sơ",align:"center",sortable:!1},{text:"Địa chỉ",align:"center",sortable:!1},{text:"Thời gian",align:"center",sortable:!1}],mutilpleAction:!1,actionExits:[],dossierProcess:[],countProcessed:0,activeNotify:!1,dialog_statusAction:!1,thongTinChiTietHoSo:{},nextActions:[],payments:"",dossierActions:[],itemselect:"",actionNote:"",actionsSubmitLoading:!1,showThongTinCoBanHoSo:!1,showYkienCanBoThucHien:!1,showFormBoSungThongTinNgan:!1,showPhanCongNguoiThucHien:!1,showTaoTaiLieuKetQua:!1,showKyPheDuyetTaiLieu:!1,showTraKetQua:!1,showThuPhi:!1,showEditDate:!1,showExtendDateEdit:!1,showPostalService:!1,dueDateEdit:"",checkInput:0,viaPortalDetail:0,showThucHienThanhToanDienTu:!1,dossierItemDialogPick:"",itemDialogPick:"",resultDialogPick:"",indexDialogPick:"",userNote:0,partView:"",stateView:!1,payment_type:0,type_assign:0,returnFiles:[],assign_items:[],btnStateVisible:!0,dialogActionProcess:!1,rollbackable:!1,dialogPDF:!1,dialogPDFLoading:!1,loadingActionProcess:!1,loadingAction:!1,arrDossierId:[],actionActiveTmp:[]}),computed:{loading(){return this.$store.getters.loading},originality(){var e=this;return e.getOriginality()},dossierSelected(){var e=this;return e.$store.getters.dossierSelected},actionActive(){return console.log("actionActive-------",this.$store.getters.actionActive),this.$store.getters.actionActive},activeGetCounter(){return this.$store.getters.activeGetCounter}},created(){var e=this;e.$nextTick(function(){e.btnIndex=-1;let t=e.$router.history.current.query;if(console.log("currentQuery",t),0===e.dossierSelected.length){let a=[];if(t.hasOwnProperty("dossiers")){let i=t.dossiers.split(",");e.arrDossierId=i,i.forEach(t=>{a.push(e.$store.dispatch("getDetailDossier",t))}),Promise.all(a).then(t=>{e.$store.dispatch("loadDossierSelected",t)}).catch(e=>{})}}else{let a=[];if(t.hasOwnProperty("dossiers")){let i=t.dossiers.split(",");e.arrDossierId=i,i.forEach(t=>{a.push(e.$store.dispatch("getDetailDossier",t))}),Promise.all(a).then(t=>{e.$store.dispatch("loadDossierSelected",t)}).catch(e=>{})}}try{if(void 0===e.actionActive.action||null===e.actionActive.action||""===e.actionActive.action){let a=JSON.parse(t.actionActive);a&&e.$store.dispatch("loadActionActive",a)}}catch(a){console.log(a)}e.getNextActions()})},updated(){var e=this;e.$nextTick(function(){})},watch:{},methods:{initData(e){},goBack(){window.history.back()},processPullBtnDetailRouter(e,t,a,i){console.log("result Nextaction",a);let s=this,o=!1;s.dossierId=e.dossierId,s.showYkienCanBoThucHien=!1,s.showFormBoSungThongTinNgan=!1,s.showPhanCongNguoiThucHien=!1,s.showTaoTaiLieuKetQua=!1,s.showKyPheDuyetTaiLieu=!1,s.showTraKetQua=!1,s.showThuPhi=!1,s.showEditDate=!1,s.showThucHienThanhToanDienTu=!1,s.dossierItemDialogPick=e,s.itemDialogPick=t,s.resultDialogPick=a,s.indexDialogPick=i,s.userNote=0,null!==a&&void 0!==a&&"undefined"!==a&&(a.hasOwnProperty("userNote")||a.hasOwnProperty("extraForm")||a.hasOwnProperty("allowAssignUser")||a.hasOwnProperty("createFiles")||a.hasOwnProperty("eSignature")||a.hasOwnProperty("returnFiles")||a.hasOwnProperty("payment")||a.hasOwnProperty("checkInput"))&&(!a.hasOwnProperty("userNote")||1!==a.userNote&&"1"!==a.userNote&&2!==a.userNote&&"2"!==a.userNote||(o=!0,s.showYkienCanBoThucHien=!0,s.userNote=a.userNote),a.hasOwnProperty("extraForm")&&a.extraForm&&(o=!0,s.showFormBoSungThongTinNgan=!0),a.hasOwnProperty("allowAssignUser")&&0!==a.allowAssignUser&&(console.log("allowAssignUser",a.toUsers),Array.isArray(a.toUsers)?s.assign_items=a.toUsers:s.assign_items=[a.toUsers],s.type_assign=a.allowAssignUser,o=!0,s.showPhanCongNguoiThucHien=!0),a.hasOwnProperty("createFiles")&&null!==a.createFiles&&void 0!==a.createFiles&&"undefined"!==a.createFiles&&a.createFiles.length>0&&(o=!0,s.showTaoTaiLieuKetQua=!0,s.createFiles=a.createFiles),a.hasOwnProperty("eSignature")&&a.eSignature&&(o=!0,s.showKyPheDuyetTaiLieu=!0),a.hasOwnProperty("returnFiles")&&null!==a.returnFiles&&void 0!==a.returnFiles&&"undefined"!==a.returnFiles&&a.returnFiles.length>0&&(o=!0,s.showTraKetQua=!0,s.returnFiles=a.returnFiles),a.hasOwnProperty("payment")&&null!==a.payment&&void 0!==a.payment&&"undefined"!==a.payment&&5===a.payment.requestPayment&&(o=!0,s.showThuPhi=!0,s.payments=a.payment,s.viaPortalDetail=e.viaPostal),a.hasOwnProperty("checkInput")&&null!==a.checkInput&&void 0!==a.checkInput&&"undefined"!==a.checkInput&&(s.checkInput=a.checkInput,2===a.checkInput&&(o=!0,s.$refs.thanhphanhoso.initData(s.thongTinChiTietHoSo))),a.hasOwnProperty("receiving")&&null!==a.receiving&&void 0!==a.receiving&&"undefined"!==a.receiving&&!0===a.receiving.editable&&(o=!0,s.showEditDate=!0,s.dueDateEdit=""!==a.receiving.dueDate?new Date(a.receiving.dueDate):"",s.receiveDateEdit=a.receiving.receiveDate)),o&&(s.dialogActionProcess=!0,s.loadingActionProcess=!1)},processPullBtnDetail(e,t){let a=this;a.btnIndex=t,a.itemAction=e,a.actionIdCurrent=e.processActionId;let i={dossierId:a.dossierSelected[0].dossierId,actionId:e.processActionId};a.dialogActionProcess=!1,a.$store.dispatch("processPullBtnDetail",i).then(function(i){a.processPullBtnDetailRouter(a.dossierSelected[0],e,i,t)})},doCopy(e,t,a,i){let s=this,n={dossierId:e.dossierId};s.loadingAction=!0,s.$store.dispatch("doCopy",n).then(function(e){s.loadingAction=!1,s.indexAction=-1,o["a"].push({path:"/danh-sach-ho-so/"+s.index+"/ho-so/"+e.dossierId+"/"+s.itemAction.form,query:s.$router.history.current.query})})},doCancel(e,t,a,i){let s=this;if(s.loadingAction=!0,i)console.log(s.selected);else{let t={dossierId:e.dossierId};s.$store.dispatch("doCancel",t).then(function(e){s.loadingAction=!1,s.indexAction=-1,o["a"].push({path:"/danh-sach-ho-so/"+s.index+"/ho-so/"+e.dossierId+"/"+s.itemAction.form,query:s.$router.history.current.query})})}},processAction(){var e=this,t=e.$store.getters.loadingInitData,a=t.user.userName?t.user.userName:"";if(e.dossierProcess=e.dossierSelected.filter(function(e){return!1===e["statusAction"]||!e["statusAction"]}),e.countProcessed=0,e.mutilpleAction){for(let i in e.actionExits)for(let t in e.dossierSelected)if(!1===e.dossierSelected[t]["statusAction"]||!e.dossierSelected[t]["statusAction"]){let s={dossierId:e.dossierSelected[t].dossierId,actionCode:e.actionExits[i].actionCode,actionUser:a};e.postAction(s,e.dossierSelected[t],t)}}else for(let i in e.dossierSelected)if(!1===e.dossierSelected[i]["statusAction"]||!e.dossierSelected[i]["statusAction"]){let t={dossierId:e.dossierSelected[i].dossierId,actionCode:e.actionActive.action,actionUser:a};e.postAction(t,e.dossierSelected[i],i)}},postAction(e,t,a){var i=this,s=!0,o=!0;if(i.showPhanCongNguoiThucHien){e["toUsers"]=i.assign_items;let t=i.$refs.phancong.doExport();console.log("validPhanCong",t),s=!!t}var n=null;if(i.payments&&(n={requestPayment:i.payments["requestPayment"],advanceAmount:Number(i.payments["advanceAmount"].toString().replace(/\./g,"")),feeAmount:Number(i.payments["feeAmount"].toString().replace(/\./g,"")),serviceAmount:Number(i.payments["serviceAmount"].toString().replace(/\./g,"")),shipAmount:Number(i.payments["shipAmount"].toString().replace(/\./g,""))}),i.showThuPhi&&(e["payment"]=n),i.showFormBoSungThongTinNgan&&(e["payload"]=i.$refs.formBoSungThongTinNgan.formSubmitData()),i.showKyPheDuyetTaiLieu){i.$refs.kypheduyettailieu.doExport()}if(i.showEditDate){let t=i.$refs.ngayhentra.getDateInput();console.log("dueDateEdit",t);let a={dueDate:t,receiveDate:i.receiveDateEdit};e["payload"]=a}if(i.showYkienCanBoThucHien){let t=i.$refs.ykiencanbo.doExport(),a="";t.valid?(o=!0,a=t.text):o=!1,e["userNote"]=a}i.validateAction=!(!s||!o);i.$router.history.current.query;i.showYkienCanBoThucHien,i.validateAction&&(i.loadingActionProcess=!0,i.$store.dispatch("processDossierRouter",e).then(function(e){i.countProcessed+=1,i.dossierSelected[a]["statusAction"]=!0,i.countProcessed===i.dossierProcess.length*i.actionExits.length&&i.activeNotify?i.dialog_statusAction=!0:i.countProcessed===i.dossierProcess.length*i.actionExits.length&&(i.loadingActionProcess=!1,i.loadingAction=!1,i.btnStateVisible=!1,setTimeout(function(){i.goBack()},500))}).catch(function(e){i.countProcessed+=1,i.activeNotify=!0,i.dossierSelected[a]["statusAction"]=!1,i.countProcessed===i.dossierProcess.length*i.actionExits.length&&i.activeNotify?i.dialog_statusAction=!0:i.countProcessed===i.dossierProcess.length*i.actionExits.length&&(i.loadingActionProcess=!1,i.loadingAction=!1,i.btnStateVisible=!1,setTimeout(function(){i.goBack()},500))}))},doPrint02(e,t,a,i){let s=this;if(null===s.thuTucHanhChinhSelected||void 0===s.thuTucHanhChinhSelected||"undefined"===s.thuTucHanhChinhSelected)alert("Loại thủ tục bắt buộc phải chọn");else{let e={document:t.document,serviceCode:s.thuTucHanhChinhSelected.serviceCode,govAgencyCode:s.thuTucHanhChinhSelected.govAgencyCode,dossiers:JSON.stringify(s.selected)};s.dialogPDFLoading=!0,s.dialogPDF=!0,s.$store.dispatch("doPrint02",e).then(function(e){s.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=e})}},doPrint03(e,t,a,i){let s=this;s.dialogPDFLoading=!0,s.dialogPDF=!0;let o={dossierId:e.dossierId,document:t.document};s.$store.dispatch("doPrint03",o).then(function(e){s.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=e})},doGuiding(e,t,a,i){let s=this;if(null===s.thuTucHanhChinhSelected||void 0===s.thuTucHanhChinhSelected||"undefined"===s.thuTucHanhChinhSelected)alert("Loại thủ tục bắt buộc phải chọn");else{let e={serviceConfigId:s.thuTucHanhChinhSelected.serviceConfigId};s.dialogPDFLoading=!0,s.dialogPDF=!0,s.$store.dispatch("doGuiding",e).then(function(e){s.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=e})}},getNextActions(){let e=this;console.log("run next action");e.$router.history.current.query;let t={};e.dossierSelected.length>0?t["dossierId"]=e.dossierSelected[0].dossierId:t["dossierId"]=e.arrDossierId[0];let a=e.$router.history.current.query;e.$store.dispatch("pullNextactions",t).then(function(t){t=t.filter(function(e){return 1===e.enable});var i=[];if(void 0!==e.actionActive.action&&null!==e.actionActive.action&&"undefined"!==e.actionActive.action&&""!==e.actionActive.action&&(i=e.actionActive.action.split(",")),1===i.length){e.actionExits=i;let s=t.filter(function(t){return t.actionCode.toString()===e.actionActive.action.toString()});e.dialogActionProcess=!0,e.mutilpleAction=!1,e.processPullBtnDetail(s[0],a.btnIndex)}else{e.mutilpleAction=!0,e.actionExits=[];for(let a in i){var s,o=!1;for(let e in t)if(i[a].toString()===t[e].actionCode.toString()){o=!0,s=t[e];break}o&&e.actionExits.push(s)}e.dialogActionProcess=!0,console.log("actionExits",e.actionExits[0]),e.actionExits[0]&&e.processPullBtnDetail(e.actionExits[0],a.btnIndex)}})},postNextActions(e){var t=this;if(e["dossierId"]=t.thongTinChiTietHoSo.dossierId,e.allowAssignUser>0)t.$store.dispatch("reassignDossier",e).then(a=>{console.log(a);let i={dossierId:t.dossierId,actionCode:e.actionCode,actionNote:t.actionNote,actionUser:"",payload:"",security:"",assignUsers:"",payment:"",createDossiers:""};t.$store.dispatch("postAction",i).then(e=>{console.log(e)})});else{let a={dossierId:t.dossierId,actionCode:e.actionCode,actionNote:t.actionNote,actionUser:"",payload:"",security:"",assignUsers:"",payment:"",createDossiers:""};t.$store.dispatch("postAction",a).then(e=>{console.log(e)})}},closeDialogStatusAction(){let e=this;e.dialog_statusAction=!1,e.btnStateVisible=!1,setTimeout(function(){e.goBack()},500)}},filters:{dateTimeView(e){if(e){let t=new Date(e);return`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()} | ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`}return""},getMaxDueDate(e){let t=Math.max.apply(Math,e.map(function(e){return e.actionOverdue}));return t}}},y=f,C=a("2877"),T=a("6544"),x=a.n(T),D=a("0798"),S=a("8336"),b=a("b0af"),P=a("99d9"),I=a("12b2"),A=a("8fea"),N=a("169a"),w=a("cd55"),k=a("49e2"),E=a("0e8f"),F=a("132d"),O=a("a722"),H=a("490a"),L=a("9910"),$=a("3a2f"),V=Object(C["a"])(y,i,s,!1,null,null,null);V.options.__file="XuLyHoSo.vue";t["default"]=V.exports;x()(V,{VAlert:D["a"],VBtn:S["a"],VCard:b["a"],VCardActions:P["a"],VCardText:P["b"],VCardTitle:I["a"],VDataTable:A["a"],VDialog:N["a"],VExpansionPanel:w["a"],VExpansionPanelContent:k["a"],VFlex:E["a"],VIcon:F["a"],VLayout:O["a"],VProgressCircular:H["a"],VSpacer:L["a"],VTooltip:$["a"]})},"610f":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{class:e.className,style:e.maxWidth,attrs:{role:"checkbox",title:e.toggled?e.title_checked:e.title_unchecked,"aria-checked":e.ariaChecked}},[a("input",{staticClass:"v-switch-input",attrs:{type:"checkbox"},on:{change:function(t){return t.stopPropagation(),e.toggle(t)}}}),a("div",{staticClass:"v-switch-core",style:e.coreStyle},[a("div",{staticClass:"v-switch-button",style:e.buttonStyle})]),e.labels?[e.toggled?a("span",{staticClass:"v-switch-label v-left",style:e.labelStyle,domProps:{innerHTML:e._s(e.labelChecked)}}):a("span",{staticClass:"v-switch-label v-right",style:e.labelStyle,domProps:{innerHTML:e._s(e.labelUnchecked)}})]:e._e()],2)},s=[];const o={colorChecked:"#75C791",colorUnchecked:"#bfcbd9",cssColors:!1,labelChecked:"on",labelUnchecked:"off",width:50,height:22,margin:3},n=(e,t)=>{return"object"===typeof e&&e.hasOwnProperty(t)},r=e=>e+"px";var l={name:"toggle-button",props:{title_checked:"",title_unchecked:"",value:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},sync:{type:Boolean,default:!1},speed:{type:Number,default:300},color:{type:[String,Object],validator(e){return"object"===typeof e?e.checked||e.unchecked:"string"===typeof e}},cssColors:{type:Boolean,default:!1},labels:{type:[Boolean,Object],default:!1,validator(e){return"object"===typeof e?e.checked||e.unchecked:"boolean"===typeof e}},height:{type:Number,default:o.height},width:{type:Number,default:o.width}},computed:{className(){let{toggled:e,disabled:t}=this;return["vue-js-switch",{toggled:e,disabled:t}]},ariaChecked(){return this.toggled.toString()},coreStyle(){return{width:r(this.width),height:r(this.height),backgroundColor:this.cssColors?null:this.colorCurrent,borderRadius:r(Math.round(this.height/2))}},maxWidth(){return{width:r(this.width)+"!important"}},buttonRadius(){return this.height-2*o.margin},distance(){return r(this.width-this.height+o.margin)},buttonStyle(){return{width:r(this.buttonRadius),height:r(this.buttonRadius),transition:`transform ${this.speed}ms`,transform:this.toggled?`translate3d(${this.distance}, 3px, 0px)`:null}},labelStyle(){return{lineHeight:r(this.height)}},colorChecked(){let{color:e}=this;return"object"!==typeof e?e||o.colorChecked:n(e,"checked")?e.checked:o.colorChecked},colorUnchecked(){let{color:e}=this;return n(e,"unchecked")?e.unchecked:o.colorUnchecked},colorCurrent(){return this.toggled?this.colorChecked:this.colorUnchecked},labelChecked(){return n(this.labels,"checked")?this.labels.checked:o.labelChecked},labelUnchecked(){return n(this.labels,"unchecked")?this.labels.unchecked:o.labelUnchecked}},watch:{value(e){this.sync&&(this.toggled=!!e)}},data(){return{toggled:!!this.value}},methods:{toggle(e){this.toggled=!this.toggled,this.$emit("input",this.toggled),this.$emit("change",{value:this.toggled,srcEvent:e})}}},c=l,d=a("2877"),h=Object(d["a"])(c,i,s,!1,null,null,null);h.options.__file="toggleButton.vue";t["a"]=h.exports},7056:function(module,__webpack_exports__,__webpack_require__){"use strict";var jquery__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("1157"),jquery__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__),toastr__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("854a"),toastr__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(toastr__WEBPACK_IMPORTED_MODULE_1__);toastr__WEBPACK_IMPORTED_MODULE_1___default.a.options={closeButton:!0,timeOut:"20000"},__webpack_exports__["a"]={props:{onlyView:{type:Boolean,default:()=>!1},id:{type:String,default:()=>"nm"},partTypes:{type:Array,default:()=>[1,3]},checkInput:{type:Number,default:()=>0}},data:()=>({dossierTemplateItems:[],dossierMarksItems:[],dossierFilesItems:[],thongTinHoSo:{},valid:!0,stateView:!1,dialogAddOtherTemp:!1,loadingAddOther:!1,otherDossierTemplate:"",sheet:!1,partView:"",dossierFileIdView:"",stateEdit:!1,progressUploadPart:"",dialogPDF:!1,dialogPDFLoading:!0,stateAddFileOther:!1,dossierTemplatesItemSelect:{},fileViews:[],pdfEform:!1,sampleCount:0,serviceInfoId:0,fileMarkItems:[{text:"Không có",value:0},{text:"Bản chụp",value:1},{text:"Bản sao",value:2},{text:"Bản gốc",value:3}],fileCheckItems:[{text:"Chưa kiểm tra",value:0},{text:"Đạt",value:1},{text:"Không đạt",value:2}],fileTemplateItems:[],fileTemplateNoString:"",dossierFilesApplicant:[],stateViewResult:!0,currentFormView:"",pstFixed:0,pstEl:0,endEl:0,applicantNoteDossier:""}),computed:{loading(){return this.$store.getters.loading},originality(){var e=this;return e.getOriginality()},initDataResource(){return this.$store.getters.loadingInitData},dossierTemplateItemsFilter(){let e=this,t=e.dossierTemplateItems;if(t.length>0){let a=t.filter(function(t){return e.partTypes.includes(t.partType)&&e.checkVisibleTemp(t,0)});return a}},applicantBussinessExit(){return this.$store.getters.getApplicantBussinessExit},applicantId(){return this.$store.getters.getApplicantIdNo},applicantNote(){return this.$store.getters.getApplicantNote}},mounted(){var e=this;e.page=1,e.$nextTick(function(){})},watch:{applicantBussinessExit(e){let t=this;e&&t.fileTemplateNoString&&t.getDossierFileApplicants(e,t.fileTemplateNoString)},applicantId(e){let t=this;e&&t.fileTemplateNoString&&t.getDossierFileApplicants(e,t.fileTemplateNoString)}},methods:{resetCounterTemplate({commit:e,state:t},a){var i=this;i.dossierTemplateItems.forEach(e=>{e.partNo===a.partNo&&(e.hasForm?e.count=1:e.count=0)})},recountFileTemplates(){var e=this;e.dossierTemplateItems.forEach(t=>{t.count=0,e.dossierFilesItems.forEach(e=>{t.partNo!==e.dossierPartNo||e.eForm||t.count++})})},initData(e){var t=this;t.thongTinHoSo=e,t.applicantNoteDossier=e["applicantNote"];var a=[];null!==e["sampleCount"]&&void 0!==e["sampleCount"]&&"undefined"!==e["sampleCount"]&&(t.sampleCount=e["sampleCount"]),a.push(t.$store.dispatch("loadDossierTemplates",e)),a.push(t.$store.dispatch("loadDossierMark",e)),a.push(t.$store.dispatch("loadDossierFiles",e.dossierId)),a.push(t.$store.dispatch("getServiceInfo",{serviceInfoId:e.serviceCode})),Promise.all(a).then(e=>{var a=e[0],i=e[1],s=e[2],o=[];e[3].hasOwnProperty("serviceInfoId")&&(t.serviceInfoId=e[3].serviceInfoId),e[3].fileTemplates&&(Array.isArray(e[3].fileTemplates)?o=e[3].fileTemplates:o.push(e[3].fileTemplates));var n=t.mergeDossierTemplateVsDossierFiles(a,s);if(n=t.mergeDossierTemplateVsDossierMark(n,i),n=t.mergeDossierTemplateVsFileTemplates(n,o),t.dossierFilesItems=s,t.dossierMarksItems=i,t.fileTemplateItems=o,t.dossierTemplateItems=n,t.partTypes.includes(2)&&t.dossierTemplateItems.length>0){let e=[];t.dossierTemplateItems.forEach(a=>{let i=t.dossierFilesItems.find(e=>{return a.partNo===e.dossierPartNo&&2===a.partType});i&&e.push(a)}),t.dossierTemplateItems=e,console.log("dossierTemplateItems555",t.dossierTemplateItems)}t.changeStateViewResult(),setTimeout(function(e){t.genAllAlpacaForm(s,n),t.recountFileTemplates()},500),console.log("dossierTemplateItems",t.dossierTemplateItems);let r=[];for(let l in t.dossierTemplateItems)t.dossierTemplateItems[l]["fileTemplateNo"]&&r.push(t.dossierTemplateItems[l]["fileTemplateNo"]);r.length>0&&(t.fileTemplateNoString=r.toString(),console.log("fileTemplateNoString",t.fileTemplateNoString),t.applicantId&&!t.onlyView&&t.getDossierFileApplicants(t.applicantId,t.fileTemplateNoString))}).catch(e=>{})},genAllAlpacaForm(e,t){var a=this;if(e.length>0){var i=e.filter(e=>{return e.eForm}),s=t.filter(e=>{return e.hasForm&&a.partTypes.includes(e.partType)});i.length>0?i.forEach(e=>{e.eForm&&a.$store.dispatch("loadAlpcaForm",e)}):t.forEach(e=>{e.hasForm&&a.partTypes.includes(e.partType)&&(e["templateFileNo"]=a.thongTinHoSo.dossierTemplateNo,a.showAlpacaJSFORM(e))}),s.length!==i.length&&s.forEach(e=>{let t=i.findIndex(t=>{return e.partNo===t.dossierPartNo});-1===t&&(e["templateFileNo"]=a.thongTinHoSo.dossierTemplateNo,a.showAlpacaJSFORM(e))})}else t.forEach(e=>{e.hasForm&&a.partTypes.includes(e.partType)&&(e["templateFileNo"]=a.thongTinHoSo.dossierTemplateNo,a.showAlpacaJSFORM(e))})},postDossierMark(e,t){var a=this;e["dossierId"]=a.thongTinHoSo.dossierId,a.$store.dispatch("postDossierMark",e).then(e=>{}).catch(e=>{})},mergeDossierTemplateVsDossierFiles(e,t){var a=this;return 0!==t.length?e.forEach(e=>{e["daKhai"]=!1,e["passRequired"]=!1;var i=t.find(t=>{return e.partNo===t.dossierPartNo&&a.partTypes.includes(e.partType)&&t.eForm&&!t.removed});i&&(e["daKhai"]=!0,e["hasForm"]=!0,e["referenceUid"]=i["referenceUid"]),t.forEach(t=>{e.partNo===t.dossierPartNo&&(e["passRequired"]=!0)})}):e.forEach(e=>{e.hasForm&&(e["daKhai"]=!1,e["passRequired"]=!1)}),e},mergeDossierTemplateVsDossierMark(e,t){return 0!==t.length?e.map(e=>{e["count"]=0,e["stateEditFileCheck"]=!1;let a=t.find(t=>{return t.dossierPartNo===e.partNo});return null!==a&&void 0!==a?(e["fileMark"]=a.fileMark,e["fileComment"]=a.fileComment,e["fileCheck"]=a.fileCheck):(e["fileMark"]=0,e["fileComment"]="",e["fileCheck"]=0),e}):e&&e.forEach(e=>{e["stateEditFileCheck"]=!1,e["count"]=0,e["fileMark"]=0,e["fileComment"]="",e["fileCheck"]=0,e["stateEditFileCheck"]=!1}),e},mergeDossierTemplateVsFileTemplates(e,t){return 0!==t.length?e.map(e=>{let a=t.find(t=>{return t.fileTemplateNo===e.fileTemplateNo});return e["hasFileTemp"]=null!==a&&void 0!==a?a.fileTemplateNo:"",e}):e&&e.forEach(e=>{e["hasFileTemp"]=""}),e},showAlpacaJSFORM(item){var vm=this;item["dossierId"]=vm.thongTinHoSo.dossierId,vm.$store.dispatch("loadFormScript",item).then(resScript=>{vm.$store.dispatch("loadFormData",item).then(resData=>{var formScript,formData;window.$("#formAlpaca"+item.partNo+vm.id).empty(),formScript=resScript?eval("("+resScript+")"):{},formData=resData?eval("("+resData+")"):{},formScript.data=formData,window.$("#formAlpaca"+item.partNo+vm.id).alpaca(formScript)})})},saveAlpacaForm(e,t){var a=this,i=a.dossierFilesItems.find(t=>{return t.dossierPartNo===e.partNo&&t.eForm});i?(i["dossierId"]=a.thongTinHoSo.dossierId,i["id"]=a.id,a.$store.dispatch("putAlpacaForm",i).then(e=>{a.$store.dispatch("loadDossierFiles",a.thongTinHoSo.dossierId).then(e=>{a.dossierFilesItems=e}).catch(e=>{}),a.dossierTemplateItems[t]["passRequired"]=!0}).catch(e=>{toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Yêu cầu của bạn thực hiện thất bại.")})):(e["dossierId"]=a.thongTinHoSo.dossierId,e["id"]=a.id,a.$store.dispatch("postEform",e).then(e=>{a.dossierTemplateItems[t].daKhai=!0,a.dossierTemplateItems[t]["passRequired"]=!0,a.$store.dispatch("loadDossierFiles",a.thongTinHoSo.dossierId).then(e=>{a.dossierFilesItems=e}).catch(e=>{toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Yêu cầu của bạn thực hiện thất bại.")})}).catch(e=>{toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Yêu cầu của bạn thực hiện thất bại.")}))},onDeleteAttackFiles(e){var t=this;console.log("delete");let a=confirm("Bạn có muốn xóa toàn bộ file trong thành phần hồ sơ này?");a&&t.dossierFilesItems.forEach(a=>{a.dossierPartNo===e.partNo&&(a["dossierId"]=t.thongTinHoSo.dossierId,t.$store.dispatch("deleteAttackFiles",a).then(function(a){t.resetCounterTemplate(e),t.$store.dispatch("loadDossierFiles",t.thongTinHoSo.dossierId)}).catch(function(e){}))})},changeApplicantNote(){let e=this;console.log("applicantNoteEdit",e.applicantNoteDossier),e.$store.commit("setApplicantNote",e.applicantNoteDossier)},pickFile(e){var t=this;t.stateAddFileOther=!1,document.getElementById("file"+e.partNo).value="",document.getElementById("file"+e.partNo).click()},onUploadSingleFile(e,t,a){var i=this;if(console.log("vm.dossierTemplateItems[index]",i.dossierTemplateItems[a]),i.dossierTemplatesItemSelect=t,i.progressUploadPart=t.partNo,t["dossierId"]=i.thongTinHoSo.dossierId,t["dossierTemplateNo"]=i.thongTinHoSo.dossierTemplateNo,3!==t.partType)i.$store.dispatch("uploadSingleFile",t).then(function(e){i.dossierTemplateItems[a]["passRequired"]=!0,i.progressUploadPart="",i.$store.dispatch("loadDossierFiles",i.thongTinHoSo.dossierId).then(e=>{i.dossierFilesItems=e,i.recountFileTemplates()})}).catch(function(e){i.progressUploadPart=""});else{if(0===window.$("#file"+t.partNo)[0].files.length)return void(i.progressUploadPart="");i.partView=t.partNo,i.stateView=!0,i.dialogAddOtherTemp=!0}},loadAlpcaForm(e){var t=this;t.currentFormView="formAlpaca"+e.partNo+t.id,t.pstEl=t.endEl=0,setTimeout(function(){jquery__WEBPACK_IMPORTED_MODULE_0___default()("#formAlpaca"+e.partNo+t.id).height()>200&&(t.pstEl=jquery__WEBPACK_IMPORTED_MODULE_0___default()("#wrapForm"+e.partNo+t.id).offset().top,t.endEl=jquery__WEBPACK_IMPORTED_MODULE_0___default()("#formAlpaca"+e.partNo+t.id).height(),jquery__WEBPACK_IMPORTED_MODULE_0___default()(window).scroll(function(){t.pstFixed=jquery__WEBPACK_IMPORTED_MODULE_0___default()(window).scrollTop()}))},500);var a=t.dossierFilesItems.find(t=>{return t.dossierPartNo===e.partNo&&t.eForm});a?(a["id"]=t.id,t.$store.dispatch("loadAlpcaForm",a)):t.dossierTemplateItems.forEach(a=>{a.hasForm&&e.partNo===a.partNo&&(a["templateFileNo"]=t.thongTinHoSo.dossierTemplateNo,t.showAlpacaJSFORM(a))})},deleteSingleFileEform(e,t){var a=this;let i=confirm("Bạn có chắc chắn xóa file?");i&&a.dossierFilesItems.forEach(i=>{i.dossierPartNo===e.partNo&&i.eForm&&(i["dossierId"]=a.thongTinHoSo.dossierId,a.$store.dispatch("deleteDossierFile",i).then(i=>{console.log("success!"),a.dossierTemplateItems[t].daKhai=!1,a.$store.dispatch("loadDossierFiles",a.thongTinHoSo.dossierId).then(i=>{if(a.dossierFilesItems=i,a.recountFileTemplates(),0!==a.dossierFilesItems.length){var s=a.dossierFilesItems.filter(t=>{return t.dossierPartNo===e.partNo});a.dossierTemplateItems[t]["passRequired"]=!!s}else a.dossierTemplateItems[t]["passRequired"]=!1})}))})},previewFileEfom(e,t){var a=this;a.dossierFilesItems.forEach(t=>{t.dossierPartNo===e.partNo&&t.eForm&&!t.removed&&(t["dossierId"]=a.thongTinHoSo.dossierId,a.dialogPDFLoading=!0,a.dialogPDF=!0,a.onlyView?a.$store.dispatch("viewFile",t).then(e=>{a.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+a.id).src=e}):(t["id"]=a.id,a.$store.dispatch("putAlpacaForm",t).then(e=>{setTimeout(function(){a.$store.dispatch("viewFile",t).then(e=>{a.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+a.id).src=e})},1e3)}).catch(e=>{toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Yêu cầu của bạn thực hiện thất bại.")})))})},deleteSingleFile(e,t){var a=this;let i=confirm("Bạn có chắc chắn xóa file đính kèm ?");i&&(e["dossierId"]=a.thongTinHoSo.dossierId,a.$store.dispatch("deleteDossierFile",e).then(i=>{a.fileViews.splice(t,1),a.stateView=!0,a.partView=e.dossierPartNo,a.$store.dispatch("loadDossierFiles",a.thongTinHoSo.dossierId).then(t=>{a.dossierFilesItems=t,a.setDaKhai(e)})}).catch(e=>{toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Yêu cầu của bạn thực hiện thất bại.")}))},viewFile(e){var t=this;t.dossierFilesItems.forEach(a=>{a["dossierId"]=t.thongTinHoSo.dossierId,a.dossierPartNo===e.partNo&&this.$store.dispatch("viewFile",a)})},setDaKhai(e){var t=this;let a=t.dossierFilesItems.findIndex(t=>{return t.dossierPartNo===e.dossierPartNo});if(-1===a){for(var i=0;i<t.dossierTemplateItems.length;i++)if(t.dossierTemplateItems[i].partNo===e.dossierPartNo){t.dossierTemplateItems[i]["passRequired"]=!1;break}}else for(i=0;i<t.dossierTemplateItems.length;i++)if(t.dossierTemplateItems[i].partNo===e.dossierPartNo){t.dossierTemplateItems[i]["passRequired"]=!0;break}},checkPartType3(){var e=this;if(0!==e.dossierTemplateItems.length)for(var t=0;t<e.dossierTemplateItems.length;t++)if(3===e.dossierTemplateItems[t].partType)return!0;return!1},viewFile2(e){var t=this;if(0!==e.fileSize)if(e["hasForm"]?t.pdfEform=!0:t.pdfEform=!1,"doc"===e.fileType||"docx"===e.fileType||"xlsx"===e.fileType||"xls"===e.fileType||"zip"===e.fileType||"rar"===e.fileType||"txt"===e.fileType||"mp3"===e.fileType||"mp4"===e.fileType){var a=t.initDataResource.dossierApi+"/"+t.thongTinHoSo.dossierId+"/files/"+e.referenceUid;window.open(a)}else e["dossierId"]=t.thongTinHoSo.dossierId,e.referenceUid?(t.dialogPDFLoading=!0,t.dialogPDF=!0,t.$store.dispatch("viewFile",e).then(e=>{t.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+t.id).src=e})):toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("File dữ liệu không tồn tại")},viewGiayToDaNop(e){var t=this;if(0!==e.fileSize)if(e["hasForm"]?t.pdfEform=!0:t.pdfEform=!1,"doc"===e.fileType||"docx"===e.fileType||"xlsx"===e.fileType||"xls"===e.fileType||"zip"===e.fileType||"rar"===e.fileType||"txt"===e.fileType||"mp3"===e.fileType||"mp4"===e.fileType){var a=t.initDataResource.dossierApi+"/"+e.dossierId+"/files/"+e.referenceUid;window.open(a)}else e.referenceUid?(t.dialogPDFLoading=!0,t.dialogPDF=!0,t.$store.dispatch("viewFile",e).then(e=>{t.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+t.id).src=e})):toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("File dữ liệu không tồn tại")},viewFileWithPartNo(e){var t=this;if(t.dossierFilesItems){var a=t.dossierFilesItems.filter(t=>{return t.dossierPartNo===e.partNo&&!t.eForm});if(!a)return;t.fileViews=a,t.partView!==e.partNo?(t.stateView=!0,t.partView=e.partNo):(t.stateView=!t.stateView,t.partView=e.partNo)}},saveMark(){var e=this;e.dossierTemplateItems&&e.dossierTemplateItems.forEach(function(t,a){1===t.partType&&(t["dossierId"]=e.thongTinHoSo.dossierId,e.$store.dispatch("postDossierMark",t))})},changeFileMark(e,t){var a=this;let i=a.dossierTemplateItems[t];i["dossierId"]=a.thongTinHoSo.dossierId,i["fileMark"]=e,i["checkInput"]=a.checkInput,a.$store.dispatch("postDossierMark",i),a.dossierTemplateItems[t].fileMark=e},changeFileCheck(e,t){var a=this;let i=a.dossierTemplateItems[t];i["dossierId"]=a.thongTinHoSo.dossierId,i["fileCheck"]=e,i["checkInput"]=a.checkInput,2!==e?(i["fileComment"]="",a.$store.dispatch("postDossierMark",i),a.dossierTemplateItems[t].fileCheck=e):i["stateEditFileCheck"]=!0},changeFileComment(e,t){var a=this;null!==e.fileComment&&void 0!==e.fileComment&&""!==e.fileComment&&(e["dossierId"]=a.thongTinHoSo.dossierId,e["fileComment"]=e.fileComment,e["checkInput"]=a.checkInput,e["stateEditFileCheck"]=!e["stateEditFileCheck"],a.$store.dispatch("postDossierMark",e),a.dossierTemplateItems[t].fileComment=e.fileComment)},checkStyle(e){var t=this;if(1===t.checkInput)return"calc(100% - 140px)";{let a=0;return 1===t.originality||1!==e.partType||t.thongTinHoSo.online||1===t.checkInput||(a+=140),e.fileCheck>0&&!t.thongTinHoSo.online&&(a+=20),e.fileCheck>0&&t.thongTinHoSo.online&&(a+=40),t.onlyView||(a+=90),"calc(100% - "+a+"px)"}},checkVisibleTemp(e,t){var a=this;if(!a.onlyView)return!0;if(3===e.partType){if(a.dossierFilesItems.length>0){let t=a.dossierFilesItems.findIndex(t=>{return t.dossierPartNo===e.partNo});return-1!==t}return!1}return!0},changeStateViewResult(){var e=this;if(e.dossierFilesItems.length>0){let t=e.dossierFilesItems.findIndex(e=>{return 2===e.dossierPartType});-1!==t?e.$emit("tp:change-state-view-result",!0):e.$emit("tp:change-state-view-result",!1)}else e.partTypes.includes(2)&&e.$emit("tp:change-state-view-result",!1)},changeOtherDossierTemp(e){var t=this;if(3===t.originality&&t.stateAddFileOther)t.loadingAddOther=!0,t.$store.dispatch("uploadSingleOtherFile",{dossierId:t.thongTinHoSo.dossierId,displayName:e,partNo:t.dossierTemplatesItemSelect.partNo}).then(e=>{t.loadingAddOther=!1,t.dialogAddOtherTemp=!1,t.$store.dispatch("loadDossierFiles",t.thongTinHoSo.dossierId).then(e=>{t.dossierFilesItems=e})}).catch(e=>{t.loadingAddOther=!1});else{let a=t.dossierTemplatesItemSelect;a["dossierId"]=t.thongTinHoSo.dossierId,a["displayName"]=e,a["dossierTemplateNo"]=t.thongTinHoSo.dossierTemplateNo,t.$store.dispatch("uploadSingleFile",a).then(function(e){t.progressUploadPart="",t.dialogAddOtherTemp=!1,t.$store.dispatch("loadDossierFiles",t.thongTinHoSo.dossierId).then(e=>{if(t.dossierFilesItems=e,t.recountFileTemplates(),t.stateView&&t.dossierFilesItems){var a=t.dossierFilesItems.filter(e=>{return e.dossierPartNo===t.dossierTemplatesItemSelect.partNo&&!e.eForm});a&&(t.fileViews=a)}})}).catch(function(e){t.progressUploadPart=""})}},downloadFileTemplate(e,t){var a=this;if(a.fileTemplateItems.length>0){let t=a.fileTemplateItems.find(t=>{return e.fileTemplateNo===t.fileTemplateNo});if(t){let e=a.initDataResource.serviceInfoApi+"/"+a.serviceInfoId+"/filetemplates/"+t.fileTemplateNo;window.open(e)}else console.log("ko thay file")}},addOtherTemplate(){var e=this;e.$refs.form.validate()&&e.changeOtherDossierTemp(e.otherDossierTemplate)},editDisplayName(e,t){var a=this;a.dossierFileIdView!==e.dossierFileId?(a.dossierFileIdView=e.dossierFileId,a.stateEdit=!0):(a.dossierFileIdView=e.dossierFileId,a.stateEdit=!a.stateEdit)},cancelDialog(){var e=this;e.dialogAddOtherTemp=!1,e.progressUploadPart=""},addFileOther(e){var t=this;t.dialogAddOtherTemp=!0,t.stateAddFileOther=!0,t.dossierTemplatesItemSelect=e},validDossierTemplate(){var e=this;if(e.dossierTemplateItems.length>0){for(var t=0;t<e.dossierTemplateItems.length;t++)if(e.dossierTemplateItems[t]["required"]&&!e.dossierTemplateItems[t]["passRequired"]&&e.partTypes.includes(e.dossierTemplateItems[t].partType)){let a="Chú ý :"+e.dossierTemplateItems[t].partName+" là thành phần bắt buộc!";return toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error(a),!1}return!0}return!0},changeDisplayName(e,t){var a=this;let i={dossierId:a.thongTinHoSo.dossierId,value:value};a.$store.dispatch("changeDisplayNameFile",i).then(e=>{a.fileViews[t].displayName=e.displayName,a.stateEdit=!1}).catch(e=>{console.log("error")})},getDossierFileApplicants(e,t){var a=this;let i={dossierId:a.thongTinHoSo.dossierId,applicantIdNo:e,fileTemplateNo:t};a.$store.dispatch("getDossierFilesApplicants",i).then(e=>{a.dossierFilesApplicant=e}).catch(e=>{console.log("error")})},showFilesApplicant(e){console.log(jquery__WEBPACK_IMPORTED_MODULE_0___default()("#fileApplicant-"+e).is(":visible")),jquery__WEBPACK_IMPORTED_MODULE_0___default()("#fileApplicant-"+e).is(":visible")?jquery__WEBPACK_IMPORTED_MODULE_0___default()("#fileApplicant-"+e).hide():jquery__WEBPACK_IMPORTED_MODULE_0___default()("#fileApplicant-"+e).show()},checkKQhasFile(e){var t=this;if(t.partTypes.includes(2)){var a=t.dossierFilesItems.find(t=>{return e.partNo===t.dossierPartNo});return!!a}return!0},partNoApplicantHasFile(e){let t=this,a=t.dossierFilesApplicant.find(a=>{return a.dossierTemplateNo===t.thongTinHoSo["dossierTemplateNo"]&&a.dossierPartNo===e});return!!a}}}},7121:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"phancong",staticStyle:{"background-color":"white",width:"100%"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),e._v("Chọn người thực hiện\n      ")]),a("v-card",[1===e.type?a("div",{staticClass:"px-4 py-1"},[a("v-layout",{attrs:{wrap:""}},e._l(e.data_phancong,function(t,i){return a("v-checkbox",{key:t.userId,staticStyle:{display:"inline-block","min-width":"190px","max-width":"190px"},attrs:{slot:"activator",label:t.userName,title:t.userName},on:{change:function(t){e.changeAssigned(t,i)}},slot:"activator",model:{value:t.assigned,callback:function(a){e.$set(t,"assigned",a)},expression:"item.assigned"}})}),1),e.assignValidate?e._e():a("span",{staticClass:"ml-3",staticStyle:{color:"#f44336"}},[e._v("* Yêu cầu chọn người để thực hiện")])],1):a("v-card-text",{staticClass:"px-4 py-1"},[a("v-layout",{staticClass:"my-1",attrs:{wrap:""}},e._l(e.data_phancong,function(t,i){return a("div",{key:t.userId,staticClass:"ml-3"},[a("v-layout",{attrs:{wrap:""}},[a("v-tooltip",{attrs:{top:""}},[a("v-checkbox",{staticStyle:{"min-width":"150px"},attrs:{slot:"activator",label:t.userName},on:{change:function(t){e.checkAsign(t,i)}},slot:"activator",model:{value:t.assigned,callback:function(a){e.$set(t,"assigned",a)},expression:"item.assigned"}}),a("span",{staticClass:"pl-0"},[e._v(" "+e._s(t.userName)+" ")])],1),a("toggle-button",{staticClass:"mx-1 btn-tgl",attrs:{id:"btn-"+i,title_checked:"Thực hiện",title_unchecked:"Phối hợp",labels:{checked:"TH",unchecked:"PH"},color:{checked:"#7DCE94",unchecked:"#82C7EB"},width:50},on:{change:function(t){e.changeTypeAssign(t,i)}},model:{value:e.presenterAddGroup,callback:function(t){e.presenterAddGroup=t},expression:"presenterAddGroup"}})],1)],1)}),0),e.assignValidate?e._e():a("span",{staticClass:"ml-3",staticStyle:{color:"#f44336"}},[e._v("* Yêu cầu chọn người để thực hiện")])],1)],1)],1)],1)],1)},s=[],o=a("610f"),n={components:{"toggle-button":o["a"]},props:{assign_items:{type:Array,default:()=>[]},type:{type:Number,default:()=>1},configNote:{type:Object,default:()=>{}}},model:{prop:"assign_items"},data:()=>({data_phancong:[],assignedtype_items:{2:[{text:"Không có phân công",value:0},{text:"Thực hiện chính",value:1},{text:"Thực hiện phối hợp",value:2}],3:[{text:"Không có phân công",value:0},{text:"Thực hiện chính",value:1},{text:"Thực hiện phối hợp",value:2},{text:"Theo dõi",value:3}]},title_asign:{1:"PHÂN CÔNG NGƯỜI THỰC HIỆN",2:"PHÂN CÔNG THỰC HIỆN, PHỐI HỢP",3:"PHÂN CÔNG THỰC HIỆN, PHỐI HỢP VÀ THEO DÕI"},presenterAddGroup:!0,assignValidate:!0}),created(){setTimeout(function(){window.$(".btn-tgl").addClass("btn-hidden")},200)},mounted(){this.data_phancong=this.assign_items},methods:{changeAssigned(e,t){var a=this;1===a.type&&(a.assign_items[t].assigned=!0===e?1:0)},checkAsign(e,t){var a=this;e?(a.assign_items[t].assigned=1,window.$(`#btn-${t}`).removeClass("btn-hidden")):(a.assign_items[t].assigned=0,window.$(`#btn-${t}`).addClass("btn-hidden"))},changeTypeAssign(e,t){var a=this;e.value?(a.assign_items[t].assigned=1,window.$(`#btn-${t}`).removeClass("btn-hidden")):(a.assign_items[t].assigned=2,window.$(`#btn-${t}`).addClass("btn-hidden"))},doExport(){var e=this;let t=e.assign_items.filter(function(e){return Number(e.assigned)>0});return 0===t.length?(e.assignValidate=!1,e.assignValidate):(e.assignValidate=!0,e.assignValidate)}}},r=n,l=a("2877"),c=a("6544"),d=a.n(c),h=a("b0af"),u=a("99d9"),p=a("ac7c"),m=a("cd55"),g=a("49e2"),v=a("132d"),_=a("a722"),f=a("3a2f"),y=Object(l["a"])(r,i,s,!1,null,null,null);y.options.__file="PhanCongNguoiThucHien.vue";t["a"]=y.exports;d()(y,{VCard:h["a"],VCardText:u["b"],VCheckbox:p["a"],VExpansionPanel:m["a"],VExpansionPanelContent:g["a"],VIcon:v["a"],VLayout:_["a"],VTooltip:f["a"]})},"74ef":function(e,t,a){},"76eb":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-text",{staticClass:"pb-0"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-header"},[e._v("Thủ tục: ")])],1),a("v-flex",{attrs:{xs12:"",sm10:""}},[a("v-subheader",{staticClass:"pl-0 header-text-field text-header"},[e._v("  "+e._s(e.thongTinChiTietHoSo.serviceName)+" ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-header"},[e._v("Mã số hồ sơ: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[e._v("  "+e._s(e.thongTinChiTietHoSo.dossierNo)+" ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-header"},[e._v("Thời hạn giải quyết: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[e._v("  "+e._s(e.durationText(e.thongTinChiTietHoSo.durationUnit,e.thongTinChiTietHoSo.durationCount))+" làm việc  ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-header"},[e._v("Ngày tiếp nhận: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[e._v("  "+e._s(e.thongTinChiTietHoSo.receiveDate)+" ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-header"},[e._v("Ngày hẹn trả: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[e._v("  "+e._s(e.thongTinChiTietHoSo.dueDate)+" ")])],1)],1)],1)],1)},s=[],o={data:()=>({thongTinChiTietHoSo:{}}),computed:{loading(){return this.$store.getters.loading}},created(){},methods:{initData(e){this.thongTinChiTietHoSo=e},durationText(e,t){var a;if(1===e&&t>8){let e,i=Math.floor(t/8)+" ngày";e=t%8!==0?8*(t/8-Math.floor(t/8))+" giờ":"",a=`${i} ${e}`}else 0===e?a=t+" ngày":1===e&&t<=8&&(a=t+" giờ");return a}},filters:{dateTimeView(e){if(e){let t=new Date(e);return`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()}  ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`}return""}}},n=o,r=a("2877"),l=a("6544"),c=a.n(l),d=a("b0af"),h=a("99d9"),u=a("0e8f"),p=a("a722"),m=a("e0c7"),g=Object(r["a"])(n,i,s,!1,null,null,null);g.options.__file="ThongTinChungHoSo.vue";t["a"]=g.exports;c()(g,{VCard:d["a"],VCardText:h["b"],VFlex:u["a"],VLayout:p["a"],VSubheader:m["a"]})},"78a5":function(module,__webpack_exports__,__webpack_require__){"use strict";var toastr__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("854a"),toastr__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(toastr__WEBPACK_IMPORTED_MODULE_0__);toastr__WEBPACK_IMPORTED_MODULE_0___default.a.options={closeButton:!0,timeOut:"5000"},__webpack_exports__["a"]={props:{id:{type:String,default:()=>"nm"},detailDossier:{type:Object,default:()=>{}},createFiles:{type:Array,default:()=>[]}},data:()=>({dossierTemplateItems:[],dossierMarksItems:[],dossierFilesItems:[],thongTinHoSo:{},valid:!0,stateView:!1,dialogAddOtherTemp:!1,loadingAddOther:!1,otherDossierTemplate:"",sheet:!1,partView:"",dossierFileIdView:"",stateEdit:!1,progressUploadPart:"",dialogPDF:!1,dialogPDFLoading:!0,stateAddFileOther:!1,dossierTemplatesItemSelect:{},fileViews:[],sampleCount:0,fileTemplateItems:[],currentFormView:"",pstFixed:0,pstEl:0,endEl:0}),computed:{loading(){return this.$store.getters.loading},originality(){var e=this;return e.getOriginality()},initDataResource(){return this.$store.getters.loadingInitData}},created(){var e=this;e.page=1,e.$nextTick(function(){if(e.detailDossier["dossierId"]){var t=[];t.push(e.$store.dispatch("loadDossierFiles",e.detailDossier.dossierId)),t.push(e.$store.dispatch("loadDossierTemplates",e.detailDossier)),Promise.all(t).then(t=>{var a=t[1],i=t[0];e.dossierFilesItems=i,e.createFiles=e.mergeDossierTemplateVsDossierFiles(e.createFiles,i),0!==a.length&&e.createFiles.forEach(e=>{var t=a.find(t=>{return e.partNo===t.partNo});t&&(e["partTip"]=t["partTip"])}),console.log("creataaaaaa",e.createFiles)})}})},mounted(){var e=this;e.$nextTick(function(){e.createFiles.length>0&&setTimeout(function(){e.genAllAlpacaForm(e.dossierFilesItems,e.createFiles)},300)})},methods:{genAllAlpacaForm(e,t){var a=this;if(e.length>0){var i=e.filter(e=>{return e.eForm}),s=t.filter(e=>{return e.eForm});i.length>0?i.forEach(e=>{e.eForm&&a.$store.dispatch("loadAlpcaForm",e)}):t.forEach(e=>{e.eForm&&(e["templateFileNo"]=a.detailDossier.dossierTemplateNo,a.showAlpacaJSFORM(e))}),s.length!==i.length&&s.forEach(e=>{let t=i.findIndex(t=>{return e.partNo===t.dossierPartNo});-1===t&&(e["templateFileNo"]=a.detailDossier.dossierTemplateNo,a.showAlpacaJSFORM(e))})}else t.forEach(e=>{e.eForm&&(e["templateFileNo"]=a.detailDossier.dossierTemplateNo,a.showAlpacaJSFORM(e))})},mergeDossierTemplateVsDossierFiles(e,t){return 0!==t.length?e.forEach(e=>{var a=t.find(t=>{return e.partNo===t.dossierPartNo&&t.eForm});a?e["daKhai"]=!0:!a&&e.eForm&&(e["daKhai"]=!1)}):e.forEach(e=>{e.eForm&&(e["daKhai"]=!1)}),e},showAlpacaJSFORM(item){var vm=this;item["dossierId"]=vm.detailDossier.dossierId,vm.$store.dispatch("loadFormScript",item).then(resScript=>{vm.$store.dispatch("loadFormData",item).then(resData=>{var formScript,formData;window.$("#formAlpaca"+item.partNo+vm.id).empty(),formScript=resScript?eval("("+resScript+")"):{},formData=resData?eval("("+resData+")"):{},formScript.data=formData,window.$("#formAlpaca"+item.partNo+vm.id).alpaca(formScript)})})},saveAlpacaForm(e,t){var a=this;console.log("itemSave",e);var i=a.dossierFilesItems.find(t=>{return t.dossierPartNo===e.partNo&&t.eForm});i?(i["dossierId"]=a.detailDossier.dossierId,i["id"]=a.id,a.$store.dispatch("putAlpacaForm",i).then(e=>{a.$store.dispatch("loadDossierFiles",a.detailDossier.dossierId).then(e=>{a.dossierFilesItems=e}).catch(e=>{})}).catch(e=>{console.log("run saveForm"),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn được thực hiện thất bại.")})):(e["dossierId"]=a.detailDossier.dossierId,e["id"]=a.id,a.$store.dispatch("postEform",e).then(e=>{a.createFiles[t].daKhai=!0,a.$store.dispatch("loadDossierFiles",a.detailDossier.dossierId).then(e=>{a.dossierFilesItems=e}).catch(e=>{toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn được thực hiện thất bại.")})}).catch(e=>{toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn được thực hiện thất bại.")}))},onDeleteAttackFiles(e){var t=this;console.log("delete");let a=confirm("Bạn có muốn xóa toàn bộ file trong thành phần hồ sơ này?");a&&t.dossierFilesItems.forEach(a=>{a.dossierPartNo===e.partNo&&(a["dossierId"]=t.detailDossier.dossierId,t.$store.dispatch("deleteAttackFiles",a).then(function(e){t.$store.dispatch("loadDossierFiles",t.detailDossier.dossierId)}).catch(function(e){}))})},pickFile(e){var t=this;t.stateAddFileOther=!1,document.getElementById("file"+e.partNo).value="",document.getElementById("file"+e.partNo).click()},onUploadSingleFile(e,t){var a=this;a.dossierTemplatesItemSelect=t,a.progressUploadPart=t.partNo,t["dossierId"]=a.detailDossier.dossierId,t["dossierTemplateNo"]=a.detailDossier.dossierTemplateNo,a.$store.dispatch("uploadSingleFile",t).then(function(e){a.progressUploadPart="",a.$store.dispatch("loadDossierFiles",a.detailDossier.dossierId).then(e=>{a.dossierFilesItems=e})}).catch(function(e){a.progressUploadPart=""})},loadAlpcaForm(e){var t=this;t.currentFormView="formAlpaca"+e.partNo+t.id,t.pstEl=t.endEl=0,setTimeout(function(){$("#formAlpaca"+e.partNo+t.id).height()>200&&(t.pstEl=$("#wrapForm"+e.partNo+t.id).offset().top,t.endEl=$("#formAlpaca"+e.partNo+t.id).height(),$(window).scroll(function(){t.pstFixed=$(window).scrollTop()}))},500);var a=t.dossierFilesItems.find(t=>{return t.dossierPartNo===e.partNo&&t.eForm});a?(a["id"]=t.id,t.$store.dispatch("loadAlpcaForm",a)):t.createFiles.forEach(a=>{a.eForm&&e.partNo===a.partNo&&(a["templateFileNo"]=t.detailDossier.dossierTemplateNo,t.showAlpacaJSFORM(a))})},deleteSingleFileEform(e,t){var a=this;let i=confirm("Bạn có muốn xóa?");i&&(a.dossierFilesItems.forEach(t=>{t.dossierPartNo===e.partNo&&t.eForm&&(t["dossierId"]=a.detailDossier.dossierId,a.$store.dispatch("deleteDossierFile",t).then(t=>{console.log("success!"),a.$store.dispatch("loadDossierFiles",a.detailDossier.dossierId).then(t=>{a.dossierFilesItems=t;var i=a.dossierFilesItems.filter(t=>{return t.dossierPartNo===e.partNo&&!t.eForm});i&&(a.fileViews=i)})}))}),a.createFiles[t].daKhai=!1)},previewFileEfom(e,t){var a=this;a.dossierFilesItems.forEach(t=>{t.dossierPartNo===e.partNo&&t.eForm&&(t["dossierId"]=a.detailDossier.dossierId,a.dialogPDFLoading=!0,a.dialogPDF=!0,t["id"]=a.id,a.$store.dispatch("putAlpacaForm",t).then(e=>{setTimeout(function(){a.$store.dispatch("viewFile",t).then(e=>{a.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+a.id).src=e})},1e3)}).catch(e=>{toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn được thực hiện thất bại.")}))})},deleteSingleFile(e,t){var a=this;let i=confirm("Bạn có muốn xóa?");i&&(e["dossierId"]=a.detailDossier.dossierId,a.$store.dispatch("deleteDossierFile",e).then(i=>{a.fileViews.splice(t,1),a.partView=e.dossierPartNo,a.$store.dispatch("loadDossierFiles",a.detailDossier.dossierId).then(e=>{a.dossierFilesItems=e})}).catch(e=>{toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn được thực hiện thất bại.")}))},viewFile(e){var t=this;t.dossierFilesItems.forEach(a=>{a["dossierId"]=t.detailDossier.dossierId,a.dossierPartNo===e.partNo&&this.$store.dispatch("viewFile",a)})},viewFile2(e){var t=this;if("doc"===e.fileType||"docx"===e.fileType||"xlsx"===e.fileType||"xls"===e.fileType||"zip"===e.fileType||"rar"===e.fileType||"txt"===e.fileType){var a=t.initDataResource.dossierApi+"/"+t.detailDossier.dossierId+"/files/"+e.referenceUid;window.open(a)}else t.dialogPDFLoading=!0,t.dialogPDF=!0,e["dossierId"]=t.detailDossier.dossierId,t.$store.dispatch("viewFile",e).then(e=>{t.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+t.id).src=e})},viewFileWithPartNo(e){var t=this;if(t.dossierFilesItems){var a=t.dossierFilesItems.filter(t=>{return t.dossierPartNo===e.partNo&&!t.eForm});if(!a)return;t.fileViews=a,t.partView!==e.partNo?(t.stateView=!0,t.partView=e.partNo):(t.stateView=!t.stateView,t.partView=e.partNo)}},checkStyle(e){return"calc(100% - 50px)"},downloadFileTemplate(e,t){var a=this;if(a.fileTemplateItems.length>0){let t=a.fileTemplateItems.find(t=>{return e.fileTemplateNo===t.fileTemplateNo});if(t){let e=a.initDataResource.serviceInfoApi+"/"+t.serviceCode+"/filetemplates/"+t.fileTemplateNo;window.open(e)}else console.log("ko thay file")}},cancelDialog(){var e=this;e.dialogAddOtherTemp=!1,e.progressUploadPart=""},addFileOther(e){var t=this;t.dialogAddOtherTemp=!0,t.stateAddFileOther=!0,t.dossierTemplatesItemSelect=e},changeDisplayName(e,t){var a=this;let i={dossierId:a.detailDossier.dossierId,value:value};a.$store.dispatch("changeDisplayNameFile",i).then(e=>{a.fileViews[t].displayName=e.displayName,a.stateEdit=!1}).catch(e=>{console.log("error")})},validCreateFileTemplate(){var e=this;if(e.createFiles.length>0){for(var t=0;t<e.createFiles.length;t++)if(e.createFiles[t]["required"]&&!e.createFiles[t]["daKhai"]){let a="Chú ý :"+e.createFiles[t].partName+" là thành phần bắt buộc!";return toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error(a),!1}return!0}return!0}}}},"87c1":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-expansion-panel",{staticClass:"expansion-pl ext__form",attrs:{value:[!0]}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),a("span",[e._v("Ý kiến cán bộ")]),2===e.user_note?a("span",{staticClass:"red--text text--darken-3"},[e._v("*")]):e._e()]),a("v-card",[a("v-card-text",{staticClass:"py-2 px-4"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-form",{ref:"userNoteForm",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{attrs:{"multi-line":"",rows:4,rules:2===e.user_note?[function(){return""!==e.noteYkien||"Trường dữ liệu bắt buộc"}]:[],box:"",label:"nhập ý kiến"},model:{value:e.noteYkien,callback:function(t){e.noteYkien=t},expression:"noteYkien"}})],1)],1)],1)],1)],1)],1)],1)},s=[],o={props:{user_note:{type:Number,required:!0},configNote:{type:Object,required:!1}},data:()=>({noteYkien:"",valid:!1}),methods:{initData(e){var t=this;t.$store.dispatch("getDetailDossier",e).then(e=>{t.thongTinChiTietHoSo=e})},doExport(){let e=this,t={text:e.noteYkien,valid:e.$refs.userNoteForm.validate()};return t}}},n=o,r=a("2877"),l=a("6544"),c=a.n(l),d=a("b0af"),h=a("99d9"),u=a("cd55"),p=a("49e2"),m=a("0e8f"),g=a("4bd4"),v=a("132d"),_=a("a722"),f=a("2677"),y=Object(r["a"])(n,i,s,!1,null,null,null);y.options.__file="YkienCanBoThucHien.vue";t["a"]=y.exports;c()(y,{VCard:d["a"],VCardText:h["b"],VExpansionPanel:u["a"],VExpansionPanelContent:p["a"],VFlex:m["a"],VForm:g["a"],VIcon:v["a"],VLayout:_["a"],VTextField:f["a"]})},"885b":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"phancong",staticStyle:{"background-color":"white",width:"100%"}},[1===e.type?a("div",[a("v-layout",{attrs:{wrap:""}},e._l(e.data_phancong,function(t,i){return a("v-checkbox",{key:t.userId,staticStyle:{display:"inline-block","min-width":"190px","max-width":"190px"},attrs:{slot:"activator",label:t.userName,title:t.userName},on:{change:function(t){e.changeAssigned(t,i)}},slot:"activator",model:{value:t.assigned,callback:function(a){e.$set(t,"assigned",a)},expression:"item.assigned"}})}),1),e.assignValidate?e._e():a("span",{staticClass:"ml-3",staticStyle:{color:"#f44336"}},[e._v("* Yêu cầu chọn người để thực hiện")])],1):a("v-card-text",[a("v-layout",{staticClass:"my-1",attrs:{wrap:""}},e._l(e.data_phancong,function(t,i){return a("div",{key:t.userId,staticClass:"ml-3"},[a("v-layout",{attrs:{wrap:""}},[a("v-tooltip",{attrs:{top:""}},[a("v-checkbox",{staticStyle:{"min-width":"150px"},attrs:{slot:"activator",label:t.userName},on:{change:function(t){e.checkAsign(t,i)}},slot:"activator",model:{value:t.assigned,callback:function(a){e.$set(t,"assigned",a)},expression:"item.assigned"}}),a("span",{staticClass:"pl-0"},[e._v(" "+e._s(t.userName)+" ")])],1),a("toggle-button",{staticClass:"mx-1 btn-tgl",attrs:{id:"btn-"+i,title_checked:"Thực hiện",title_unchecked:"Phối hợp",labels:{checked:"TH",unchecked:"PH"},color:{checked:"#7DCE94",unchecked:"#82C7EB"},width:50},on:{change:function(t){e.changeTypeAssign(t,i)}},model:{value:e.presenterAddGroup,callback:function(t){e.presenterAddGroup=t},expression:"presenterAddGroup"}})],1)],1)}),0),e.assignValidate?e._e():a("span",{staticClass:"ml-3",staticStyle:{color:"#f44336"}},[e._v("* Yêu cầu chọn người thực hiện")])],1)],1)},s=[],o=a("610f"),n={components:{"toggle-button":o["a"]},props:{reAsignUsers:{type:Array,default:()=>[]},type:{type:Number,default:()=>1},configNote:{type:Object,default:()=>{}}},model:{prop:"reAsignUsers"},data:()=>({data_phancong:[],assignedtype_items:{2:[{text:"Không có phân công",value:0},{text:"Thực hiện chính",value:1},{text:"Thực hiện phối hợp",value:2}],3:[{text:"Không có phân công",value:0},{text:"Thực hiện chính",value:1},{text:"Thực hiện phối hợp",value:2},{text:"Theo dõi",value:3}]},title_asign:{1:"PHÂN CÔNG NGƯỜI THỰC HIỆN",2:"PHÂN CÔNG THỰC HIỆN, PHỐI HỢP",3:"PHÂN CÔNG THỰC HIỆN, PHỐI HỢP VÀ THEO DÕI"},presenterAddGroup:!0,assignValidate:!0}),created(){setTimeout(function(){window.$(".btn-tgl").addClass("btn-hidden")},200)},mounted(){this.data_phancong=this.reAsignUsers},watch:{reAsignUsers(e){this.data_phancong=e}},methods:{changeAssigned(e,t){var a=this;1===a.type&&(a.reAsignUsers[t].assigned=!0===e?1:0)},checkAsign(e,t){var a=this;e?(a.reAsignUsers[t].assigned=1,window.$(`#btn-${t}`).removeClass("btn-hidden")):(a.reAsignUsers[t].assigned=0,window.$(`#btn-${t}`).addClass("btn-hidden"))},changeTypeAssign(e,t){var a=this;e.value?(a.reAsignUsers[t].assigned=1,window.$(`#btn-${t}`).removeClass("btn-hidden")):(a.reAsignUsers[t].assigned=2,window.$(`#btn-${t}`).addClass("btn-hidden"))},doExport(){var e=this;let t=e.reAsignUsers.filter(function(e){return Number(e.assigned)>0});return 0===t.length?(e.assignValidate=!1,e.assignValidate):(e.assignValidate=!0,e.assignValidate)}}},r=n,l=a("2877"),c=a("6544"),d=a.n(c),h=a("99d9"),u=a("ac7c"),p=a("a722"),m=a("3a2f"),g=Object(l["a"])(r,i,s,!1,null,null,null);g.options.__file="PhanCongLai.vue";t["a"]=g.exports;d()(g,{VCardText:h["b"],VCheckbox:u["a"],VLayout:p["a"],VTooltip:m["a"]})},"8bf2":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),e._v("Thông tin gửi bưu chính\n    ")]),a("v-card",[a("v-layout",{staticClass:"my-2",attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[e._v("Dịch vụ đăng ký: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("p",{staticClass:"mb-0",staticStyle:{"padding-top":"9px"}},[e._v("VNPOST")])]),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[e._v("Bưu cục: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("p",{staticClass:"mb-0",staticStyle:{"padding-top":"9px"}},[e._v(e._s(e.postName))])]),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[e._v("Tên người nhận: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("p",{staticClass:"mb-0",staticStyle:{"padding-top":"9px"}},[e._v(e._s(e.postalService.applicantName))])]),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[e._v("Số điện thoại: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("p",{staticClass:"mb-0",staticStyle:{"padding-top":"9px"}},[e._v(e._s(e.postalService.postalTelNo))])]),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0"},[e._v("Địa chỉ: ")])],1),a("v-flex",{attrs:{xs12:"",sm10:""}},[a("p",{staticClass:"mb-0",staticStyle:{"padding-top":"9px"}},[e._v(e._s(e.postalService.postalAddress))])])],1)],1)],1)],1)},s=[],o={props:{postalService:{type:Object,default:()=>{}}},data:()=>({postName:""}),computed:{},created(){var e=this;e.$nextTick(function(){let e=this;e.$store.dispatch("getVNPOSTcode").then(t=>{let a=t.filter(function(t){return Number(t.itemCode)===Number(e.postalService.postalCityCode)});a.length>0&&(e.postName=a[0].itemName)})})},methods:{}},n=o,r=a("2877"),l=a("6544"),c=a.n(l),d=a("b0af"),h=a("cd55"),u=a("49e2"),p=a("0e8f"),m=a("132d"),g=a("a722"),v=a("e0c7"),_=Object(r["a"])(n,i,s,!1,null,null,null);_.options.__file="ThongTinGuiBuuChinh.vue";t["a"]=_.exports;c()(_,{VCard:d["a"],VExpansionPanel:h["a"],VExpansionPanelContent:u["a"],VFlex:p["a"],VIcon:m["a"],VLayout:g["a"],VSubheader:v["a"]})},9190:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form-chitiet",staticStyle:{"background-color":"#ffff"}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:""}},[a("div",{staticClass:"row-header"},[a("div",{staticClass:"background-triangle-big"},[a("span",[e._v("TÊN THỦ TỤC")])]),a("div",{staticClass:"layout row wrap header_tools row-blue"},[a("div",{staticClass:"flex xs8 sm10 pl-3 text-ellipsis text-bold",attrs:{title:e.thongTinChungHoSo.serviceName}},[e._v("\n              "+e._s(e.thongTinChungHoSo.serviceName)+"\n            ")]),a("div",{staticClass:"flex xs4 sm2 text-right",staticStyle:{"margin-left":"auto"}})])])]),a("v-flex",{staticClass:"text-xs-center mt-4",attrs:{xs12:"",sm12:""}},[a("h3",{staticClass:"text-xs-center"},[e._v("NỘP HỒ SƠ THÀNH CÔNG")])]),a("v-flex",{attrs:{xs12:""},domProps:{innerHTML:e._s(e.thongTinChungHoSo.submissionNote)}}),a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.goBack()}}},[e._v("Quay lại danh sách   "),a("v-icon",{attrs:{size:"16"}},[e._v("undo")])],1)],1)],1)],1)},s=[],o=a("a18c"),n={props:{id:{type:Number,default:()=>0},index:{type:Number,default:()=>0}},data:()=>({thongTinChungHoSo:{},dossierTemplateItems:[],dossierFilesItems:[],dossierTemplateSendItems:[]}),created(){var e=this;e.$nextTick(function(){e.$store.dispatch("getDetailDossier",e.id).then(t=>{e.thongTinChungHoSo=t;let a=[];a.push(e.$store.dispatch("loadDossierTemplates",t)),a.push(e.$store.dispatch("loadDossierFiles",t.dossierId)),Promise.all(a).then(t=>{e.dossierTemplateItems=t[0],e.dossierFilesItems=t[1],e.dossierTemplateSendItems=e.filterDossierTemplateSend()}).catch(e=>{})})})},computed:{loading(){return this.$store.getters.loading}},methods:{initData(e){var t=this;t.thongTinChungHoSo=e},goBack(){o["a"].push({path:"/danh-sach-ho-so/0",query:{recount:Math.floor(100*Math.random())+1,renew:Math.floor(100*Math.random())+1,q:"/o/rest/v2/dossiers/todo?owner=true&order=true&step=110,130,510"}})},filterDossierTemplateSend(){var e=this;let t=[];return e.dossierTemplateItems.length>0&&e.dossierFilesItems.length>0?(e.dossierTemplateItems.forEach(a=>{let i=e.dossierFilesItems.findIndex(e=>{return a.partNo===e.dossierPartNo});-1!==i&&t.push(a)}),t):[]},back(){},dateTimeView(e){if(e){let t=new Date(e);return`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()} ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`}},formatDateInput(e){return`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")} ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`}},filters:{dateTimeView(e){if(e){let t=new Date(e);return`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()} ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`}return""}}},r=n,l=a("2877"),c=a("6544"),d=a.n(c),h=a("8336"),u=a("0e8f"),p=a("132d"),m=a("a722"),g=Object(l["a"])(r,i,s,!1,null,null,null);g.options.__file="NopThanhCong.vue";t["default"]=g.exports;d()(g,{VBtn:h["a"],VFlex:u["a"],VIcon:p["a"],VLayout:m["a"]})},"93f5":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-card",[e._l(e.dossierTemplateItems,function(t,i){return e.partTypes.includes(t.partType)&&e.checkVisibleTemp(t,i)?a("div",{key:t.partNo,staticClass:"form_alpaca",staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expaned__list__data",attrs:{value:[e.currentFormView==="formAlpaca"+t.partNo+e.id]}},[a("v-expansion-panel-content",{attrs:{"hide-actions":""}},[a("div",{staticStyle:{"background-color":"#fff"},attrs:{slot:"header"},on:{click:function(t){e.stateView=!1}},slot:"header"},[a("div",{staticStyle:{"align-items":"center",background:"#fff","padding-left":"25px"},style:{width:e.checkStyle(t)}},[a("div",{staticClass:"mr-2",staticStyle:{"min-width":"18px",display:"flex"},on:{click:function(a){e.onlyView&&t.hasForm?e.viewFile2(t):e.loadAlpcaForm(t)}}},[a("div",{staticClass:"header__tphs"},[a("span",{staticClass:"text-bold"},[e._v(e._s(i+1)+".")]),e._v("  ")]),a("div",{staticClass:"header__tphs"},[a("v-tooltip",{staticStyle:{"max-width":"100% !important"},attrs:{top:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[e._v("\n                      "+e._s(t.partName)+"  \n                      "),t.required?a("span",{staticStyle:{color:"red"}},[e._v(" (*) ")]):e._e(),e._v("\n                        \n                    ")]),t.partTip["tip"]?a("span",[e._v(e._s(t.partTip["tip"]))]):e._e()]),t.hasForm&&t.daKhai&&(1===e.originality&&2!==t.partType||1!==e.originality)?a("v-tooltip",{attrs:{top:""}},[a("i",{staticClass:"fa fa-file-text-o",staticStyle:{color:"#0d71bb","font-size":"13px"},attrs:{slot:"activator","aria-hidden":"true"},slot:"activator"}),a("span",[e._v("Biểu mẫu trực tuyến (Đã khai)")])]):e._e(),t.hasForm&&!t.daKhai&&(1===e.originality&&2!==t.partType||1!==e.originality)?a("v-tooltip",{attrs:{top:""}},[a("i",{staticClass:"fa fa-file-o",staticStyle:{color:"#0d71bb","font-size":"13px"},attrs:{slot:"activator"},slot:"activator"}),a("span",[e._v("Biểu mẫu trực tuyến (Chưa khai)")])]):e._e(),e._v("\n                    \n                  "),!t.hasForm&&t.hasFileTemp?a("v-tooltip",{attrs:{top:""}},[a("v-icon",{staticStyle:{color:"#0d71bb"},attrs:{slot:"activator",size:"16",color:"primary"},on:{click:function(a){a.stopPropagation(),e.downloadFileTemplate(t,i)}},slot:"activator"},[e._v("save_alt")]),a("span",[e._v("Biểu mẫu điền thủ công")])],1):e._e()],1)]),a("div",{staticStyle:{display:"flex"}},[1===e.checkInput&&2===t.fileCheck&&t.stateEditFileCheck?a("v-text-field",{attrs:{placeholder:"Nhập lý do",rules:[function(e){return!!e||"Bạn phải nhập lý do trước khi gửi"}],required:""},on:{keyup:function(a){if(!("button"in a)&&e._k(a.keyCode,"enter",13,a.key,"Enter"))return null;e.changeFileComment(t,i)}},model:{value:t.fileComment,callback:function(a){e.$set(t,"fileComment",a)},expression:"item.fileComment"}}):e._e(),1===e.checkInput&&2===t.fileCheck&&t.stateEditFileCheck?a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(a){a.stopPropagation(),e.changeFileComment(t,i)}},slot:"activator"},[a("v-icon",{staticClass:"mx-0",attrs:{size:"16",color:"primary"}},[e._v("send")])],1),a("span",[e._v("Gửi")])],1):e._e()],1),t.fileComment&&!t.stateEditFileCheck?a("i",{staticStyle:{"font-size":"12px",color:"#0d71bb","margin-left":"10px"}},[e._v(e._s(t.fileComment))]):e._e(),t.fileComment&&!t.stateEditFileCheck&&1===e.checkInput?a("v-tooltip",{attrs:{top:""}},[a("v-icon",{staticStyle:{"font-size":"13px",color:"#0d71bb","margin-left":"10px",cursor:"pointer"},attrs:{slot:"activator"},on:{click:function(e){e.stopPropagation(),t.stateEditFileCheck=!t.stateEditFileCheck}},slot:"activator"},[e._v("edit")]),a("span",[e._v("Chỉnh sửa ý kiến")])],1):e._e(),e._l(e.dossierFilesItems,function(i,s){return t.partNo!==i.dossierPartNo||i.eForm?e._e():a("div",{key:s},[a("div",{style:{width:"calc(100% - 370px)",display:"flex","align-items":"center",background:"#fff","padding-left":"15px","font-size":"12px","margin-bottom":e.onlyView?"5px":"0px"}},[a("span",{staticClass:"ml-3",staticStyle:{cursor:"pointer"},on:{click:function(t){t.stopPropagation(),e.viewFile2(i)}}},[0!==i.fileSize?a("v-icon",[e._v("attach_file")]):e._e(),e._v("\n                    "+e._s(i.displayName)+" - \n                    "),a("i",[e._v(e._s(i.modifiedDate))])],1),e.onlyView||1===e.checkInput?e._e():a("v-btn",{staticClass:"mx-0 my-0",attrs:{icon:"",ripple:""},on:{click:function(t){t.stopPropagation(),e.deleteSingleFile(i,s)}}},[a("v-icon",{staticStyle:{color:"red"}},[e._v("delete_outline")])],1)],1)])}),a("div",{staticClass:"mr-3 my-1 py-2",staticStyle:{display:"none",border:"1px solid #f3ae75"},attrs:{id:"fileApplicant-"+t.partNo}},e._l(e.dossierFilesApplicant,function(i,s){return i.dossierTemplateNo===e.thongTinHoSo["dossierTemplateNo"]&&t.partNo===i.dossierPartNo?a("div",{key:s},[i.eForm?a("div",{style:{width:"calc(100% - 0px)",display:"flex","align-items":"center",background:"#fff","padding-left":"15px","font-size":"12px","margin-bottom":e.onlyView?"5px":"0px"}},[a("v-tooltip",{staticStyle:{"max-width":"100%"},attrs:{top:""}},[a("span",{staticClass:"ml-3",staticStyle:{cursor:"pointer"},attrs:{slot:"activator"},on:{click:function(t){t.stopPropagation(),e.viewGiayToDaNop(i)}},slot:"activator"},[a("i",{staticClass:"ml-1 fa fa-file-o",staticStyle:{color:"#0d71bb","font-size":"13px"}}),e._v("  \n                        "+e._s(i.referenceUid)+"."+e._s(i.fileType)+" - \n                        "),a("i",[e._v(e._s(i.modifiedDate))])]),a("span",[e._v("Bản khai trực tuyến")])])],1):a("div",{style:{width:"calc(100% - 0px)",display:"flex","align-items":"center",background:"#fff","padding-left":"15px","font-size":"12px","margin-bottom":e.onlyView?"5px":"0px"}},[a("v-tooltip",{staticStyle:{"max-width":"100%"},attrs:{top:""}},[a("span",{staticClass:"ml-3",staticStyle:{cursor:"pointer"},attrs:{slot:"activator"},on:{click:function(t){t.stopPropagation(),e.viewGiayToDaNop(i)}},slot:"activator"},[0!==i.fileSize?a("v-icon",{staticStyle:{color:"#0d71bb"}},[e._v("attach_file")]):e._e(),e._v("\n                        "+e._s(i.displayName)+" - \n                        "),a("i",[e._v(e._s(i.modifiedDate))])],1),a("span",[e._v("Đính kèm")])])],1)]):e._e()}),0)],2)]),t.hasForm&&!e.onlyView?a("v-card",[a("v-card-text",{staticStyle:{"background-color":"rgba(244, 247, 213, 0.19)"}},[a("v-layout",{attrs:{wrap:""}},[e.stateView?e._e():a("v-flex",{staticClass:"text-xs-right",attrs:{xs12:""}},[a("div",{style:e.pstFixed>e.pstEl&&e.pstFixed<e.endEl+e.pstEl?"position:fixed;top:5px;z-index:101":"",attrs:{id:"wrapForm"+t.partNo+e.id}},[t.hasForm&&!e.onlyView&&1!==e.checkInput?a("v-btn",{attrs:{color:"primary"},on:{click:function(a){e.saveAlpacaForm(t,i)}}},[e._v("Lưu lại")]):e._e(),t.daKhai&&t.hasForm&&!e.onlyView&&1!==e.checkInput?a("v-btn",{attrs:{color:"primary"},on:{click:function(a){e.deleteSingleFileEform(t,i)}}},[e._v("Xóa")]):e._e(),t.daKhai&&t.hasForm?a("v-btn",{attrs:{color:"primary"},on:{click:function(a){e.previewFileEfom(t,i)}}},[e._v("In")]):e._e()],1),!e.onlyView||t.daKhai?a("div",{class:{no_acction__event:e.onlyView},attrs:{id:"formAlpaca"+t.partNo+e.id}}):e._e()])],1)],1)],1):e._e()],1)],1),a("div",{staticClass:"absolute__btn group__thanh_phan mr-1"},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-layout",{attrs:{row:"",wrap:""}},[1===e.originality||1!==t.partType||e.thongTinHoSo.online||1===e.checkInput?e._e():a("v-flex",{staticClass:"layout wrap",staticStyle:{width:"110px"}},[a("v-select",{attrs:{items:e.fileMarkItems,disabled:e.onlyView},on:{change:function(t){e.changeFileMark(t,i)}},model:{value:e.dossierTemplateItems[i].fileMark,callback:function(t){e.$set(e.dossierTemplateItems[i],"fileMark",t)},expression:"dossierTemplateItems[index].fileMark"}})],1),1===e.checkInput?a("v-flex",{staticClass:"layout wrap",staticStyle:{width:"120px"}},[a("v-select",{attrs:{items:e.fileCheckItems,"item-text":"text","item-value":"value"},on:{change:function(t){e.changeFileCheck(t,i)}},model:{value:e.dossierTemplateItems[i].fileCheck,callback:function(t){e.$set(e.dossierTemplateItems[i],"fileCheck",t)},expression:"dossierTemplateItems[index].fileCheck"}})],1):t.fileCheck>0?a("v-flex",{staticClass:"layout wrap",style:{width:"20px","align-items":"center","margin-left":"10px","margin-top":e.thongTinHoSo.online?"10px":"0px"}},[1===t.fileCheck?a("v-tooltip",{attrs:{top:""}},[a("v-icon",{staticClass:"mx-0",attrs:{slot:"activator",size:"16",color:"primary"},slot:"activator"},[e._v("done")]),a("span",[e._v("Đạt")])],1):2===t.fileCheck?a("v-tooltip",{attrs:{top:""}},[a("v-icon",{staticClass:"mx-0",attrs:{slot:"activator",size:"16",color:"primary"},slot:"activator"},[e._v("close")]),a("span",[e._v("Không đạt")])],1):e._e()],1):e._e(),1!==e.checkInput?a("v-flex",{class:{"text-xs-right":e.onlyView},style:{width:e.onlyView?"auto":"90px"}},[a("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"file"+t.partNo},on:{change:function(a){e.onUploadSingleFile(a,t,i)}}}),3!==t.partType||3!==e.originality||e.onlyView?e._e():a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(a){e.addFileOther(t)}},slot:"activator"},[a("v-icon",{staticClass:"mx-0",attrs:{size:"16",color:"primary"}},[e._v("add")])],1),a("span",[e._v("Thêm giấy tờ khác")])],1),e.progressUploadPart===t.partNo?a("v-progress-circular",{attrs:{width:2,size:25,color:"green",indeterminate:""}}):e.progressUploadPart===t.partNo||e.onlyView?e._e():a("v-tooltip",{attrs:{left:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(a){e.pickFile(t)}},slot:"activator"},[a("v-badge",[a("v-icon",{attrs:{size:"16",color:"primary"}},[e._v("cloud_upload")])],1)],1),t.partTip["extensions"]||t.partTip["maxSize"]?a("span",[e._v("Chấp nhận tải lên các định dạng: "+e._s(t.partTip["extensions"])+". Tối đa "+e._s(t.partTip["maxSize"])+" MB ")]):a("span",[e._v("Tải file lên")])],1),e.partNoApplicantHasFile(t.partNo)&&!e.onlyView?a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(a){e.showFilesApplicant(t.partNo)}},slot:"activator"},[a("v-badge",[a("v-icon",{attrs:{size:"16",color:"orange darken-3"}},[e._v("warning")])],1)],1),a("span",[e._v("Giấy tờ đã nộp")])],1):e._e()],1):e._e()],1)],1)],1):e._e()}),e.partTypes.includes(2)?e._e():a("div",[a("v-layout",{staticClass:"mx-4",attrs:{wrap:""}},[!e.onlyView||e.onlyView&&e.applicantNoteDossier?a("v-flex",{staticClass:"my-0 py-2 text-bold",staticStyle:{width:"60px"}},[e._v("Ghi chú:")]):e._e(),a("v-flex",{staticStyle:{width:"calc(100% - 80px)"}},[e.onlyView?e._e():a("div",{staticClass:"pl-2"},[a("v-text-field",{staticClass:"py-0",attrs:{"multi-line":"",rows:"3"},on:{input:e.changeApplicantNote},model:{value:e.applicantNoteDossier,callback:function(t){e.applicantNoteDossier=t},expression:"applicantNoteDossier"}})],1),e.onlyView&&e.applicantNoteDossier?a("p",{staticClass:"my-0 py-2"},[e._v("\n            "+e._s(e.applicantNoteDossier)+" \n          ")]):e._e()])],1)],1),a("v-dialog",{attrs:{"max-width":"400",transition:"fade-transition",persistent:""},model:{value:e.dialogAddOtherTemp,callback:function(t){e.dialogAddOtherTemp=t},expression:"dialogAddOtherTemp"}},[a("v-card",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-card-title",{staticClass:"headline"},[e._v("Tên giấy tờ")]),a("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.cancelDialog(t)}}},[a("v-icon",[e._v("clear")])],1),e.loadingAddOther?a("v-progress-linear",{staticClass:"my-0",attrs:{indeterminate:!0}}):e._e(),a("v-card-text",{staticClass:"pb-0 pt-4"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"px-2 pb-3 fix__label",attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Tên giấy tờ:",rules:[function(e){return!!e||"Bạn phải điền tên giấy tờ."}],required:""},model:{value:e.otherDossierTemplate,callback:function(t){e.otherDossierTemplate=t},expression:"otherDossierTemplate"}})],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"red darken-3",flat:"flat"},nativeOn:{click:function(t){return e.cancelDialog(t)}}},[e._v("\n              Quay lại\n            ")]),a("v-btn",{attrs:{color:"primary",flat:"flat",loading:e.loadingAddOther},nativeOn:{click:function(t){return e.addOtherTemplate(t)}}},[e._v("\n              Đồng ý\n              "),a("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])])],1)],1)],1)],1)],2),a("v-dialog",{staticStyle:{overflow:"hidden"},attrs:{"max-width":"900",transition:"fade-transition"},model:{value:e.dialogPDF,callback:function(t){e.dialogPDF=t},expression:"dialogPDF"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e.pdfEform?a("span",[e._v("Bản khai trực tuyến")]):a("span",[e._v("File đính kèm")])]),a("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.dialogPDF=!1}}},[a("v-icon",[e._v("clear")])],1),e.dialogPDFLoading?a("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[a("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):e._e(),a("iframe",{directives:[{name:"show",rawName:"v-show",value:!e.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPDFPreview"+e.id,src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1)],1)},s=[],o=a("7056"),n=o["a"],r=a("2877"),l=a("6544"),c=a.n(l),d=a("4ca6"),h=a("8336"),u=a("b0af"),p=a("99d9"),m=a("12b2"),g=a("169a"),v=a("cd55"),_=a("49e2"),f=a("0e8f"),y=a("4bd4"),C=a("132d"),T=a("a722"),x=a("490a"),D=a("8e36"),S=a("b56d"),b=a("9910"),P=a("2677"),I=a("3a2f"),A=Object(r["a"])(n,i,s,!1,null,null,null);A.options.__file="TiepNhanHoSo_ThanhPhanHoSo.vue";t["a"]=A.exports;c()(A,{VBadge:d["a"],VBtn:h["a"],VCard:u["a"],VCardActions:p["a"],VCardText:p["b"],VCardTitle:m["a"],VDialog:g["a"],VExpansionPanel:v["a"],VExpansionPanelContent:_["a"],VFlex:f["a"],VForm:y["a"],VIcon:C["a"],VLayout:T["a"],VProgressCircular:x["a"],VProgressLinear:D["a"],VSelect:S["a"],VSpacer:b["a"],VTextField:P["a"],VTooltip:I["a"]})},a18c:function(e,t,a){"use strict";var i=a("a026"),s=a("8c4f"),o=a("be4d");const n=[{path:"/danh-sach-ho-so/:index",name:"Landing",component:()=>Promise.resolve().then(a.bind(null,"4d55")),props:!0},{path:"/m/danh-sach-ho-so/:index",name:"LandingMobile",component:()=>Promise.resolve().then(a.bind(null,"dfd7")),props:!0},{path:"/tra-cuu-ho-so",name:"TraCuuHoSo",component:()=>Promise.resolve().then(a.bind(null,"3436")),props:!0},{path:"/danh-sach-ho-so/:index/tiep-nhan-ho-so/:id/:formCode",name:"TiepNhanHoSoDetail",component:()=>Promise.resolve().then(a.bind(null,"5338")),props:!0},{path:"/danh-sach-ho-so/:index/chi-tiet-ho-so/:id",name:"XemChiTietHoSoDetailCanBo",component:()=>Promise.resolve().then(a.bind(null,"bbba")),props:!0},{path:"/danh-sach-ho-so/:index/xu-ly-ho-so",name:"XuLyHoSo",component:()=>Promise.resolve().then(a.bind(null,"5de0")),props:!0},{path:"/danh-sach-ho-so/:index/bo-sung-ho-so/:id",name:"HoanThienBoSungHoSoDetail",component:()=>Promise.resolve().then(a.bind(null,"aa35")),props:!0},{path:"/danh-sach-ho-so/:index/ho-so/:id/:formCode",name:"DetailForward",component:()=>Promise.resolve().then(a.bind(null,"38ec")),props:!0},{path:"/add-dvc/:serviceCode",name:"DanhSachThuTuc",component:()=>Promise.resolve().then(a.bind(null,"eaee")),props:!0},{path:"/danh-sach-ho-so/:index/nop-thanh-cong/:id",name:"NopThanhCong",component:()=>Promise.resolve().then(a.bind(null,"9190")),props:!0},{path:"/thanh-toan-thanh-cong",name:"ThanhToanThanhCong",component:()=>Promise.resolve().then(a.bind(null,"d4a9")),props:!0},{path:"*",name:"NotFound",component:o["a"]}];i["a"].use(s["a"]);const r=new s["a"]({routes:n});t["a"]=r},aa35:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row-header"},[a("div",{staticClass:"background-triangle-big"},[e._v(" HOÀN THIỆN BỔ SUNG HỒ SƠ ")]),a("div",{staticClass:"layout row wrap header_tools row-blue"},[a("div",{staticClass:"flex xs8 sm10 pl-3 text-ellipsis text-bold"},[e._v("\n        "+e._s(e.thongTinChiTietHoSo.serviceName)+"\n      ")]),a("div",{staticClass:"flex xs4 sm2 text-right",staticStyle:{"margin-left":"auto"}},[a("v-btn",{staticClass:"my-0 mx-0 btn-border-left",attrs:{flat:"","active-class":"temp_active"},on:{click:e.goBack}},[e._v("\n        Quay lại  \n          "),a("v-icon",{attrs:{size:"16"}},[e._v("undo")])],1)],1)])]),a("v-expansion-panel",{staticClass:"expansion-p0",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",{attrs:{value:!0}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[e._v("I. ")]),e._v("THÔNG TIN HỒ SƠ\n      ")]),a("v-card",{staticClass:"mb-2"},[a("v-card-text",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0 text-header"},[e._v("Loại hồ sơ: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[a("v-chip",{staticClass:"pl-0 mx-0 my-0",attrs:{small:""}},[e._v(" Hồ sơ trực tuyến ")])],1)],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0 text-header"},[e._v("Mã hồ sơ: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):e._e(),a("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[e._v(e._s(e.thongTinChiTietHoSo.dossierIdCTN))])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0 text-header"},[e._v("Ngày tiếp nhận: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):e._e(),a("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[e._v(e._s(e.thongTinChiTietHoSo.receiveDate))])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0 text-header"},[e._v("Chủ hồ sơ: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):e._e(),a("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[e._v(e._s(e.thongTinChiTietHoSo.applicantName))])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0 text-header"},[e._v("Địa chỉ: ")])],1),a("v-flex",{attrs:{xs12:"",sm10:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):e._e(),a("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[e._v(e._s(e.thongTinChiTietHoSo.address))])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0 text-header"},[e._v("Người nộp: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):e._e(),a("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[e._v(e._s(e.thongTinChiTietHoSo.delegateName))])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("v-subheader",{staticClass:"pl-0 text-header"},[e._v("Số CMND: ")])],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[e.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):e._e(),a("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[e._v(e._s(e.thongTinChiTietHoSo.applicantIdNo))])],1)],1)],1)],1)],1)],1),a("v-expansion-panel",{staticClass:"expansion-p0",staticStyle:{position:"relative"},attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",{attrs:{value:!0}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[e._v("II. ")]),e._v("THÀNH PHẦN HỒ SƠ\n      ")]),a("thanh-phan-ho-so",{ref:"thanhphanhoso"})],1)],1),a("div",{staticClass:"text-center mt-2"},[e._l(e.btnDossierDynamics,function(t,i){return e.visibleBtnNextAction?a("v-btn",{key:i,attrs:{color:"primary"},on:{click:function(a){e.nextAction(t,i)}}},[e._v("\n      "+e._s(t.actionName)+"\n      "),a("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])]):e._e()}),a("v-btn",{attrs:{color:"primary",loading:e.loadingAction,disabled:e.loadingAction},nativeOn:{click:function(t){return e.goBack(t)}}},[a("v-icon",[e._v("undo")]),e._v("  \n      Quay lại\n      "),a("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])],1)],2)],1)},s=[],o=a("a18c"),n=a("93f5"),r={props:["index","id"],data:()=>({dialog_addTHPHS:!1,loadingAction:!1,thongTinChiTietHoSo:{},btnDossierDynamics:[],visibleBtnNextAction:!0}),computed:{loading(){return this.$store.getters.loading}},components:{"thanh-phan-ho-so":n["a"]},created(){var e=this;e.initData(e.id),e.getNextActions(e.id)},watch:{},methods:{initData(e){var t=this;t.$store.dispatch("getDetailDossier",e).then(e=>{t.thongTinChiTietHoSo=e,t.$refs.thanhphanhoso.initData(e)})},goBack(){window.history.back()},getNextActions(e){let t=this,a={dossierId:e};t.$store.dispatch("pullNextactions",a).then(function(e){t.btnDossierDynamics=e})},nextAction(e,t){console.log("Đã bổ sung");var a=this;console.log("luu Ho So--------------------"),a.$store.commit("setPrintPH",!1);let i=this.$refs.thanhphanhoso.dossierTemplateItems,s=a.$refs.thanhphanhoso.dossierFilesItems,n=i,r=[],l=[];n&&(n.forEach(function(e,t){1===e.partType&&(e["dossierId"]=a.thongTinChiTietHoSo.dossierId,l.push(a.$store.dispatch("postDossierMark",e)))}),0!==s.length?s.forEach(function(e,t){e.eForm&&(e["dossierId"]=a.thongTinChiTietHoSo.dossierId,r.push(a.$store.dispatch("putAlpacaForm",e)))}):n.forEach(function(e,t){1===e.partType&&e.hasForm&&(e["dossierId"]=a.thongTinChiTietHoSo.dossierId,r.push(a.$store.dispatch("postEform",e)))})),Promise.all(l).then(e=>{}).catch(function(e){}),Promise.all(r).then(t=>{console.log(t);let i={dossierId:a.thongTinChiTietHoSo.dossierId,actionCode:e.actionCode},s=a.$router.history.current.query;a.loadingActionProcess=!0,a.$store.dispatch("processDossierRouter",i).then(function(e){a.visibleBtnNextAction=!1,o["a"].push({path:a.$router.history.current.path,query:{recount:Math.floor(100*Math.random())+1,renew:Math.floor(100*Math.random())+1,q:s["q"]}})})}).catch(e=>{console.log("reject=============",e)})}}},l=r,c=a("2877"),d=a("6544"),h=a.n(d),u=a("8336"),p=a("b0af"),m=a("99d9"),g=a("cc20"),v=a("cd55"),_=a("49e2"),f=a("0e8f"),y=a("132d"),C=a("a722"),T=a("e0c7"),x=Object(c["a"])(l,i,s,!1,null,null,null);x.options.__file="HoanThienBoSungHoSoDetail.vue";t["default"]=x.exports;h()(x,{VBtn:u["a"],VCard:p["a"],VCardText:m["b"],VChip:g["a"],VExpansionPanel:v["a"],VExpansionPanelContent:_["a"],VFlex:f["a"],VIcon:y["a"],VLayout:C["a"],VSubheader:T["a"]})},bbba:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form-chitiet"},[e.loading?a("content-placeholders",{staticClass:"mt-3"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",{staticClass:"row-header"},[a("div",{staticClass:"background-triangle-big"},[a("span",[e._v("CHI TIẾT HỒ SƠ")])]),a("div",{staticClass:"layout row wrap header_tools row-blue"},[a("div",{staticClass:"flex xs8 sm10 pl-3 text-ellipsis text-bold",attrs:{title:e.thongTinChiTietHoSo.serviceName}},[e._v("\n        "+e._s(e.thongTinChiTietHoSo.serviceCode)+" - "+e._s(e.thongTinChiTietHoSo.serviceName)+"\n      ")]),a("div",{staticClass:"flex xs4 sm2 text-right",staticStyle:{"margin-left":"auto"}},[a("v-btn",{staticClass:"my-0 mx-0 btn-border-left",attrs:{flat:"","active-class":"temp_active"},on:{click:e.goBack}},[a("v-icon",{attrs:{size:"18"}},[e._v("reply")]),e._v("  \n          Quay lại\n        ")],1)],1)])]),a("v-dialog",{staticStyle:{overflow:"hidden"},attrs:{"max-width":"900",transition:"fade-transition"},model:{value:e.dialogPDF,callback:function(t){e.dialogPDF=t},expression:"dialogPDF"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("File đính kèm")]),a("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.dialogPDF=!1}}},[a("v-icon",[e._v("clear")])],1),e.dialogPDFLoading?a("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[a("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):e._e(),a("iframe",{directives:[{name:"show",rawName:"v-show",value:!e.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPDFPreview",src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1),a("thong-tin-co-ban-ho-so",{ref:"thong-tin-co-ban-ho-so",attrs:{detailDossier:e.thongTinChiTietHoSo}}),a("div",[a("v-tabs",{attrs:{"icons-and-text":""},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("v-tabs-slider",{attrs:{color:"primary"}}),a("v-tab",{key:1,attrs:{href:"#tabs-1"},on:{click:function(t){e.getNextActions()}}},[a("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{flat:""}},[3===e.originality?a("span",[e._v("XỬ LÝ HỒ SƠ")]):a("span",[e._v("CHUẨN BỊ HỒ SƠ")])])],1),a("v-tab",{key:2,attrs:{href:"#tabs-2"},on:{click:function(t){e.loadTPHS()}}},[a("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{flat:""}},[e.thongTinChiTietHoSo.finishDate?a("span",[e._v("THÀNH PHẦN HỒ SƠ VÀ KẾT QUẢ")]):a("span",[e._v("THÀNH PHẦN HỒ SƠ")])])],1),e.paymentDetail?a("v-tab",{key:3,attrs:{href:"#tabs-3"},on:{click:function(t){e.loadThanhToan()}}},[a("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{flat:""}},[e._v("\n          THANH TOÁN\n        ")])],1):e._e(),1!==e.originality&&e.listLienThong.length>0?a("v-tab",{key:4,attrs:{href:"#tabs-4"},on:{click:function(t){e.loadHoSoLienThong()}}},[a("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{flat:""}},[e._v("\n          LIÊN THÔNG\n        ")])],1):e._e(),1!==e.originality?a("v-tab",{key:5,attrs:{href:"#tabs-5"},on:{click:function(t){e.loadDossierActions()}}},[a("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{flat:""}},[e._v("\n          TIẾN TRÌNH THỤ LÝ\n        ")])],1):e._e(),a("v-tabs-items",{staticStyle:{overflow:"visible!important"},attrs:{"reverse-transition":"fade-transition",transition:"fade-transition"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("v-tab-item",{key:1,attrs:{value:"tabs-1","reverse-transition":"fade-transition",transition:"fade-transition"}},[a("div",{staticClass:"px-4 pt-2"},[e.btnStateVisible&&3===e.originality&&!e.thongTinChiTietHoSo.finishDate?a("div",{staticClass:"px-2 py-2",style:{border:e.filterNextActionEnable(e.btnDossierDynamics)||e.usersNextAction&&Array.isArray(e.usersNextAction)&&e.usersNextAction.length>0?"1px solid #4caf50":""}},[a("p",{staticClass:"mb-2"},[a("span",[e._v("Chuyển đến bởi: ")]),a("b",[e._v(" "+e._s(e.thongTinChiTietHoSo.lastActionUser))]),e.thongTinChiTietHoSo.lastActionNote&&"null"!==e.thongTinChiTietHoSo.lastActionNote?a("span",[a("span",[e._v(" - Ý kiến: ")]),a("span",{staticStyle:{color:"#0b72ba"}},[e._v(" "+e._s(e.thongTinChiTietHoSo.lastActionNote))])]):e._e()]),a("v-layout",{staticClass:"mb-0",attrs:{wrap:"",xs12:""}},[a("v-flex",{staticStyle:{width:"calc(100% - 100px)"}},[a("span",[e._v("Người thực hiện:  ")]),e.usersNextAction&&Array.isArray(e.usersNextAction)&&e.usersNextAction.length>0?a("span",[e._l(e.usersNextAction,function(t,i){return a("span",{key:t.userId},[e._v("\n                       "),a("b",[e._v(e._s(t.userName))]),i!==e.usersNextAction.length-1?a("span",[e._v(",")]):e._e()])}),e.stepOverdueNextAction?a("span",[e._v(" - ")]):e._e(),a("span",{style:e.stepOverdueNextAction&&e.stepOverdueNextAction.indexOf("Quá hạn")<0?"color:green":"color:red"},[e._v("\n                      "+e._s(e.stepOverdueNextAction)+"\n                    ")])],2):e._e()]),a("v-flex",{staticClass:"text-xs-right",staticStyle:{width:"100px"}},[a("v-btn",{staticClass:"mx-0 my-0",staticStyle:{height:"26px"},attrs:{disabled:!1===e.checkPemissionPhanCongLai(e.currentUser)&&String(e.currentUser["userId"])!==String(e.thongTinChiTietHoSo.lastActionUserId),small:"",color:"primary"},on:{click:e.reAsign}},[String(e.currentUser["userId"])===String(e.thongTinChiTietHoSo.lastActionUserId)||e.getUser("Administrator_data")||e.getUser("Administrator")?a("span",[e._v("Phân công lại")]):e._e(),e.getUser("Administrator_data")||e.getUser("Administrator")||String(e.currentUser["userId"])===String(e.thongTinChiTietHoSo.lastActionUserId)||!e.checkPemissionPhanCongLai(e.currentUser)?e._e():a("span",[e._v("Ủy quyền")])])],1)],1)],1):e._e(),e.thongTinChiTietHoSo.finishDate&&e.btnStateVisible?a("div",{staticClass:"px-2 py-2",staticStyle:{border:"1px solid #4caf50"}},[a("p",{staticClass:"mb-2"},[e._v("\n                Hồ sơ đã hoàn thành quá trình xử lý\n              ")])]):e._e()]),0!==e.checkInput&&e.filterNextActionEnable(e.btnDossierDynamics)?a("div",{staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",{key:1,attrs:{"hide-actions":""}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),2===e.checkInput?a("span",[e._v("Chỉnh sửa thành phần hồ sơ")]):a("span",[e._v("Kiểm tra thành phần hồ sơ")]),e._v("     \n                ")]),a("thanh-phan-ho-so",{ref:"thanhphanhoso",attrs:{checkInput:e.checkInput,onlyView:!1,id:"ci",partTypes:e.inputTypes}})],1)],1)],1):e._e(),e.btnStateVisible?a("div",{staticClass:"px-4 py-3",staticStyle:{"border-bottom":"1px solid #dddddd"}},[e._l(e.btnDossierDynamics,function(t,i){return t.enable>0||"special"===t["autoEvent"]&&e.thongTinChiTietHoSo["permission"].indexOf("write")>=0?a("v-btn",{key:i,staticClass:"ml-0 mr-2",class:{deactive__btn:String(e.btnIndex)!==String(i)},attrs:{color:"primary",loading:e.loadingAction&&i===e.btnIndex,disabled:e.loadingAction||2===t.enable},nativeOn:{click:function(a){e.processPullBtnDetail(t,i)}}},[e._v("\n              "+e._s(t.actionName)+"\n              "),a("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])]):e._e()}),e._l(e.btnPlugins,function(t,i){return a("v-btn",{key:i,staticClass:"ml-0 mr-2",attrs:{color:"primary",loading:e.loadingPlugin,disabled:e.loadingPlugin},nativeOn:{click:function(a){e.processPullBtnplugin(t,i)}}},[e._v("\n              "+e._s(t.pluginName)+"\n              "),a("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])])}),e.btnStepsDynamics.length>0&&e.thongTinChiTietHoSo["permission"].indexOf("write")>=0?a("v-menu",{staticStyle:{display:"inline-block",position:"relative !important"},attrs:{bottom:"","offset-y":""}},[a("v-btn",{staticClass:"deactive__btn",attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[e._v("Khác   "),a("v-icon",{attrs:{size:"18"}},[e._v("arrow_drop_down")])],1),a("v-list",e._l(e.btnStepsDynamics,function(t,i){return a("v-list-tile",{key:i,on:{click:function(a){e.btnActionEvent(t,i)}}},[a("v-list-tile-title",[e._v(e._s(t.title))])],1)}),1)],1):e._e()],2):e._e(),e.loadingAction?a("content-placeholders",[a("content-placeholders-img"),a("content-placeholders-heading")],1):e._e(),e.dialogActionProcess&&!e.loadingAction?a("v-layout",{attrs:{wrap:""}},[e.showFormBoSungThongTinNgan?a("form-bo-sung-thong-tin",{ref:"formBoSungThongTinNgan",attrs:{dossier_id:Number(e.id),action_id:Number(e.actionIdCurrent)}}):e._e(),e.showPhanCongNguoiThucHien?a("phan-cong",{ref:"phancong",attrs:{type:e.type_assign},model:{value:e.assign_items,callback:function(t){e.assign_items=t},expression:"assign_items"}}):e._e(),e.showTaoTaiLieuKetQua?a("tai-lieu-ket-qua",{ref:"tailieuketqua",attrs:{detailDossier:e.thongTinChiTietHoSo,createFiles:e.createFiles}}):e._e(),e.showTraKetQua?a("tra-ket-qua",{attrs:{detailDossier:e.thongTinChiTietHoSo,createFiles:e.returnFiles}}):e._e(),e.showThuPhi?a("thu-phi",{attrs:{viaPortal:e.viaPortalDetail,detailDossier:e.thongTinChiTietHoSo},model:{value:e.payments,callback:function(t){e.payments=t},expression:"payments"}}):e._e(),e.showThanhToanDienTu?a("thanh-toan-dien-tu",{ref:"epayment",attrs:{paymentProfile:e.paymentProfile,detailDossier:e.thongTinChiTietHoSo}}):e._e(),e.showKyPheDuyetTaiLieu?a("ky-duyet",{ref:"kypheduyettailieu",style:""===e.dataEsign["signatureType"]?"display:none":"",attrs:{detailDossier:e.thongTinChiTietHoSo,dataEsign:e.dataEsign}}):e._e(),e.showExtendDateEdit?a("ngay-gia-han",{ref:"ngaygiahan",attrs:{type:e.typeExtendDate,extendDateEdit:e.extendDateEdit}}):e._e(),e.showEditDate?a("ngay-hen-tra",{ref:"ngayhentra",attrs:{dueDateEdit:e.dueDateEdit}}):e._e(),e.showPostalService?a("thong-tin-buu-chinh",{attrs:{postalService:e.thongTinChiTietHoSo}}):e._e(),e.showYkienCanBoThucHien?a("y-kien-can-bo",{ref:"ykiencanbo",attrs:{user_note:e.userNote,configNote:e.configNote}}):e._e(),a("div",{staticClass:"px-4 pt-0 pb-2",staticStyle:{width:"100%","border-bottom":"1px solid #dddddd"}},[e.dialogActionProcess?a("v-btn",{staticClass:"ml-0 mr-2",attrs:{color:"primary",loading:e.loadingActionProcess,disabled:e.loadingActionProcess},nativeOn:{click:function(t){e.processAction(e.dossierItemDialogPick,e.itemDialogPick,e.resultDialogPick,e.indexDialogPick,!1)}}},[a("v-icon",[e._v("save")]),e._v(" \n                Xác nhận\n                "),a("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])],1):e._e()],1)],1):e._e(),e.btnStateVisible?e._e():a("v-alert",{staticClass:"mx-3",attrs:{outline:"",color:e.alertObj.color,icon:e.alertObj.icon,value:!0}},[e._v("\n            "+e._s(e.alertObj.message)+"\n          ")]),e.rollbackable||e.printDocument?a("div",{staticClass:"py-2",staticStyle:{width:"100%","border-bottom":"1px solid #dddddd"}},[e.printDocument?a("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.printViewDocument()}}},[e._v("In văn bản hành chính")]):e._e()],1):e._e()],1),a("v-tab-item",{key:2,attrs:{value:"tabs-2","reverse-transition":"fade-transition",transition:"fade-transition"}},[a("v-expansion-panel",{staticClass:"expansion-pl ext__form",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",{key:1},[a("div",{staticClass:"text-bold",attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[e._v(" I.")]),e._v("\n                Tài liệu nộp     \n                "),0===e.thongTinChiTietHoSo.sampleCount||e.thongTinChiTietHoSo.online?e._e():a("span",[e._v("("+e._s(0===e.thongTinChiTietHoSo.sampleCount?"?":e.thongTinChiTietHoSo.sampleCount)+" bộ hồ sơ)")])]),a("thanh-phan-ho-so",{ref:"thanhphanhoso1",attrs:{onlyView:!0,id:"nm",partTypes:e.inputTypes}})],1)],1),e.stateViewResult?a("v-expansion-panel",{staticClass:"expansion-pl ext__form",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",{key:1},[a("div",{staticClass:"text-bold",attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[e._v(" II.")]),e._v("\n                Kết quả xử lý\n              ")]),a("thanh-phan-ho-so",{ref:"thanhphanhoso2",attrs:{onlyView:!0,id:"kq",partTypes:e.outputTypes},on:{"tp:change-state-view-result":e.changeStateViewResult}})],1)],1):e._e(),e.documents&&e.documents.length>0?a("v-expansion-panel",{staticClass:"expansion-pl ext__form",attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",{key:1},[a("div",{staticClass:"text-bold",attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[e.stateViewResult?a("span",[e._v("III")]):a("span",[e._v("II")])]),e._v("\n                Văn bản hành chính\n              ")]),e._l(e.documents,function(t,i){return a("div",{key:i},[a("v-card",[a("v-layout",{staticClass:"px-3 py-1 align-center row-list-style",attrs:{wrap:""}},[a("v-flex",{attrs:{xs11:""}},[a("span",{staticClass:"text-bold",staticStyle:{position:"absolute"}},[e._v(e._s(i+1)+".")]),a("div",{staticStyle:{"margin-left":"30px"}},[e._v(e._s(t.documentName))])]),a("v-flex",{staticClass:"text-right",attrs:{xs1:""}},[a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",staticStyle:{height:"25px",width:"25px"},attrs:{slot:"activator",fab:"",dark:"",small:"",color:"primary"},on:{click:function(a){e.viewFileDocument(t)}},slot:"activator"},[a("v-icon",{staticStyle:{"font-size":"14px"}},[e._v("visibility")])],1),a("span",[e._v("Xem")])],1)],1)],1)],1)],1)})],2)],1):e._e()],1),a("v-tab-item",{key:3,attrs:{value:"tabs-3","reverse-transition":"fade-transition",transition:"fade-transition"}},[a("v-card",[a("chi-tiet-thanh-toan",{ref:"thongtinthanhtoan",attrs:{payments:e.paymentDetail,dossierDetail:e.thongTinChiTietHoSo}})],1)],1),e.listLienThong.length>0?a("v-tab-item",{key:4,attrs:{value:"tabs-4","reverse-transition":"fade-transition",transition:"fade-transition"}},[a("v-card",[e.listLienThong.length>0?a("ho-so-lien-thong",{attrs:{listLienThong:e.listLienThong,dossierDetail:e.thongTinChiTietHoSo}}):a("v-card-text",[a("v-flex",{staticClass:"text-xs-center",attrs:{xs12:""}},[a("span",[e._v("Không có hồ sơ liên thông")])])],1)],1)],1):e._e(),1!==e.originality?a("v-tab-item",{key:5,attrs:{value:"tabs-5","reverse-transition":"fade-transition",transition:"fade-transition"}},[a("v-flex",{staticStyle:{height:"42px"},attrs:{xs12:""}},[a("v-radio-group",{staticClass:"absolute__btn pt-1",staticStyle:{width:"350px"},attrs:{row:""},on:{change:function(t){e.changeTypeTienTrinh(t)}},model:{value:e.typeTienTrinh,callback:function(t){e.typeTienTrinh=t},expression:"typeTienTrinh"}},[a("v-radio",{attrs:{label:"Xem dạng bảng",value:1}}),a("v-radio",{attrs:{label:"Xem dạng biểu đồ",value:2}})],1)],1),1===e.typeTienTrinh?a("v-data-table",{staticClass:"table-landing table-bordered",attrs:{headers:e.headers,items:e.dossierActions,"hide-actions":"","no-data-text":"Không có dữ liệu"},scopedSlots:e._u([{key:"headerCell",fn:function(t){return[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[e._v("\n                  "+e._s(t.header.text)+"\n                ")]),a("span",[e._v("\n                  "+e._s(t.header.text)+"\n                ")])])]}},{key:"items",fn:function(t){return[a("td",{staticClass:"text-xs-center"},[e._v(e._s(t.index+1))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.sequenceRole))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.sequenceName))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(e._f("getThoiHanQuyDinh")(t.item.durationCount)))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(e._f("dateTimeView")(t.item.startDate)))]),a("td",{staticClass:"text-xs-left"},e._l(t.item.assignUsers,function(t){return a("div",{key:t.userId},[e._v("\n                  "+e._s(t.userName)+" "),a("br")])}),0),a("td",{staticClass:"text-xs-left"},[e._l(t.item.actions,function(t,i){return a("div",{key:i},[e._v("\n                  "+e._s(e._f("dateTimeView")(t.createDate))+" : "),a("span",{staticStyle:{color:"#0b72ba"}},[e._v(e._s(t.actionName))]),t.actionNote&&"null"!==t.actionNote?a("span",[e._v(" - "),a("i",[e._v(e._s(t.actionNote))])]):e._e()])}),t.item.statusText?a("div",[a("span",{staticStyle:{color:"green"}},[e._v(e._s(t.item.statusText))])]):e._e()],2)]}}])}):a("div",[e.loadingMermaidgraph?a("content-placeholders",[a("content-placeholders-img"),a("content-placeholders-heading")],1):e._e(),a("div",{staticClass:"mermaid",staticStyle:{padding:"15px"},attrs:{id:"mermaid_dossier"}})],1)],1):e._e()],1)],1),a("v-tabs",{attrs:{"icons-and-text":""},model:{value:e.activeTab2,callback:function(t){e.activeTab2=t},expression:"activeTab2"}},[a("v-tabs-slider",{attrs:{color:"primary"}}),1===e.originality&&"done"===e.thongTinChiTietHoSo["dossierStatus"]?a("v-tab",{key:1,attrs:{href:"#tabs-1b"}},[a("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{flat:""}},[e._v("\n          ĐÁNH GIÁ\n        ")])],1):e._e(),a("v-tab",{key:2,attrs:{href:"#tabs-2b"}},[a("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{flat:""}},[e._v("\n          TRAO ĐỔI\n        ")])],1),a("v-tab",{key:3,attrs:{href:"#tabs-3b"},on:{click:function(t){e.loadDossierLogs()}}},[a("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{flat:""}},[e._v("\n          NHẬT KÝ SỬA ĐỔI\n        ")])],1),a("v-tabs-items",{attrs:{"reverse-transition":"fade-transition",transition:"fade-transition"},model:{value:e.activeTab2,callback:function(t){e.activeTab2=t},expression:"activeTab2"}},[1===e.originality&&"done"===e.thongTinChiTietHoSo["dossierStatus"]?a("v-tab-item",{key:1,attrs:{value:"tabs-1b","reverse-transition":"fade-transition",transition:"fade-transition"}},[a("div",{staticClass:"px-2 py-2"},[e._l(e.votingItems,function(t,i){return e.votingItems.length>0?a("div",{key:i},[a("div",{staticClass:"text-bold"},[e._v("\n                "+e._s(i+1)+".  "+e._s(t.subject)+"\n              ")]),a("v-radio-group",{staticClass:"ml-3 pt-2",attrs:{row:""},model:{value:t.selected,callback:function(a){e.$set(t,"selected",a)},expression:"item.selected"}},e._l(t.choices,function(t,i){return a("v-radio",{key:i,attrs:{label:t,value:i+1,disabled:3===e.originality}})}),1),a("v-layout",{staticClass:"ml-3",staticStyle:{"margin-top":"-10px"},attrs:{wrap:""}},e._l(t.answers,function(i,s){return a("v-flex",{key:s,staticStyle:{"margin-left":"45px"}},[a("span",{staticClass:"text-bold",staticStyle:{color:"green"}},[e._v(e._s(i)+"/"+e._s(t.answersCount))])])}),1)],1):e._e()}),0===e.votingItems.length?a("div",{staticClass:"mx-3"},[a("v-alert",{attrs:{outline:"",color:"warning",icon:"priority_high",value:!0}},[e._v("\n                Không có đánh giá\n              ")])],1):e._e(),e.votingItems.length>0&&1===e.originality?a("div",{staticClass:"ml-3 mt-4"},[a("v-btn",{attrs:{color:"primary",loading:e.loadingVoting,disabled:e.loadingVoting},on:{click:e.submitVoting}},[e._v("Gửi đánh giá")])],1):e._e()],2)]):e._e(),a("v-tab-item",{key:2,attrs:{value:"tabs-2b","reverse-transition":"fade-transition",transition:"fade-transition"}},[e.thongTinChiTietHoSo.online&&!e.thongTinChiTietHoSo.originDossierNo?a("div",[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",{key:1,attrs:{"hide-actions":""}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),3===e.originality?a("span",[e._v("Trao đổi với người làm thủ tục")]):a("span",[e._v("Trao đổi với cán bộ xử lý")])]),a("v-card",[a("v-card-text",{staticClass:"px-0 py-0 pr-3"},[a("v-flex",{attrs:{xs12:""}},[e.dossierSyncs.length>0?a("ul",{staticClass:"timeline overflowComment",staticStyle:{"max-height":"300px",overflow:"auto"}},e._l(e.dossierSyncs,function(t,i){return 0!==t.syncType&&0!==t.infoType?a("li",{key:i,staticClass:"timeline-item"},[a("div",{staticClass:"timeline-badge",class:2===t.syncType?"primary":"warning"},[a("v-icon",{attrs:{color:"grey lighten-4",size:"20"}},[e._v(e._s(2===t.syncType?"account_balance":"perm_identity"))])],1),a("div",{staticClass:"timeline-panel"},[a("div",{staticClass:"timeline-heading"},[a("div",{staticClass:"timeline-panel-controls"},[a("div",{staticClass:"timestamp"},[a("small",{staticClass:"text-muted"},[e._v(e._s(e._f("dateTimeView")(t.createDate)))])])])]),a("div",{staticClass:"timeline-body"},[2===t.syncType?a("span",[e._v(e._s(t.actionName)+" ")]):e._e(),2===t.syncType&&t.actionNote&&"null"!==t.actionNote?a("span",[e._v(":")]):e._e(),t.actionNote&&"null"!==t.actionNote?a("span",{staticStyle:{color:"#0b72ba"}},[e._v(e._s(t.actionNote))]):e._e()])])]):e._e()}),0):a("div",{staticClass:"no-comments no-data my-2"},[a("i",{staticClass:"fa fa-comments",staticStyle:{"font-size":"25px"}}),a("br"),a("span",{staticStyle:{"font-size":"18px"}},[e._v("Không có trao đổi nào")])]),a("div",{staticStyle:{position:"relative"}},[a("v-text-field",{staticClass:"pl-4 my-3",attrs:{label:"Nhập trao đổi",box:""},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.postChat(t):null}},model:{value:e.messageChat,callback:function(t){e.messageChat=t},expression:"messageChat"}}),a("v-icon",{staticClass:"hover-pointer",staticStyle:{position:"absolute",right:"10px",bottom:"18px","font-size":"14px"},attrs:{color:"blue"},on:{click:e.postChat}},[e._v("send")])],1)])],1)],1)],1)],1)],1):e._e(),1!==e.originality?a("div",{staticStyle:{position:"relative"}},[a("v-expansion-panel",{attrs:{value:[!0],expand:""}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),e._v("\n                  Trao đổi nội bộ      \n                ")]),a("comment",{ref:"comment",attrs:{classPK:e.id,className:e.className}})],1)],1)],1):e._e()]),a("v-tab-item",{key:3,attrs:{value:"tabs-3b","reverse-transition":"fade-transition",transition:"fade-transition"}},e._l(e.listHistoryProcessing,function(t,i){return a("div",{key:t.dossierLogId,staticClass:"list_history_style"},[a("td",{staticClass:"px-2 pt-2",class:i%2!==0?"col-tien-trinh-1":"col-tien-trinh-2"},[e._v(e._s(i+1))]),a("td",{staticClass:"text-xs-left px-2 pt-2 pb-1"},[a("p",{staticClass:"mb-1"},[a("span",[e._v(e._s(e._f("dateTimeView")(t.createDate)))]),e._v(" - "),a("b",[e._v(e._s(t.author))]),e._v(" \n                  : "),a("span",{staticStyle:{color:"#0b72ba"}},[e._v(e._s(t.payload.stepName))])]),""!==t.content&&null!==t.content?a("p",{staticClass:"mb-1"},[e._v("Ý kiến: "),a("span",{domProps:{innerHTML:e._s(t.content)}})]):e._e(),e._l(t.payload.files,function(t){return a("p",{key:t.dossierFileId,staticClass:"history__download__link hover-pointer-download mb-1",staticStyle:{cursor:"pointer"},attrs:{title:"Tải file"},on:{click:function(a){a.preventDefault(),a.stopPropagation(),e.downloadFileLogs(t.dossierFileId)}}},[a("v-icon",[e._v("file_download")]),a("span",[e._v(e._s(t.fileName))])],1)})],2)])}),0)],1)],1)],1),a("object",{attrs:{id:"plugin0",type:"application/x-cryptolib05plugin",width:"0",height:"0"}}),a("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"700px"},model:{value:e.dialog_reAsign,callback:function(t){e.dialog_reAsign=t},expression:"dialog_reAsign"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("\n        Chọn người thực hiện\n      ")]),a("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.dialog_reAsign=!1}}},[a("v-icon",[e._v("clear")])],1),a("v-card-text",[a("phan-cong-lai",{ref:"phanconglai",attrs:{type:1},model:{value:e.reAsignUsers,callback:function(t){e.reAsignUsers=t},expression:"reAsignUsers"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"mr-3",attrs:{color:"primary",loading:e.loadingAction,disabled:e.loadingAction},on:{click:function(t){e.doReAsign()}}},[a("v-icon",[e._v("how_to_reg")]),e._v("  \n          Phân công\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])],1),a("v-btn",{staticClass:"mr-3",attrs:{color:"primary"},nativeOn:{click:function(t){e.dialog_reAsign=!1}}},[a("v-icon",[e._v("reply")]),e._v("  \n          Hủy\n        ")],1)],1)],1)],1),a("v-dialog",{staticStyle:{overflow:"hidden"},attrs:{persistent:"",overlay:!1,"max-width":800,transition:"dialog-transition"},model:{value:e.dialogPlugin,callback:function(t){e.dialogPlugin=t},expression:"dialogPlugin"}},[a("v-card",[a("v-card-title",{staticClass:"px-0 py-0"},[a("v-toolbar",{attrs:{dark:"",color:"primary",height:"40"}},[null!==e.modelPlugin&&void 0!==e.modelPlugin?a("div",{staticClass:"text-bold"},[e._v(e._s(e.modelPlugin["pluginName"]))]):e._e(),a("v-spacer"),a("v-toolbar-items",[a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.dialogPlugin=!1}}},[a("v-icon",[e._v("close")])],1)],1)],1)],1),a("v-card-text",{staticClass:"pr-0 py-0"},[null===e.modelPlugin?a("div",{staticClass:"text-xs-center center-all",staticStyle:{width:"100%",height:"400px"}},[a("v-progress-circular",{attrs:{indeterminate:"",size:100,color:"purple"}})],1):e.modelPlugin.pending?a("div",[e._v("\n          Hồ sơ chờ đồng bộ ...\n        ")]):e.modelPlugin["plugin"]?a("div",[e.modelPlugin.pdf?a("div",[a("div",{staticClass:"flex xs12 sm12 text-center"},[e.modelPlugin.no_pdf?e._e():a("object",{attrs:{id:"dossierPDFViewPlugin",data:"",width:"100%",height:"100%"}},[a("iframe",{staticStyle:{"min-height":"500px !important","padding-left":"0"},attrs:{src:e.modelPlugin.url,width:"100%"}})]),a("div",{staticClass:"text-center",attrs:{id:"dossierPDFViewNotFound"}},[e._v(e._s(e.modelPlugin.no_pdf))])])]):e._e(),e.modelPlugin["html"]?a("div",[a("input",{staticClass:"dossierFilePartNo",attrs:{type:"hidden",id:"dossierFilePartNo",name:""}}),a("div",{staticClass:"expansion-panel__header",attrs:{id:"alpacajs_form_plugin"}}),a("div",{staticClass:"text-center",attrs:{id:"dossierAlpacaNotFound"}},[e._v(e._s(e.modelPlugin.no_html))])]):e._e()]):a("div")])],1)],1)],1)},s=[],o=a("291d"),n=o["a"],r=a("2877"),l=a("6544"),c=a.n(l),d=a("0798"),h=a("8336"),u=a("b0af"),p=a("99d9"),m=a("12b2"),g=a("8fea"),v=a("169a"),_=a("cd55"),f=a("49e2"),y=a("0e8f"),C=a("132d"),T=a("a722"),x=a("8860"),D=a("ba95"),S=a("5d23"),b=a("e449"),P=a("490a"),I=a("67b6"),A=a("43a6"),N=a("9910"),w=a("71a3"),k=a("c671"),E=a("fe57"),F=a("aac8"),O=a("9a96"),H=a("2677"),L=a("71d9"),$=a("2a7f"),V=a("3a2f"),M=Object(r["a"])(n,i,s,!1,null,null,null);M.options.__file="XemChiTietHoSoDetailCanBo.vue";t["default"]=M.exports;c()(M,{VAlert:d["a"],VBtn:h["a"],VCard:u["a"],VCardActions:p["a"],VCardText:p["b"],VCardTitle:m["a"],VDataTable:g["a"],VDialog:v["a"],VExpansionPanel:_["a"],VExpansionPanelContent:f["a"],VFlex:y["a"],VIcon:C["a"],VLayout:T["a"],VList:x["a"],VListTile:D["a"],VListTileTitle:S["c"],VMenu:b["a"],VProgressCircular:P["a"],VRadio:I["a"],VRadioGroup:A["a"],VSpacer:N["a"],VTab:w["a"],VTabItem:k["a"],VTabs:E["a"],VTabsItems:F["a"],VTabsSlider:O["a"],VTextField:H["a"],VToolbar:L["a"],VToolbarItems:$["a"],VTooltip:V["a"]})},bbd0:function(e){e.exports={initData:{menuConfigToDo:"/o/rest/v2_1/menuconfigs/todo",counterMenuStep:"/o/rest/v2/statistics/dossiers/todo",getListThuTucHanhChinh:"/o/rest/v2/onegate/serviceconfigs/processes",serviceInfoApi:"/o/rest/v2/serviceinfos",regionApi:"/o/rest/v2/dictcollections",postDossierApi:"/o/rest/v2/dossiers",dossierTemplatesApi:"/o/rest/v2/dossiertemplates",applicantApi:"/o/rest/v2/applicants",dossierlogsApi:"/o/rest/v2/dossierlogs",dossierApi:"/o/rest/v2/dossiers",serviceProcessesApi:"/o/rest/v2/serviceprocesses",serviceConfigApi:"/o/rest/v2/serviceconfigs",serviceConfigByGovApi:"/o/rest/v2/serviceconfigs/govagencies",getNextAction:"/o/rest/v2/dossiers",documentApi:"/o/rest/v2_1/dossiers",stepConfigApi:"/o/rest/v2_1/stepconfigs",getServiceConfigs:"/o/rest/v2/serviceconfigs",commentApi:"/o/rest/v2/comments"},renderURLInit:"?p_p_id=OneGate&p_p_lifecycle=2&p_p_state=exclusive&p_p_mode=view&p_p_resource_id=renderURLInit",dossierTemplates:[{partNo:"2",partName:"Giấy đăng ký hợp đồng xuất khẩu sản phẩm thủy sản (tải bản scan)",partTip:"",partType:0,multiple:!1,required:!1,esign:!1,fileTemplateNo:"",hasForm:!0,fileType:0},{partNo:"2",partName:"Giấy đăng ký hợp đồng xuất khẩu sản phẩm thủy sản (tải bản scan)",partTip:"",partType:0,multiple:!1,required:!1,esign:!1,fileTemplateNo:"",hasForm:!0,fileType:0},{partNo:"2",partName:"Giấy đăng ký hợp đồng xuất khẩu sản phẩm thủy sản (tải bản scan)",partTip:"",partType:0,multiple:!1,required:!1,esign:!1,fileTemplateNo:"",hasForm:!0,fileType:0},{partNo:"2",partName:"Giấy đăng ký hợp đồng xuất khẩu sản phẩm thủy sản (tải bản scan)",partTip:"",partType:0,multiple:!1,required:!1,esign:!1,fileTemplateNo:"",hasForm:!0,fileType:0},{partNo:"2",partName:"Giấy đăng ký hợp đồng xuất khẩu sản phẩm thủy sản (tải bản scan)",partTip:"",partType:0,multiple:!1,required:!1,esign:!1,fileTemplateNo:"",hasForm:!0,fileType:0}],advSearchTools:[{index:0,value:"adv_0",text:"Lọc hồ sơ theo năm - tháng - ngày",type:"select",dataSource:"data",spec:"year_month_day",display:!1,disabled:!1},{index:1,value:"adv_1",text:"Lọc hồ sơ theo top",type:"select",dataSource:"data",spec:"top",display:!1,disabled:!1},{index:2,value:"adv_2",text:"Lọc trạng thái hồ sơ",type:"select",dataSource:"getStatusLists",spec:"status",display:!1,disabled:!1},{index:3,value:"adv_3",text:"Lọc trạng thái con",type:"select",dataSource:"getSubstatusLists",spec:"substatus",display:!1,disabled:!1},{index:4,value:"adv_4",text:"Lọc theo mã đơn vị",type:"select",dataSource:"getAgencyLists",spec:"agency",display:!1,disabled:!1},{index:5,value:"adv_5",text:"Lọc theo mã thủ tục",type:"select",dataSource:"getServiceLists",spec:"service",display:!1,disabled:!1},{index:6,value:"adv_6",text:"Lọc theo lĩnh vực",type:"select",dataSource:"getDomainLists",spec:"domain",display:!1,disabled:!1},{index:7,value:"adv_7",text:"Tìm theo mã sổ theo dõi",type:"text",spec:"register",display:!1,disabled:!1}]}},be4d:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"text-xs-center",attrs:{xs12:"","mt-5":""}},[a("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1)],1)],1)},s=[],o={},n=o,r=a("2877"),l=a("6544"),c=a.n(l),d=a("a523"),h=a("0e8f"),u=a("a722"),p=a("490a"),m=Object(r["a"])(n,i,s,!1,null,null,null);m.options.__file="NotFound.vue";t["a"]=m.exports;c()(m,{VContainer:d["a"],VFlex:h["a"],VLayout:u["a"],VProgressCircular:p["a"]})},bf3f:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),e._v("XÁC NHẬN THU PHÍ\n    ")]),a("v-card",[a("v-card-text",[5===e.payment_type?a("div",{staticClass:"pl-3 fee-info"},[a("v-checkbox",{attrs:{label:"Phí phải nộp: "+e.currency(e.payments.feeAmount)+" VNĐ"},model:{value:e.checkPaid,callback:function(t){e.checkPaid=t},expression:"checkPaid"}}),a("span",{staticClass:"red--text"},[e._v("* ")]),e._v(" Đánh dấu để xác định người làm thủ tục đã hoàn thành nộp phí.\n        ")],1):e._e()])],1)],1)],1)},s=[],o={props:{payments:{type:Object,default:()=>{}},payment_type:{type:Number,default:()=>5}},data:()=>({dossierId:"",loadingAction:!1,feeAmount:"",checkPaid:!1}),computed:{loading(){return this.$store.getters.loading},loadingTable(){return this.$store.getters.loadingTable}},created(){var e=this;e.$nextTick(function(){})},methods:{initData(e){var t=this;t.dossierId=e,t.$store.dispatch("getDetailDossier",e).then(e=>{t.$store.dispatch("loadDossierPayments",e).then(function(e){t.feeAmount=e.feeAmount}).catch(function(e){console.log(e)})}).catch(e=>{console.log(e)})},currency(e){if(e){let t=(e/1).toFixed(0).replace(".",",");return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}return""}}},n=o,r=a("2877"),l=a("6544"),c=a.n(l),d=a("b0af"),h=a("99d9"),u=a("ac7c"),p=a("cd55"),m=a("49e2"),g=a("132d"),v=Object(r["a"])(n,i,s,!1,null,null,null);v.options.__file="XacNhanThuPhi.vue";t["a"]=v.exports;c()(v,{VCard:d["a"],VCardText:h["b"],VCheckbox:u["a"],VExpansionPanel:p["a"],VExpansionPanelContent:m["a"],VIcon:g["a"]})},c23d:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"taotailieuketqua",staticStyle:{"background-color":"white",width:"100%"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),e._v(" Tài liệu kết quả\n      ")]),a("v-card",e._l(e.createFiles,function(t,i){return a("div",{key:t.partNo+"cr",staticClass:"form_alpaca",staticStyle:{position:"relative"}},[a("v-expansion-panel",{staticClass:"expaned__list__data",attrs:{value:[!0]}},[a("v-expansion-panel-content",{attrs:{"hide-actions":"",value:!1}},[a("div",{staticStyle:{"background-color":"#fff"},attrs:{slot:"header"},on:{click:function(t){e.stateView=!1}},slot:"header"},[a("div",{staticStyle:{"align-items":"center",background:"#fff","padding-left":"25px"},style:{width:e.checkStyle(t)}},e._l(e.dossierFilesItems,function(i,s){return t.partNo+e.id===i.dossierPartNo+e.id?a("div",{key:s+"cr"},[a("div",{staticStyle:{width:"calc(100% - 370px)",display:"flex","align-items":"center",background:"#fff","padding-left":"25px","font-size":"12px"}},[a("span",{staticClass:"text-bold"},[e._v(e._s(s+1)+". ")]),a("span",{staticClass:"ml-3",staticStyle:{cursor:"pointer"},on:{click:function(t){t.stopPropagation(),e.viewFile2(i)}}},[i.eForm?a("v-icon",[e._v("border_color")]):a("v-icon",[e._v("attach_file")]),e._v("\n                        "+e._s(i.displayName)+" - \n                        "),a("i",[e._v(e._s(i.modifiedDate))])],1)])]):e._e()}),0)]),t.eForm?a("v-card",[a("v-card-text",{staticStyle:{"background-color":"rgba(244, 247, 213, 0.19)"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"text-xs-right",attrs:{xs12:""}},[t.daKhai&&t.eForm?a("v-btn",{attrs:{color:"primary"},on:{click:function(a){e.previewFileEfom(t,i)}}},[e._v("In")]):e._e(),a("div",{attrs:{id:"formAlpaca"+t.partNo+e.id}})],1)],1)],1)],1):e._e()],1)],1)],1)}),0),a("v-dialog",{staticStyle:{overflow:"hidden"},attrs:{"max-width":"900",transition:"fade-transition"},model:{value:e.dialogPDF,callback:function(t){e.dialogPDF=t},expression:"dialogPDF"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("File đính kèm")]),a("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.dialogPDF=!1}}},[a("v-icon",[e._v("clear")])],1),e.dialogPDFLoading?a("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[a("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):e._e(),a("iframe",{directives:[{name:"show",rawName:"v-show",value:!e.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPDFPreview"+e.id,src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1)],1)],1)],1)},s=[],o=a("31a3"),n=o["a"],r=a("2877"),l=a("6544"),c=a.n(l),d=a("8336"),h=a("b0af"),u=a("99d9"),p=a("12b2"),m=a("169a"),g=a("cd55"),v=a("49e2"),_=a("0e8f"),f=a("132d"),y=a("a722"),C=a("490a"),T=Object(r["a"])(n,i,s,!1,null,null,null);T.options.__file="TraKetQua.vue";t["a"]=T.exports;c()(T,{VBtn:d["a"],VCard:h["a"],VCardText:u["b"],VCardTitle:p["a"],VDialog:m["a"],VExpansionPanel:g["a"],VExpansionPanelContent:v["a"],VFlex:_["a"],VIcon:f["a"],VLayout:y["a"],VProgressCircular:C["a"]})},cb0a:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-card",[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),a("span",[e._v("Thông tin thanh toán")])]),a("v-card",{},[a("v-card-text",{staticClass:"px-0 py-0"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[e._v("Lệ phí: ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("p",{staticClass:"pt-2 mb-0"},[e._v(e._s(e.payments.feeAmount?e.currency(e.payments.feeAmount.toString().replace(/\./g,"")):0)+"    vnđ")])]),a("v-flex",{staticClass:"pt-1",attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[e._v("Phí: ")])],1),a("v-flex",{staticClass:"pt-1",attrs:{xs12:"",sm3:""}},[a("p",{staticClass:"pt-2 mb-0"},[e._v(e._s(e.payments.serviceAmount?e.currency(e.payments.serviceAmount.toString().replace(/\./g,"")):0)+"    vnđ")])]),a("v-flex",{attrs:{xs12:"",sm3:""}}),2!==e.dossierDetail.viaPortal&&"2"!==e.dossierDetail.viaPortal||0===e.payments.shipAmount?e._e():a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[e._v("Phí chuyển phát: ")])],1),2!==e.dossierDetail.viaPortal&&"2"!==e.dossierDetail.viaPortal||0===e.payments.shipAmount?e._e():a("v-flex",{attrs:{xs12:"",sm2:""}},[a("p",{staticClass:"pt-2 mb-0"},[e._v(e._s(e.payments.shipAmount?e.currency(e.payments.shipAmount.toString().replace(/\./g,"")):0)+"    vnđ")])]),2!==e.dossierDetail.viaPortal&&"2"!==e.dossierDetail.viaPortal||0===e.payments.shipAmount?e._e():a("v-flex",{attrs:{xs12:"",sm8:""}}),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[a("span",{staticClass:"text-bold"},[e._v("Tổng: ")])])],1),a("v-flex",{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[a("span",[e._v(e._s(e.payments.paymentAmount?e.currency(e.payments.paymentAmount.toString().replace(/\./g,"")):0)+"    vnđ")])]),a("v-flex",{attrs:{xs12:"",sm7:""}}),a("v-flex",{staticClass:"my-0 pl-3 py-1",staticStyle:{width:"100px"}},[a("span",{staticClass:"red--text"},[e._v("* ")]),e._v(" Ghi chú:")]),a("v-flex",{staticStyle:{width:"calc(100% - 100px)"}},[a("p",{staticClass:"px-2 my-0 py-1"},[e._v("\n                  "+e._s(e.payments.paymentNote?e.payments.paymentNote:"")+"   \n                ")])])],1)],1)],1)],1)],1),a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),a("span",[e._v("Tình trạng thanh toán")])]),a("v-card",{},[a("v-card-text",{staticClass:"px-0 py-0"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[e._v("Trạng thái: ")])],1),a("v-flex",{attrs:{xs12:"",sm3:""}},[a("p",{staticClass:"pt-2 mb-0"},[e._v(e._s(e.getPaymentStatus(e.payments.paymentStatus)))])]),a("v-flex",{attrs:{xs12:"",sm7:""}}),Number(e.payments.paymentStatus)>=3?a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[e._v("Hình thức thanh toán: ")])],1),a("v-flex",{attrs:{xs12:"",sm3:""}},[a("p",{staticClass:"pt-2 mb-0"},[e._v(e._s(e.payments.paymentMethod))])]),a("v-flex",{attrs:{xs12:"",sm7:""}}),e.paymentFile?a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[e._v("Chứng từ kèm theo: ")])],1):e._e(),e.paymentFile?a("v-flex",{attrs:{xs12:"",sm10:""}},[a("span",{staticStyle:{cursor:"pointer"},on:{click:function(t){t.stopPropagation(),e.viewFile()}}},[a("v-icon",[e._v("attach_file")]),e._v("\n                    "+e._s(e.paymentFileName)+"\n                  ")],1),a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:"",ripple:""},on:{click:function(t){t.stopPropagation(),e.downloadPaymentFile(e.item)}},slot:"activator"},[a("v-icon",{staticStyle:{color:"#0d71bb"},attrs:{size:"16",color:"primary"}},[e._v("save_alt")])],1),a("span",[e._v("Tải xuống")])],1)],1):e._e()],1):e._e()],1)],1)],1)],1)],1),Number(e.payments.paymentStatus)>=3?a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),a("span",[e._v("Hóa đơn thanh toán")])]),a("v-card",{staticClass:"pl-2"},[a("v-card-text",{staticClass:"px-0 py-0"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[e._v("Mẫu số hóa đơn : ")])],1),a("v-flex",{attrs:{xs12:"",sm3:""}},[a("p",{staticClass:"pt-2 mb-0"},[e._v(e._s(e.payments.invoiceTemplateNo))])]),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[e._v("Ký hiệu hóa đơn : ")])],1),a("v-flex",{attrs:{xs12:"",sm3:""}},[a("p",{staticClass:"pt-2 mb-0"},[e._v(e._s(e.payments.invoiceIssueNo))])]),a("v-flex",{attrs:{xs12:"",sm2:""}}),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[e._v("Số hóa đơn trên hệ thống : ")])],1),a("v-flex",{attrs:{xs12:"",sm3:""}},[a("p",{staticClass:"pt-2 mb-0"},[e._v(e._s(e.getEinvoiceNo(e.payments.einvoice)))])]),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[e._v("Mã tra cứu trên hệ thống : ")])],1),a("v-flex",{attrs:{xs12:"",sm3:""}},[a("p",{staticClass:"pt-2 mb-0"},[e._v(e._s(e.getEinvoiceCode(e.payments.einvoice)))])]),a("v-flex",{attrs:{xs12:"",sm2:""}}),a("v-flex",{staticClass:"mb-3",attrs:{xs12:"",sm12:""}},[a("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.tracuuhoadon()}}},[a("v-icon",[e._v("search")]),e._v(" \n                  Tra cứu hóa đơn\n                ")],1),3===e.originality?a("v-btn",{staticClass:"ml-3",attrs:{color:"primary"},on:{click:function(t){e.printPay()}}},[a("v-icon",[e._v("print")]),e._v("  \n                  In biên lai\n                ")],1):e._e()],1)],1)],1)],1)],1)],1):e._e()],1),a("v-dialog",{staticStyle:{overflow:"hidden"},attrs:{"max-width":"900",transition:"fade-transition"},model:{value:e.dialogPDF,callback:function(t){e.dialogPDF=t},expression:"dialogPDF"}},[a("v-card",[e.activePrintPay?a("v-card-title",{staticClass:"headline"},[e._v("In biên lai thanh toán")]):a("v-card-title",{staticClass:"headline"},[e._v("File đính kèm")]),a("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.dialogPDF=!1}}},[a("v-icon",[e._v("clear")])],1),e.dialogPDFLoading?a("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[a("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):e._e(),a("iframe",{directives:[{name:"show",rawName:"v-show",value:!e.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPreview",src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1)],1)},s=[],o=(a("a18c"),{props:{payments:{type:Object,default:()=>{}},dossierDetail:{type:Object,default:()=>{}}},components:{},data:()=>({loading:!0,loadingAction:!1,paymentFile:"",dialogPDF:!1,dialogPDFLoading:!0,activePrintPay:!1}),computed:{paymentFileName(){return this.$store.getters.getPaymentFileName},originality(){var e=this;return e.getOriginality()}},created(){let e=this;e.$nextTick(function(){var e=this;e.$router.history.current.query})},watch:{dossierDetail(e){var t=this;let a=t.dossierDetail;console.log("filterFile",a),t.$store.dispatch("getPaymentFiles",a).then(e=>{t.paymentFile=e})}},methods:{currency(e){if(e){let t=(e/1).toFixed(0).replace(".",",");return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}return""},viewFile(){let e=this;e.activePrintPay=!1,e.dialogPDFLoading=!0,e.dialogPDF=!0;let t={dossierId:e.dossierDetail.dossierId,referenceUid:e.dossierDetail.referenceUid};e.$store.dispatch("viewPaymentFile",t).then(t=>{e.dialogPDFLoading=!1,document.getElementById("dialogPreview").src=t})},downloadPaymentFile(e){let t=this,a="/o/rest/v2/dossiers/"+t.dossierDetail.dossierId+"/payments/"+t.dossierDetail.referenceUid+"/confirmfile";window.open(a)},printPay(){let e=this;e.activePrintPay=!0;let t={dossierId:e.dossierDetail.dossierId,referenceUid:e.payments.referenceUid};e.dialogPDFLoading=!0,e.dialogPDF=!0,e.$store.dispatch("printPay",t).then(function(t){e.dialogPDFLoading=!1,document.getElementById("dialogPreview").src=t})},getEinvoiceNo(e){if(e&&e.indexOf("#")>=0){let t=e.split("#")[1]?e.split("#")[1]:"";return t.indexOf("}")<0&&t.indexOf('"')<0?t:""}return""},getEinvoiceCode(e){if(e&&e.indexOf("#")>=0){let t=e.split("#")[3]?e.split("#")[3].split(",")[0].replace('"',""):"";return t}return""},tracuuhoadon(){window.open("http://tracuu.cmcsoft.com","_blank")},getPaymentStatus(e){return 1===e||"1"===e?"Yêu cầu nộp tiền tạm ứng ":2===e||"2"===e?"Yêu cầu quyết toán phí":3===e||"3"===e?"Báo đã nộp phí trực tuyến":3===e||"4"===e?"Yêu cầu nộp lại phí trực tuyến":5===e||"5"===e?"Xác nhận hoàn thành thu phí":""}}}),n=o,r=a("2877"),l=a("6544"),c=a.n(l),d=a("8336"),h=a("b0af"),u=a("99d9"),p=a("12b2"),m=a("169a"),g=a("cd55"),v=a("49e2"),_=a("0e8f"),f=a("132d"),y=a("a722"),C=a("490a"),T=a("e0c7"),x=a("3a2f"),D=Object(r["a"])(n,i,s,!1,null,null,null);D.options.__file="ChiTietThanhToan.vue";t["a"]=D.exports;c()(D,{VBtn:d["a"],VCard:h["a"],VCardText:u["b"],VCardTitle:p["a"],VDialog:m["a"],VExpansionPanel:g["a"],VExpansionPanelContent:v["a"],VFlex:_["a"],VIcon:f["a"],VLayout:y["a"],VProgressCircular:C["a"],VSubheader:T["a"],VTooltip:x["a"]})},d4a9:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-card",[a("div",{staticClass:"row-header"},[a("div",{staticClass:"background-triangle-big"},[a("span",[e._v("THÔNG TIN THANH TOÁN")])]),a("div",{staticClass:"layout row wrap header_tools row-blue"},[a("div",{staticClass:"flex xs4 sm2 text-right",staticStyle:{"margin-left":"auto"}},[a("v-btn",{staticClass:"my-0 mx-0 btn-border-left",attrs:{flat:"","active-class":"temp_active"},on:{click:e.goBack}},[e._v("\n            Quay lại  \n            "),a("v-icon",{attrs:{size:"16"}},[e._v("undo")])],1)],1)])]),a("div",[a("div",{staticClass:"mx-2 my-3"},[a("v-alert",{attrs:{outline:"",value:!0,type:"success"}},[e._v("\n          Giao dịch thanh toán thành công\n        ")])],1),a("v-card",{staticClass:"mx-2"},[a("v-card-text",{staticClass:"px-0 py-0"},[a("div",{staticClass:"table-bordered",staticStyle:{"border-top":"1px solid #dedede"}},[a("div",{staticClass:"table__overflow"},[a("table",{staticClass:"datatable table"},[a("tbody",[a("tr",[a("td",{attrs:{width:"200"}},[a("span",{staticClass:"text-bold"},[e._v("Tên hồ sơ")])]),a("td",[a("span",[e._v(e._s(e.dossierDetail.serviceName))])])]),a("tr",[a("td",[a("span",{staticClass:"text-bold"},[e._v("Mã hồ sơ")])]),a("td",[a("span",[e._v(e._s(e.dossierDetail.dossierNo))])])]),a("tr",[a("td",[a("span",{staticClass:"text-bold"},[e._v("Cơ quan thực hiện")])]),a("td",[a("span",[e._v(e._s(e.dossierDetail.govAgencyName))])])]),a("tr",[a("td",[a("span",{staticClass:"text-bold"},[e._v("Tên phí, lệ phí")])]),a("td",[a("span",[e._v(e._s(e.dossierDetail.paymentFee))])])]),a("tr",[a("td",[a("span",{staticClass:"text-bold"},[e._v("Tổng tiền")])]),a("td",[a("span",[e._v(e._s(e.currency(e.dossierDetail.paymentAmount))+" VNĐ")])])]),a("tr",[a("td",[a("span",{staticClass:"text-bold"},[e._v("Mã giao dịch trực tuyến")])]),a("td",[a("span",[e._v(e._s(e.dossierDetail.transId))])])]),a("tr",[a("td",[a("span",{staticClass:"text-bold"},[e._v("Mã tra cứu trên cổng thanh toán")])]),a("td",[a("span",[e._v(e._s(e.dossierDetail.goodCode))])])]),a("tr",[a("td",[a("span",{staticClass:"text-bold"},[e._v("Cổng thanh toán")])]),a("td",[a("span",[e._v(e._s(e.dossierDetail.paymentPortal))])])])])])])])])],1)],1)])],1)},s=[],o=(a("a18c"),{props:[],components:{},data:()=>({loading:!0,loadingAction:!1,dossierDetail:{serviceName:"",dossierNo:"",govAgencyName:"",paymentFee:"",paymentAmount:"",transId:"",goodCode:"",paymentPortal:""}}),computed:{},created(){let e=this;e.$nextTick(function(){var e=this;let t=e.$router.history.current.query,a=t.hasOwnProperty("dossierId")?t.dossierId:"",i=t.hasOwnProperty("referenceUid")?t.referenceUid:"",s=t.hasOwnProperty("actionCode")?t.actionCode:"";a&&e.$store.dispatch("getDetailDossier",a).then(a=>{e.dossierDetail["serviceName"]=a.serviceName,e.dossierDetail["dossierNo"]=a.dossierNo,e.dossierDetail["govAgencyName"]=a.govAgencyName,e.dossierDetail["transId"]=t.transId,e.dossierDetail["goodCode"]=t.goodCode,e.dossierDetail["paymentPortal"]=t.paymentPortal,e.dossierDetail["paymentAmount"]=t.net_cost;let o={dossierId:a.dossierId,referenceUid:i||a.referenceUid};e.$store.dispatch("putPayments",o).then(t=>{if(e.dossierDetail["paymentFee"]=t.paymentFee,s){let t={dossierId:i||a.referenceUid,actionCode:s};e.$store.dispatch("processDossierRouter",t).then(function(e){}).catch(function(){})}}).catch(e=>{})})})},watch:{},methods:{currency(e){return e&&e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."):0},goBack(){let e=window.themeDisplay.getLayoutRelativeURL().substring(0,window.themeDisplay.getLayoutRelativeURL().lastIndexOf("/")),t=e+"/dich-vu-cong#/";window.open(t,"_self")}}}),n=o,r=a("2877"),l=a("6544"),c=a.n(l),d=a("0798"),h=a("8336"),u=a("b0af"),p=a("99d9"),m=a("132d"),g=Object(r["a"])(n,i,s,!1,null,null,null);g.options.__file="ThanhToanThanhCong.vue";t["default"]=g.exports;c()(g,{VAlert:d["a"],VBtn:h["a"],VCard:u["a"],VCardText:p["b"],VIcon:m["a"]})},d80f:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%"}},["dieuchinhdulieu"!==e.type&&e.formBuilder.length>0?a("v-expansion-panel",{staticClass:"expansion-pl ext__form",attrs:{value:[!0]}},e._l(e.formBuilder,function(t,i){return a("v-expansion-panel-content",{key:i},[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),e._v("\n      "+e._s(t.fieldLabel)+" "),!0===t.required||"true"===t.required?a("span",{staticStyle:{color:"red"}},[e._v(" *")]):e._e()]),a("v-card",[a("v-card-text",{staticClass:"py-2 px-2"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},["textarea"===t.fieldType?a("v-text-field",{attrs:{id:t.fieldName,value:t.value,placeholder:t.placeholder,"multi-line":"",rules:!0===t.required||"true"===t.required?[e.rules.required]:[],required:!0===t.required||"true"===t.required},on:{input:function(a){e.inputChangeValue(t)}}}):e._e(),"string"===t.fieldType?a("v-text-field",{attrs:{id:t.fieldName,value:t.value,placeholder:t.placeholder,rules:!0===t.required||"true"===t.required?[e.rules.required]:[],required:!0===t.required||"true"===t.required},on:{input:function(a){e.inputChangeValue(t)}}}):e._e(),"number"===t.fieldType?a("v-text-field",{attrs:{id:t.fieldName,value:t.value,placeholder:t.placeholder,rules:!0===t.required||"true"===t.required?[e.rules.required]:[e.rules.number],required:!0===t.required||"true"===t.required},on:{input:function(a){e.inputChangeValue(t)}}}):e._e(),"date"===t.fieldType?a("v-layout",{staticClass:"pl-2",attrs:{wrap:""}},[a("v-icon",{staticClass:"ml-3",attrs:{color:"blue"}},[e._v("event")]),a("vue-ctk-date-time-picker",{ref:"datepicker",refInFor:!0,staticClass:"ml-2",staticStyle:{width:"auto!important"},attrs:{label:t.value?"":"Chọn ngày",id:t.fieldName,formatted:"DD/MM/YYYY HH:mm",format:"YYYY-MM-DDTHH:mm","time-format":"HH:mm","without-header":!0},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}})],1):e._e()],1)],1)],1),a("v-dialog",{attrs:{width:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-date-picker",{attrs:{"full-width":"",landscape:""},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),a("v-card-actions",{staticStyle:{background:"#fff"}},[a("v-spacer"),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.pickDateCustom}},[e._v("\n              Xác nhận\n            ")])],1)],1)],1)],1)}),1):e._e(),"dieuchinhdulieu"===e.type?a("div",{staticClass:"ext__form px-3"},[e._l(e.formBuilder,function(t,i){return e.formBuilder.length>0?a("div",{key:i,staticClass:"mb-2",attrs:{"hide-actions":""}},[a("div",{staticClass:"py-1",staticStyle:{"border-bottom":"1px solid #8a898942"}},[a("span",{staticClass:"text-bold"},[e._v(e._s(i+1)+". ")]),e._v(e._s(t.fieldLabel)+" "),!0===t.required||"true"===t.required?a("span",{staticStyle:{color:"red"}},[e._v(" *")]):e._e()]),a("v-form",{ref:"form",refInFor:!0,attrs:{"lazy-validation":""},model:{value:e.valid2,callback:function(t){e.valid2=t},expression:"valid2"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"px-3",attrs:{xs12:""}},["textarea"===t.fieldType?a("v-text-field",{attrs:{box:"",id:t.fieldName,value:t.value,placeholder:t.placeholder,"multi-line":"",rules:!0===t.required||"true"===t.required?[e.rules.required]:[],required:!0===t.required||"true"===t.required},on:{input:function(a){e.inputChangeValue(t)}}}):e._e()],1),a("v-flex",{staticClass:"px-3",attrs:{xs12:""}},["string"===t.fieldType?a("v-text-field",{attrs:{box:"",id:t.fieldName,value:t.value,placeholder:t.placeholder,rules:!0===t.required||"true"===t.required?[e.rules.required]:[],required:!0===t.required||"true"===t.required},on:{input:function(a){e.inputChangeValue(t)}}}):e._e()],1),a("v-flex",{staticClass:"px-3",attrs:{xs12:""}},["number"===t.fieldType?a("v-text-field",{attrs:{box:"",id:t.fieldName,value:t.value,placeholder:t.placeholder,rules:!0===t.required||"true"===t.required?[e.rules.required]:[e.rules.number],required:!0===t.required||"true"===t.required},on:{input:function(a){e.inputChangeValue(t)}}}):e._e()],1),a("v-flex",{staticClass:"px-3",attrs:{xs12:""}},["date"===t.fieldType?a("v-layout",{staticClass:"mt-2",attrs:{wrap:""}},[a("v-icon",{attrs:{color:"blue"}},[e._v("event")]),a("vue-ctk-date-time-picker",{ref:"datepicker",refInFor:!0,staticClass:"ml-2",staticStyle:{width:"auto!important"},attrs:{label:t.value?"":"Chọn ngày",id:t.fieldName,formatted:"DD/MM/YYYY HH:mm",format:"YYYY-MM-DDTHH:mm","time-format":"HH:mm","without-header":!0},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}})],1):e._e()],1),a("v-flex",{staticClass:"px-3",attrs:{xs12:""}},["status"===t.fieldType?a("v-text-field",{attrs:{box:"",id:t.fieldName,value:t.value,placeholder:t.placeholder,rules:!0===t.required||"true"===t.required?[e.rules.required]:[],required:!0===t.required||"true"===t.required},on:{input:function(a){e.inputChangeValue(t)}}}):e._e()],1)],1)],1),a("v-dialog",{attrs:{width:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-date-picker",{attrs:{"full-width":"",landscape:""},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),a("v-card-actions",{staticStyle:{background:"#fff"}},[a("v-spacer"),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.pickDateCustom}},[e._v("\n            Xác nhận\n          ")])],1)],1)],1):e._e()}),0===e.formBuilder.length?a("div",[a("v-alert",{attrs:{outline:"",color:"warning",icon:"priority_high",value:!0}},[e._v("\n        Không có form điều chỉnh dữ liệu\n      ")])],1):e._e()],2):e._e()],1)},s=[],o=a("e30a"),n=a.n(o),r={components:{"vue-ctk-date-time-picker":n.a},props:{dossier_id:{type:Number},action_id:{type:Number},type:{type:String,default:()=>""}},data:()=>({itemId:null,fieldNameID:"",date:null,dialog:!1,formBuilder:[],valid:!1,valid2:!1,rulesValid:{number:function(e){var t=/^\d+$/;return t.test(e)||"Kiểu dữ liệu sai định dạng."}},rules:{required:e=>!!e||"Trường dữ liệu bắt buộc",number:function(e){const t=/^\d+$/;return t.test(e)||"Kiểu dữ liệu sai định dạng."}}}),watch:{dossier_id(){let e=this,t={dossierId:e.dossier_id,actionId:e.action_id};e.$store.dispatch("getExtraForm",t).then(function(t){if(e.formBuilder=t,e.formBuilder.length>0)for(let a in e.formBuilder)"date"===e.formBuilder[a]["fieldType"]&&e.formBuilder[a]["value"]&&isNaN(new Date(e.formBuilder[a]["value"]).getTime())&&(e.formBuilder[a]["value"]="")}).catch(function(){e.formBuilder=[]})}},created(){var e=this;e.$nextTick(function(){let t={dossierId:e.dossier_id,actionId:e.action_id};t["dossierId"]&&t["actionId"]&&e.$store.dispatch("getExtraForm",t).then(function(t){if(e.formBuilder=t,e.formBuilder.length>0)for(let a in e.formBuilder)"date"===e.formBuilder[a]["fieldType"]&&e.formBuilder[a]["value"]&&isNaN(new Date(e.formBuilder[a]["value"]).getTime())&&(e.formBuilder[a]["value"]="")})})},methods:{openDialogCustom(e,t){let a=this;a.dialog=!0,a.fieldNameID=t,a.itemId=e},pickDateCustom(){let e=this;console.log(e.date),e.date&&(e.itemId.value=new Date(e.date)),e.dialog=!1},inputChangeValue(e){e.value=document.getElementById(e.fieldName).value},showDatePicker(){this.$refs.datepicker.showDatePicker()},dateTimeView(e){if(e){let t=new Date(e);return`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()}`}return""},parseCurrentDate(e){if(!e)return null;let[t,a,i]=e.split("/");return`${i}-${a.padStart(2,"0")}-${t.padStart(2,"0")}`},checkValid(){let e=this,t=!0;if(e.formBuilder.length>0)for(let a in e.formBuilder)if((!0===e.formBuilder[a]["required"]||"true"===e.formBuilder[a]["required"])&&!e.formBuilder[a]["value"])return t=!1,alert(e.formBuilder[a]["fieldLabel"]+" là bắt buộc!"),t;return t},formSubmitData(){let e=this,t={};if(e.formBuilder.length>0)for(let a in e.formBuilder){let i=e.formBuilder[a].value;"date"===e.formBuilder[a].fieldType&&(i=new Date(e.formBuilder[a].value).getTime()?new Date(e.formBuilder[a].value).getTime():""),t[e.formBuilder[a].fieldName]=i}else t="";return t}},filters:{parseDate:function(e){if(!e)return"";let t="";return t=isNaN(Number(e))?new Date(e):new Date(Number(e)),t?`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()} ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`:""}}},l=r,c=a("2877"),d=a("6544"),h=a.n(d),u=a("0798"),p=a("8336"),m=a("b0af"),g=a("99d9"),v=a("2e4b"),_=a("169a"),f=a("cd55"),y=a("49e2"),C=a("0e8f"),T=a("4bd4"),x=a("132d"),D=a("a722"),S=a("9910"),b=a("2677"),P=Object(c["a"])(l,i,s,!1,null,null,null);P.options.__file="FormBoSungThongTinNgan.vue";t["a"]=P.exports;h()(P,{VAlert:u["a"],VBtn:p["a"],VCard:m["a"],VCardActions:g["a"],VCardText:g["b"],VDatePicker:v["a"],VDialog:_["a"],VExpansionPanel:f["a"],VExpansionPanelContent:y["a"],VFlex:C["a"],VForm:T["a"],VIcon:x["a"],VLayout:D["a"],VSpacer:S["a"],VTextField:b["a"]})},dfd7:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row-header no__hidden_class",staticStyle:{"background-color":"#070f52"}},[null!==e.trangThaiHoSoList?a("div",{staticClass:"ml-2 py-2 text-bold white--text"},[a("span",[e._v(e._s(e.trangThaiHoSoList[e.index]["title"]))])]):e._e()]),a("v-layout",{staticClass:"menu_header_list",class:{no__border__bottom:null===e.btnDynamics||void 0===e.btnDynamics||"undefined"===e.btnDynamics||null!==e.btnDynamics&&void 0!==e.btnDynamics&&"undefined"!==e.btnDynamics&&0===e.btnDynamics.length},attrs:{wrap:""}},[1!==e.originality?a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"pl-2 pr-2 input-group--text-field-box",attrs:{xs12:"",sm3:""}},[a("v-select",{attrs:{items:e.listLinhVuc,autocomplete:"",placeholder:"Chọn lĩnh vực","item-text":"displayName","item-value":"domainCode","return-object":"","hide-selected":!0,clearable:""},on:{change:e.changeDomain},model:{value:e.linhVucSelected,callback:function(t){e.linhVucSelected=t},expression:"linhVucSelected"}})],1),a("v-flex",{staticClass:"pl-2 pr-2 input-group--text-field-box",attrs:{xs12:"",sm3:""}},[a("v-select",{attrs:{items:e.listThuTucHanhChinh,autocomplete:"",placeholder:"Chọn thủ tục hành chính","item-text":"displayName","item-value":"serviceConfigId","return-object":"","hide-selected":!0,clearable:""},on:{change:e.changeServiceConfigs},model:{value:e.thuTucHanhChinhSelected,callback:function(t){e.thuTucHanhChinhSelected=t},expression:"thuTucHanhChinhSelected"}})],1),a("v-flex",{staticClass:"pl-2 pr-2 input-group--text-field-box",attrs:{xs12:"",sm3:""}},[a("v-select",{attrs:{items:e.listDichVu,placeholder:"Chọn dịch vụ:",autocomplete:"","item-text":"optionName","item-value":"processOptionId","return-object":"","hide-selected":!0},on:{change:e.changeDichVuConfigs},model:{value:e.dichVuSelected,callback:function(t){e.dichVuSelected=t},expression:"dichVuSelected"}})],1),a("v-flex",{staticClass:"pl-2 pr-2",attrs:{xs12:"",sm3:""}},[a("div",{staticStyle:{position:"relative"}},[a("v-text-field",{attrs:{placeholder:"Mã hồ sơ, tên hồ sơ, tên thủ tục ...","append-icon":"search",box:"","append-icon-cb":e.keywordEventChange},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.keywordEventChange(t):null}},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}})],1)])],1):e._e(),null!==e.dossierCounting&&void 0!==e.dossierCounting&&e.dossierCounting.length>0&&e.dossierCountingShow?a("div",{staticClass:"py-1 px-1",staticStyle:{background:"#f6f6f6","border-top":"1px solid lightgrey"}},e._l(e.dossierCounting,function(t,i){return a("v-chip",{key:i,on:{click:function(a){e.changeAdvFilterDataChips(t)}}},["deleted"===t.key?a("v-avatar",{staticStyle:{"background-color":"#da0e0e","border-color":"#da0e0e",color:"#fff"}},[a("v-icon",{attrs:{size:"16"}},[e._v("delete")])],1):a("v-avatar",{staticStyle:{"background-color":"#0b72ba","border-color":"#0b72ba",color:"#fff"}},[e._v(e._s(t.count))]),e._v("\n        "+e._s(t.title)+"\n      ")],1)}),1):e._e()],1),1===e.originality&&e.viewMobile?a("v-flex",{staticClass:"pl-2 pr-2",attrs:{xs12:"",sm3:""}},[a("div",{staticStyle:{position:"relative"}},[a("v-text-field",{attrs:{placeholder:"Tìm theo mã hồ sơ, tên hồ sơ, tên thủ tục ...","append-icon":"search",box:"","append-icon-cb":e.keywordEventChange},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.keywordEventChange(t):null}},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}})],1)]):e._e(),e.loadingDynamicBtn?a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:""}}),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("content-placeholders",{staticClass:"mt-3"},[a("content-placeholders-text",{attrs:{lines:1}})],1)],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("content-placeholders",{staticClass:"mt-3"},[a("content-placeholders-text",{attrs:{lines:1}})],1)],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("content-placeholders",{staticClass:"mt-3"},[a("content-placeholders-text",{attrs:{lines:1}})],1)],1)],1):e._e(),e.loadingDynamicBtn?e._e():a("div",{staticClass:"btn_wrap_actions"},[e.getUser("Administrator_data")&&"deleted"!==e.currentQueryState["status"]?a("v-btn",{attrs:{color:"red",dark:""},nativeOn:{click:function(t){e.btnActionEvent(null,{form:"UNDO_DOSSIER"},0,!0)}}},[e._v("\n         Undo   \n    ")]):e._e(),e.getUser("Administrator_data")?a("v-menu",{staticStyle:{position:"relative !important"},attrs:{left:""}},[a("v-btn",{attrs:{slot:"activator",color:"red",dark:""},slot:"activator"},[e._v("Go to   "),a("v-icon",{attrs:{size:"18"}},[e._v("arrow_drop_down")])],1),a("v-list",[a("v-list-tile",{on:{click:function(t){e.btnActionEvent(e.selectedDoAction[e.selectedDoAction.length-1],{form:"GOTO_DONE"},0,!0)}}},[a("v-list-tile-title",[e._v("Hoàn thành")])],1),a("v-list-tile",{on:{click:function(t){e.btnActionEvent(e.selectedDoAction[e.selectedDoAction.length-1],{form:"GOTO_CANCEL"},0,!0)}}},[a("v-list-tile-title",[e._v("Rút hồ sơ")])],1),a("v-list-tile",{on:{click:function(t){e.btnActionEvent(e.selectedDoAction[e.selectedDoAction.length-1],{form:"GOTO_DENY"},0,!0)}}},[a("v-list-tile-title",[e._v("Từ chối")])],1)],1)],1):e._e(),e.getUser("Administrator_data")&&"deleted"!==e.currentQueryState["status"]?a("v-btn",{attrs:{color:"red",dark:""},nativeOn:{click:function(t){e.btnActionEvent(null,{form:"CHANGE_DATA_DOSSIER"},0,!0)}}},[e._v("\n      Điều chỉnh dữ liệu\n    ")]):e._e(),e.getUser("Administrator")&&"deleted"!==e.currentQueryState["status"]?a("v-btn",{attrs:{color:"red",dark:""},nativeOn:{click:function(t){e.btnActionEvent(null,{form:"DELETE"},0,!0)}}},[e._v("\n      DELETE\n    ")]):e._e(),e.getUser("Administrator_data")&&e.currentQueryState.hasOwnProperty("status")&&"deleted"===e.currentQueryState["status"]?a("v-btn",{attrs:{color:"red",dark:""},nativeOn:{click:function(t){e.btnActionEvent(null,{form:"RESTORE_DOSSIER"},0,!0)}}},[e._v("\n      Khôi phục hồ sơ\n    ")]):e._e(),e._l(e.btnDynamics,function(t,i){return String(t.form).indexOf("VIEW")<0&&3!==e.menuType?a("v-btn",{key:i,attrs:{color:"primary",loading:e.loadingAction&&i===e.indexAction,disabled:e.loadingAction&&i===e.indexAction},nativeOn:{click:function(a){e.btnActionEvent(null,t,i,!0)}}},[e._v("\n      "+e._s(t.title)+e._s(t.tiltle)+"\n      "),a("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])]):e._e()})],2),a("v-data-table",{staticClass:"table-landing table-bordered",attrs:{headers:e.headers,items:e.hosoDatas,"total-items":e.hosoDatasTotal,"item-key":"dossierId","select-all":3!==e.menuType&&1!==e.originality&&e.btnDynamics.length>0||e.getUser("Administrator")||e.getUser("Administrator_data"),"no-data-text":"Không có hồ sơ nào","hide-actions":""},scopedSlots:e._u([{key:"headers",fn:function(t){return[a("tr",[3!==e.menuType&&1!==e.originality&&e.btnDynamics.length>0||e.getUser("Administrator")||e.getUser("Administrator_data")?a("th",{staticClass:"v_data_table_check_all"},[e.getUser("Administrator")?a("v-checkbox",{attrs:{"input-value":t.all,indeterminate:t.indeterminate,primary:"","hide-details":""},nativeOn:{click:function(t){return e.toggleAll(t)}}}):a("v-checkbox",{attrs:{"input-value":t.all,indeterminate:t.indeterminate,disabled:!e.thuTucHanhChinhSelected||e.thuTucHanhChinhSelected&&"0"===e.thuTucHanhChinhSelected.serviceConfigId||e.thuTucHanhChinhSelected&&""===e.thuTucHanhChinhSelected.serviceConfigId,primary:"","hide-details":""},nativeOn:{click:function(t){return e.toggleAll(t)}}})],1):e._e(),a("th",{attrs:{width:"30px"}},[a("span",[e._v("STT")])]),a("th",[a("span",[e._v("Tên thủ tục")])]),e.hideAction?e._e():a("th",{attrs:{width:"30px"}})])]}},{key:"items",fn:function(t){return[a("tr",[3!==e.menuType&&1!==e.originality&&e.btnDynamics.length>0||e.getUser("Administrator")||e.getUser("Administrator_data")?a("td",{staticClass:"v_data_table_check_all"},[e.getUser("Administrator")||e.getUser("Administrator_data")?a("v-checkbox",{attrs:{primary:"","hide-details":"",color:"primary"},on:{change:e.changeSelected},model:{value:t.selected,callback:function(a){e.$set(t,"selected",a)},expression:"props.selected"}}):a("v-checkbox",{attrs:{disabled:0===t.item["assigned"]||!e.thuTucHanhChinhSelected||e.thuTucHanhChinhSelected&&"0"===e.thuTucHanhChinhSelected.serviceConfigId||e.thuTucHanhChinhSelected&&""===e.thuTucHanhChinhSelected.serviceConfigId,primary:"","hide-details":"",color:"primary"},on:{change:e.changeSelected},model:{value:t.selected,callback:function(a){e.$set(t,"selected",a)},expression:"props.selected"}})],1):e._e(),a("td",{staticClass:"text-xs-center px-0 py-0"},[e.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("span",{class:{no_acction__event:!t.item["permission"]},staticStyle:{cursor:"pointer"},on:{click:function(a){e.viewDetail(t.item,t.index)}}},[e._v("\n            "+e._s(15*e.hosoDatasPage-15+t.index+1)+"\n          ")])],1),a("td",{staticClass:"px-1 py-0"},[e.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):a("div",{class:{no_acction__event:!t.item["permission"]},staticStyle:{cursor:"pointer"},on:{click:function(a){e.viewDetail(t.item,t.index)}}},[t.item.dossierNo?a("span",{staticClass:"primary--text"},[e._v(" "+e._s(t.item.dossierNo)+" - ")]):e._e(),a("span",{staticClass:"primary--text"},[e._v(" "+e._s(t.item.online?"Hồ sơ trực tuyến":"Hồ sơ một cửa"))]),a("br"),a("span",{staticClass:"primary--text text-bold"},[e._v(" "+e._s(t.item.serviceName)+" ")]),a("br"),a("span",{staticClass:"text-bold"},[e._v("Chủ hồ sơ: ")]),a("span",[e._v(e._s(t.item.applicantName))]),a("br"),a("span",{staticClass:"text-bold"},[e._v("Tiếp nhận: ")]),a("span",[e._v(e._s(t.item.receiveDate))]),a("br"),a("span",{staticClass:"text-bold"},[e._v("Hẹn trả: ")]),a("span",[e._v(e._s(t.item.dueDate))]),a("br"),t.item.dossierOverdue?a("span",{class:t.item.dossierOverdue.indexOf("Quá hạn")>=0?"red--text":"green--text"},[e._v(e._s(t.item.dossierOverdue))]):e._e()])],1),e.hideAction?e._e():a("td",{staticClass:"text-xs-center px-0 py-0"},[e.loadingTable?a("content-placeholders",[a("content-placeholders-text",{attrs:{lines:1}})],1):e._e(),e.loadingTable||null===e.btnDynamics&&void 0===e.btnDynamics&&"undefined"===e.btnDynamics&&null===e.btnDossierDynamics&&void 0===e.btnDossierDynamics&&"undefined"===e.btnDossierDynamics?e._e():a("v-menu",{staticStyle:{position:"relative !important"},attrs:{left:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(a){e.processPullBtnDynamics(t.item)}},slot:"activator"},[a("v-icon",[e._v("more_vert")])],1),a("v-list",[e._l(e.btnDynamics,function(i,s){return 3===e.menuType?a("v-list-tile",{key:s+"_menu_"+t.item.dossierId,attrs:{disabled:-1===String(t.item["permission"]).indexOf("write")},on:{click:function(a){e.btnActionEvent(t.item,i,t.index,!1)}}},[a("v-list-tile-title",[e._v(e._s(i.title)+e._s(i.tiltle))])],1):e._e()}),e._l(e.btnDossierDynamics,function(i,s){return(i["enable"]>0||"special"===i["autoEvent"])&&3!==e.menuType?a("v-list-tile",{key:s+"_"+t.item.dossierId,attrs:{disabled:2===i["enable"]||-1===String(t.item["permission"]).indexOf("write")},on:{click:function(a){e.processPullBtnDetail(t.item,i,t.index,s)}}},[a("v-list-tile-title",[e._v(e._s(i.actionName))])],1):e._e()}),e._l(e.btnStepsDynamics,function(i,s){return-1!==String(t.item["permission"]).indexOf("write")&&"NEW"!==String(i.form)&&3!==e.menuType?a("v-list-tile",{key:s+"_"+t.item.dossierId+"_"+t.item.dossierId,on:{click:function(a){e.btnActionEvent(t.item,i,e.index,!1)}}},[a("v-list-tile-title",[e._v(e._s(i.title))])],1):e._e()}),a("v-list-tile",{attrs:{disabled:!t.item["permission"]},on:{click:function(a){e.viewDetail(t.item,t.index)}}},[e._v("\n                Xem chi tiết\n              ")])],2)],1)],1)])]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),a("div",{class:e.viewMobile?"":"text-xs-right layout wrap",staticStyle:{position:"relative"}},[a("div",{staticClass:"flex pagging-table px-2"},[a("tiny-pagination",{attrs:{total:e.hosoDatasTotal,page:e.hosoDatasPage,"custom-class":"custom-tiny-class"},on:{"tiny:change-page":e.paggingData}})],1)]),a("v-dialog",{attrs:{"max-width":"400",transition:"fade-transition",persistent:""},model:{value:e.dialogAction,callback:function(t){e.dialogAction=t},expression:"dialogAction"}},[a("v-card",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-card-title",{staticClass:"headline"},[e._v(e._s(e.itemAction.title)+e._s(e.itemAction.tiltle))]),a("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.dialogAction=!1}}},[a("v-icon",[e._v("clear")])],1),e.loadingAction?a("v-progress-linear",{staticClass:"my-0",attrs:{indeterminate:!0}}):e._e(),a("v-card-text",{staticClass:"pb-0 pt-4"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"px-2 pb-3",attrs:{xs12:""}},[a("v-select",{attrs:{items:e.listThuTucHanhChinh,autocomplete:"",placeholder:"chọn thủ tục hành chính","item-text":"serviceName","item-value":"serviceConfigId","return-object":"","hide-selected":!0},on:{change:e.changeServiceConfigs},model:{value:e.thuTucHanhChinhSelected,callback:function(t){e.thuTucHanhChinhSelected=t},expression:"thuTucHanhChinhSelected"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[e.thuTucHanhChinhSelected&&e.listDichVu.length>1?a("v-select",{attrs:{items:e.listDichVu,label:"Dịch vụ:",autocomplete:"",placeholder:"chọn dịch vụ","item-text":"optionName","item-value":"processOptionId","return-object":"","hide-selected":!0,rules:[function(e){return!!e||"dịch vụ bắt buộc phải chọn."}],required:""},on:{change:e.changeDichVuConfigs},model:{value:e.dichVuSelected,callback:function(t){e.dichVuSelected=t},expression:"dichVuSelected"}}):e._e()],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"red darken-3",flat:"flat",loading:e.loadingAction,disabled:e.loadingAction},nativeOn:{click:function(t){e.dialogAction=!1}}},[a("v-icon",[e._v("undo")]),e._v(" \n            Quay lại\n            "),a("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])],1),a("v-btn",{attrs:{color:"primary",flat:"flat",loading:e.loadingAction,disabled:e.loadingAction},nativeOn:{click:function(t){e.doSubmitDialogAction(e.itemAction)}}},[a("v-icon",[e._v("save")]),e._v(" \n            Đồng ý\n            "),a("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])],1)],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"1000",transition:"fade-transition",persistent:""},model:{value:e.dialogActionProcess,callback:function(t){e.dialogActionProcess=t},expression:"dialogActionProcess"}},[a("v-card",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.validProcess,callback:function(t){e.validProcess=t},expression:"validProcess"}},[a("v-card-title",{staticClass:"headline"},[e._v(e._s(e.itemAction.actionName))]),a("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.dialogActionProcess=!1}}},[a("v-icon",[e._v("clear")])],1),e.loadingActionProcess?a("v-progress-linear",{staticClass:"my-0",attrs:{indeterminate:!0}}):e._e(),a("v-card-text",{staticClass:"py-0 px-0"},[a("v-layout",{attrs:{wrap:""}},[e.dialogActionProcess?a("thong-tin-co-ban-ho-so",{attrs:{detailDossier:e.thongtinhoso}}):e._e(),e.dialogActionProcess&&e.showPhanCongNguoiThucHien?a("phan-cong",{attrs:{type:e.type_assign},model:{value:e.assign_items,callback:function(t){e.assign_items=t},expression:"assign_items"}}):e._e(),e.dialogActionProcess&&e.showTraKetQua?a("tra-ket-qua",{attrs:{resultFiles:e.returnFiles}}):e._e(),e.dialogActionProcess&&e.showThuPhi?a("thu-phi",{attrs:{viaPortal:e.viaPortalDetail},model:{value:e.payments,callback:function(t){e.payments=t},expression:"payments"}}):e._e(),e.dialogActionProcess&&e.showYkienCanBoThucHien?a("y-kien-can-bo",{ref:"ykiencanbo",attrs:{user_note:e.userNote}}):e._e()],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",loading:e.loadingActionProcess,disabled:e.loadingActionProcess},nativeOn:{click:function(t){e.submitFormXuLy(e.dossierItemDialogPick,e.itemDialogPick,e.resultDialogPick,e.indexDialogPick,!1)}}},[a("v-icon",[e._v("save")]),e._v(" \n          Xác nhận\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])],1),a("v-btn",{attrs:{color:"red",dark:"",loading:e.loadingActionProcess,disabled:e.loadingActionProcess},nativeOn:{click:function(t){e.dialogActionProcess=!1}}},[a("v-icon",[e._v("undo")]),e._v(" \n          Quay lại\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])],1)],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"900",transition:"fade-transition"},model:{value:e.dialogPDF,callback:function(t){e.dialogPDF=t},expression:"dialogPDF"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v(e._s(e.itemAction.title)+e._s(e.itemAction.tiltle))]),a("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.dialogPDF=!1}}},[a("v-icon",[e._v("clear")])],1),e.dialogPDFLoading?a("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[a("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):e._e(),a("iframe",{directives:[{name:"show",rawName:"v-show",value:!e.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPDFPreview",src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1),a("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"700px"},model:{value:e.dialog_statusAction,callback:function(t){e.dialog_statusAction=t},expression:"dialog_statusAction"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("\n        Trạng thái xử lý\n      ")]),a("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.closeDialogStatusAction(t)}}},[a("v-icon",[e._v("clear")])],1),a("v-card-text",{staticStyle:{"max-height":"350px"}},e._l(e.selected,function(t,i){return a("div",{key:t.dossierIdCTN},[a("v-layout",{staticClass:"py-1 align-center row-list-style",staticStyle:{"border-bottom":"1px solid #ddd",position:"relative"},attrs:{wrap:""}},[a("v-flex",{attrs:{xs11:""}},[a("span",{staticClass:"text-bold",staticStyle:{position:"absolute"}},[e._v(e._s(i+1)+".")]),a("div",{staticClass:"ml-4"},[a("span",{staticClass:"text-bold"},[e._v(e._s(t.dossierNo))]),e._v(" - "+e._s(t.serviceName))])]),a("v-flex",{staticClass:"text-right",attrs:{xs1:""}},[t.statusAction?a("v-tooltip",{attrs:{top:""}},[a("v-icon",{attrs:{slot:"activator",size:"20",color:"primary"},slot:"activator"},[e._v("\n                  check\n                ")]),a("span",[e._v("Thành công")])],1):a("v-tooltip",{attrs:{top:""}},[a("v-icon",{attrs:{slot:"activator",size:"20",color:"red darken-3"},slot:"activator"},[e._v("\n                  block\n                ")]),a("span",[e._v("Thất bại")])],1)],1)],1)],1)}),0),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",loading:e.loadingAction,disabled:e.loadingAction},nativeOn:{click:function(t){return e.resend(t)}}},[a("v-icon",{attrs:{size:"20"}},[e._v("refresh")]),e._v(" \n          Thử lại\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])],1),a("v-btn",{attrs:{color:"red",dark:"",loading:e.loadingAction,disabled:e.loadingAction},nativeOn:{click:function(t){return e.closeDialogStatusAction(t)}}},[a("v-icon",[e._v("undo")]),e._v(" \n          Thoát\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])],1)],1)],1)],1),a("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"700px"},model:{value:e.dialog_printGuide,callback:function(t){e.dialog_printGuide=t},expression:"dialog_printGuide"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("\n        Thông tin phiếu hướng dẫn hoàn thiện hồ sơ\n      ")]),a("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.dialog_printGuide=!1}}},[a("v-icon",[e._v("clear")])],1),a("v-card-text",[a("v-form",{ref:"formGuide",attrs:{"lazy-validation":""},model:{value:e.validGuide,callback:function(t){e.validGuide=t},expression:"validGuide"}},[a("v-layout",{staticClass:"py-1 align-center row-list-style",attrs:{wrap:""}},[a("v-flex",{staticClass:"px-2 pb-3",attrs:{xs12:""}},[a("div",{staticClass:"my-2"},[e._v("Thủ tục hành chính:")]),a("v-select",{staticClass:"input-group--text-field-box",attrs:{items:e.listThuTucHanhChinh,autocomplete:"",placeholder:"Chọn thủ tục hành chính","item-text":"serviceName","item-value":"serviceConfigId","return-object":"","hide-selected":!0,rules:[function(e){return!!e||"Thủ tục bắt buộc phải chọn."}],required:""},on:{change:e.changeServiceConfigsGuide},model:{value:e.thuTucHanhChinhSelectedGuide,callback:function(t){e.thuTucHanhChinhSelectedGuide=t},expression:"thuTucHanhChinhSelectedGuide"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2"},[e._v("Dịch vụ:")]),a("v-select",{staticClass:"input-group--text-field-box",attrs:{items:e.listDichVuGuide,placeholder:"Chọn dịch vụ",autocomplete:"","item-text":"optionName","item-value":"processOptionId","return-object":"","hide-selected":!0,rules:[function(e){return!!e||"dịch vụ bắt buộc phải chọn."}],required:""},model:{value:e.dichVuSelectedGuide,callback:function(t){e.dichVuSelectedGuide=t},expression:"dichVuSelectedGuide"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2"},[e._v("Tên người làm thủ tục:")]),a("v-text-field",{attrs:{placeholder:"Nhập tên người làm thủ tục",box:"",rules:[function(e){return!!e||"Trường dữ liệu bắt buộc"}],required:""},model:{value:e.applicantNameGuide,callback:function(t){e.applicantNameGuide=t},expression:"applicantNameGuide"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2"},[e._v("Địa chỉ:")]),a("v-text-field",{attrs:{placeholder:"Nhập địa chỉ",box:""},model:{value:e.applicantAddressGuide,callback:function(t){e.applicantAddressGuide=t},expression:"applicantAddressGuide"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2"},[e._v("Thư điện tử:")]),a("v-text-field",{attrs:{box:"",placeholder:"Nhập thư điện tử"},model:{value:e.applicantEmailGuide,callback:function(t){e.applicantEmailGuide=t},expression:"applicantEmailGuide"}})],1),a("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[a("div",{staticClass:"my-2"},[e._v("Số điện thoại:")]),a("v-text-field",{attrs:{box:""},model:{value:e.applicantTelNoGuide,callback:function(t){e.applicantTelNoGuide=t},expression:"applicantTelNoGuide"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"mr-3",attrs:{color:"primary",loading:e.loadingAction,disabled:e.loadingAction},on:{click:function(t){e.doGuiding()}}},[a("v-icon",[e._v("print")]),e._v("  \n          In phiếu hướng dẫn\n          "),a("span",{attrs:{slot:"loader"},slot:"loader"},[e._v("Loading...")])],1)],1)],1)],1),a("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"700px"},model:{value:e.dialog_extraForm,callback:function(t){e.dialog_extraForm=t},expression:"dialog_extraForm"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("\n        Điều chỉnh dữ liệu mã hồ sơ: "+e._s(e.selectedDoAction.length>0?e.selectedDoAction[e.selectedDoAction.length-1]["dossierNo"]:"")+"\n      ")]),a("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.dialog_extraForm=!1}}},[a("v-icon",[e._v("clear")])],1),a("v-card-text",{staticClass:"px-0",attrs:{flat:""}},[a("form-bo-sung-thong-tin",{ref:"formBoSungThongTinNgan",attrs:{dossier_id:e.dossierIdSelected,action_id:e.actionId,type:"dieuchinhdulieu"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"mr-3",attrs:{color:"primary"},on:{click:function(t){e.doChangeDossierExtraForm()}}},[a("v-icon",[e._v("save")]),e._v("  \n          Xác nhận\n        ")],1),a("v-btn",{staticClass:"mr-3",attrs:{color:"primary"},on:{click:function(t){e.dialog_extraForm=!1}}},[a("v-icon",[e._v("clear")]),e._v("  \n          Hủy\n        ")],1)],1)],1)],1)],1)},s=[],o=a("a18c"),n=a("e4e5"),r=a("000e"),l=a("1136"),c=a("7121"),d=a("c23d"),h=a("bf3f"),u=a("f374"),p=a("87c1"),m=a("bbd0"),g=a("d80f"),v=a("9029"),_={props:["index"],components:{"tiny-pagination":r["a"],"thong-tin-co-ban-ho-so":l["a"],"phan-cong":c["a"],"tra-ket-qua":d["a"],"xac-nhan-thu-phi":h["a"],"thu-phi":u["a"],"y-kien-can-bo":p["a"],"template-rendering":n["a"],"form-bo-sung-thong-tin":g["a"]},data:()=>({isAdminSuper:!1,actionId:"",dossierIdSelected:"",dossierCountingShow:!1,dossierCounting:[],advSearchToolsSelected:[],advSearchTools:m.advSearchTools,advSearchItems:[],advObjectSearch:{},menusss:!1,itemFilterSupport:{years:[{value:"",name:"Lọc theo năm"},{value:"2017",name:"năm 2017"},{value:"2018",name:"năm 2018"},{value:"2019",name:"năm 2019"}],year:"",months:[{value:"",name:"Lọc theo tháng"},{value:"1",name:"tháng 1"},{value:"2",name:"tháng 2"},{value:"3",name:"tháng 3"},{value:"4",name:"tháng 4"},{value:"5",name:"tháng 5"},{value:"6",name:"tháng 6"},{value:"7",name:"tháng 7"},{value:"8",name:"tháng 8"},{value:"9",name:"tháng 9"},{value:"10",name:"tháng 10"},{value:"11",name:"tháng 11"},{value:"12",name:"tháng 12"}],month:"",tops:[{value:"",name:"toàn bộ"},{value:"overdue",name:"hồ sơ đang quá hạn cần giải quyết"},{value:"delay",name:"chậm hạn trả"},{value:"coming",name:"sắp đến hạn"}],top:"",statusLists:[],status:"",substatusLists:[{itemCode:"",itemName:"toàn bộ"}],substatus:"",agencyLists:[],agency:"",serviceLists:[],service:"",domainLists:[],domain:"",keyword:"",register:""},itemFilterKey:["year","month","top","status","substatus","agency","service","domain","keyword","register"],menuType:0,type_assign:"",assign_items:[],returnFiles:[],payments:"",viaPortalDetail:0,countSelected:0,statusFailed:0,dialog_statusAction:!1,dialog_printGuide:!1,dialog_extraForm:!1,validGuide:!1,applicantNameGuide:"",applicantEmailGuide:"",applicantTelNoGuide:"",applicantAddressGuide:"",dossierSelected:[{dossierNo:"18ACE289",serviceName:"Đăng ký, cấp Giấy chứng nhận quyền sử dụng đất, quyền sở hữu nhà ở và tài sản khác gắn liền với đất lần đầu đối với tài sản gắn liền với đất mà chủ sở hữu không đồng thời là người sử dụng đất",statusAction:!1}],buttonConfigItem:{},textNote:"",thongtinhoso:{},dossierId:0,valid:!0,isCallBack:!0,trangThaiHoSoList:null,listDichVu:[],dichVuSelected:null,btnDynamics:[],btnDossierDynamics:[],btnStepsDynamics:[],loading:!0,headers:[],hideAction:!1,hosoDatas:[],hosoDatasTotal:0,hosoDatasPage:1,hosoTotalPage:0,selectedDoAction:[],selectMultiplePage:[],selected:[],listThuTucHanhChinh:[],listThuTuc:[],thuTucHanhChinhSelected:null,thuTucHanhChinhSelectedGuide:null,listLinhVuc:[],linhVucSelected:null,listDichVuGuide:[],dichVuSelectedGuide:null,templateNoGuide:"",domainCode:"",govAgencyCode:"",serviceCode:"",templateNo:"",dossierNoKey:"",searchKey:"",dialogAction:!1,loadingAction:!1,dialogActionProcess:!1,loadingActionProcess:!1,validProcess:!1,indexAction:-1,itemAction:{title:""},showThongTinCoBanHoSo:!1,showYkienCanBoThucHien:!1,showFormBoSungThongTinNgan:!1,showPhanCongNguoiThucHien:!1,showTaoTaiLieuKetQua:!1,showKyPheDuyetTaiLieu:!1,showTraKetQua:!1,showXacNhanThuPhi:!1,showThuPhi:!1,showThucHienThanhToanDienTu:!1,dossierItemDialogPick:null,itemDialogPick:null,resultDialogPick:null,indexDialogPick:0,userNote:0,dialogPDF:!1,dialogPDFLoading:!0,filterForm:null,checkSelectAll:3!==(void 0).menuType&&1!==(void 0).originality,titleLanding:"",currentQueryState:""}),computed:{loadingDynamicBtn(){return this.$store.getters.loadingDynamicBtn},loadingTable(){return this.$store.getters.loadingTable},originality(){var e=this;return e.getOriginality()},currentUser(){return this.$store.getters.loadingInitData.user},activeLoadingDataHoSo(){return this.$store.getters.activeLoadingDataHoSo},viewMobile(){return v["isMobile"]}},created(){var e=this;e.selectMultiplePage=[],e.$nextTick(function(){let t=e.$router.history.current.query,a=e.$router.history.current.query;e.currentQueryState=t,t.hasOwnProperty("page")&&"1"!==t["page"]?e.hosoDatasPage=parseInt(t["page"]):e.hosoDatasPage=1,e.setStateAdvSearch(a)})},updated(){var e=this;e.$nextTick(function(){let t=e.$router.history.current.params,a=e.$router.history.current.query;e.currentQueryState=a,t.hasOwnProperty("index")&&e.isCallBack&&(e.isCallBack=!1,e.$store.commit("setLoadingDynamicBtn",!0),setTimeout(()=>{e.$store.dispatch("loadMenuConfigToDo").then(function(t){e.btnDynamics=[],e.trangThaiHoSoList=t,e.menuType=parseInt(e.trangThaiHoSoList[e.index]["menuType"]),e.processListTTHC(a),e.processListDomain(a),null!==e.trangThaiHoSoList[e.index]["tableConfig"]&&void 0!==e.trangThaiHoSoList[e.index]["tableConfig"]&&e.trangThaiHoSoList[e.index]["tableConfig"].hasOwnProperty("headers")&&(e.headers=e.trangThaiHoSoList[e.index]["tableConfig"]["headers"]),null!==e.trangThaiHoSoList[e.index]["tableConfig"]&&void 0!==e.trangThaiHoSoList[e.index]["tableConfig"]&&e.trangThaiHoSoList[e.index]["tableConfig"].hasOwnProperty("hideAction")&&(e.hideAction=e.trangThaiHoSoList[e.index]["tableConfig"]["hideAction"]),null!==e.trangThaiHoSoList[e.index]["buttonConfig"]&&void 0!==e.trangThaiHoSoList[e.index]["buttonConfig"]&&e.trangThaiHoSoList[e.index]["buttonConfig"].hasOwnProperty("buttons")&&(e.btnDynamics=e.trangThaiHoSoList[e.index]["buttonConfig"]["buttons"]),null!==e.trangThaiHoSoList[e.index]["buttonConfig"]&&void 0!==e.trangThaiHoSoList[e.index]["buttonConfig"]&&e.trangThaiHoSoList[e.index]["buttonConfig"].hasOwnProperty("layout_view")&&(e.filterForm=e.trangThaiHoSoList[e.index]["buttonConfig"]["layout_view"]);let i=[],s=[];for(let a in e.btnDynamics)e.btnDynamics[a].hasOwnProperty("onlySteps")?i.push(e.btnDynamics[a]):s.push(e.btnDynamics[a]);if(e.btnDynamics=[],e.btnDynamics=s,e.btnStepsDynamics=[],a.hasOwnProperty("step"))for(let n in e.trangThaiHoSoList[e.index]["items"]){let t=e.trangThaiHoSoList[e.index]["items"][n];if(String(t.stepCode)===String(a.step)){for(let a in i)for(var o=0;o<i[a].onlySteps.length;o++)String(i[a].onlySteps[o])===String(t.stepCode)&&e.btnDynamics.push(i[a]);break}}e.$store.commit("setLoadingDynamicBtn",!1)})},200))})},watch:{$route:function(e,t){let a=this,i=e.query,s=t.query;if(a.currentQueryState=i,i.hasOwnProperty("q")){a.btnDynamics=[],a.$store.commit("setLoadingDynamicBtn",!0),a.menuType=a.trangThaiHoSoList[a.index]["menuType"],a.headers=a.trangThaiHoSoList[a.index]["tableConfig"]["headers"],null!==a.trangThaiHoSoList[a.index]["tableConfig"]&&void 0!==a.trangThaiHoSoList[a.index]["tableConfig"]&&a.trangThaiHoSoList[a.index]["tableConfig"].hasOwnProperty("hideAction")&&(a.hideAction=a.trangThaiHoSoList[a.index]["tableConfig"]["hideAction"]),null!==a.trangThaiHoSoList[a.index]["buttonConfig"]&&void 0!==a.trangThaiHoSoList[a.index]["buttonConfig"]&&a.trangThaiHoSoList[a.index]["buttonConfig"].hasOwnProperty("buttons")&&(a.btnDynamics=a.trangThaiHoSoList[a.index]["buttonConfig"]["buttons"]),null!==a.trangThaiHoSoList[a.index]["buttonConfig"]&&void 0!==a.trangThaiHoSoList[a.index]["buttonConfig"]&&a.trangThaiHoSoList[a.index]["buttonConfig"].hasOwnProperty("layout_view")&&(a.filterForm=a.trangThaiHoSoList[a.index]["buttonConfig"]["layout_view"]);let e=[],t=[];for(let i in a.btnDynamics)a.btnDynamics[i].hasOwnProperty("onlySteps")?e.push(a.btnDynamics[i]):t.push(a.btnDynamics[i]);if(a.btnDynamics=[],a.btnDynamics=t,a.btnStepsDynamics=[],i.hasOwnProperty("step"))for(let s in a.trangThaiHoSoList[a.index]["items"]){let t=a.trangThaiHoSoList[a.index]["items"][s];if(String(t.stepCode)===String(i.step)){for(let i in e)for(var o=0;o<e[i].onlySteps.length;o++)String(e[i].onlySteps[o])===String(t.stepCode)&&a.btnDynamics.push(e[i]);break}}if(i.hasOwnProperty("page")?(a.hosoDatasPage=parseInt(i.page),i.page===s["page"]&&(a.selectMultiplePage=[])):(a.hosoDatasPage=1,a.selectMultiplePage=[]),a.$store.commit("setLoadingDynamicBtn",!1),null===a.listLinhVuc||void 0===a.listLinhVuc||null!==a.listLinhVuc&&void 0!==a.listLinhVuc&&0===a.listLinhVuc.length)a.processListDomain(i);else for(let s in a.listLinhVuc)String(a.listLinhVuc[s]["domainCode"])===String(i.domain)&&(a.linhVucSelected=a.listLinhVuc[s],a.domainCode=a.linhVucSelected["domainCode"]);null===a.listThuTucHanhChinh||void 0===a.listThuTucHanhChinh||null!==a.listThuTucHanhChinh&&void 0!==a.listThuTucHanhChinh&&0===a.listThuTucHanhChinh.length?a.processListTTHC(i):a.doLoadingDataHoSo(),a.setStateAdvSearch(i)}},activeLoadingDataHoSo(e){var t=this;setTimeout(function(){t.doLoadingDataHoSo()},100)},selectMultiplePage:{handler:function(e){let t=this;if(e.length>0){t.selectedDoAction=[];for(let a in e)t.selectedDoAction=t.selectedDoAction.concat(e[a]["selected"])}else t.selectedDoAction=[]},deep:!0}},methods:{toggleAll(){var e=this;if(e.getUser("Administrator"))e.selected.length?e.selected=[]:e.selected=e.hosoDatas;else{if(!e.thuTucHanhChinhSelected||e.thuTucHanhChinhSelected&&"0"===e.thuTucHanhChinhSelected.serviceConfigId||e.thuTucHanhChinhSelected&&""===e.thuTucHanhChinhSelected.serviceConfigId)return;e.selected.length?e.selected=[]:e.selected=e.hosoDatas.filter(function(e){return 0!==e["assigned"]})}e.selectMultiplePage[e.hosoDatasPage-1]["selected"]=e.selected},getUser(e){let t=this,a=t.$store.getters.getUser.role,i=a.findIndex(t=>t===e);return i>=0},changeSelected(){let e=this;e.selectMultiplePage[e.hosoDatasPage-1]["selected"]=e.selected},setStateAdvSearch(e){let t=this;if(e.hasOwnProperty("adv_renew")){t.advSearchItems=[];for(let a in t.itemFilterKey)for(let i in e){if(t.itemFilterKey[a]===i&&e[i]){t.itemFilterSupport[t.itemFilterKey[a]]=e[i];break}t.itemFilterSupport[t.itemFilterKey[a]]=""}for(let e in t.itemFilterKey){let a=t.itemFilterKey[e],i=t.advSearchTools.find(function(e){return e.spec===a});if(t.itemFilterSupport[a])if("keyword"===a)t.advSearchItems.push({spec:a,value:a+":"+t.itemFilterSupport[a],text:a+":"+t.itemFilterSupport[a],index:-1});else if("year"===a){let e=t.advSearchItems.find(function(e){return"year_month"===e.spec});e?(e["value"]="year_month:"+t.itemFilterSupport[a]+"_"+t.itemFilterSupport["month"],e["text"]="year_month:"+t.itemFilterSupport[a]+"_"+t.itemFilterSupport["month"],e["index"]=0):t.advSearchItems.push({spec:"year_month",value:"year_month:"+t.itemFilterSupport[a]+"_"+t.itemFilterSupport["month"],text:"year_month:"+t.itemFilterSupport[a]+"_"+t.itemFilterSupport["month"],index:0})}else if("month"===a){let e=t.advSearchItems.find(function(e){return"year_month"===e.spec});e?(e["value"]="year_month:"+t.itemFilterSupport["year"]+"_"+t.itemFilterSupport[a],e["text"]="year_month:"+t.itemFilterSupport["year"]+"_"+t.itemFilterSupport[a],e["index"]=0):t.advSearchItems.push({spec:"year_month",value:"year_month:"+t.itemFilterSupport["year"]+"_"+t.itemFilterSupport[a],text:"year_month:"+t.itemFilterSupport["year"]+"_"+t.itemFilterSupport[a],index:0})}else t.advSearchItems.push({spec:a,value:a+":"+t.itemFilterSupport[a],text:a+":"+t.itemFilterSupport[a],index:i["index"]})}}else t.advSearchItems=[];for(let a in t.advSearchTools){t.advSearchTools[a].display=!1,t.advSearchTools[a].disabled=!1;let e=t.advSearchItems.find(function(e){return e.spec===t.advSearchTools[a].spec});e&&(t.advSearchTools[a].display=!0,t.advSearchTools[a].disabled=!0)}},resend(){var e=this;e.doActions(null,e.buttonConfigItem,null,!0)},closeDialogStatusAction(){var e=this;e.dialog_statusAction=!1,e.selectedDoAction=e.selectedDoAction.filter(function(e){return!e.statusAction})},submitFormXuLy(e,t,a,i,s){var o=this;if(o.showYkienCanBoThucHien){let s=o.$refs.ykiencanbo.doExport();s.valid&&(o.textNote=s.text,o.processAction(e,t,a,i,!1))}else o.processAction(e,t,a,i,!1)},processListTTHC(e){let t=this;t.$store.dispatch("loadListThuTucHanhChinh").then(function(a){if((!e.hasOwnProperty("domain")||e.hasOwnProperty("domain")&&""===String(e.domain))&&(t.listThuTucHanhChinh=a.map(e=>{return e["displayName"]=e["serviceCode"]+" - "+e["serviceName"],e})),t.listThuTuc=a.map(e=>{return e["displayName"]=e["serviceCode"]+" - "+e["serviceName"],e}),e.hasOwnProperty("service_config")&&"0"!==String(e.service_config)){for(let i in t.listThuTucHanhChinh)if(String(t.listThuTucHanhChinh[i].serviceConfigId)===String(e.service_config)){if(t.thuTucHanhChinhSelected=t.listThuTucHanhChinh[i],null!==t.thuTucHanhChinhSelected&&void 0!==t.thuTucHanhChinhSelected&&t.thuTucHanhChinhSelected.hasOwnProperty("options"))if(t.govAgencyCode=t.thuTucHanhChinhSelected.govAgencyCode,t.serviceCode=t.thuTucHanhChinhSelected.serviceCode,e.hasOwnProperty("template_no")){t.listDichVu=t.thuTucHanhChinhSelected.options;for(let a in t.listDichVu)t.listDichVu[a].templateNo===e.template_no&&(t.dichVuSelected=t.listDichVu[a],t.templateNo=t.dichVuSelected.templateNo)}else t.listDichVu=[],t.dichVuSelected=null,t.govAgencyCode="",t.serviceCode="",t.templateNo="";break}}else t.thuTucHanhChinhSelected=null,t.dichVuSelected=null,t.govAgencyCode="",t.serviceCode="",t.templateNo="";t.doLoadingDataHoSo()})},processListDomain(e){let t=this;t.$store.dispatch("getDomainLists").then(function(a){if(a.length>0&&(t.listLinhVuc=a.map(e=>{return e["displayName"]=e["domainCode"]+" - "+e["domainName"],e})),e.hasOwnProperty("domain")&&""!==String(e.domain)){for(let i in t.listLinhVuc)String(t.listLinhVuc[i]["domainCode"])===String(e.domain)&&(t.linhVucSelected=t.listLinhVuc[i],t.domainCode=t.linhVucSelected["domainCode"]);let a={domain:t.linhVucSelected.domainCode};t.$store.dispatch("getServiceinfoFilter",a).then(e=>{t.listThuTucHanhChinh=e.map(e=>{return e["displayName"]=e["serviceCode"]+" - "+e["serviceName"],e})})}else t.linhVucSelected=null})},checkPemissionSpecialAction(e,t,a){var i=this,s=!0;if("PRINT_01"!==e&&"PRINT_02"!==e&&"PRINT_03"!==e&&"GUIDE"!==e&&"PREVIEW"!==e&&"BETIMES"!==e){let e=i.$store.getters.getUsersNextAction;if(e.length>0){let a=e.filter(function(e){if(void 0!==e&&void 0!==t)return e["userId"].toString()===t["userId"].toString()});s=a.length>0}else s=!1}return"ROLLBACK_01"!==e&&"ROLLBACK_02"!==e&&"ROLLBACK_03"!==e||(s=!1),s},paggingData(e){let t=this,a=t.$router.history.current,i=a.query,s="?";i["page"]="";for(let o in i)""!==i[o]&&"undefined"!==i[o]&&void 0!==i[o]&&(s+=o+"="+i[o]+"&");s+="page="+e.page,t.$router.push({path:a.path+s})},doLoadingDataHoSo(){let e=this;e.selected=[];let t=o["a"].history.current.query;if(console.log("currentQuery======",t),t.hasOwnProperty("q")){let i;i=t.q.indexOf("step")>0?t.q:t["step"]?t.q+"&step="+t["step"]:t.q;var a=null;if(3!==e.menuType)a={queryParams:i,page:e.hosoDatasPage,agency:t.hasOwnProperty("agency")?t.agency:e.govAgencyCode,service:t.hasOwnProperty("service")?t.service:e.serviceCode,template:t.hasOwnProperty("template")?t.template:e.templateNo,domain:t.hasOwnProperty("domain")?t.domain:e.domainCode,status:t.hasOwnProperty("status")?t.status:"",substatus:t.hasOwnProperty("substatus")?t.substatus:"",year:t.hasOwnProperty("year")?t.year:0,month:t.hasOwnProperty("month")?t.month:0,top:t.hasOwnProperty("top")?t.top:"",keyword:t.hasOwnProperty("keyword")&&t.keyword?t.keyword:e.searchKey,register:t.hasOwnProperty("register")?t.register:"",dossierNo:e.dossierNoKey?e.dossierNoKey:""};else{let s=t.hasOwnProperty("status")&&"deleted"===t["status"]?-1:"";a={queryParams:i,page:e.hosoDatasPage,agency:t.hasOwnProperty("agency")?t.agency:e.govAgencyCode,service:t.hasOwnProperty("service")?t.service:e.serviceCode,template:t.hasOwnProperty("template")?t.template:e.templateNo,domain:t.hasOwnProperty("domain")?t.domain:e.domainCode,status:t.hasOwnProperty("status")&&t["status"]&&"deleted"!==t["status"]?t.status:"",substatus:t.hasOwnProperty("substatus")?t.substatus:"",year:t.hasOwnProperty("year")?t.year:0,month:t.hasOwnProperty("month")?t.month:0,top:t.hasOwnProperty("top")?t.top:"",keyword:t.hasOwnProperty("keyword")&&t.keyword?t.keyword:"",register:t.hasOwnProperty("register")?t.register:"",originality:t.hasOwnProperty("originality")&&t["originality"]?t.originality:s,dossierNo:e.dossierNoKey?e.dossierNoKey:""}}e.$store.dispatch("loadingDataHoSo",a).then(function(t){if(e.hosoDatas=t.data,e.hosoDatasTotal=t.total,e.hosoTotalPage=Math.ceil(e.hosoDatasTotal/15),e.hosoTotalPage>0&&0===e.selectMultiplePage.length){for(let t=0;t<e.hosoTotalPage;t++){let a={selected:[],page:t+1};e.selectMultiplePage.push(a)}console.log("selectMultiplePage",e.selectMultiplePage)}e.selected=e.selectMultiplePage[e.hosoDatasPage-1]["selected"]}).catch(t=>{e.hosoDatas=[],e.hosoDatasTotal=0})}3===e.menuType||"3"===String(e.menuType)?setTimeout(()=>{e.$store.dispatch("loadingDossierCounting").then(function(t){if(null!==t&&void 0!==t){if(e.dossierCounting=t,e.getUser("Administrator_data")){let t={key:"deleted",title:"Hồ sơ đã xóa",count:0};e.dossierCounting.push(t)}}else e.dossierCounting=[];e.dossierCountingShow=!0})},200):e.dossierCountingShow=!1},changeServiceConfigs(e){let t=this;t.selectMultiplePage=[],null!==e&&"null"!==e&&e.hasOwnProperty("options")?this.listDichVu=e.options:this.listDichVu=[],null!==this.listDichVu&&void 0!==this.listDichVu&&"undefined"!==this.listDichVu&&this.listDichVu.length>0?(this.dichVuSelected=this.listDichVu[0],this.templateNo=this.dichVuSelected.templateNo):this.dichVuSelected=null;let a=t.$router.history.current,i=a.query,s="?";i["service_config"]="",i["template_no"]="";for(let o in i)"page"===o?s+=o+"=1&":""!==i[o]&&"undefined"!==i[o]&&void 0!==i[o]&&"step"!==o&&(s+=o+"="+i[o]+"&");-1===String(i["q"]).indexOf("&step")&&3!==t.menuType&&(s+="step="+i["step"]+"&"),null!==this.listDichVu&&void 0!==this.listDichVu&&"undefined"!==this.listDichVu&&this.listDichVu.length>0?(s+="service_config="+e.serviceConfigId,s+="&template_no="+this.dichVuSelected.templateNo,t.govAgencyCode=e.govAgencyCode,t.serviceCode=e.serviceCode):(t.templateNo="",t.govAgencyCode="",t.serviceCode=""),t.$router.push({path:a.path+s})},changeServiceConfigsGuide(e){null!==e&&"null"!==e&&e.hasOwnProperty("options")?this.listDichVuGuide=e.options:this.listDichVuGuide=[],null!==this.listDichVuGuide&&void 0!==this.listDichVuGuide&&"undefined"!==this.listDichVuGuide&&this.listDichVuGuide.length>0?(this.dichVuSelectedGuide=this.listDichVuGuide[0],this.templateNoGuide=this.dichVuSelectedGuide.templateNo):this.dichVuSelectedGuide=null},changeDomain(e){let t=this;t.selectMultiplePage=[],t.linhVucSelected=e,e?setTimeout(function(){let e={domain:t.linhVucSelected.domainCode};t.$store.dispatch("getServiceinfoFilter",e).then(e=>{t.listThuTucHanhChinh=e.map(e=>{return e["displayName"]=e["serviceCode"]+" - "+e["serviceName"],e})})},100):t.listThuTucHanhChinh=t.listThuTuc,t.domainCode=null!==e?t.linhVucSelected["domainCode"]:"";let a=t.$router.history.current,i=a.query,s="?";i["domain"]="";for(let o in i)"page"===o?s+=o+"=1&":""!==i[o]&&"undefined"!==i[o]&&void 0!==i[o]&&"step"!==o&&(s+=o+"="+i[o]+"&");-1===String(i["q"]).indexOf("&step")&&3!==t.menuType&&(s+="step="+i["step"]+"&"),s+="domain="+t.domainCode,t.$router.push({path:a.path+s,query:{renew:Math.floor(100*Math.random())+1}})},changeDossierNoKey(){var e=this;e.selectMultiplePage=[],setTimeout(function(){e.dossierNoKey?(e.dossierNoKey.length>3||""===e.dossierNoKey)&&e.doLoadingDataHoSo():e.doLoadingDataHoSo()},200)},clearDossierNoKey(){this.dossierNoKey="",this.changeDossierNoKey()},changeDichVuConfigs(e){let t=this;t.selectMultiplePage=[];let a=t.$router.history.current,i=a.query,s="?";i["template_no"]="";for(let o in i)""!==i[o]&&"undefined"!==i[o]&&void 0!==i[o]&&(s+=o+"="+i[o]+"&");s+="template_no="+e.templateNo,t.templateNo=e.templateNo,t.$router.push({path:a.path+s})},btnActionEvent(e,t,a,i){let s=this;if(s.buttonConfigItem={},s.buttonConfigItem=t,s.itemAction=t,s.indexAction=a,"NEW"===String(t.form)){let e=!0;null!==s.dichVuSelected&&void 0!==s.dichVuSelected&&"undefined"!==s.dichVuSelected&&null!==s.listDichVu&&void 0!==s.listDichVu&&1===s.listDichVu.length&&(e=!1),e?s.dialogAction=!0:s.doCreateDossier()}else if("UPDATE"===String(t.form))o["a"].push({path:"/danh-sach-ho-so/"+s.index+"/ho-so/"+e.dossierId+"/"+s.itemAction.form,query:s.$router.history.current.query});else if("ADD"===String(t.form))o["a"].push({path:"/danh-sach-ho-so/"+s.index+"/bo-sung-ho-so/"+e.dossierId,query:s.$router.history.current.query});else if("COPY"===String(t.form))s.doCopy(e,t,a,i);else if("CANCEL"===String(t.form))s.doCancel(e,t,a,i);else if("PRINT_01"===String(t.form))s.doPrint01(e,t,a,i);else if("PRINT_02"===String(t.form))s.doPrint02(e,t,a,i);else if("PRINT_03"===String(t.form))s.doPrint03(e,t,a,i);else if("GUIDING"===String(t.form))s.dialog_printGuide=!0;else if("PREVIEW"===String(t.form))s.doPreview(e,t,a,i);else if("ACTIONS"===String(t.form))s.doActions(e,t,a,i);else if("DELETE"===String(t.form))s.doDeleteDossier(e,t,a,i);else if("ROLLBACK_01"===String(t.form)){let i={actionCode:9e3};s.processAction(e,t,i,a,!0)}else if("ROLLBACK_02"===String(t.form)){let i={actionCode:9e3};s.processAction(e,t,i,a,!0)}else if("OVERDUE"===String(t.form)){let t={actionCode:8500,dossierId:e.dossierId,overdue:e["extendDate"]};s.processPullBtnDetailRouter(e,null,t,null,8500)}else if("PREOVERDUE"===String(t.form)){let t={actionCode:8501,dossierId:e.dossierId,preoverdue:e["extendDate"]};s.processPullBtnDetailRouter(e,null,t,null,8501)}else if("BETIMES"===String(t.form)){let t={actionCode:8400,dossierId:e.dossierId,betimes:e["extendDate"]};s.processPullBtnDetailRouter(e,null,t,null,8400)}else if("CHANGE_DATA_DOSSIER"===String(t.form))s.doChangeDossier(e,t,a,i);else if("UNDO_DOSSIER"===String(t.form))s.doUndoDossier(e,t,a,i);else if("RESTORE_DOSSIER"===String(t.form))s.doRestoreDossier(e,t,a,i);else if("GOTO_DONE"===String(t.form)){if(!e)return void alert("Chọn hồ sơ để thực hiện");let i={actionCode:4e3};s.processAction(e,t,i,a,!0)}else if("GOTO_CANCEL"===String(t.form)){if(!e)return void alert("Chọn hồ sơ để thực hiện");let i={actionCode:4100};s.processAction(e,t,i,a,!0)}else if("GOTO_DENY"===String(t.form)){if(!e)return void alert("Chọn hồ sơ để thực hiện");let i={actionCode:4200};s.processAction(e,t,i,a,!0)}},doPrint01(e,t,a,i){let s=this;s.dialogPDFLoading=!0,s.dialogPDF=!0;let o={dossierId:e.dossierId,document:t.document};s.$store.dispatch("doPrint01",o).then(function(e){s.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=e})},doPrint02(e,t,a,i){let s=this;if(console.log("vm.selectedDoAction",s.selectedDoAction),null===s.thuTucHanhChinhSelected||void 0===s.thuTucHanhChinhSelected||"undefined"===s.thuTucHanhChinhSelected)alert("Loại thủ tục bắt buộc phải chọn");else{let e={document:t.document,serviceCode:s.thuTucHanhChinhSelected.serviceCode,govAgencyCode:s.thuTucHanhChinhSelected.govAgencyCode,dossiers:JSON.stringify(s.selectedDoAction)};s.dialogPDFLoading=!0,s.dialogPDF=!0,s.$store.dispatch("doPrint02",e).then(function(e){s.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=e})}},doPrint03(e,t,a,i){let s=this;s.dialogPDFLoading=!0,s.dialogPDF=!0;let o={dossierId:e.dossierId,document:t.document};s.$store.dispatch("doPrint03",o).then(function(e){s.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=e})},doGuiding(){let e=this;if(e.$refs.formGuide.validate()){e.loadingAction=!0;let t={serviceConfigId:e.thuTucHanhChinhSelectedGuide.serviceConfigId,serviceCode:e.thuTucHanhChinhSelectedGuide.serviceCode,serviceName:e.thuTucHanhChinhSelectedGuide.serviceName,templateNo:e.templateNoGuide,applicantName:e.applicantNameGuide,applicantAddress:e.applicantAddressGuide,applicantEmail:e.applicantEmailGuide,applicantTelNo:e.applicantTelNoGuide,employeeName:window.themeDisplay.getUserName()?window.themeDisplay.getUserName():"",typeCode:"DOC_03"};e.dialogPDFLoading=!0,e.dialogPDF=!0,e.$store.dispatch("doGuiding",t).then(function(t){e.loadingAction=!1,e.dialog_printGuide=!1,e.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=t}).catch(function(){e.loadingAction=!1})}},doPreview(e,t,a,i){let s=this;s.dialogPDFLoading=!0,s.dialogPDF=!0;let o={dossierId:e.dossierId,document:t.document};s.$store.dispatch("doPrint03",o).then(function(e){s.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=e})},doActions(e,t,a,i){let s=this;s.$router.history.current.query,t.action;if(i)if(s.countSelected=0,1===s.selectedDoAction.length)for(let n in s.selectedDoAction){let e=s.selectedDoAction[n];o["a"].push({path:"/danh-sach-ho-so/"+s.index+"/chi-tiet-ho-so/"+e["dossierId"],query:{activeTab:"tabs-1",btnIndex:null}})}else s.selectedDoAction.length>1?s.$store.dispatch("loadActionActive",t).then(function(){s.$store.dispatch("loadDossierSelected",s.selectedDoAction).then(function(){let e=s.selectedDoAction.map(e=>{return e.dossierId}).join(","),a=s.$router.history.current.query;a["dossiers"]=e,a["actionActive"]=JSON.stringify(t),o["a"].push({path:"/danh-sach-ho-so/"+s.index+"/xu-ly-ho-so",query:a})})}):alert("Chọn hồ sơ để thao tác")},doCopy(e,t,a,i){let s=this,n={dossierId:e.dossierId};s.loadingAction=!0,s.$store.dispatch("doCopy",n).then(function(e){s.loadingAction=!1,s.indexAction=-1,o["a"].push({path:"/danh-sach-ho-so/"+s.index+"/ho-so/"+e.dossierId+"/"+s.itemAction.form,query:s.$router.history.current.query})}).catch(e=>{s.loadingAction=!1})},doCancel(e,t,a,i){let s=this;if(s.loadingAction=!0,i);else{let t={dossierId:e.dossierId};s.$store.dispatch("doCancel",t).then(function(e){s.loadingAction=!1,s.indexAction=-1,o["a"].push({path:"/danh-sach-ho-so/"+s.index+"/ho-so/"+e.dossierId+"/"+s.itemAction.form,query:s.$router.history.current.query})}).catch(e=>{s.loadingAction=!1})}},doChangeDossier(e,t,a,i){let s=this;s.$router.history.current.query;if(i)if(s.selectedDoAction.length>0){let e=s.selectedDoAction.length;s.actionId=9100,s.dossierIdSelected=s.selectedDoAction[e-1].dossierId,s.dialog_extraForm=!0}else alert("Chọn hồ sơ để thực hiện")},doUndoDossier(e,t,a,i){let s=this;s.$router.history.current.query;if(s.selectedDoAction.length>0){let e=s.selectedDoAction.length,t=confirm("Xác thực Undo hồ sơ với mã: "+s.selectedDoAction[e-1].dossierNo);if(t){let t={dossierId:s.selectedDoAction[e-1].dossierId};s.$store.dispatch("rollBack",t).then(function(e){setTimeout(function(){s.doLoadingDataHoSo()},300)}).catch(function(){setTimeout(function(){s.doLoadingDataHoSo()},300)})}}else alert("Chọn hồ sơ để thực hiện")},doChangeDossierExtraForm(){let e=this,t=e.$refs.formBoSungThongTinNgan.checkValid();if(t){let t=e.$refs.formBoSungThongTinNgan.formSubmitData(),a=confirm("Bạn có chắc chắn thực hiện hành động điều chỉnh dữ liệu?");if(a){let a=e.selectedDoAction.length,i={dossierId:e.selectedDoAction[a-1].dossierId,actionCode:e.actionId,payload:t};e.$store.dispatch("processDossierRouter",i).then(function(t){e.doLoadingDataHoSo(),e.dialog_extraForm=!1}).catch(function(){e.dialog_extraForm=!1,e.doLoadingDataHoSo()})}}},doRestoreDossier(){let e=this,t=confirm("Bạn có chắc chắn thực hiện hành động khôi phục hồ sơ?");if(t)if(e.selectedDoAction.length>0){let t=0,a=e.selectedDoAction.length;for(let i in e.selectedDoAction){let s={dossierId:e.selectedDoAction[i]["dossierId"]};console.log("filter Restore",s),e.selectedDoAction[i]["originality"]&&e.$store.dispatch("restoreDossier",s).then(function(i){t+=1,t===a&&e.doLoadingDataHoSo()}).catch(function(){t+=1,t===a&&e.doLoadingDataHoSo()})}}else alert("Chọn hồ sơ để thực hiện")},doDeleteDossier(e,t,a,i){let s=this,n=confirm("Bạn có chắc chắn thực hiện hành động xóa hồ sơ?");if(!n)return!1;{let t=s.$router.history.current.query;if(i){let e={dossierId:0};if(s.selectedDoAction.length>0){let t=[];for(let e in s.selectedDoAction)t.push(s.selectedDoAction[e]["dossierId"]);e["dossierId"]=t,s.$store.dispatch("deleteDossierPatch",e).then(function(e){})}else alert("Chọn hồ sơ để thực hiện")}else{let a={dossierId:e.dossierId};s.$store.dispatch("deleteDossier",a).then(function(e){s.dialogActionProcess=!1,s.loadingActionProcess=!1,o["a"].push({path:s.$router.history.current.path,query:{recount:Math.floor(100*Math.random())+1,renew:Math.floor(100*Math.random())+1,q:t["q"]}})})}}},doCreateDossier(){let e=this,t={serviceCode:e.serviceCode,govAgencyCode:e.govAgencyCode,templateNo:e.templateNo,originality:e.getOriginality()};e.$store.commit("setDataCreateDossier",t),e.loadingAction=!0,e.$store.dispatch("postDossier",t).then(function(t){e.loadingAction=!1,e.indexAction=-1,o["a"].push({path:"/danh-sach-ho-so/"+e.index+"/ho-so/"+t.dossierId+"/"+e.itemAction.form,query:e.$router.history.current.query})}).catch(t=>{e.loadingAction=!1})},doSubmitDialogAction(e){let t=this;t.$refs.form.validate()&&t.doCreateDossier()},processPullBtnDynamics(e){let t=this;t.btnDossierDynamics=[];let a={dossierId:e.dossierId,dossierStatus:e.dossierStatus,dossierSubStatus:e.dossierSubStatus};if(t.dossierId=e.dossierId,""===e.dossierStatus||""===e.dossierSubStatus)t.$store.dispatch("pullNextactions",a).then(e=>{t.btnDossierDynamics=e});else{t.btnStepsDynamics=[];var i=[t.$store.dispatch("pullNextactions",a),t.$store.dispatch("pullBtnConfigStep",a)];Promise.all(i).then(e=>{t.btnDossierDynamics=e[0],t.btnStepsDynamics=e[1]}).catch(e=>{t.$store.dispatch("pullNextactions",a).then(e=>{t.btnDossierDynamics=e})})}},processAction(e,t,a,i,s){let n=this;var r=null;n.payments&&(r={requestPayment:n.payments["requestPayment"],advanceAmount:Number(n.payments["advanceAmount"].toString().replace(/\./g,"")),feeAmount:Number(n.payments["feeAmount"].toString().replace(/\./g,"")),serviceAmount:Number(n.payments["serviceAmount"].toString().replace(/\./g,"")),shipAmount:Number(n.payments["shipAmount"].toString().replace(/\./g,""))});let l={dossierId:e.dossierId,actionCode:a.actionCode,toUsers:n.assign_items,payment:r,userNote:n.textNote?n.textNote:""};n.dossierId=e.dossierId;let c=n.$router.history.current.query,d="?";c["recount"]=Math.floor(100*Math.random())+1,c["renew"]=Math.floor(100*Math.random())+1;for(let o in c)""!==c[o]&&"undefined"!==c[o]&&void 0!==c[o]&&(d+=o+"="+c[o]+"&");if(n.loadingActionProcess=!0,s){let e=confirm("Bạn có muốn thực hiện hành động này?");if(!e)return!1;n.$store.dispatch("processDossierRouter",l).then(function(e){n.dialogActionProcess=!1,n.loadingActionProcess=!1,n.$router.push({path:n.$router.history.current.path+d})})}else e.statusAction||n.$store.dispatch("processCheckNextActions",l).then(function(e){n.$store.dispatch("processDossierRouter",e).then(function(e){n.dialogActionProcess=!1,n.loadingActionProcess=!1,"ACTIONS"===String(t.form)?(n.hosoDatas.splice(i,1),n.selectedDoAction[i].statusAction=!0,n.countSelected+=1,n.countSelected===n.selectedDoAction.length&&n.statusFailed>0&&n.selectedDoAction.length>1?n.dialog_statusAction=!0:n.countSelected===n.selectedDoAction.length&&0===n.statusFailed&&o["a"].push({path:n.$router.history.current.path,query:{recount:Math.floor(100*Math.random())+1,renew:Math.floor(100*Math.random())+1,q:c["q"]}})):o["a"].push({path:n.$router.history.current.path,query:{recount:Math.floor(100*Math.random())+1,renew:Math.floor(100*Math.random())+1,q:c["q"]}})}).catch(function(){n.loadingActionProcess=!1,"ACTIONS"===String(t.form)&&(n.countSelected+=1,n.statusFailed+=1,n.selectedDoAction[i].statusAction=!1,n.countSelected===n.selectedDoAction.length&&n.statusFailed>0&&n.selectedDoAction.length>1&&(n.dialog_statusAction=!0))})})},processPullBtnDetailRouter(e,t,a,i,s){let n=this,r=!1;if(n.dossierId=e.dossierId,n.showYkienCanBoThucHien=!1,n.showFormBoSungThongTinNgan=!1,n.showPhanCongNguoiThucHien=!1,n.showTaoTaiLieuKetQua=!1,n.showKyPheDuyetTaiLieu=!1,n.showTraKetQua=!1,n.showXacNhanThuPhi=!1,n.showThuPhi=!1,n.showThucHienThanhToanDienTu=!1,n.dossierItemDialogPick=e,n.itemDialogPick=t,n.resultDialogPick=a,n.indexDialogPick=i,n.userNote=0,null!==a&&void 0!==a&&"undefined"!==a&&(a.hasOwnProperty("userNote")||a.hasOwnProperty("extraForm")||a.hasOwnProperty("allowAssignUser")||a.hasOwnProperty("createFiles")||a.hasOwnProperty("eSignature")||a.hasOwnProperty("returnFiles")||a.hasOwnProperty("payment")||a.hasOwnProperty("overdue")||a.hasOwnProperty("betimes"))){if(!a.hasOwnProperty("userNote")||1!==a.userNote&&"1"!==a.userNote&&2!==a.userNote&&"2"!==a.userNote||(r=!0,n.showYkienCanBoThucHien=!0,n.userNote=a.userNote),a.hasOwnProperty("extraForm")&&a.extraForm&&(r=!0,n.showFormBoSungThongTinNgan=!0),a.hasOwnProperty("allowAssignUser")&&0!==a.allowAssignUser&&(n.assign_items=a.toUsers,n.type_assign=a.allowAssignUser,r=!0,n.showPhanCongNguoiThucHien=!0),a.hasOwnProperty("returnFiles")&&null!==a.createFiles&&void 0!==a.createFiles&&"undefined"!==a.createFiles&&a.createFiles.length>0&&(r=!0,n.showTaoTaiLieuKetQua=!0),a.hasOwnProperty("eSignature")&&a.eSignature&&(r=!0,n.showKyPheDuyetTaiLieu=!0),a.hasOwnProperty("returnFiles")&&null!==a.returnFiles&&void 0!==a.returnFiles&&"undefined"!==a.returnFiles&&a.returnFiles.length>0&&(r=!0,n.showTraKetQua=!0,n.returnFiles=a.returnFiles),a.hasOwnProperty("payment")&&null!==a.payment&&void 0!==a.payment&&"undefined"!==a.payment&&a.payment.requestPayment>0)if(2===a.payment.requestPayment||"2"===a.payment.requestPayment){r=!0;let e={dossierId:n.dossierId};n.$store.dispatch("loadDossierPayments",e).then(e=>{n.paymentProfile=e}).catch(e=>{})}else r=!0,n.showThuPhi=!0,n.payments=a.payment,n.viaPortalDetail=e.viaPostal;a.hasOwnProperty("overdue")&&(r=!0),a.hasOwnProperty("betimes")&&(r=!0)}if(r){let t={activeTab:"tabs-1",btnIndex:s};o["a"].push({path:"/danh-sach-ho-so/"+n.index+"/chi-tiet-ho-so/"+e["dossierId"],query:t})}else n.processAction(e,t,a,i,!0)},processPullBtnDetail(e,t,a,i){let s=this;if(1===t["enable"]||"special"===t["autoEvent"]){s.itemAction=t;let o={dossierId:e.dossierId,actionId:t.processActionId};s.dossierId=e.dossierId,s.loadingActionProcess=!0,s.$store.dispatch("processPullBtnDetail",o).then(function(o){s.processPullBtnDetailRouter(e,t,o,a,i)})}},goBack(){window.history.back()},viewDetail(e,t){console.log("permission: ",e.permission),null!==e.permission&&""!==e.permission&&o["a"].push("/danh-sach-ho-so/"+this.index+"/chi-tiet-ho-so/"+e["dossierId"])},keywordEventChange(e){let t=this;t.selectMultiplePage=[],console.log("keywordEventChange",e),t.advObjectSearch={};for(let a in e)if("string"===typeof e[a]&&null!==e[a]&&void 0!==e[a]&&"undefined"!==e[a])if(e[a].startsWith("keyword:")||e[a].startsWith("year_month:")||e[a].startsWith("top:")||e[a].startsWith("status:")||e[a].startsWith("substatus:")||e[a].startsWith("agency:")||e[a].startsWith("service:")||e[a].startsWith("domain:")||e[a].startsWith("register:")||(t.advObjectSearch["keyword"]=e[a]),e[a].startsWith("keyword:"))t.advObjectSearch["keyword"]=e[a].replace("keyword:","");else for(let i in t.advSearchItems)e[a].startsWith(t.advSearchItems[i].spec+":")&&(t.advObjectSearch[t.advSearchItems[i].spec]=e[a].replace(t.advSearchItems[i].spec+":",""));else{let i=e[a].value;t.advObjectSearch[e[a].spec]=i.replace(e[a].spec+":","")}t.advSearchItems=[];for(let a in t.advObjectSearch){if(!t.advObjectSearch.hasOwnProperty(a))continue;let e=t.advObjectSearch[a];if("string"===typeof e&&null!==e&&void 0!==e&&""!==e)if("keyword"===a)t.advSearchItems.push({spec:a,value:a+":"+e,text:a+":"+e,index:-1});else{let i=-2;for(let e in t.advSearchTools)if(t.advSearchTools[e].spec===a){i=t.advSearchTools[e].index;break}t.advSearchItems.push({spec:a,value:a+":"+e,text:a+":"+e,index:i})}else"string"!==typeof e&&null!==e&&void 0!==e&&""!==e&&t.advSearchItems.push({spec:a,value:a+":"+e.value,text:a+":"+e.value,index:a+":"+e.index})}for(let a in t.advSearchTools)t.advSearchTools[a].display=!1,t.advSearchTools[a].disabled=!1,null!==t.advObjectSearch[t.advSearchTools[a].spec]&&void 0!==t.advObjectSearch[t.advSearchTools[a].spec]&&""!==t.advObjectSearch[t.advSearchTools[a].spec]&&(t.advSearchTools[a].display=!0,t.advSearchTools[a].disabled=!0);console.log("vm.advSearchItems",t.advSearchItems),t.doRedirectFilter()},selectedAdvFilter(e){let t=this;t.advSearchTools[e.index].display=!0,t.advSearchTools[e.index].disabled=!0;let a=!1;for(let i in t.advSearchItems)if(t.advSearchItems[i].index===e.index){a=!0;break}a||t.advSearchItems.push({spec:t.advSearchTools[e.index].spec,value:t.advSearchTools[e.index].spec+":__",text:t.advSearchTools[e.index].spec+":__",index:e.index})},showAdvFilter(){let e=this;e.menusss=!e.menusss,e.$store.dispatch("getStatusLists").then(function(t){e.itemFilterSupport.statusLists=t;let a={itemCode:"deleted",itemName:"Đã xóa"};e.getUser("Administrator_data")&&e.itemFilterSupport.statusLists.push(a)});let t={itemCode:""};e.$store.dispatch("getSubstatusLists",t).then(function(t){e.itemFilterSupport.substatusLists=t}),e.$store.dispatch("getAgencyLists").then(function(t){e.itemFilterSupport.agencyLists=t}),e.$store.dispatch("getServiceLists").then(function(t){e.itemFilterSupport.serviceLists=t}),e.$store.dispatch("getDomainLists").then(function(t){e.itemFilterSupport.domainLists=t})},changeAdvFilterData(e,t,a){let i=this;if(console.log("data change advSearch",e,t,a),"status"===t){let t={itemCode:e};i.$store.dispatch("getSubstatusLists",t).then(function(e){i.itemFilterSupport.substatusLists=e})}let s=e;"year"===t?(i.itemFilterSupport.year=e,s=i.itemFilterSupport.year+"_"+i.itemFilterSupport.month,t="year_month"):"month"===t?(i.itemFilterSupport.month=e,s=i.itemFilterSupport.year+"_"+i.itemFilterSupport.month,t="year_month"):i.itemFilterSupport[t]=e;for(let o in i.advSearchItems)if(console.log("adv Search index",i.advSearchItems[o].index),i.advSearchItems[o].index===a){console.log("vm.itemFilterSupport2",i.itemFilterSupport),i.advSearchItems[o].value=t+":"+s,i.advSearchItems[o].text=t+":"+s;break}i.doRedirectFilter()},doRedirectFilter(){let e=this;e.selectMultiplePage=[];let t=e.$router.history.current,a=t.query,i="?";for(let s in a)""!==a[s]&&"undefined"!==a[s]&&void 0!==a[s]&&"top"!==s&&"status"!==s&&"substatus"!==s&&"agency"!==s&&"service"!==s&&"domain"!==s&&"register"!==s&&"year"!==s&&"month"!==s&&"adv_renew"!==s&&"keyword"!==s&&(i+=s+"="+a[s]+"&");for(let s in e.advSearchItems){let t=e.advSearchItems[s];if("year_month"===t.spec){let e=t.text.replace(t.spec+":","");const[a,s]=e.split("_");i+="year="+a+"&month="+s+"&"}else console.log("currentItemFilter.spec",t.text.replace(t.spec+":","")),i+=t.spec+"="+t.text.replace(t.spec+":","")+"&"}i+="adv_renew="+Math.floor(100*Math.random())+1,i=i.replace(/=__/g,"="),e.$router.push({path:t.path+i})},changeAdvFilterDataChips(e){let t=this,a=-2;for(let o in t.advSearchTools)"delay"===e.key||"overdue"===e.key||"coming"===e.key?"top"===t.advSearchTools[o]["spec"]&&(a=t.advSearchTools[o]["index"],t.advSearchTools[o].display=!0,t.advSearchTools[o].disabled=!0):"status"===t.advSearchTools[o]["spec"]&&(a=t.advSearchTools[o]["index"],t.advSearchTools[o].display=!0,t.advSearchTools[o].disabled=!0);let i="";i="delay"===e.key||"overdue"===e.key||"coming"===e.key?"top":"status";let s=!0;for(let o in t.advSearchItems)if("status"===t.advSearchItems[o]["spec"]){if("delay"!==e.key&&"overdue"!==e.key&&"coming"!==e.key){t.advSearchItems[o].value="status:"+e.key,t.advSearchItems[o].text="status:"+e.key,s=!1;break}}else if("top"===t.advSearchItems[o]["spec"]&&("delay"===e.key||"overdue"===e.key||"coming"===e.key)){t.advSearchItems[o].value="top:"+e.key,t.advSearchItems[o].text="top:"+e.key,s=!1;break}s&&t.advSearchItems.push({spec:i,value:i+":"+e.key,text:i+":"+e.key,index:a}),t.doRedirectFilter()},validate(){return!0},callback(e){e?alert(e):alert("please check you are not robot")}}},f=_,y=a("2877"),C=a("6544"),T=a.n(C),x=a("8212"),D=a("8336"),S=a("b0af"),b=a("99d9"),P=a("12b2"),I=a("ac7c"),A=a("cc20"),N=a("8fea"),w=a("169a"),k=a("0e8f"),E=a("4bd4"),F=a("132d"),O=a("a722"),H=a("8860"),L=a("ba95"),$=a("5d23"),V=a("e449"),M=a("490a"),U=a("8e36"),B=a("b56d"),R=a("9910"),K=a("2677"),q=a("3a2f"),j=Object(y["a"])(f,i,s,!1,null,null,null);j.options.__file="LandingMobile.vue";t["default"]=j.exports;T()(j,{VAvatar:x["a"],VBtn:D["a"],VCard:S["a"],VCardActions:b["a"],VCardText:b["b"],VCardTitle:P["a"],VCheckbox:I["a"],VChip:A["a"],VDataTable:N["a"],VDialog:w["a"],VFlex:k["a"],VForm:E["a"],VIcon:F["a"],VLayout:O["a"],VList:H["a"],VListTile:L["a"],VListTileTitle:$["c"],VMenu:V["a"],VProgressCircular:M["a"],VProgressLinear:U["a"],VSelect:B["a"],VSpacer:R["a"],VTextField:K["a"],VTooltip:q["a"]})},e195:function(module,__webpack_exports__,__webpack_require__){"use strict";var vue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("a026");__webpack_exports__["a"]={props:{item:{type:Object,default(){return{dossierId:0}}},layout_view:{type:Object}},created(){let vm=this;null!==vm.layout_view&&void 0!==vm.layout_view&&"undefined"!==vm.layout_view&&vue__WEBPACK_IMPORTED_MODULE_0__["a"].component("my-dynamic-view",{template:vm.layout_view["template"],data:eval(" ( "+vm.layout_view["data"]+" ) "),created:eval(" ( "+vm.layout_view["created"]+" ) "),updated:eval(" ( "+vm.layout_view["updated"]+" ) "),methods:vm.layout_view["methods"]})}}},e4e5:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return null!==e.layout_view&&void 0!==e.layout_view&&"undefined"!==e.layout_view?a("my-dynamic-view"):e._e()},s=[],o=a("e195"),n=o["a"],r=a("2877"),l=Object(r["a"])(n,i,s,!1,null,null,null);l.options.__file="template_rendering.vue";t["a"]=l.exports},eaee:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",["0"===String(e.serviceCode)||e.selectOption?e._e():a("div",{staticClass:"text-center mt-4"},[a("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}}),a("p",{staticClass:"mt-4"},[e._v("đang tạo hồ sơ ...")])],1),"0"!==String(e.serviceCode)||e.selectOption?e._e():a("v-expansion-panel",{staticClass:"expand__select__gov",attrs:{value:[!0],expand:""}},e._l(e.govAgencies,function(t,i){return a("v-expansion-panel-content",{key:i},[a("div",{staticClass:"ml-3",attrs:{slot:"header"},slot:"header"},[a("v-icon",{staticStyle:{"font-size":"14px","margin-top":"-4px","padding-right":"5px"}},[e._v("account_balance")]),e._v("\n        "+e._s(t.govAgencyName)+"\n      ")],1),a("v-card",[a("v-card-text",{staticClass:"grey lighten-3 px-0 py-0"},[a("v-expansion-panel",{staticClass:"expand__select__domain",attrs:{value:[!0],expand:""}},e._l(t.domains,function(i,s){return t.domains?a("v-expansion-panel-content",{key:s,attrs:{value:!0}},[a("div",{staticStyle:{"margin-left":"14px"},attrs:{slot:"header"},slot:"header"},[a("v-icon",{staticClass:"pr-2 theme--dark"},[e._v("navigate_next")]),a("span",{staticStyle:{position:"absolute","margin-top":"1px"}},[e._v(e._s(i.domainName))])],1),a("v-card",e._l(i.serviceConfigs,function(s,o){return i.serviceConfigs?a("v-card-text",{key:o,staticClass:"card__text__gov"},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"pt-1",attrs:{xs12:"",sm9:""}},[a("span",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(o+1)+".")]),e._v("  \n                      "),a("span",[e._v(e._s(s.serviceInfoName))])]),a("v-flex",{staticClass:"text-xs-center pt-1",attrs:{xs12:"",sm1:""}},[a("span",[e._v("Mức "+e._s(s.level))])]),a("v-flex",{staticClass:"text-xs-center",attrs:{xs12:"",sm2:""}},[a("v-menu",{attrs:{left:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",flat:"",small:""},on:{click:function(a){e.pullServiceOptions(s,t.govAgencyCode)}},slot:"activator"},[e._v("\n                          Chọn\n                        ")]),e.serviceOptions.length>1?a("v-list",e._l(e.serviceOptions,function(i,o){return a("v-list-tile",{key:o,on:{click:function(a){e.selectServiceOption(i,t.govAgencyCode,s)}}},[a("v-list-tile-title",[e._v(e._s(i.optionName))])],1)}),1):e._e()],1)],1)],1)],1):e._e()}),1)],1):e._e()}),1)],1)],1)],1)}),1),e.selectOption?a("div",[a("div",{staticClass:"row-header"},[e._m(0),a("div",{staticClass:"layout row wrap header_tools row-blue"},[a("div",{staticClass:"flex xs4 sm2 text-right",staticStyle:{"margin-left":"auto"}},[a("v-btn",{staticClass:"my-0 mx-0 btn-border-left",attrs:{flat:"","active-class":"temp_active"},on:{click:e.goBack}},[e._v("\n            Quay lại  \n            "),a("v-icon",{attrs:{size:"16"}},[e._v("undo")])],1)],1)])]),a("v-list",{staticClass:"py-0"},[e._l(e.serviceOptionsProcess,function(t,i){return[a("v-list-tile",{key:i,staticClass:"px-2 py-1",staticStyle:{"border-bottom":"1px solid #dede"}},[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:e._s(t.optionName)}})],1),a("v-list-tile-action",[a("v-btn",{attrs:{color:"primary"},on:{click:function(a){e.selectServiceOptionCRD(t,e.govAgencyCodeSelect)}}},[e._v("\n              Chọn\n            ")])],1)],1)]})],2)],1):e._e()],1)},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"background-triangle-big"},[a("span",[e._v("THÊM MỚI HỒ SƠ")])])}],o=a("a18c"),n={props:["serviceCode"],data:()=>({govAgencies:[],serviceOptions:[],serviceConfigSelect:"",serviceInfoIdSelect:"",serviceOptionsProcess:[],selectOption:!1,govAgencyCodeSelect:"",loadingMutiple:!0}),computed:{currentIndex(){return this.$store.getters.index}},created(){var e=this;console.log("create------"),e.$store.dispatch("loadServiceConfigsGov",{}).then(t=>{if(e.govAgencies=t,"0"!==String(e.serviceCode))for(let a in e.govAgencies){let t=e.govAgencies[a].govAgencyCode;for(let i in e.govAgencies[a].domains)for(let s in e.govAgencies[a].domains[i].serviceConfigs){let o=e.govAgencies[a].domains[i].serviceConfigs[s],n=o.serviceConfigId;if(String(e.serviceCode)===String(n)){e.govAgencyCodeSelect=t,e.serviceInfoIdSelect=o.serviceInfoId,e.pullServiceOptions(o,t);break}}}})},updated(){},watch:{},methods:{pullServiceOptions(e,t){console.log("govAgencyCode++++++++++",t);var a=this;a.serviceConfigSelect=e,a.govAgencyCodeSelect=t,a.serviceInfoIdSelect=e.serviceInfoId,a.$store.dispatch("getServiceOpionByProcess",e).then(i=>{1===i.length?(a.selectOption=!1,a.$store.dispatch("getServiceInfo",{serviceInfoId:e.serviceInfoId}).then(e=>{console.log("resServiceInfo+++++++++++",e);let s={serviceCode:e.serviceCode,govAgencyCode:t,templateNo:i[0].templateNo,originality:a.getOriginality()};a.$store.dispatch("postDossier",s).then(function(e){a.loadingAction=!1,a.indexAction=-1,o["a"].push({path:"/danh-sach-ho-so/0/ho-so/"+e.dossierId+"/NEW",query:a.$router.history.current.query})})})):(a.serviceOptions=i,a.serviceOptionsProcess=i,a.selectOption=!0)})},selectServiceOption(e,t,a){var i=this;i.serviceConfigSelect=a,i.govAgencyCodeSelect=t,i.serviceInfoIdSelect=a.serviceInfoId,i.loadingMutiple=!0,console.log("govAgencyCode+++++++++++",t),i.$store.dispatch("getServiceInfo",{serviceInfoId:i.serviceConfigSelect.serviceInfoId}).then(a=>{console.log("resServiceInfo+++++++++++",a);let s={serviceCode:a.serviceCode,govAgencyCode:t,templateNo:e.templateNo,originality:i.getOriginality()};i.$store.dispatch("postDossier",s).then(function(e){i.loadingAction=!1,i.indexAction=-1,o["a"].push({path:"/danh-sach-ho-so/0/ho-so/"+e.dossierId+"/NEW",query:i.$router.history.current.query})})})},selectServiceOptionCRD(e,t){var a=this;console.log("govAgencyCode+++++++++++",t),a.$store.dispatch("getServiceInfo",{serviceInfoId:a.serviceInfoIdSelect}).then(i=>{console.log("resServiceInfo+++++++++++",i);let s={serviceCode:i.serviceCode,govAgencyCode:t,templateNo:e.templateNo,originality:a.getOriginality()};a.$store.dispatch("postDossier",s).then(function(e){a.loadingAction=!1,a.indexAction=-1,o["a"].push({path:"/danh-sach-ho-so/0/ho-so/"+e.dossierId+"/NEW",query:a.$router.history.current.query})})})},getColor(e){return 2===e?"green":3===e?"orange":4===e?"red":void 0},goBack(){window.history.back()}}},r=n,l=a("2877"),c=a("6544"),d=a.n(c),h=a("8336"),u=a("b0af"),p=a("99d9"),m=a("cd55"),g=a("49e2"),v=a("0e8f"),_=a("132d"),f=a("a722"),y=a("8860"),C=a("ba95"),T=a("40fe"),x=a("5d23"),D=a("e449"),S=a("490a"),b=Object(l["a"])(r,i,s,!1,null,null,null);b.options.__file="DanhSachThuTuc.vue";t["default"]=b.exports;d()(b,{VBtn:h["a"],VCard:u["a"],VCardText:p["b"],VExpansionPanel:m["a"],VExpansionPanelContent:g["a"],VFlex:v["a"],VIcon:_["a"],VLayout:f["a"],VList:y["a"],VListTile:C["a"],VListTileAction:T["a"],VListTileContent:x["a"],VListTileTitle:x["c"],VMenu:D["a"],VProgressCircular:S["a"]})},f374:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"payment-info",staticStyle:{width:"100%"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),1===e.data_payment.requestPayment||5===e.data_payment.requestPayment?a("span",[e._v(e._s(e.data_payment.paymentFee))]):e._e(),2===e.data_payment.requestPayment?a("span",[e._v("Lập phiếu thanh toán")]):e._e()]),a("v-card",[a("v-card-text",{staticClass:"pb-1"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[e._v("Lệ phí: ")])],1),a("v-flex",{attrs:{xs12:"",sm3:""}},[1===e.data_payment.editable||3===e.data_payment.editable?a("v-text-field",{directives:[{name:"money",rawName:"v-money",value:e.money,expression:"money"}],attrs:{suffix:"vnđ"},on:{keyup:e.changeFee},model:{value:e.data_payment.feeAmount,callback:function(t){e.$set(e.data_payment,"feeAmount",t)},expression:"data_payment.feeAmount"}}):a("p",{staticClass:"mt-1 mb-0"},[e._v(e._s(e.currency(e.data_payment.feeAmount.toString().replace(/\./g,"")))+"    vnđ")])],1),a("v-flex",{staticClass:"pt-1",attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[e._v("Phí: ")])],1),a("v-flex",{staticClass:"pt-1",attrs:{xs12:"",sm3:""}},[2===e.data_payment.editable||3===e.data_payment.editable?a("v-text-field",{directives:[{name:"money",rawName:"v-money",value:e.money,expression:"money"}],attrs:{suffix:"vnđ"},on:{keyup:e.changeFee},model:{value:e.data_payment.serviceAmount,callback:function(t){e.$set(e.data_payment,"serviceAmount",t)},expression:"data_payment.serviceAmount"}}):a("p",{staticClass:"mt-1 mb-0"},[e._v(e._s(e.currency(e.data_payment.serviceAmount.toString().replace(/\./g,"")))+"    vnđ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}}),2!==e.viaPortal&&"2"!==e.viaPortal||0===e.data_payment.shipAmount?e._e():a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[e._v("Phí chuyển phát: ")])],1),2!==e.viaPortal&&"2"!==e.viaPortal||0===e.data_payment.shipAmount?e._e():a("v-flex",{attrs:{xs12:"",sm3:""}},[1===e.data_payment.editable||3===e.data_payment.editable?a("v-text-field",{directives:[{name:"money",rawName:"v-money",value:e.money,expression:"money"}],attrs:{suffix:"vnđ"},on:{keyup:e.changeFee},model:{value:e.data_payment.shipAmount,callback:function(t){e.$set(e.data_payment,"shipAmount",t)},expression:"data_payment.shipAmount"}}):a("p",{staticClass:"mt-1 mb-0"},[e._v(e._s(e.currency(e.data_payment.shipAmount.toString().replace(/\./g,"")))+"    vnđ")])],1),a("v-flex",{attrs:{xs12:"",sm2:""}})],1)],1),a("v-card-text",{staticClass:"pt-0"},[a("v-layout",{attrs:{wrap:""}},[1===e.data_payment.requestPayment?a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[a("span",{staticClass:"text-bold"},[e._v("Tổng: ")])])],1):e._e(),1===e.data_payment.requestPayment?a("v-flex",{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[a("span",[e._v(e._s(e.currency(e.feeTong.toString().replace(/\./g,"")))+"    vnđ")])]):e._e(),1===e.data_payment.requestPayment?a("v-flex",{attrs:{xs12:"",sm1:""}}):e._e(),2===e.data_payment.requestPayment?a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[a("span",{staticClass:"text-bold"},[e._v("Tổng: ")])])],1):e._e(),2===e.data_payment.requestPayment?a("v-flex",{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[a("span",[e._v(e._s(e.currency(e.totalFee.toString().replace(/\./g,"")))+"    vnđ")])]):e._e(),2===e.data_payment.requestPayment?a("v-flex",{attrs:{xs12:"",sm1:""}}):e._e(),5===e.data_payment.requestPayment?a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[a("span",{staticClass:"text-bold"},[e._v("Tổng: ")])])],1):e._e(),5===e.data_payment.requestPayment?a("v-flex",{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[a("span",[e._v(e._s(e.currency(e.feeTong.toString().replace(/\./g,"")))+"    vnđ")])]):e._e(),5===e.data_payment.requestPayment?a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[a("span",{staticClass:"text-bold"},[e._v("Đã tạm nộp: ")])])],1):e._e(),5===e.data_payment.requestPayment?a("v-flex",{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[a("span",[e._v(e._s(e.currency(Number(e.data_payment.advanceAmount.toString().replace(/\./g,"")).toString().replace(/\./g,"")))+"    vnđ")])]):e._e(),5===e.data_payment.requestPayment?a("v-flex",{attrs:{xs12:"",sm1:""}}):e._e(),5===e.data_payment.requestPayment?a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[a("span",{staticClass:"text-bold"},[e._v("Còn phải nộp: ")])])],1):e._e(),5===e.data_payment.requestPayment?a("v-flex",{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[a("span",[e._v(e._s(e.currency(e.totalFee.toString().replace(/\./g,"")))+"    vnđ")])]):e._e(),5===e.data_payment.requestPayment?a("v-flex",{attrs:{xs12:"",sm1:""}}):e._e()],1),a("v-layout",{staticStyle:{position:"relative"},attrs:{wrap:""}},[a("v-flex",{staticClass:"my-0 py-1",staticStyle:{width:"70px"}},[a("span",{staticClass:"red--text"},[e._v("* ")]),e._v(" Ghi chú:")]),a("v-flex",{staticStyle:{width:"calc(100% - 80px)"}},[0==e.activeEdit?a("div",{staticClass:"pl-2"},[a("v-text-field",{staticClass:"py-0",attrs:{"multi-line":"",readonly:e.activeEdit,required:""},model:{value:e.data_payment.paymentNote,callback:function(t){e.$set(e.data_payment,"paymentNote",t)},expression:"data_payment.paymentNote"}})],1):e._e(),e.activeEdit||""===e.data_payment.paymentNote?a("p",{staticClass:"px-2 my-0 py-1"},[e._v("\n                "+e._s(e.data_payment.paymentNote)+"   \n                "),1==e.activeEdit?a("v-icon",{staticClass:"hover-pointer btn-add mx-0 my-0",attrs:{color:"blue",size:"20",title:"Sửa",grey:"","darken-4":""},on:{click:function(t){t.stopPropagation(),e.activeEdit=!1}}},[e._v("\n                  create\n                ")]):e._e()],1):e._e(),a("span",{staticStyle:{position:"absolute",top:"15px",right:"10px"}},[0==e.activeEdit?a("v-icon",{staticClass:"hover-pointer btn-add mx-0 my-0",attrs:{color:"green",size:"25",grey:"","darken-4":""},on:{click:function(t){t.stopPropagation(),e.activeEdit=!0}}},[e._v("\n                  check\n                ")]):e._e()],1)])],1),e.paymentFile&&5===e.data_payment.requestPayment?a("div",[a("span",[a("span",{staticClass:"red--text"},[e._v("* ")]),e._v(" File báo thanh toán:")]),e._v(" \n            "),a("span",{staticStyle:{cursor:"pointer"},on:{click:function(t){t.stopPropagation(),e.viewFile()}}},[a("v-icon",[e._v("attach_file")]),e._v("\n              "+e._s(e.paymentFileName)+"\n            ")],1),a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:"",ripple:""},on:{click:function(t){t.stopPropagation(),e.downloadPaymentFile(e.item)}},slot:"activator"},[a("v-icon",{staticStyle:{color:"#0d71bb"},attrs:{size:"16",color:"primary"}},[e._v("save_alt")])],1),a("span",[e._v("Tải xuống")])],1)],1):e._e()],1)],1)],1)],1),a("v-dialog",{staticStyle:{overflow:"hidden"},attrs:{"max-width":"900",transition:"fade-transition"},model:{value:e.dialogPDF,callback:function(t){e.dialogPDF=t},expression:"dialogPDF"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("File đính kèm")]),a("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.dialogPDF=!1}}},[a("v-icon",[e._v("clear")])],1),e.dialogPDFLoading?a("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[a("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):e._e(),a("iframe",{directives:[{name:"show",rawName:"v-show",value:!e.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPreview",src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1)],1)},s=[],o=a("716b"),n={props:{payments:{type:Object,default:()=>{}},viaPortal:{type:Number,default:()=>0},detailDossier:{type:Object,default:()=>{}}},model:{prop:"payments"},data:()=>({data_payment:{},money:{decimal:"",thousands:".",prefix:"",suffix:"",precision:0,masked:!1},totalFee:0,feeTamThu:0,feeTong:0,checkPaid:!0,activeEdit:!0,paymentFile:"",dialogPDF:!1,dialogPDFLoading:!0}),directives:{money:o["VMoney"]},created(){var e=this;e.data_payment=e.payments,e.payments&&setTimeout(function(){let t=e.payments.feeAmount?Number(e.payments.feeAmount.toString().replace(/\./g,"")):0;if(1===e.payments.requestPayment){let a=Number(e.payments.serviceAmount);e.feeTong=t+a,e.totalFee=t+a}else if(2===e.payments.requestPayment){let a=e.payments.serviceAmount?Number(e.payments.serviceAmount.toString().replace(/\./g,"")):0,i=e.payments.shipAmount?Number(e.payments.shipAmount.toString().replace(/\./g,"")):0;2!==e.viaPortal&&"2"!==e.viaPortal||0===i?e.totalFee=t+a:e.totalFee=t+a+i}else{let a=e.payments.advanceAmount?Number(e.payments.advanceAmount.toString().replace(/\./g,"")):0,i=e.payments.serviceAmount?Number(e.payments.serviceAmount.toString().replace(/\./g,"")):0,s=e.payments.shipAmount?Number(e.payments.shipAmount.toString().replace(/\./g,"")):0;if(2!==e.viaPortal&&"2"!==e.viaPortal||0===s?(e.feeTong=t+i,e.totalFee=t+i-a):(e.feeTong=t+i+s,e.totalFee=t+i+s-a),5===e.payments.requestPayment&&620===e.detailDossier.stepCode){let t=e.detailDossier;e.$store.dispatch("getPaymentFiles",t).then(t=>{e.paymentFile=t})}}e.totalFee<0&&(e.totalFee=0)},200)},computed:{paymentFileName(){return this.$store.getters.getPaymentFileName}},watch:{viaPortal(e){console.log("viaPortal",e),this.changeFee()},detailDossier(e){var t=this;if(5===t.payments.requestPayment){let a=e;console.log("run get paymentfile",a),t.$store.dispatch("getPaymentFiles",a).then(e=>{t.paymentFile=e})}}},methods:{changeFee(){var e=this;let t=e.data_payment,a=t.feeAmount?Number(t.feeAmount.toString().replace(/\./g,"")):0;if(1===t.requestPayment){let t=e.payments.serviceAmount?Number(e.payments.serviceAmount.toString().replace(/\./g,"")):0;e.feeTong=a+t,e.totalFee=a+t}else if(2===t.requestPayment){let t=e.payments.serviceAmount?Number(e.payments.serviceAmount.toString().replace(/\./g,"")):0,i=e.payments.shipAmount?Number(e.payments.shipAmount.toString().replace(/\./g,"")):0;2!==e.viaPortal&&"2"!==e.viaPortal||0===i?e.totalFee=a+t:e.totalFee=a+t+i}else{let i=Number(t.advanceAmount.toString().replace(/\./g,"")),s=Number(t.serviceAmount.toString().replace(/\./g,"")),o=Number(t.shipAmount.toString().replace(/\./g,""));2!==e.viaPortal&&"2"!==e.viaPortal||0===o?(e.feeTong=a+s,e.totalFee=a+s-i):(e.feeTong=a+s+o,e.totalFee=a+s+o-i)}e.totalFee<0&&(e.totalFee=0)},viewFile(){let e=this;e.dialogPDFLoading=!0,e.dialogPDF=!0;let t={dossierId:e.detailDossier.dossierId,referenceUid:e.detailDossier.referenceUid};e.$store.dispatch("viewPaymentFile",t).then(t=>{e.dialogPDFLoading=!1,document.getElementById("dialogPreview").src=t})},downloadPaymentFile(e){let t=this,a="/o/rest/v2/dossiers/"+t.detailDossier.dossierId+"/payments/"+t.detailDossier.referenceUid+"/confirmfile";window.open(a)},currency(e){if(e){let t=(e/1).toFixed(0).replace(".",",");return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}return""},goBack(){window.history.back()}},filters:{}},r=n,l=a("2877"),c=a("6544"),d=a.n(c),h=a("8336"),u=a("b0af"),p=a("99d9"),m=a("12b2"),g=a("169a"),v=a("cd55"),_=a("49e2"),f=a("0e8f"),y=a("132d"),C=a("a722"),T=a("490a"),x=a("e0c7"),D=a("2677"),S=a("3a2f"),b=Object(l["a"])(r,i,s,!1,null,null,null);b.options.__file="FeeDetail.vue";t["a"]=b.exports;d()(b,{VBtn:h["a"],VCard:u["a"],VCardText:p["b"],VCardTitle:m["a"],VDialog:g["a"],VExpansionPanel:v["a"],VExpansionPanelContent:_["a"],VFlex:f["a"],VIcon:y["a"],VLayout:C["a"],VProgressCircular:T["a"],VSubheader:x["a"],VTextField:D["a"],VTooltip:S["a"]})},fc7b:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"payment-info",staticStyle:{width:"100%"}},[a("v-expansion-panel",{staticClass:"expansion-pl",attrs:{value:[!0]}},[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a("v-icon",{attrs:{size:"18",color:"white"}},[e._v("star_rate")])],1),a("span",[e._v(e._s(e.paymentProfile.paymentFee))])]),a("v-card",[a("v-card-text",{staticClass:"px-4 pb-1"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[e._v("Lệ phí: ")])],1),a("v-flex",{attrs:{xs12:"",sm3:""}},[a("p",{staticClass:"mt-1 mb-0"},[e._v(e._s(e.currency(Number(e.paymentProfile.feeAmount)))+"    vnđ")])]),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[e._v("Phí: ")])],1),a("v-flex",{attrs:{xs12:"",sm3:""}},[a("p",{staticClass:"mt-1 mb-0"},[e._v(e._s(e.currency(Number(e.paymentProfile.serviceAmount)))+"    vnđ")])]),a("v-flex",{attrs:{xs12:"",sm2:""}}),2!==e.detailDossier.viaPostal&&"2"!==e.detailDossier.viaPostal||0===e.paymentProfile.shipAmount?e._e():a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[e._v("Phí chuyển phát: ")])],1),a("v-flex",{attrs:{xs12:"",sm3:""}},[2!==e.detailDossier.viaPostal&&"2"!==e.detailDossier.viaPostal||0===e.paymentProfile.shipAmount?e._e():a("p",{staticClass:"mt-1 mb-0"},[e._v("\n                "+e._s(e.currency(Number(e.paymentProfile.shipAmount)))+"    vnđ\n              ")])])],1)],1),a("v-card-text",{staticClass:"px-4 pt-0"},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[a("span",{staticClass:"text-bold"},[e._v("Tổng: ")])])],1),a("v-flex",{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[a("span",[e._v(e._s(e.currency(Number(e.feeTong)))+"    vnđ")])]),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[a("span",{staticClass:"text-bold"},[e._v("Đã tạm nộp: ")])])],1),a("v-flex",{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[a("span",[e._v(e._s(e.currency(Number(e.paymentProfile.advanceAmount)))+"    vnđ")])]),a("v-flex",{attrs:{xs12:"",sm1:""}}),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-subheader",{staticClass:"pl-0 text-right"},[a("span",{staticClass:"text-bold"},[e._v("Còn phải nộp: ")])])],1),a("v-flex",{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[a("span",[e._v(e._s(e.currency(e.totalFee))+"    vnđ")])]),a("v-flex",{attrs:{xs12:"",sm1:""}})],1),a("v-layout",{staticStyle:{position:"relative"},attrs:{wrap:""}},[a("v-flex",{staticClass:"my-0 py-1",staticStyle:{width:"70px"}},[a("span",{staticClass:"red--text"},[e._v("* ")]),e._v(" Ghi chú:")]),a("v-flex",{staticStyle:{width:"calc(100% - 80px)"}},[a("p",{staticClass:"px-2 my-0 py-1"},[e._v("\n                "+e._s(e.paymentProfile.paymentNote)+"   \n              ")])])],1),a("p",{staticClass:"mb-0"},[a("span",{staticClass:"red--text"},[e._v("* ")]),e._v(" Lựa chọn hình thức thanh toán:")]),a("v-btn",{staticClass:"ml-3 mr-2",attrs:{dark:"",small:"",color:"blue darken-1"},nativeOn:{click:function(t){return function(){return e.isBank=!0}()}}},[a("v-icon",[e._v("account_balance")]),e._v("  \n            Thanh toán chuyển khoản\n          ")],1),e.getEPaymentProfile(e.paymentProfile.epaymentProfile)?a("v-btn",{staticClass:"ml-2 mr-2",attrs:{dark:"",small:"",color:"amber accent-4"},nativeOn:{click:function(t){e.toKeyPay(e.getEPaymentProfile(e.paymentProfile.epaymentProfile).keypayUrl)}}},[a("v-icon",[e._v("payment")]),e._v("  \n            Thanh toán điện tử\n          ")],1):e._e(),e.isBank?a("div",{staticClass:"ml-3"},[a("div",[a("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"paymentFile1"},on:{change:function(t){e.uploadPaymentFile(t)}}}),a("span",[e._v("Tải lên file báo thanh toán chuyển khoản (Định dạng: .png, .jpg, .jpeg)")]),e.progressUploadPart?a("v-progress-circular",{attrs:{width:2,size:25,color:"green",indeterminate:""}}):a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(t){e.pickFile()}},slot:"activator"},[a("v-badge",[a("v-icon",{attrs:{size:"16",color:"primary"}},[e._v("cloud_upload")])],1)],1),a("span",[e._v("Tải file lên")])],1)],1),e.paymentFile?a("div",[a("span",{staticStyle:{cursor:"pointer"},on:{click:function(t){t.stopPropagation(),e.viewFile()}}},[a("v-icon",{attrs:{color:"blue"}},[e._v("insert_drive_file")]),e._v("\n                "+e._s(e.paymentFileName)+"\n              ")],1),a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:"",ripple:""},on:{click:function(t){t.stopPropagation(),e.downloadPaymentFile(e.item)}},slot:"activator"},[a("v-icon",{staticStyle:{color:"#0d71bb"},attrs:{size:"16",color:"primary"}},[e._v("save_alt")])],1),a("span",[e._v("Tải xuống")])],1)],1):e._e(),e.epaymentValid?e._e():a("span",{staticStyle:{color:"#f44336"}},[e._v("* Yêu cầu tải lên file báo thanh toán")])]):e._e(),!e.isBank&&e.errorNotSelect?a("p",{staticStyle:{color:"#f44336"}},[e._v("* Yêu cầu lựa chọn hình thức thanh toán")]):e._e()],1)],1)],1)],1),a("v-dialog",{staticStyle:{overflow:"hidden"},attrs:{"max-width":"900",transition:"fade-transition"},model:{value:e.dialogPDF,callback:function(t){e.dialogPDF=t},expression:"dialogPDF"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("File đính kèm")]),a("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.dialogPDF=!1}}},[a("v-icon",[e._v("clear")])],1),e.dialogPDFLoading?a("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[a("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):e._e(),a("iframe",{directives:[{name:"show",rawName:"v-show",value:!e.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPreview",src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1)],1)},s=[],o=(a("a18c"),a("1157")),n=a.n(o),r=a("854a"),l=a.n(r),c=a("716b");l.a.options={closeButton:!0,timeOut:"5000"};var d={props:{paymentProfile:{type:Object,default:()=>{}},detailDossier:{type:Object,default:()=>{}}},data:()=>({data_payment:{advanceAmount:"",feeAmount:"",serviceAmount:"",shipAmount:"",paymentAmount:"",paymentNote:"",paymentFile:""},paymentFile:"",epaymentValid:!0,money:{decimal:"",thousands:".",prefix:"",suffix:"",precision:0,masked:!1},totalFee:0,feeTamThu:0,feeTong:0,checkPaid:!0,activeEdit:!0,progressUploadPart:!1,dialogPDF:!1,dialogPDFLoading:!0,isBank:!1,errorNotSelect:!1}),directives:{money:c["VMoney"]},created(){var e=this;if(e.detailDossier.hasOwnProperty("dossierId")){let t=e.detailDossier;e.$store.dispatch("getPaymentFiles",t).then(t=>{e.paymentFile=t,e.data_payment["paymentFile"]=e.paymentFile,e.$store.commit("setPaymentProfile",e.data_payment)})}},computed:{paymentFileName(){return this.$store.getters.getPaymentFileName},isBank(e){!0===e&&(this.errorNotSelect=!1)}},watch:{paymentProfile(e){var t=this;t.paymentProfile&&(t.feeTong=Number(t.paymentProfile.feeAmount)+Number(t.paymentProfile.serviceAmount),2!==t.detailDossier.viaPostal&&"2"!==t.detailDossier.viaPostal||0===t.paymentProfile.shipAmount||(t.feeTong=Number(t.paymentProfile.feeAmount)+Number(t.paymentProfile.serviceAmount)+Number(t.paymentProfile.shipAmount)),console.log("feeTong",t.feeTong),t.totalFee=t.feeTong-Number(t.paymentProfile.advanceAmount),t.totalFee<0&&(t.totalFee=0),t.data_payment={advanceAmount:t.paymentProfile.advanceAmount,feeAmount:t.paymentProfile.feeAmount,serviceAmount:t.paymentProfile.serviceAmount,shipAmount:t.paymentProfile.shipAmount,paymentAmount:t.totalFee,paymentNote:t.paymentProfile.paymentNote,paymentFile:t.paymentFile},t.$store.commit("setPaymentProfile",t.data_payment))},detailDossier(e){var t=this;if(e.hasOwnProperty("dossierId")){let a=e;t.$store.dispatch("getPaymentFiles",a).then(e=>{t.paymentFile=e,t.data_payment["paymentFile"]=t.paymentFile,t.$store.commit("setPaymentProfile",t.data_payment)})}}},methods:{uploadPaymentFile(e){var t=this;t.progressUploadPart=!0;var a={};a["dossierId"]=t.detailDossier.dossierId,a["referenceUid"]=t.detailDossier.referenceUid,a["selector"]="paymentFile1",a["partTip"]={tip:"",maxSize:10,extensions:"jpg,png,jpeg"};n()("#paymentFile1")[0].files[0];t.$store.dispatch("uploadPaymentFile",a).then(function(e){t.epaymentValid=!0,t.progressUploadPart=!1,t.paymentFile=e,t.data_payment["paymentFile"]=t.paymentFile,t.$store.commit("setPaymentProfile",t.data_payment),t.$store.dispatch("getPaymentFiles",a).then(e=>{t.paymentFile=e,t.data_payment["paymentFile"]=t.paymentFile,t.$store.commit("setPaymentProfile",t.data_payment)})}).catch(function(e){t.progressUploadPart=!1})},viewFile(){let e=this;e.dialogPDFLoading=!0,e.dialogPDF=!0;let t={dossierId:e.detailDossier.dossierId,referenceUid:e.detailDossier.referenceUid};e.$store.dispatch("viewPaymentFile",t).then(t=>{e.dialogPDFLoading=!1,document.getElementById("dialogPreview").src=t})},getEPaymentProfile(e){return e?JSON.parse(e):""},deleteFile(e){var t=this;let a=confirm("Bạn có chắc chắn xóa file?");a&&(e["dossierId"]=t.dossierId,t.$store.dispatch("deletePaymentFile",e).then(e=>{l.a.success("Xóa file thành công."),t.paymentFile="",t.data_payment["paymentFile"]=t.paymentFile,t.$store.commit("setPaymentProfile",t.data_payment)}).catch(e=>{l.a.error("Xóa file thất bại.")}))},downloadPaymentFile(e){let t=this,a="/o/rest/v2/dossiers/"+t.detailDossier.dossierId+"/payments/"+t.detailDossier.referenceUid+"/confirmfile";window.open(a)},pickFile(){document.getElementById("paymentFile1").value="",document.getElementById("paymentFile1").click()},currency(e){return e&&e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."):0},validPayment(){return this.paymentFile?this.epaymentValid=!0:this.epaymentValid=!1,this.isBank?this.errorNotSelect=!1:this.errorNotSelect=!0,!1!==this.isBank},toKeyPay(e){window.open(e,"_self")},goBack(){window.history.back()}},filters:{}},h=d,u=a("2877"),p=a("6544"),m=a.n(p),g=a("4ca6"),v=a("8336"),_=a("b0af"),f=a("99d9"),y=a("12b2"),C=a("169a"),T=a("cd55"),x=a("49e2"),D=a("0e8f"),S=a("132d"),b=a("a722"),P=a("490a"),I=a("e0c7"),A=a("3a2f"),N=Object(u["a"])(h,i,s,!1,null,null,null);N.options.__file="ThucHienThanhToanDienTu.vue";t["a"]=N.exports;m()(N,{VBadge:g["a"],VBtn:v["a"],VCard:_["a"],VCardText:f["b"],VCardTitle:y["a"],VDialog:C["a"],VExpansionPanel:T["a"],VExpansionPanelContent:x["a"],VFlex:D["a"],VIcon:S["a"],VLayout:b["a"],VProgressCircular:P["a"],VSubheader:I["a"],VTooltip:A["a"]})}});
//# sourceMappingURL=app.6e1c7487.js.map