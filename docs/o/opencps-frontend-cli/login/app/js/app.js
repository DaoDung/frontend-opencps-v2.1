(function(t){function e(e){for(var i,r,s=e[0],l=e[1],d=e[2],p=0,u=[];p<s.length;p++)r=s[p],o[r]&&u.push(o[r][0]),o[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);c&&c(e);while(u.length)u.shift()();return n.push.apply(n,d||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],i=!0,s=1;s<a.length;s++){var l=a[s];0!==o[l]&&(i=!1)}i&&(n.splice(e--,1),t=r(r.s=a[0]))}return t}var i={},o={app:0},n=[];function r(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=i,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(a,i,function(e){return t[e]}.bind(null,i));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var d=0;d<s.length;d++)e(s[d]);var c=l;n.push(["56d7","chunk-vendors"]),a()})({"56d7":function(t,e,a){"use strict";a.r(e);a("0f18");var i=a("a026"),o=a("bb71");i["a"].use(o["a"],{theme:{primary:"#001f4d",secondary:"#424242",accent:"#001f4d",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"},customProperties:!0,iconfont:"md"});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{"data-app":!1,id:"app_login"}},[t.drawerLogin?a("div",{staticStyle:{position:"fixed",width:"100%",height:"100vh",left:"0",top:"0","z-index":"9999"},on:{click:function(e){t.drawerLogin=!1}}}):t._e(),t.drawer?a("div",{staticStyle:{position:"fixed",width:"100%",height:"100vh",left:"0",top:"0"}}):t._e(),t.isSignedIn?a("div",[a("div",{staticClass:"login_wrap_app_panel",staticStyle:{"text-align":"right","max-width":"1366px","margin-top":"15px"}},[t.notificationCount>0?a("span",{staticClass:"v-badge",staticStyle:{"margin-left":"-42px",position:"absolute",top:"21px"}},[a("button",{staticClass:"mx-0 my-0 v-btn v-btn--icon theme--light",staticStyle:{position:"absolute",left:"0"},attrs:{type:"button"},on:{click:t.showNoti}},[a("div",{staticClass:"v-btn__content"},[a("i",{staticClass:"v-icon swing animated material-icons theme--light blue--text text--darken-3",staticStyle:{"font-size":"20px",animation:"swing 0.8s ease 0s infinite normal none running"},attrs:{"aria-hidden":"true"}},[t._v("notifications_active")])])]),a("span",{staticClass:"v-badge__badge red darken-3",staticStyle:{"z-index":"2",position:"relative","border-radius":"6px",height:"18px",padding:"0 12px"}},[a("span",{staticStyle:{"font-size":"10px",color:"#fff !important","font-weight":"bold",height:"14px"}},[t._v(t._s(t.notificationCount>5?"5+":t.notificationCount))])])]):a("v-btn",{staticClass:"mx-0 my-0",attrs:{icon:""},on:{click:t.showNoti}},[a("v-icon",{staticClass:"swing animated",staticStyle:{"-webkit-animation":"swing 0.8s infinite",animation:"swing 0.8s infinite"},attrs:{size:"20",color:"blue darken-3"}},[t._v("notifications")])],1),a("v-menu",{attrs:{"offset-y":"","nudge-bottom":5}},[a("v-chip",{attrs:{slot:"activator"},on:{click:function(e){t.isShowUserMenu=!t.isShowUserMenu}},slot:"activator"},[""!==t.avatarURL?a("v-avatar",[a("img",{attrs:{src:t.avatarURL}})]):a("v-avatar",{staticClass:"white--text",style:{background:"#"+t.colorBG}},[a("span",{staticClass:"white--text"},[t._v(t._s(t.userNameLogin.slice(0,1).toUpperCase()))])]),t._v("\n          "+t._s(t.userNameLogin)+"\n          "),t.isShowUserMenu?a("v-icon",{staticClass:"swing animated",attrs:{size:"20",color:"blue darken-3"}},[t._v("expand_less")]):a("v-icon",{staticClass:"swing animated",attrs:{size:"20",color:"blue darken-3"}},[t._v("expand_more")])],1),a("v-list",[a("v-list-tile",{on:{click:t.doUserInfo}},[a("v-list-tile-action",[a("v-icon",{attrs:{size:"16"}},[t._v("person")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Thông tin tài khoản")])],1)],1),a("v-list-tile",{on:{click:t.doExitApp}},[a("v-list-tile-action",[a("v-icon",{attrs:{size:"16",color:"red darken-3"}},[t._v("exit_to_app")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Đăng xuất")])],1)],1)],1)],1)],1),a("v-navigation-drawer",{staticClass:"login_drawer",staticStyle:{"-webkit-box-shadow":"0 8px 10px -5px rgba(0,0,0,.2), 0 5px 28px 2px rgba(0,0,0,.14), 0 -5px 28px 1px rgba(0,0,0,0)","box-shadow":"0 8px 10px -5px rgba(0,0,0,.2), 0 5px 28px 2px rgba(0,0,0,.14), 0 -5px 28px 1px rgba(0,0,0,0)","z-index":"9999"},attrs:{fixed:"",right:"","hide-overlay":"",temporary:""},model:{value:t.drawerLogin,callback:function(e){t.drawerLogin=e},expression:"drawerLogin"}},[a("article",{staticClass:"glass down"},[a("v-layout",{staticClass:"px-3",staticStyle:{display:"flex","border-bottom":"1px solid #fff"},attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"text-center",attrs:{xs6:""}},[a("v-btn",{staticStyle:{"border-top-right-radius":"0","border-bottom-right-radius":"0","border-top-left-radius":"8px","border-bottom-left-radius":"8px"},attrs:{block:"",small:""}},[t._v("Thông báo")])],1),a("v-flex",{staticClass:"text-center",attrs:{xs6:""}},[a("v-btn",{staticStyle:{background:"#d0d0d0","border-top-left-radius":"0","border-bottom-left-radius":"0","border-top-right-radius":"8px","border-bottom-right-radius":"8px"},attrs:{block:"",small:""},on:{click:t.markRead}},[t._v("Đánh dấu đã đọc")])],1)],1),t.notificationCount>0?a("div",{staticClass:"layout row wrap px-3",staticStyle:{display:"flex"}},[a("div",{staticClass:"flex xs12 mt-3",staticStyle:{background:"#ffffff66","border-radius":"8px"}},[a("div",{staticStyle:{padding:"5px 10px",background:"#fff0","text-transform":"uppercase","font-weight":"bold"}},[a("v-icon",{attrs:{size:"15",color:"red accent-4"}},[t._v("mail")]),t._v(" Mới\n            ")],1),a("div",{staticClass:"notification_wrap",staticStyle:{padding:"5px 10px",background:"#ffffffb3","border-bottom-left-radius":"8px","border-bottom-right-radius":"8px",overflow:"auto","max-height":"300px"}},t._l(t.testData,function(e,i){return a("template-rendering",{key:i,attrs:{item:e,layout_view:e["layout_view"],template_default:t.templateDefault}})}),1)])]):t._e(),a("div",{staticClass:"layout row wrap px-3",staticStyle:{display:"flex"}},[a("div",{staticClass:"flex xs12 mt-3",staticStyle:{background:"#ffffff66","border-radius":"8px"}},[a("div",{staticStyle:{padding:"5px 10px",background:"#fff0","text-transform":"uppercase","font-weight":"bold"}},[a("v-icon",{attrs:{size:"15",color:"red accent-4"}},[t._v("mail")]),t._v(" Trước đó\n            ")],1),a("div",{staticClass:"notification_wrap",staticStyle:{padding:"5px 10px",background:"#ffffffb3","border-bottom-left-radius":"8px","border-bottom-right-radius":"8px",overflow:"auto","max-height":"300px"}},t._l(t.testDataSeen,function(e,i){return a("template-rendering",{key:i,attrs:{item:e,layout_view:e["layout_view"],template_default:t.templateDefault}})}),1)])])],1)])],1):a("div",{staticStyle:{position:"relative",height:"50px"}},[a("div",{staticClass:"login-wrapper"},[a("div",{staticClass:"login-input"},[a("div",{staticClass:"ico ico-user"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.userName,expression:"userName"}],attrs:{type:"text",placeholder:"Tài khoản đăng nhập"},domProps:{value:t.userName},on:{input:function(e){e.target.composing||(t.userName=e.target.value)}}})]),a("div",{staticClass:"ico ico-pass"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.passWord,expression:"passWord"}],attrs:{type:"password",placeholder:"Mật khẩu"},domProps:{value:t.passWord},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.goToDangNhapPress(e):null},input:function(e){e.target.composing||(t.passWord=e.target.value)}}})])]),a("div",{staticClass:"login-input"},[a("div",{staticStyle:{width:"100%"}},[a("a",{staticClass:"text-hover-blue",staticStyle:{"line-height":"30px","font-size":"12px",color:"#005792","text-decoration":"underline","padding-left":"10px"},attrs:{href:t.forgottenURLStr}},[t._v("Quên mật khẩu?")])]),a("div",{staticStyle:{width:"100%","text-align":"right"}},[a("button",{staticClass:"btn-register",attrs:{type:"button"},on:{click:t.goToDangKyPage}},[t._v("Đăng ký")]),a("button",{staticClass:"btn-login",attrs:{type:"button"},on:{click:t.goToDangNhap}},[t._v("Đăng nhập")])])])])])])},r=[],s=a("bc3a"),l=a.n(s),d=a("854a"),c=a.n(d),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return null!==t.template_default&&void 0!==t.template_default&&"undefined"!==t.template_default?a("my-dynamic-view"):t._e()},u=[],f=a("da1e"),h=f["a"],m=a("2877"),v=Object(m["a"])(h,p,u,!1,null,null,null);v.options.__file="template_rendering.vue";var g=v.exports;const w={template:'\n        <div @click="doReadEvent(item[\'eventId\'])" style="display: flex;cursor: pointer;">\n            <div class="v-avatar white--text" style="height: 36px;width: 36px;margin-right: 8px;margin-top: 3px;">\n                <img :src="item[\'avatar\']" :alt="item[\'userName\']">\n            </div>\n            <p style="margin-bottom: 0px;">\n                <strong>{{item["userName"]}}</strong> {{item["notificationText"]}}\n                <a href="" style="\n                    color: #0072c2;\n                    font-weight: bold;\n                ">\n                    {{dossier["dossierId"]}}\n                </a>\n                <br/>\n                <span style="color: rgb(90, 90, 90) !important;font-size: 11px;">\n                    <i aria-hidden="true" class="v-icon material-icons theme--light" style="font-size: 15px; color: rgb(0, 114, 194);">event</i>\n                        {{new Date(item["notificationDate"]).toLocaleString(\'vi-VN\')}}\n                </span>\n            </p>\n        </div>\n    ',data:()=>({item:{},dossier:{}}),created:function(){let t=this;void 0!==t.$parent.item&&null!==t.$parent.item&&(t.item=t.$parent.item)},methods:{doReadEvent(t){let e=this;e.$parent.markReadEventId(t)}}};c.a.options={closeButton:!0,timeOut:"15000"};var y={components:{"template-rendering":g},data:()=>({isSignedIn:!1,userNameLogin:"",drawerLogin:!1,avatarURL:"http://via.placeholder.com/350x150",notificationCount:0,isShowUserMenu:!1,toggle_exclusive:0,forgottenURLStr:"",userName:"",passWord:"",userData:{},colorBG:"009688",templateDefault:w,testData:[],testDataSeen:[]}),created(){let t=this;t.$nextTick(function(){t.isSignedIn=themeDisplay.isSignedIn(),t.userNameLogin=themeDisplay.getUserName(),t.colorBG=t.intToRGB(t.hashCode(t.userNameLogin));let e=themeDisplay.getLayoutRelativeURL().substring(0,themeDisplay.getLayoutRelativeURL().lastIndexOf("/"));if(t.forgottenURLStr=""!==e?e+"/register/#/cap-lai-mat-khau":themeDisplay.getURLHome()+"/register/#/cap-lai-mat-khau",t.isSignedIn){t.userData={},t.pullNotificationCount();let e={responseType:"blob"};l.a.get("/o/v1/opencps/users/"+themeDisplay.getUserId(),e).then(function(e){t.userData=e.data,t.avatarURL=t.userData["avatar"],t.avatarURL.includes("img_id=0")&&(t.avatarURL=""),t.userNameLogin=t.userData["userName"],t.colorBG=t.intToRGB(t.hashCode(t.userNameLogin))}).catch(function(e){t.avatarURL=""})}})},watch:{$route:function(t,e){let a=this;a.notificationCount<5&&a.pullNotificationCount()}},methods:{markRead(){let t=this;for(let e in t.testData)l.a.post("/o/rest/v2/notifications/"+t.testData[e]["eventId"]+"/mark").then(function(t){});t.drawerLogin=!1},markReadEventId(t){alert(t);let e=this;l.a.post("/o/rest/v2/notifications/"+t+"/mark").then(function(t){e.pullNotificationData()})},pullNotificationCount(){let t=this,e={};l.a.get("/o/rest/v2/notifications/count?archived=false",e).then(function(e){let a=e.data;t.notificationCount=a["total"]}).catch(function(e){t.notificationCount=0})},pullNotificationData(){let t=this,e={};t.testData=[],t.testDataSeen=[],l.a.get("/o/rest/v2/notifications?archived=false",e).then(function(e){let a=e.data;t.notificationCount=a["total"],t.testData=a["data"]}).catch(function(t){}),l.a.get("/o/rest/v2/notifications?archived=true&start=0&end=10",e).then(function(e){t.testDataSeen=e.data["data"]}).catch(function(t){})},showNoti(){let t=this;t.drawerLogin=!t.drawerLogin,t.pullNotificationData()},doRegisterRedirect(){let t=themeDisplay.getLayoutRelativeURL().substring(0,themeDisplay.getLayoutRelativeURL().lastIndexOf("/"));window.location.href=""!==t?t+"/register":themeDisplay.getURLHome()+"/register"},doUserInfo(){if(null!==themeDisplay&&void 0!==themeDisplay){let t=themeDisplay.getLayoutRelativeURL().substring(0,themeDisplay.getLayoutRelativeURL().lastIndexOf("/"));window.location.href=t+"/profile"}else window.location.href="/profile"},doExitApp(){window.location.href="/c/portal/logout"},goToDangKyPage(){if(null!==themeDisplay&&void 0!==themeDisplay){let t=themeDisplay.getLayoutRelativeURL().substring(0,themeDisplay.getLayoutRelativeURL().lastIndexOf("/"));window.location.href=""!==t?t+"/register":themeDisplay.getURLHome()+"/register"}else window.location.href="/register"},goToDangNhap(){let t=this;l.a.post("/o/v1/opencps/login",{},{headers:{Authorization:"BASIC "+window.btoa(t.userName+":"+t.passWord)}}).then(function(t){if(""!==t.data&&"ok"!==t.data&&"captcha"!==t.data)"pending"===t.data?window.location.href=window.themeDisplay.getURLHome()+"/register#/xac-thuc-tai-khoan?active_user_id="+window.themeDisplay.getUserId()+"&redirectURL="+window.themeDisplay.getURLHome():window.location.href=t.data;else if("ok"===t.data)window.location.href=window.themeDisplay.getURLHome();else if("captcha"===t.data){let t=themeDisplay.getLayoutRelativeURL().substring(0,themeDisplay.getLayoutRelativeURL().lastIndexOf("/"));window.location.href=""!==t?t+"/register#/login":themeDisplay.getURLHome()+"/register#/login"}else c.a.error("Tên đăng nhập hoặc mật khẩu không chính xác.")}).catch(function(t){c.a.error("Tên đăng nhập hoặc mật khẩu không chính xác.")})},goToDangNhapPress(t){let e=this;13==t.keyCode&&l.a.post("/o/v1/opencps/login",{},{headers:{Authorization:"BASIC "+window.btoa(e.userName+":"+e.passWord)}}).then(function(t){if(console.log(t.data),""!==t.data&&"ok"!==t.data&&"captcha"!==t.data)"pending"===t.data?window.location.href=window.themeDisplay.getURLHome()+"/register#/xac-thuc-tai-khoan?active_user_id="+window.themeDisplay.getUserId()+"&redirectURL="+window.themeDisplay.getURLHome():window.location.href=t.data;else if("ok"===t.data)window.location.href=window.themeDisplay.getURLHome();else if("captcha"===t.data){let t=themeDisplay.getLayoutRelativeURL().substring(0,themeDisplay.getLayoutRelativeURL().lastIndexOf("/"));window.location.href=""!==t?t+"/register#/login":themeDisplay.getURLHome()+"/register#/login"}else c.a.error("Tên đăng nhập hoặc mật khẩu không chính xác.")}).catch(function(t){c.a.error("Tên đăng nhập hoặc mật khẩu không chính xác.")})},hashCode(t){for(var e=0,a=0;a<t.length;a++)e=t.charCodeAt(a)+((e<<5)-e);return e},intToRGB(t){var e=(16777215&t).toString(16).toUpperCase();return"00000".substring(0,6-e.length)+e}}},x=y,_=a("6544"),b=a.n(_),L=a("7496"),k=a("8212"),D=a("8336"),R=a("cc20"),C=a("0e8f"),S=a("132d"),U=a("a722"),N=a("8860"),T=a("ba95"),I=a("40fe"),O=a("5d23"),E=a("e449"),P=a("f774"),z=Object(m["a"])(x,n,r,!1,null,null,null);z.options.__file="App.vue";var M=z.exports;b()(z,{VApp:L["a"],VAvatar:k["a"],VBtn:D["a"],VChip:R["a"],VFlex:C["a"],VIcon:S["a"],VLayout:U["a"],VList:N["a"],VListTile:T["a"],VListTileAction:I["a"],VListTileContent:O["a"],VListTileTitle:O["b"],VMenu:E["a"],VNavigationDrawer:P["a"]}),l.a.defaults.headers.common["Token"]=void 0!==window.Liferay?window.Liferay.authToken:"",i["a"].config.productionTip=!0,new i["a"]({render:function(t){return t(M)}}).$mount("#app_login")},da1e:function(module,__webpack_exports__,__webpack_require__){"use strict";var vue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("a026");__webpack_exports__["a"]={props:{item:{type:Object,default(){return{dossierId:0}}},layout_view:{type:Object},template_default:{type:Object}},created(){let vm=this,template="",data="{}",created="{}",updated="{}",methods="{}";null!==vm.layout_view&&void 0!==vm.layout_view&&"undefined"!==vm.layout_view?vue__WEBPACK_IMPORTED_MODULE_0__["a"].component("my-dynamic-view",{template:vm.layout_view["template"],data:eval(" ( "+vm.layout_view["data"]+" ) "),created:eval(" ( "+vm.layout_view["created"]+" ) "),updated:eval(" ( "+vm.layout_view["updated"]+" ) "),methods:vm.layout_view["methods"]}):null!==vm.template_default&&void 0!==vm.template_default&&"undefined"!==vm.template_default&&vue__WEBPACK_IMPORTED_MODULE_0__["a"].component("my-dynamic-view",{template:vm.template_default["template"],data:eval(" ( "+vm.template_default["data"]+" ) "),created:eval(" ( "+vm.template_default["created"]+" ) "),updated:eval(" ( "+vm.template_default["updated"]+" ) "),methods:vm.template_default["methods"]})},methods:{markReadEventId(t){alert(t)}}}}});
//# sourceMappingURL=app.js.map