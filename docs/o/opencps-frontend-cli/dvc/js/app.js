(function(t){function e(e){for(var a,n,r=e[0],l=e[1],c=e[2],h=0,u=[];h<r.length;h++)n=r[h],s[n]&&u.push(s[n][0]),s[n]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);d&&d(e);while(u.length)u.shift()();return o.push.apply(o,c||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],a=!0,r=1;r<i.length;r++){var l=i[r];0!==s[l]&&(a=!1)}a&&(o.splice(e--,1),t=n(n.s=i[0]))}return t}var a={},s={app:0},o=[];function n(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=a,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(i,a,function(e){return t[e]}.bind(null,a));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var d=l;o.push(["cade","chunk-vendors"]),i()})({"000e":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{style:t.viewMobile?"":"text-align: left;position: absolute;line-height: 46px;"},[t._v("Tổng số "),i("span",{staticClass:"text-bold primary--text"},[t._v(t._s(t.total))]),t._v(" hồ sơ. ")]),t.total>0?i("div",{staticClass:"vue-tiny-pagination pagination layout",style:t.viewMobile?"":"justify-content: flex-end; -webkit-justify-content: flex-end;"},[i("div",{staticClass:"pr-3 xs4 sm2 flex"},[i("v-select",{attrs:{items:t.totalPagesData,"item-text":"text","item-value":"value",autocomplete:""},on:{input:t.goToPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),i("ul",{staticClass:"tiny-pagination",class:t.customClass},[i("li",{staticClass:"page-item",class:t.classFirstPage},[i("button",{staticClass:"pagination__navigation",class:t.classFirstPage,on:{click:function(e){return e.preventDefault(),t.lastPageLast(e)}}},[i("i",{staticClass:"material-icons icon",attrs:{"aria-hidden":"true"}},[t._v("first_page")])])]),i("li",{staticClass:"page-item",class:t.classFirstPage},[i("button",{staticClass:"pagination__navigation",class:t.classFirstPage,staticStyle:{"border-left":"0"},on:{click:function(e){return e.preventDefault(),t.lastPage(e)}}},[i("i",{staticClass:"material-icons icon",attrs:{"aria-hidden":"true"}},[t._v("chevron_left")])])]),i("li",{staticClass:"page-item",staticStyle:{"margin-right":"0"}},[i("button",{staticClass:"pagination__navigation pagination__navigation--disabled text-bold primary--text",staticStyle:{"border-right":"0","border-left":"0"}},[t._v("\n          "+t._s(t.titlePage)+"\n        ")])]),i("li",{staticClass:"page-item",class:t.classLastPage,staticStyle:{"margin-right":"0"}},[i("button",{staticClass:"pagination__navigation",class:t.classLastPage,staticStyle:{"border-left":"0"},on:{click:function(e){return e.preventDefault(),t.nextPage(e)}}},[i("i",{staticClass:"material-icons icon",attrs:{"aria-hidden":"true"}},[t._v("chevron_right")])])]),i("li",{staticClass:"page-item",class:t.classLastPage},[i("button",{staticClass:"pagination__navigation",class:t.classLastPage,on:{click:function(e){return e.preventDefault(),t.nextPageLast(e)}}},[i("i",{staticClass:"material-icons icon",attrs:{"aria-hidden":"true"}},[t._v("last_page")])])])])]):t._e()])},s=[],o=i("9029");const n="TinyPagination";var r={name:n,props:{total:{type:Number,required:!0},page:{type:Number,default:1},lang:{type:String,default:"en"},customClass:{type:String},limits:{type:Array,default(){return[10,15,20,50,100]}},showLimit:{type:Boolean,default:!0}},data(){return{version:"0.2.1",currentPage:1,currentLimit:15,translations:{en:{prev:"Previous",title:"Page",next:"Next"}},availableLanguages:["en"]}},created(){this.currentPage=this.page},watch:{page(t){this.currentPage=parseInt(t)}},computed:{translation(){return this.availableLanguages.includes(this.lang)?this.translations[this.lang]:this.translations["en"]},totalPages(){return Math.ceil(this.total/this.currentLimit)},totalPagesData(){for(var t=[],e={},i=1;i<=this.totalPages;++i)e={value:i,text:"Trang "+i},t.push(e);return t},titlePage(){return`${this.currentPage}`},classFirstPage(){return{"c-not-allowed pagination__navigation--disabled":1===this.currentPage}},classLastPage(){return{"c-not-allowed pagination__navigation--disabled":this.currentPage===this.totalPages}},viewMobile(){return o["isMobile"]}},methods:{nextPage(){this.currentPage!==this.totalPages&&(this.currentPage+=1,this.$emit("tiny:change-page",{page:this.currentPage}))},lastPage(){this.currentPage>1&&(this.currentPage-=1,this.$emit("tiny:change-page",{page:this.currentPage}))},nextPageLast(){this.currentPage=this.totalPages,this.$emit("tiny:change-page",{page:this.totalPages})},lastPageLast(){this.currentPage=1,this.$emit("tiny:change-page",{page:1})},goToPage(){this.$emit("tiny:change-page",{page:this.currentPage})},onLimitChange(){this.currentPage=1}}},l=r,c=i("2877"),d=Object(c["a"])(l,a,s,!1,null,null,null);d.options.__file="hanghai_pagination.vue";e["a"]=d.exports},"0838":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"phancong",staticStyle:{"background-color":"white",width:"100%"}},[i("v-expansion-panel",{staticClass:"expansion-pl"},[i("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"1"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"background-triangle-small"},[i("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("Ngày hẹn trả\n      ")]),i("v-card",[i("v-card-text",[i("v-layout",{staticClass:"pl-2",attrs:{wrap:""}},[i("v-icon",{staticClass:"hover-pointer",attrs:{color:"primary"},on:{click:t.showDatePicker}},[t._v("event")]),i("vue-ctk-date-time-picker",{ref:"datepicker",staticClass:"ml-2",staticStyle:{width:"auto!important"},attrs:{format:"YYYY-MM-DDTHH:mm","time-format":"HH:mm","without-header":!0,formatted:"DD/MM/YYYY HH:mm",label:t.dueDateInput?"":"Chọn ngày","min-date":t.minDate},model:{value:t.dueDateInput,callback:function(e){t.dueDateInput=e},expression:"dueDateInput"}})],1)],1)],1)],1)],1)],1)},s=[],o=i("e30a"),n=i.n(o),r={components:{"vue-ctk-date-time-picker":n.a},props:["dueDateEdit"],data:()=>({dueDateInput:"",minDate:null}),created(){var t=this;t.dueDateInput=t.dueDateEdit?t.formatDateInput(t.dueDateEdit):"",console.log("dueDateInput",t.dueDateInput)},watch:{},mounted(){this.dueDateInput=this.dueDateEdit?this.formatDateInput(this.dueDateEdit):"",console.log("dueDateInput",this.dueDateInput),this.minDate=this.getCurentDateTime("date")},methods:{getDateInput(){var t=this;console.log("vm.dueDateInput",t.dueDateInput);let e=t.dueDateInput?new Date(t.dueDateInput).getTime():"";return e},getCurentDateTime(t){let e=new Date;return"datetime"===t?`${e.getDate().toString().padStart(2,"0")}/${(e.getMonth()+1).toString().padStart(2,"0")}/${e.getFullYear()} | ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`:"date"===t?`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}`:void 0},formatDateInput(t){return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")} ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`},showDatePicker(){this.$refs.datepicker.showDatePicker()}}},l=r,c=i("2877"),d=Object(c["a"])(l,a,s,!1,null,null,null);d.options.__file="EditDate.vue";e["a"]=d.exports},1136:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-expansion-panel",{staticClass:"expansion-pl ext__form"},[i("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"1"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"background-triangle-small"},[i("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("Thông tin chung hồ sơ")]),i("v-card",[i("v-card-text",{staticClass:"py-0"},[i("v-layout",{staticClass:"px-2 py-2",attrs:{wrap:""}},[1!==t.originality?i("v-flex",{staticClass:"pr-3",attrs:{xs12:"",sm4:""}},[i("div",{staticClass:"xs12 sm12 pb-1"},[i("span",{staticClass:"pr-2"},[t._v("Chủ hồ sơ: ")]),i("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(t.thongTinChiTietHoSo.applicantName))])]),i("div",{staticClass:"xs12 sm12 pb-1 overHidden"},[i("span",{staticClass:"pr-2"},[t._v("Địa chỉ: ")]),i("v-tooltip",{attrs:{top:""}},[i("span",{staticClass:"text-bold ",attrs:{slot:"activator"},slot:"activator"},[t._v(t._s(t.thongTinChiTietHoSo.address)+" "+t._s(t.thongTinChiTietHoSo.wardName)+", "+t._s(t.thongTinChiTietHoSo.districtName)+", "+t._s(t.thongTinChiTietHoSo.cityName))]),i("span",{staticClass:"pl-0"},[t._v(" "+t._s(t.thongTinChiTietHoSo.address)+" "+t._s(t.thongTinChiTietHoSo.wardName)+", "+t._s(t.thongTinChiTietHoSo.districtName)+", "+t._s(t.thongTinChiTietHoSo.cityName))])])],1),i("div",{staticClass:"xs12 sm12 pb-1"},[i("span",{staticClass:"pl-0"},[t._v("Thư điện tử: ")]),i("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.contactEmail)+" ")])]),i("div",{staticClass:"xs12 sm12 pb-1"},[i("span",{staticClass:"pr-2"},[t._v("Điện thoại: ")]),i("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.contactTelNo)+" ")])]),i("div",{staticClass:"xs12 sm12 pb-1"},[i("v-menu",{staticStyle:{position:"relative !important"},attrs:{"offset-y":""}},[i("span",{staticClass:"pr-2",attrs:{slot:"activator"},slot:"activator"},[t._v("\n                  Thông tin người nộp\n                  "),i("v-icon",{attrs:{color:"blue",size:"22"}},[t._v("arrow_drop_down")])],1),i("v-list",{staticClass:"px-2 pt-1"},[i("div",{staticClass:"xs12 sm12 py-1"},[i("span",{staticClass:"pr-2"},[t._v("Tên người nộp:")]),t.thongTinChiTietHoSo.online?i("span",{staticClass:"pl-0 text-bold"},[t._v(" \n                      "+t._s(t.thongTinChiTietHoSo.applicantName)+"\n                    ")]):i("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.delegateName)+" ")])]),i("div",{staticClass:"xs12 sm12 py-1"},[i("span",{staticClass:"pr-2"},[t._v("Địa chỉ:")]),t.thongTinChiTietHoSo.online?i("span",{staticClass:"pl-0 text-bold"},[t._v(" \n                      "+t._s(t.thongTinChiTietHoSo.address)+" "+t._s(t.thongTinChiTietHoSo.wardName)+", "+t._s(t.thongTinChiTietHoSo.districtName)+", "+t._s(t.thongTinChiTietHoSo.cityName)+"\n                    ")]):i("span",{staticClass:"pl-0 text-bold"},[t._v(" \n                      "+t._s(t.thongTinChiTietHoSo.delegateAddress)+" "+t._s(t.thongTinChiTietHoSo.delegateWardName)+", "+t._s(t.thongTinChiTietHoSo.delegateDistrictName)+", "+t._s(t.thongTinChiTietHoSo.delegateCityName)+"\n                    ")])]),i("div",{staticClass:"xs12 sm12 py-1"},[i("span",{staticClass:"pr-2"},[t._v("Thư điện tử:")]),t.thongTinChiTietHoSo.online?i("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.contactEmail)+" ")]):i("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.delegateEmail)+" ")])]),i("div",{staticClass:"xs12 sm12 py-1"},[i("span",{staticClass:"pr-2"},[t._v("Số điện thoại:")]),t.thongTinChiTietHoSo.online?i("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.contactTelNo)+" ")]):i("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.delegateTelNo)+" ")])])])],1)],1)]):t._e(),1===t.originality?i("v-flex",{staticClass:"pr-3",attrs:{xs12:"",sm4:""}},[i("div",{staticClass:"xs12 sm12 pb-1"},[i("span",{staticClass:"pr-2"},[t._v("Mã hồ sơ: ")]),i("span",{staticClass:"pl-0 text-bold "},[t._v("  "+t._s(t.thongTinChiTietHoSo.dossierNo)+" ")])]),i("div",{staticClass:"xs12 sm12 pb-1"},[i("span",{staticClass:"pr-2"},[t._v("Cơ quan: ")]),i("span",{staticClass:"pl-0 text-bold "},[t._v("  "+t._s(t.thongTinChiTietHoSo.govAgencyName)+" ")])]),i("div",{staticClass:"xs12 sm12 pb-1"},[i("span",{staticClass:"pr-2"},[t._v("Trạng thái: ")]),i("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.dossierStatusText)+" ")])])]):t._e(),1!==t.originality?i("v-flex",{attrs:{xs12:"",sm4:""}},[i("div",{staticClass:"xs12 sm12 pb-1"},[i("span",{staticClass:"pr-2"},[t._v("Ngày gửi trực tuyến: ")]),t.thongTinChiTietHoSo.online?i("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(t.thongTinChiTietHoSo.submitDate)+" ")]):i("span",{staticClass:"pl-0 text-bold"},[t._v(" Một cửa ")])]),i("div",{staticClass:"xs12 sm12 pb-1"},[i("span",{staticClass:"pr-2"},[t._v("Ngày tiếp nhận: ")]),i("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.receiveDate))])]),i("div",{staticClass:"xs12 sm12 pb-1"},[i("span",{staticClass:"pr-2"},[t._v("Thời hạn giải quyết: ")]),t.thongTinChiTietHoSo.durationCount>0?i("span",{staticClass:"pl-0 text-bold "},[t._v(" \n                "+t._s(t.durationText(t.thongTinChiTietHoSo.durationUnit,t.thongTinChiTietHoSo.durationCount))+" làm việc \n              ")]):i("span",{staticClass:"pl-0 text-bold "},[t._v("\n                Không quy định\n              ")])]),i("div",{staticClass:"xs12 sm12 pb-1"},[i("span",{staticClass:"pr-2"},[t._v("Ngày hẹn trả: ")]),i("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.dueDate))])])]):i("v-flex",{attrs:{xs12:"",sm4:""}},[i("div",{staticClass:"xs12 sm12 pb-1"},[i("span",{staticClass:"pr-2"},[t._v("Ngày gửi: ")]),t.thongTinChiTietHoSo.online?i("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(t.thongTinChiTietHoSo.submitDate)+" ")]):i("span",{staticClass:"pl-0 text-bold"},[t._v(" Một cửa ")])]),i("div",{staticClass:"xs12 sm12 pb-1"},[i("span",{staticClass:"pr-2"},[t._v("Ngày tiếp nhận: ")]),i("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.receiveDate))])]),i("div",{staticClass:"xs12 sm12 pb-1"},[i("span",{staticClass:"pr-2"},[t._v("Ngày hẹn trả: ")]),i("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.dueDate))])])]),1!==t.originality?i("v-flex",{attrs:{xs12:"",sm4:""}},[i("div",{staticClass:"xs12 sm12 pb-1"},[i("span",{staticClass:"pr-2"},[t._v("Mã hồ sơ: ")]),i("span",{staticClass:"pl-0 text-bold "},[t._v("  "+t._s(t.thongTinChiTietHoSo.dossierNo)+" ")])]),t.thongTinChiTietHoSo.originDossierNo?i("div",{staticClass:"xs12 sm12 pb-1"},[i("span",{staticClass:"pr-2"},[t._v("Hồ sơ gốc: ")]),i("span",{staticClass:"pl-0 text-bold "},[t._v("  "+t._s(t.thongTinChiTietHoSo.originDossierNo)+" ")])]):t._e(),i("div",{staticClass:"xs12 sm12 pb-1"},[i("span",{staticClass:"pr-2"},[t._v("Trạng thái: ")]),i("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.dossierStatusText)+" ")])]),t.thongTinChiTietHoSo.dossierNote&&"null"!==t.thongTinChiTietHoSo.dossierNote?i("div",{staticClass:"xs12 sm12 pb-1",staticStyle:{color:"#0b72ba"}},[t._v("Ghi chú:")]):t._e(),t.thongTinChiTietHoSo.dossierNote&&"null"!==t.thongTinChiTietHoSo.dossierNote?i("div",{staticClass:"xs12 sm12 pb-1 overHidden"},[i("v-tooltip",{attrs:{top:""}},[i("span",{staticClass:"text-bold ",attrs:{slot:"activator"},slot:"activator"},[t._v(t._s(t.thongTinChiTietHoSo.dossierNote)+" ")]),i("span",{staticClass:"pl-0"},[t._v(" "+t._s(t.thongTinChiTietHoSo.dossierNote)+" ")])])],1):t._e()]):i("v-flex",{attrs:{xs12:"",sm4:""}},[i("div",{staticClass:"xs12 sm12 pb-1",staticStyle:{color:"#0b72ba"}},[t._v("Ghi chú:")]),t.thongTinChiTietHoSo.dossierNote&&"null"!==t.thongTinChiTietHoSo.dossierNote?i("div",{staticClass:"xs12 sm12 pb-1 overHidden"},[i("v-tooltip",{attrs:{top:""}},[i("span",{staticClass:"text-bold ",attrs:{slot:"activator"},slot:"activator"},[t._v(t._s(t.thongTinChiTietHoSo.dossierNote)+" ")]),i("span",{staticClass:"pl-0"},[t._v(" "+t._s(t.thongTinChiTietHoSo.dossierNote)+" ")])])],1):t._e(),t.thongTinChiTietHoSo.extendDate?i("div",{staticClass:"xs12 sm12 pb-1"},[i("span",{staticClass:"pl-0 text-bold"},[t._v("Hẹn lại: "+t._s(t.thongTinChiTietHoSo.extendDate))])]):t._e()])],1)],1)],1)],1)],1)},s=[],o={props:{detailDossier:{type:Object,default:()=>{}}},watch:{detailDossier(t){console.log("watch",t);var e=this;e.thongTinChiTietHoSo=t}},components:{},data:()=>({thongTinChiTietHoSo:{},showContactDetail:!1}),computed:{loading(){return this.$store.getters.loading},originality(){var t=this;return t.getOriginality()}},created(){var t=this;t.thongTinChiTietHoSo=t.detailDossier},mounted(){var t=this;t.thongTinChiTietHoSo=t.detailDossier},methods:{initData(t){var e=this;e.$store.dispatch("getDetailDossier",t).then(t=>{e.thongTinChiTietHoSo=t,console.log("thongTinChiTietHoSo",e.thongTinChiTietHoSo)})},goBack(){window.history.back()},durationText(t,e){var i;if(1===t&&e>8){let t,a=Math.floor(e/8)+" ngày";t=e%8!==0?8*(e/8-Math.floor(e/8))+" giờ":"",i=`${a} ${t}`}else 0===t?i=e+" ngày":1===t&&e<=8&&(i=e+" giờ");return i}},filters:{dateTimeView(t){if(t){let e=new Date(t);return`${e.getDate().toString().padStart(2,"0")}/${(e.getMonth()+1).toString().padStart(2,"0")}/${e.getFullYear()} | ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`}return""}}},n=o,r=i("2877"),l=Object(r["a"])(n,a,s,!1,null,null,null);l.options.__file="ThongTinCoBanHoSo.vue";e["a"]=l.exports},"1f8e":function(module,__webpack_exports__,__webpack_require__){"use strict";var toastr__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("854a"),toastr__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(toastr__WEBPACK_IMPORTED_MODULE_0__);toastr__WEBPACK_IMPORTED_MODULE_0___default.a.options={closeButton:!0,timeOut:"5000"},__webpack_exports__["a"]={props:{id:{type:String,default:()=>"nm"},detailDossier:{type:Object,default:()=>{}},createFiles:{type:Array,default:()=>[]}},data:()=>({dossierTemplateItems:[],dossierMarksItems:[],dossierFilesItems:[],thongTinHoSo:{},valid:!0,stateView:!1,dialogAddOtherTemp:!1,loadingAddOther:!1,otherDossierTemplate:"",sheet:!1,partView:"",dossierFileIdView:"",stateEdit:!1,progressUploadPart:"",dialogPDF:!1,dialogPDFLoading:!0,stateAddFileOther:!1,dossierTemplatesItemSelect:{},fileViews:[],sampleCount:0,fileTemplateItems:[],currentFormView:"",pstFixed:0,pstEl:0,endEl:0}),computed:{loading(){return this.$store.getters.loading},originality(){var t=this;return t.getOriginality()},initDataResource(){return this.$store.getters.loadingInitData}},created(){var t=this;t.page=1,t.$nextTick(function(){if(t.detailDossier["dossierId"]){var e=[];e.push(t.$store.dispatch("loadDossierFiles",t.detailDossier.dossierId)),e.push(t.$store.dispatch("loadDossierTemplates",t.detailDossier)),Promise.all(e).then(e=>{var i=e[1],a=e[0];t.dossierFilesItems=a,t.createFiles=t.mergeDossierTemplateVsDossierFiles(t.createFiles,a),0!==i.length&&t.createFiles.forEach(t=>{var e=i.find(e=>{return t.partNo===e.partNo});e&&(t["partTip"]=e["partTip"])}),console.log("creataaaaaa",t.createFiles)})}})},mounted(){var t=this;t.$nextTick(function(){t.createFiles.length>0&&setTimeout(function(){t.genAllAlpacaForm(t.dossierFilesItems,t.createFiles)},300)})},methods:{genAllAlpacaForm(t,e){var i=this;if(t.length>0){var a=t.filter(t=>{return t.eForm}),s=e.filter(t=>{return t.eForm});a.length>0?a.forEach(t=>{t.eForm&&i.$store.dispatch("loadAlpcaForm",t)}):e.forEach(t=>{t.eForm&&(t["templateFileNo"]=i.detailDossier.dossierTemplateNo,i.showAlpacaJSFORM(t))}),s.length!==a.length&&s.forEach(t=>{let e=a.findIndex(e=>{return t.partNo===e.dossierPartNo});-1===e&&(t["templateFileNo"]=i.detailDossier.dossierTemplateNo,i.showAlpacaJSFORM(t))})}else e.forEach(t=>{t.eForm&&(t["templateFileNo"]=i.detailDossier.dossierTemplateNo,i.showAlpacaJSFORM(t))})},mergeDossierTemplateVsDossierFiles(t,e){return 0!==e.length?t.forEach(t=>{var i=e.find(e=>{return t.partNo===e.dossierPartNo&&e.eForm});i?t["daKhai"]=!0:!i&&t.eForm&&(t["daKhai"]=!1)}):t.forEach(t=>{t.eForm&&(t["daKhai"]=!1)}),t},showAlpacaJSFORM(item){var vm=this;item["dossierId"]=vm.detailDossier.dossierId,vm.$store.dispatch("loadFormScript",item).then(resScript=>{vm.$store.dispatch("loadFormData",item).then(resData=>{var formScript,formData;window.$("#formAlpaca"+item.partNo+vm.id).empty(),formScript=resScript?eval("("+resScript+")"):{},formData=resData?eval("("+resData+")"):{},formScript.data=formData,window.$("#formAlpaca"+item.partNo+vm.id).alpaca(formScript)})})},saveAlpacaForm(t,e){var i=this;console.log("itemSave",t);var a=i.dossierFilesItems.find(e=>{return e.dossierPartNo===t.partNo&&e.eForm});a?(a["dossierId"]=i.detailDossier.dossierId,a["id"]=i.id,i.$store.dispatch("putAlpacaForm",a).then(t=>{i.$store.dispatch("loadDossierFiles",i.detailDossier.dossierId).then(t=>{i.dossierFilesItems=t}).catch(t=>{})}).catch(t=>{console.log("run saveForm"),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn được thực hiện thất bại.")})):(t["dossierId"]=i.detailDossier.dossierId,t["id"]=i.id,i.$store.dispatch("postEform",t).then(t=>{i.createFiles[e].daKhai=!0,i.$store.dispatch("loadDossierFiles",i.detailDossier.dossierId).then(t=>{i.dossierFilesItems=t}).catch(t=>{toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn được thực hiện thất bại.")})}).catch(t=>{toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn được thực hiện thất bại.")}))},onDeleteAttackFiles(t){var e=this;console.log("delete");let i=confirm("Bạn có muốn xóa toàn bộ file trong thành phần hồ sơ này?");i&&e.dossierFilesItems.forEach(i=>{i.dossierPartNo===t.partNo&&(i["dossierId"]=e.detailDossier.dossierId,e.$store.dispatch("deleteAttackFiles",i).then(function(t){e.$store.dispatch("loadDossierFiles",e.detailDossier.dossierId)}).catch(function(t){}))})},pickFile(t){var e=this;e.stateAddFileOther=!1,document.getElementById("file"+t.partNo).value="",document.getElementById("file"+t.partNo).click()},onUploadSingleFile(t,e){var i=this;i.dossierTemplatesItemSelect=e,i.progressUploadPart=e.partNo,e["dossierId"]=i.detailDossier.dossierId,e["dossierTemplateNo"]=i.detailDossier.dossierTemplateNo,i.$store.dispatch("uploadSingleFile",e).then(function(t){i.progressUploadPart="",i.$store.dispatch("loadDossierFiles",i.detailDossier.dossierId).then(t=>{i.dossierFilesItems=t})}).catch(function(t){i.progressUploadPart=""})},loadAlpcaForm(t){var e=this;e.currentFormView="formAlpaca"+t.partNo+e.id,e.pstEl=e.endEl=0,setTimeout(function(){$("#formAlpaca"+t.partNo+e.id).height()>200&&(e.pstEl=$("#wrapForm"+t.partNo+e.id).offset().top,e.endEl=$("#formAlpaca"+t.partNo+e.id).height(),$(window).scroll(function(){e.pstFixed=$(window).scrollTop()}))},500);var i=e.dossierFilesItems.find(e=>{return e.dossierPartNo===t.partNo&&e.eForm});i?(i["id"]=e.id,e.$store.dispatch("loadAlpcaForm",i)):e.createFiles.forEach(i=>{i.eForm&&t.partNo===i.partNo&&(i["templateFileNo"]=e.detailDossier.dossierTemplateNo,e.showAlpacaJSFORM(i))})},deleteSingleFileEform(t,e){var i=this;let a=confirm("Bạn có muốn xóa?");a&&(i.dossierFilesItems.forEach(e=>{e.dossierPartNo===t.partNo&&e.eForm&&(e["dossierId"]=i.detailDossier.dossierId,i.$store.dispatch("deleteDossierFile",e).then(e=>{console.log("success!"),i.$store.dispatch("loadDossierFiles",i.detailDossier.dossierId).then(e=>{i.dossierFilesItems=e;var a=i.dossierFilesItems.filter(e=>{return e.dossierPartNo===t.partNo&&!e.eForm});a&&(i.fileViews=a)})}))}),i.createFiles[e].daKhai=!1)},previewFileEfom(t,e){var i=this;i.dossierFilesItems.forEach(e=>{e.dossierPartNo===t.partNo&&e.eForm&&(e["dossierId"]=i.detailDossier.dossierId,i.dialogPDFLoading=!0,i.dialogPDF=!0,e["id"]=i.id,i.$store.dispatch("putAlpacaForm",e).then(t=>{setTimeout(function(){i.$store.dispatch("viewFile",e).then(t=>{i.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+i.id).src=t})},1e3)}).catch(t=>{toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn được thực hiện thất bại.")}))})},deleteSingleFile(t,e){var i=this;let a=confirm("Bạn có muốn xóa?");a&&(t["dossierId"]=i.detailDossier.dossierId,i.$store.dispatch("deleteDossierFile",t).then(a=>{i.fileViews.splice(e,1),i.partView=t.dossierPartNo,i.$store.dispatch("loadDossierFiles",i.detailDossier.dossierId).then(t=>{i.dossierFilesItems=t})}).catch(t=>{toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn được thực hiện thất bại.")}))},viewFile(t){var e=this;e.dossierFilesItems.forEach(i=>{i["dossierId"]=e.detailDossier.dossierId,i.dossierPartNo===t.partNo&&this.$store.dispatch("viewFile",i)})},viewFile2(t){var e=this;if("doc"===t.fileType||"docx"===t.fileType||"xlsx"===t.fileType||"xls"===t.fileType||"zip"===t.fileType||"rar"===t.fileType||"txt"===t.fileType){var i=e.initDataResource.dossierApi+"/"+e.detailDossier.dossierId+"/files/"+t.referenceUid;window.open(i)}else e.dialogPDFLoading=!0,e.dialogPDF=!0,t["dossierId"]=e.detailDossier.dossierId,e.$store.dispatch("viewFile",t).then(t=>{e.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+e.id).src=t})},viewFileWithPartNo(t){var e=this;if(e.dossierFilesItems){var i=e.dossierFilesItems.filter(e=>{return e.dossierPartNo===t.partNo&&!e.eForm});if(!i)return;e.fileViews=i,e.partView!==t.partNo?(e.stateView=!0,e.partView=t.partNo):(e.stateView=!e.stateView,e.partView=t.partNo)}},checkStyle(t){return"calc(100% - 50px)"},downloadFileTemplate(t,e){var i=this;if(i.fileTemplateItems.length>0){let e=i.fileTemplateItems.find(e=>{return t.fileTemplateNo===e.fileTemplateNo});if(e){let t=i.initDataResource.serviceInfoApi+"/"+e.serviceCode+"/filetemplates/"+e.fileTemplateNo;window.open(t)}else console.log("ko thay file")}},cancelDialog(){var t=this;t.dialogAddOtherTemp=!1,t.progressUploadPart=""},addFileOther(t){var e=this;e.dialogAddOtherTemp=!0,e.stateAddFileOther=!0,e.dossierTemplatesItemSelect=t},changeDisplayName(t,e){var i=this;let a={dossierId:i.detailDossier.dossierId,value:value};i.$store.dispatch("changeDisplayNameFile",a).then(t=>{i.fileViews[e].displayName=t.displayName,i.stateEdit=!1}).catch(t=>{console.log("error")})},validCreateFileTemplate(){var t=this;if(t.createFiles.length>0){for(var e=0;e<t.createFiles.length;e++)if(t.createFiles[e]["required"]&&!t.createFiles[e]["daKhai"]){let i="Chú ý :"+t.createFiles[e].partName+" là thành phần bắt buộc!";return toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error(i),!1}return!0}return!0}}}},"24fb":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"taotailieuketqua",staticStyle:{"background-color":"white",width:"100%"}},[i("v-expansion-panel",{staticClass:"expansion-pl"},[i("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"1"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"background-triangle-small"},[i("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v(" Kết quả xử lý\n      ")]),i("v-card",t._l(t.createFiles,function(e,a){return i("div",{key:e.partNo+"cr",staticClass:"form_alpaca",staticStyle:{position:"relative"}},[i("v-expansion-panel",{staticClass:"expaned__list__data"},[i("v-expansion-panel-content",{attrs:{"hide-actions":"",value:t.currentFormView==="formAlpaca"+e.partNo+t.id}},[i("div",{staticStyle:{"background-color":"#fff"},attrs:{slot:"header"},on:{click:function(e){t.stateView=!1}},slot:"header"},[i("div",{staticStyle:{"align-items":"center",background:"#fff","padding-left":"25px"},style:{width:t.checkStyle(e)}},[i("div",{staticClass:"mr-2",staticStyle:{"min-width":"18px",display:"flex"},on:{click:function(i){t.loadAlpcaForm(e)}}},[i("div",{staticClass:"header__tphs"},[i("span",{staticClass:"text-bold"},[t._v(t._s(a+1)+".")]),t._v("  ")]),i("div",{staticClass:"header__tphs"},[t._v("\n                      "+t._s(e.partName)+" "),e.required?i("span",{staticStyle:{color:"red"}},[t._v(" (*)")]):t._e(),t._v("\n                        \n                      "),e.eForm&&e.daKhai?i("v-tooltip",{attrs:{top:""}},[i("i",{staticClass:"fa fa-file-text-o",staticStyle:{color:"#0d71bb","font-size":"13px"},attrs:{slot:"activator","aria-hidden":"true"},slot:"activator"}),i("span",[t._v("Biểu mẫu trực tuyến (Đã khai)")])]):t._e(),e.eForm&&!e.daKhai?i("v-tooltip",{attrs:{top:""}},[i("i",{staticClass:"fa fa-file-o",staticStyle:{color:"#0d71bb","font-size":"13px"},attrs:{slot:"activator"},slot:"activator"}),i("span",[t._v("Biểu mẫu trực tuyến (Chưa khai)")])]):t._e()],1)]),t._l(t.dossierFilesItems,function(a,s){return e.partNo+t.id!==a.dossierPartNo+t.id||a.eForm?t._e():i("div",{key:s+"cr"},[i("div",{staticStyle:{width:"calc(100% - 370px)",display:"flex","align-items":"center",background:"#fff","padding-left":"25px","font-size":"12px"}},[i("span",{staticClass:"ml-3",staticStyle:{cursor:"pointer"},on:{click:function(e){e.stopPropagation(),t.viewFile2(a)}}},[a.eForm?i("v-icon",[t._v("border_color")]):i("v-icon",[t._v("attach_file")]),t._v("\n                        "+t._s(a.displayName)+" - \n                        "),i("i",[t._v(t._s(a.modifiedDate))])],1),i("v-btn",{staticClass:"mx-0 my-0",attrs:{icon:"",ripple:""},on:{click:function(e){e.stopPropagation(),t.deleteSingleFile(a,s)}}},[i("v-icon",{staticStyle:{color:"red"}},[t._v("delete_outline")])],1)],1)])})],2)]),e.eForm?i("v-card",[i("v-card-text",{staticStyle:{"background-color":"rgba(244, 247, 213, 0.19)"}},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{staticClass:"text-xs-right",attrs:{xs12:""}},[i("div",{style:t.pstFixed>t.pstEl&&t.pstFixed<t.endEl+t.pstEl?"position:fixed;top:5px;z-index:101":"",attrs:{id:"wrapForm"+e.partNo+t.id}},[e.eForm?i("v-btn",{attrs:{color:"primary",id:"saveBtn"+e.partNo+e.templateFileNo},on:{click:function(i){t.saveAlpacaForm(e,a)}}},[t._v("Lưu lại")]):t._e(),e.daKhai&&e.eForm?i("v-btn",{attrs:{color:"primary"},on:{click:function(i){t.deleteSingleFileEform(e,a)}}},[t._v("Xóa")]):t._e(),e.daKhai&&e.eForm?i("v-btn",{attrs:{color:"primary"},on:{click:function(i){t.previewFileEfom(e,a)}}},[t._v("In")]):t._e()],1),i("div",{attrs:{id:"formAlpaca"+e.partNo+t.id}})])],1)],1)],1):t._e()],1)],1),i("div",{staticClass:"absolute__btn group__thanh_phan pr-3 mr-1"},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{staticStyle:{width:"50px"}},[i("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"file"+e.partNo},on:{change:function(i){t.onUploadSingleFile(i,e)}}}),t.progressUploadPart+t.id===e.partNo+t.id?i("v-progress-circular",{attrs:{width:2,size:25,color:"green",indeterminate:""}}):t.progressUploadPart+t.id!==e.partNo+t.id?i("v-tooltip",{attrs:{top:""}},[i("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(i){t.pickFile(e)}},slot:"activator"},[i("v-badge",[i("v-icon",{attrs:{size:"16",color:"primary"}},[t._v("cloud_upload")])],1)],1),e.partTip["extensions"]||e.partTip["maxSize"]?i("span",[t._v("Chấp nhận tải lên các định dạng: "+t._s(e.partTip["extensions"])+". Tối đa "+t._s(e.partTip["maxSize"])+" MB ")]):i("span",[t._v("Tải file lên")])],1):t._e()],1)],1)],1)],1)}),0),i("v-dialog",{staticStyle:{overflow:"hidden"},attrs:{"max-width":"900",transition:"fade-transition"},model:{value:t.dialogPDF,callback:function(e){t.dialogPDF=e},expression:"dialogPDF"}},[i("v-card",[i("v-card-title",{staticClass:"headline"},[t._v("File đính kèm")]),i("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogPDF=!1}}},[i("v-icon",[t._v("clear")])],1),t.dialogPDFLoading?i("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[i("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):t._e(),i("iframe",{directives:[{name:"show",rawName:"v-show",value:!t.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPDFPreview"+t.id,src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1)],1)],1)],1)},s=[],o=i("1f8e"),n=o["a"],r=i("2877"),l=Object(r["a"])(n,a,s,!1,null,null,null);l.options.__file="TaoTaiLieuKetQua.vue";e["a"]=l.exports},"26ed":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{"background-color":"white",width:"100%"}},["overdue"===t.type||"preoverdue"===t.type?i("v-expansion-panel",{staticClass:"expansion-pl"},[i("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"1"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"background-triangle-small"},[i("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),i("span",[t._v("Lý do chậm hạn trả")]),i("span",{staticStyle:{color:"red"}},[t._v(" *")])]),i("v-card",[i("v-card-text",{staticClass:"py-2 px-2"},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:""}},[i("v-form",{ref:"delayNoteForm",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-text-field",{attrs:{"multi-line":"",rows:3,rules:function(){return""!==t.delayNote||"Trường dữ liệu bắt buộc"}},model:{value:t.delayNote,callback:function(e){t.delayNote=e},expression:"delayNote"}})],1)],1)],1)],1)],1)],1)],1):t._e(),i("v-expansion-panel",{staticClass:"expansion-pl"},[i("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"1"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"background-triangle-small"},[i("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),"overdue"===t.type||"preoverdue"===t.type?i("span",[t._v("Ngày hẹn lại")]):t._e(),"betimes"===t.type?i("span",[t._v("Ngày hẹn trả sớm")]):t._e()]),i("v-card",[i("v-card-text",[i("v-layout",{staticClass:"pl-2",attrs:{wrap:""}},[i("v-icon",{staticClass:"hover-pointer ml-3",attrs:{color:"blue"},on:{click:t.showDatePicker}},[t._v("event")]),i("vue-ctk-date-time-picker",{ref:"datepicker",staticClass:"ml-2",staticStyle:{width:"auto!important"},attrs:{format:"YYYY-MM-DDTHH:mm","time-format":"HH:mm","without-header":!0,formatted:"DD/MM/YYYY HH:mm",label:t.extendDateInput?"":"Chọn ngày","min-date":t.minDate},model:{value:t.extendDateInput,callback:function(e){t.extendDateInput=e},expression:"extendDateInput"}})],1)],1)],1)],1)],1)],1)},s=[],o=i("e30a"),n=i.n(o),r={components:{"vue-ctk-date-time-picker":n.a},props:["extendDateEdit","type"],data:()=>({extendDateInput:"",minDate:null,delayNote:""}),created(){},watch:{},mounted(){this.extendDateInput=this.extendDateEdit?this.parseCurrentDate(this.extendDateEdit):this.formatDateInput(new Date),console.log("extendDateInput",this.extendDateInput),this.minDate=this.getCurentDateTime("date")},methods:{doExport(){let t=this,e=t.extendDateInput?new Date(t.extendDateInput).getTime():"";var i;return i="overdue"===t.type||"preoverdue"===t.type?{text:t.delayNote,extendDate:e,valid:t.$refs.delayNoteForm.validate()}:{text:t.delayNote,extendDate:e,valid:!0},i},getCurentDateTime(t){let e=new Date;return"datetime"===t?`${e.getDate().toString().padStart(2,"0")}/${(e.getMonth()+1).toString().padStart(2,"0")}/${e.getFullYear()} | ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`:"date"===t?`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}`:void 0},formatDateInput(t){return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")} ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`},showDatePicker(){this.$refs.datepicker.showDatePicker()},parseCurrentDate(t){if(!t)return null;let[e,i]=t.split(" "),[a,s,o]=`${e}`.split("/"),[n,r,l]=`${i}`.split(":");return`${o}-${s.padStart(2,"0")}-${a.padStart(2,"0")} ${n}:${r}`}}},l=r,c=i("2877"),d=Object(c["a"])(l,a,s,!1,null,null,null);d.options.__file="ExtendDateEdit.vue";e["a"]=d.exports},"334d":function(module,__webpack_exports__,__webpack_require__){"use strict";var jquery__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("1157"),jquery__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__),toastr__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("854a"),toastr__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(toastr__WEBPACK_IMPORTED_MODULE_1__);toastr__WEBPACK_IMPORTED_MODULE_1___default.a.options={closeButton:!0,timeOut:"20000"},__webpack_exports__["a"]={props:{onlyView:{type:Boolean,default:()=>!1},id:{type:String,default:()=>"nm"},partTypes:{type:Array,default:()=>[1,3]},checkInput:{type:Number,default:()=>0}},data:()=>({dossierTemplateItems:[],dossierMarksItems:[],dossierFilesItems:[],thongTinHoSo:{},valid:!0,stateView:!1,dialogAddOtherTemp:!1,loadingAddOther:!1,otherDossierTemplate:"",sheet:!1,partView:"",dossierFileIdView:"",stateEdit:!1,progressUploadPart:"",dialogPDF:!1,dialogPDFLoading:!0,stateAddFileOther:!1,dossierTemplatesItemSelect:{},fileViews:[],pdfEform:!1,sampleCount:0,serviceInfoId:0,fileMarkItems:[{text:"Không có",value:0},{text:"Bản chụp",value:1},{text:"Bản sao",value:2},{text:"Bản gốc",value:3}],fileCheckItems:[{text:"Chưa kiểm tra",value:0},{text:"Đạt",value:1},{text:"Không đạt",value:2}],fileTemplateItems:[],fileTemplateNoString:"",dossierFilesApplicant:[],stateViewResult:!0,currentFormView:"",pstFixed:0,pstEl:0,endEl:0,applicantNoteDossier:""}),computed:{loading(){return this.$store.getters.loading},originality(){var t=this;return t.getOriginality()},initDataResource(){return this.$store.getters.loadingInitData},dossierTemplateItemsFilter(){let t=this,e=t.dossierTemplateItems;if(e.length>0){let i=e.filter(function(e){return t.partTypes.includes(e.partType)&&t.checkVisibleTemp(e,0)});return i}},applicantBussinessExit(){return this.$store.getters.getApplicantBussinessExit},applicantId(){return this.$store.getters.getApplicantIdNo},applicantNote(){return this.$store.getters.getApplicantNote}},mounted(){var t=this;t.page=1,t.$nextTick(function(){})},watch:{applicantBussinessExit(t){let e=this;t&&e.fileTemplateNoString&&e.getDossierFileApplicants(t,e.fileTemplateNoString)},applicantId(t){let e=this;t&&e.fileTemplateNoString&&e.getDossierFileApplicants(t,e.fileTemplateNoString)}},methods:{resetCounterTemplate({commit:t,state:e},i){var a=this;a.dossierTemplateItems.forEach(t=>{t.partNo===i.partNo&&(t.hasForm?t.count=1:t.count=0)})},recountFileTemplates(){var t=this;t.dossierTemplateItems.forEach(e=>{e.count=0,t.dossierFilesItems.forEach(t=>{e.partNo!==t.dossierPartNo||t.eForm||e.count++})})},initData(t){var e=this;e.thongTinHoSo=t,e.applicantNoteDossier=t["applicantNote"];var i=[];null!==t["sampleCount"]&&void 0!==t["sampleCount"]&&"undefined"!==t["sampleCount"]&&(e.sampleCount=t["sampleCount"]),i.push(e.$store.dispatch("loadDossierTemplates",t)),i.push(e.$store.dispatch("loadDossierMark",t)),i.push(e.$store.dispatch("loadDossierFiles",t.dossierId)),i.push(e.$store.dispatch("getServiceInfo",{serviceInfoId:t.serviceCode})),Promise.all(i).then(t=>{var i=t[0],a=t[1],s=t[2],o=[];t[3].hasOwnProperty("serviceInfoId")&&(e.serviceInfoId=t[3].serviceInfoId),t[3].fileTemplates&&(Array.isArray(t[3].fileTemplates)?o=t[3].fileTemplates:o.push(t[3].fileTemplates));var n=e.mergeDossierTemplateVsDossierFiles(i,s);if(n=e.mergeDossierTemplateVsDossierMark(n,a),n=e.mergeDossierTemplateVsFileTemplates(n,o),e.dossierFilesItems=s,e.dossierMarksItems=a,e.fileTemplateItems=o,e.dossierTemplateItems=n,e.partTypes.includes(2)&&e.dossierTemplateItems.length>0){let t=[];e.dossierTemplateItems.forEach(i=>{let a=e.dossierFilesItems.find(t=>{return i.partNo===t.dossierPartNo&&2===i.partType});a&&t.push(i)}),e.dossierTemplateItems=t,console.log("dossierTemplateItems555",e.dossierTemplateItems)}e.changeStateViewResult(),setTimeout(function(t){e.genAllAlpacaForm(s,n),e.recountFileTemplates()},500),console.log("dossierTemplateItems",e.dossierTemplateItems);let r=[];for(let l in e.dossierTemplateItems)e.dossierTemplateItems[l]["fileTemplateNo"]&&r.push(e.dossierTemplateItems[l]["fileTemplateNo"]);r.length>0&&(e.fileTemplateNoString=r.toString(),console.log("fileTemplateNoString",e.fileTemplateNoString),e.applicantId&&!e.onlyView&&e.getDossierFileApplicants(e.applicantId,e.fileTemplateNoString))}).catch(t=>{})},genAllAlpacaForm(t,e){var i=this;if(t.length>0){var a=t.filter(t=>{return t.eForm}),s=e.filter(t=>{return t.hasForm&&i.partTypes.includes(t.partType)});a.length>0?a.forEach(t=>{t.eForm&&i.$store.dispatch("loadAlpcaForm",t)}):e.forEach(t=>{t.hasForm&&i.partTypes.includes(t.partType)&&(t["templateFileNo"]=i.thongTinHoSo.dossierTemplateNo,i.showAlpacaJSFORM(t))}),s.length!==a.length&&s.forEach(t=>{let e=a.findIndex(e=>{return t.partNo===e.dossierPartNo});-1===e&&(t["templateFileNo"]=i.thongTinHoSo.dossierTemplateNo,i.showAlpacaJSFORM(t))})}else e.forEach(t=>{t.hasForm&&i.partTypes.includes(t.partType)&&(t["templateFileNo"]=i.thongTinHoSo.dossierTemplateNo,i.showAlpacaJSFORM(t))})},postDossierMark(t,e){var i=this;t["dossierId"]=i.thongTinHoSo.dossierId,i.$store.dispatch("postDossierMark",t).then(t=>{}).catch(t=>{})},mergeDossierTemplateVsDossierFiles(t,e){var i=this;return 0!==e.length?t.forEach(t=>{t["daKhai"]=!1,t["passRequired"]=!1;var a=e.find(e=>{return t.partNo===e.dossierPartNo&&i.partTypes.includes(t.partType)&&e.eForm&&!e.removed});a&&(t["daKhai"]=!0,t["hasForm"]=!0,t["referenceUid"]=a["referenceUid"]),e.forEach(e=>{t.partNo===e.dossierPartNo&&(t["passRequired"]=!0)})}):t.forEach(t=>{t.hasForm&&(t["daKhai"]=!1,t["passRequired"]=!1)}),t},mergeDossierTemplateVsDossierMark(t,e){return 0!==e.length?t.map(t=>{t["count"]=0,t["stateEditFileCheck"]=!1;let i=e.find(e=>{return e.dossierPartNo===t.partNo});return null!==i&&void 0!==i?(t["fileMark"]=i.fileMark,t["fileComment"]=i.fileComment,t["fileCheck"]=i.fileCheck):(t["fileMark"]=0,t["fileComment"]="",t["fileCheck"]=0),t}):t&&t.forEach(t=>{t["stateEditFileCheck"]=!1,t["count"]=0,t["fileMark"]=0,t["fileComment"]="",t["fileCheck"]=0,t["stateEditFileCheck"]=!1}),t},mergeDossierTemplateVsFileTemplates(t,e){return 0!==e.length?t.map(t=>{let i=e.find(e=>{return e.fileTemplateNo===t.fileTemplateNo});return t["hasFileTemp"]=null!==i&&void 0!==i?i.fileTemplateNo:"",t}):t&&t.forEach(t=>{t["hasFileTemp"]=""}),t},showAlpacaJSFORM(item){var vm=this;item["dossierId"]=vm.thongTinHoSo.dossierId,vm.$store.dispatch("loadFormScript",item).then(resScript=>{vm.$store.dispatch("loadFormData",item).then(resData=>{var formScript,formData;window.$("#formAlpaca"+item.partNo+vm.id).empty(),formScript=resScript?eval("("+resScript+")"):{},formData=resData?eval("("+resData+")"):{},formScript.data=formData,window.$("#formAlpaca"+item.partNo+vm.id).alpaca(formScript)})})},saveAlpacaForm(t,e){var i=this,a=i.dossierFilesItems.find(e=>{return e.dossierPartNo===t.partNo&&e.eForm});a?(a["dossierId"]=i.thongTinHoSo.dossierId,a["id"]=i.id,i.$store.dispatch("putAlpacaForm",a).then(t=>{i.$store.dispatch("loadDossierFiles",i.thongTinHoSo.dossierId).then(t=>{i.dossierFilesItems=t}).catch(t=>{}),i.dossierTemplateItems[e]["passRequired"]=!0}).catch(t=>{toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Yêu cầu của bạn thực hiện thất bại.")})):(t["dossierId"]=i.thongTinHoSo.dossierId,t["id"]=i.id,i.$store.dispatch("postEform",t).then(t=>{i.dossierTemplateItems[e].daKhai=!0,i.dossierTemplateItems[e]["passRequired"]=!0,i.$store.dispatch("loadDossierFiles",i.thongTinHoSo.dossierId).then(t=>{i.dossierFilesItems=t}).catch(t=>{toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Yêu cầu của bạn thực hiện thất bại.")})}).catch(t=>{toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Yêu cầu của bạn thực hiện thất bại.")}))},onDeleteAttackFiles(t){var e=this;console.log("delete");let i=confirm("Bạn có muốn xóa toàn bộ file trong thành phần hồ sơ này?");i&&e.dossierFilesItems.forEach(i=>{i.dossierPartNo===t.partNo&&(i["dossierId"]=e.thongTinHoSo.dossierId,e.$store.dispatch("deleteAttackFiles",i).then(function(i){e.resetCounterTemplate(t),e.$store.dispatch("loadDossierFiles",e.thongTinHoSo.dossierId)}).catch(function(t){}))})},changeApplicantNote(){let t=this;console.log("applicantNoteEdit",t.applicantNoteDossier),t.$store.commit("setApplicantNote",t.applicantNoteDossier)},pickFile(t){var e=this;e.stateAddFileOther=!1,document.getElementById("file"+t.partNo).value="",document.getElementById("file"+t.partNo).click()},onUploadSingleFile(t,e,i){var a=this;if(console.log("vm.dossierTemplateItems[index]",a.dossierTemplateItems[i]),a.dossierTemplatesItemSelect=e,a.progressUploadPart=e.partNo,e["dossierId"]=a.thongTinHoSo.dossierId,e["dossierTemplateNo"]=a.thongTinHoSo.dossierTemplateNo,3!==e.partType)a.$store.dispatch("uploadSingleFile",e).then(function(t){a.dossierTemplateItems[i]["passRequired"]=!0,a.progressUploadPart="",a.$store.dispatch("loadDossierFiles",a.thongTinHoSo.dossierId).then(t=>{a.dossierFilesItems=t,a.recountFileTemplates()})}).catch(function(t){a.progressUploadPart=""});else{if(0===window.$("#file"+e.partNo)[0].files.length)return void(a.progressUploadPart="");a.partView=e.partNo,a.stateView=!0,a.dialogAddOtherTemp=!0}},loadAlpcaForm(t){var e=this;e.currentFormView="formAlpaca"+t.partNo+e.id,e.pstEl=e.endEl=0,setTimeout(function(){jquery__WEBPACK_IMPORTED_MODULE_0___default()("#formAlpaca"+t.partNo+e.id).height()>200&&(e.pstEl=jquery__WEBPACK_IMPORTED_MODULE_0___default()("#wrapForm"+t.partNo+e.id).offset().top,e.endEl=jquery__WEBPACK_IMPORTED_MODULE_0___default()("#formAlpaca"+t.partNo+e.id).height(),jquery__WEBPACK_IMPORTED_MODULE_0___default()(window).scroll(function(){e.pstFixed=jquery__WEBPACK_IMPORTED_MODULE_0___default()(window).scrollTop()}))},500);var i=e.dossierFilesItems.find(e=>{return e.dossierPartNo===t.partNo&&e.eForm});i?(i["id"]=e.id,e.$store.dispatch("loadAlpcaForm",i)):e.dossierTemplateItems.forEach(i=>{i.hasForm&&t.partNo===i.partNo&&(i["templateFileNo"]=e.thongTinHoSo.dossierTemplateNo,e.showAlpacaJSFORM(i))})},deleteSingleFileEform(t,e){var i=this;let a=confirm("Bạn có chắc chắn xóa file?");a&&i.dossierFilesItems.forEach(a=>{a.dossierPartNo===t.partNo&&a.eForm&&(a["dossierId"]=i.thongTinHoSo.dossierId,i.$store.dispatch("deleteDossierFile",a).then(a=>{console.log("success!"),i.dossierTemplateItems[e].daKhai=!1,i.$store.dispatch("loadDossierFiles",i.thongTinHoSo.dossierId).then(a=>{if(i.dossierFilesItems=a,i.recountFileTemplates(),0!==i.dossierFilesItems.length){var s=i.dossierFilesItems.filter(e=>{return e.dossierPartNo===t.partNo});i.dossierTemplateItems[e]["passRequired"]=!!s}else i.dossierTemplateItems[e]["passRequired"]=!1})}))})},previewFileEfom(t,e){var i=this;i.dossierFilesItems.forEach(e=>{e.dossierPartNo===t.partNo&&e.eForm&&!e.removed&&(e["dossierId"]=i.thongTinHoSo.dossierId,i.dialogPDFLoading=!0,i.dialogPDF=!0,i.onlyView?i.$store.dispatch("viewFile",e).then(t=>{i.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+i.id).src=t}):(e["id"]=i.id,i.$store.dispatch("putAlpacaForm",e).then(t=>{setTimeout(function(){i.$store.dispatch("viewFile",e).then(t=>{i.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+i.id).src=t})},1e3)}).catch(t=>{toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Yêu cầu của bạn thực hiện thất bại.")})))})},deleteSingleFile(t,e){var i=this;let a=confirm("Bạn có chắc chắn xóa file đính kèm ?");a&&(t["dossierId"]=i.thongTinHoSo.dossierId,i.$store.dispatch("deleteDossierFile",t).then(a=>{i.fileViews.splice(e,1),i.stateView=!0,i.partView=t.dossierPartNo,i.$store.dispatch("loadDossierFiles",i.thongTinHoSo.dossierId).then(e=>{i.dossierFilesItems=e,i.setDaKhai(t)})}).catch(t=>{toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("Yêu cầu của bạn thực hiện thất bại.")}))},viewFile(t){var e=this;e.dossierFilesItems.forEach(i=>{i["dossierId"]=e.thongTinHoSo.dossierId,i.dossierPartNo===t.partNo&&this.$store.dispatch("viewFile",i)})},setDaKhai(t){var e=this;let i=e.dossierFilesItems.findIndex(e=>{return e.dossierPartNo===t.dossierPartNo});if(-1===i){for(var a=0;a<e.dossierTemplateItems.length;a++)if(e.dossierTemplateItems[a].partNo===t.dossierPartNo){e.dossierTemplateItems[a]["passRequired"]=!1;break}}else for(a=0;a<e.dossierTemplateItems.length;a++)if(e.dossierTemplateItems[a].partNo===t.dossierPartNo){e.dossierTemplateItems[a]["passRequired"]=!0;break}},checkPartType3(){var t=this;if(0!==t.dossierTemplateItems.length)for(var e=0;e<t.dossierTemplateItems.length;e++)if(3===t.dossierTemplateItems[e].partType)return!0;return!1},viewFile2(t){var e=this;if(0!==t.fileSize)if(t["hasForm"]?e.pdfEform=!0:e.pdfEform=!1,"doc"===t.fileType||"docx"===t.fileType||"xlsx"===t.fileType||"xls"===t.fileType||"zip"===t.fileType||"rar"===t.fileType||"txt"===t.fileType||"mp3"===t.fileType||"mp4"===t.fileType){var i=e.initDataResource.dossierApi+"/"+e.thongTinHoSo.dossierId+"/files/"+t.referenceUid;window.open(i)}else t["dossierId"]=e.thongTinHoSo.dossierId,t.referenceUid?(e.dialogPDFLoading=!0,e.dialogPDF=!0,e.$store.dispatch("viewFile",t).then(t=>{e.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+e.id).src=t})):toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("File dữ liệu không tồn tại")},viewGiayToDaNop(t){var e=this;if(0!==t.fileSize)if(t["hasForm"]?e.pdfEform=!0:e.pdfEform=!1,"doc"===t.fileType||"docx"===t.fileType||"xlsx"===t.fileType||"xls"===t.fileType||"zip"===t.fileType||"rar"===t.fileType||"txt"===t.fileType||"mp3"===t.fileType||"mp4"===t.fileType){var i=e.initDataResource.dossierApi+"/"+t.dossierId+"/files/"+t.referenceUid;window.open(i)}else t.referenceUid?(e.dialogPDFLoading=!0,e.dialogPDF=!0,e.$store.dispatch("viewFile",t).then(t=>{e.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+e.id).src=t})):toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error("File dữ liệu không tồn tại")},viewFileWithPartNo(t){var e=this;if(e.dossierFilesItems){var i=e.dossierFilesItems.filter(e=>{return e.dossierPartNo===t.partNo&&!e.eForm});if(!i)return;e.fileViews=i,e.partView!==t.partNo?(e.stateView=!0,e.partView=t.partNo):(e.stateView=!e.stateView,e.partView=t.partNo)}},saveMark(){var t=this;t.dossierTemplateItems&&t.dossierTemplateItems.forEach(function(e,i){1===e.partType&&(e["dossierId"]=t.thongTinHoSo.dossierId,t.$store.dispatch("postDossierMark",e))})},changeFileMark(t,e){var i=this;let a=i.dossierTemplateItems[e];a["dossierId"]=i.thongTinHoSo.dossierId,a["fileMark"]=t,a["checkInput"]=i.checkInput,i.$store.dispatch("postDossierMark",a),i.dossierTemplateItems[e].fileMark=t},changeFileCheck(t,e){var i=this;let a=i.dossierTemplateItems[e];a["dossierId"]=i.thongTinHoSo.dossierId,a["fileCheck"]=t,a["checkInput"]=i.checkInput,2!==t?(a["fileComment"]="",i.$store.dispatch("postDossierMark",a),i.dossierTemplateItems[e].fileCheck=t):a["stateEditFileCheck"]=!0},changeFileComment(t,e){var i=this;null!==t.fileComment&&void 0!==t.fileComment&&""!==t.fileComment&&(t["dossierId"]=i.thongTinHoSo.dossierId,t["fileComment"]=t.fileComment,t["checkInput"]=i.checkInput,t["stateEditFileCheck"]=!t["stateEditFileCheck"],i.$store.dispatch("postDossierMark",t),i.dossierTemplateItems[e].fileComment=t.fileComment)},checkStyle(t){var e=this;if(1===e.checkInput)return"calc(100% - 140px)";{let i=0;return 1===e.originality||1!==t.partType||e.thongTinHoSo.online||1===e.checkInput||(i+=140),t.fileCheck>0&&!e.thongTinHoSo.online&&(i+=20),t.fileCheck>0&&e.thongTinHoSo.online&&(i+=40),e.onlyView||(i+=90),"calc(100% - "+i+"px)"}},checkVisibleTemp(t,e){var i=this;if(!i.onlyView)return!0;if(3===t.partType){if(i.dossierFilesItems.length>0){let e=i.dossierFilesItems.findIndex(e=>{return e.dossierPartNo===t.partNo});return-1!==e}return!1}return!0},changeStateViewResult(){var t=this;if(t.dossierFilesItems.length>0){let e=t.dossierFilesItems.findIndex(t=>{return 2===t.dossierPartType});-1!==e?t.$emit("tp:change-state-view-result",!0):t.$emit("tp:change-state-view-result",!1)}else t.partTypes.includes(2)&&t.$emit("tp:change-state-view-result",!1)},changeOtherDossierTemp(t){var e=this;if(3===e.originality&&e.stateAddFileOther)e.loadingAddOther=!0,e.$store.dispatch("uploadSingleOtherFile",{dossierId:e.thongTinHoSo.dossierId,displayName:t,partNo:e.dossierTemplatesItemSelect.partNo}).then(t=>{e.loadingAddOther=!1,e.dialogAddOtherTemp=!1,e.$store.dispatch("loadDossierFiles",e.thongTinHoSo.dossierId).then(t=>{e.dossierFilesItems=t})}).catch(t=>{e.loadingAddOther=!1});else{let i=e.dossierTemplatesItemSelect;i["dossierId"]=e.thongTinHoSo.dossierId,i["displayName"]=t,i["dossierTemplateNo"]=e.thongTinHoSo.dossierTemplateNo,e.$store.dispatch("uploadSingleFile",i).then(function(t){e.progressUploadPart="",e.dialogAddOtherTemp=!1,e.$store.dispatch("loadDossierFiles",e.thongTinHoSo.dossierId).then(t=>{if(e.dossierFilesItems=t,e.recountFileTemplates(),e.stateView&&e.dossierFilesItems){var i=e.dossierFilesItems.filter(t=>{return t.dossierPartNo===e.dossierTemplatesItemSelect.partNo&&!t.eForm});i&&(e.fileViews=i)}})}).catch(function(t){e.progressUploadPart=""})}},downloadFileTemplate(t,e){var i=this;if(i.fileTemplateItems.length>0){let e=i.fileTemplateItems.find(e=>{return t.fileTemplateNo===e.fileTemplateNo});if(e){let t=i.initDataResource.serviceInfoApi+"/"+i.serviceInfoId+"/filetemplates/"+e.fileTemplateNo;window.open(t)}else console.log("ko thay file")}},addOtherTemplate(){var t=this;t.$refs.form.validate()&&t.changeOtherDossierTemp(t.otherDossierTemplate)},editDisplayName(t,e){var i=this;i.dossierFileIdView!==t.dossierFileId?(i.dossierFileIdView=t.dossierFileId,i.stateEdit=!0):(i.dossierFileIdView=t.dossierFileId,i.stateEdit=!i.stateEdit)},cancelDialog(){var t=this;t.dialogAddOtherTemp=!1,t.progressUploadPart=""},addFileOther(t){var e=this;e.dialogAddOtherTemp=!0,e.stateAddFileOther=!0,e.dossierTemplatesItemSelect=t},validDossierTemplate(){var t=this;if(t.dossierTemplateItems.length>0){for(var e=0;e<t.dossierTemplateItems.length;e++)if(t.dossierTemplateItems[e]["required"]&&!t.dossierTemplateItems[e]["passRequired"]&&t.partTypes.includes(t.dossierTemplateItems[e].partType)){let i="Chú ý :"+t.dossierTemplateItems[e].partName+" là thành phần bắt buộc!";return toastr__WEBPACK_IMPORTED_MODULE_1___default.a.error(i),!1}return!0}return!0},changeDisplayName(t,e){var i=this;let a={dossierId:i.thongTinHoSo.dossierId,value:value};i.$store.dispatch("changeDisplayNameFile",a).then(t=>{i.fileViews[e].displayName=t.displayName,i.stateEdit=!1}).catch(t=>{console.log("error")})},getDossierFileApplicants(t,e){var i=this;let a={dossierId:i.thongTinHoSo.dossierId,applicantIdNo:t,fileTemplateNo:e};i.$store.dispatch("getDossierFilesApplicants",a).then(t=>{i.dossierFilesApplicant=t}).catch(t=>{console.log("error")})},showFilesApplicant(t){console.log(jquery__WEBPACK_IMPORTED_MODULE_0___default()("#fileApplicant-"+t).is(":visible")),jquery__WEBPACK_IMPORTED_MODULE_0___default()("#fileApplicant-"+t).is(":visible")?jquery__WEBPACK_IMPORTED_MODULE_0___default()("#fileApplicant-"+t).hide():jquery__WEBPACK_IMPORTED_MODULE_0___default()("#fileApplicant-"+t).show()},checkKQhasFile(t){var e=this;if(e.partTypes.includes(2)){var i=e.dossierFilesItems.find(e=>{return t.partNo===e.dossierPartNo});return!!i}return!0},partNoApplicantHasFile(t){let e=this,i=e.dossierFilesApplicant.find(i=>{return i.dossierTemplateNo===e.thongTinHoSo["dossierTemplateNo"]&&i.dossierPartNo===t});return!!i}}}},3436:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm12:""}},[i("v-subheader",{staticStyle:{"font-weight":"bold"}},[t._v("Tình trạng hồ sơ")]),t._l(t.tinhTrangHoSo,function(e,a){return i("v-btn",{key:e.status,class:{active:e.status===t.statusSearch},attrs:{color:"primary",outline:""},on:{click:function(i){t.changeTinhTrangHoSo(e)}}},[t._v(t._s(e.statusName)+" ("+t._s(e.count)+")")])})],2),i("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm12:""}},[i("v-subheader",{staticStyle:{"font-weight":"bold"}},[t._v("Đang thụ lý")]),t._l(t.dangThuLy,function(e,a){return i("v-btn",{key:e.dueCode,class:{active:e.dueCode===t.dueSearch},attrs:{color:"primary",outline:""},on:{click:function(i){t.changeDangThuLy(e)}}},[t._v(t._s(e.dueName)+" ("+t._s(e.count)+")")])})],2),i("v-flex",{staticClass:"mb-2",attrs:{xs12:"",sm12:""}},[i("v-subheader",{staticStyle:{"font-weight":"bold"}},[t._v("Sổ theo dõi")]),t._l(t.soTheoDoi,function(e,a){return i("v-btn",{key:e.register,class:{active:e.register===t.registerSearch},attrs:{color:"primary",outline:""},on:{click:function(i){t.changeSoTheoDoi(e)}}},[t._v(t._s(e.registerName)+" ("+t._s(e.count)+")")])})],2),i("v-flex",{attrs:{xs12:"",sm9:""}},[i("v-text-field",{staticClass:"ml-3",attrs:{label:"Nhập từ khóa"},model:{value:t.keywordSearch,callback:function(e){t.keywordSearch=e},expression:"keywordSearch"}})],1),i("v-flex",{attrs:{xs12:"",sm3:""}},[i("v-btn",{staticClass:"ml-4",attrs:{color:"primary"},on:{click:t.quickSearch}},[t._v("Tìm kiếm nhanh")])],1),i("v-flex",{attrs:{xs12:"",sm9:""}}),i("v-flex",{attrs:{xs12:"",sm3:""}},[i("v-btn",{staticClass:"ml-4 mb-3",attrs:{color:"primary"},on:{click:t.advancedSearch}},[t._v("Tìm kiếm nâng cao")])],1),i("v-flex",{attrs:{xs12:"",sm12:""}},[i("v-data-table",{staticClass:"table-landing table-bordered",attrs:{headers:t.headers,items:t.traCuuDatas,"hide-actions":"","no-data-text":"Không có dữ liệu"},scopedSlots:t._u([{key:"headerCell",fn:function(e){return[i("v-tooltip",{attrs:{bottom:""}},[i("span",{attrs:{slot:"activator"},slot:"activator"},[t._v("\n            "+t._s(e.header.text)+"\n          ")]),i("span",[t._v("\n            "+t._s(e.header.text)+"\n          ")])])]}},{key:"items",fn:function(e){return[i("td",{staticClass:"text-xs-center"},[t._v("\n          "+t._s(e.item.dossierNo)+"\n        ")]),i("td",{staticClass:"text-xs-center"},[t._v("\n          "+t._s(e.item.serviceName)+"\n        ")]),i("td",{staticClass:"text-xs-center"},[t._v("\n          "+t._s(e.item.applicantName)+"\n        ")]),i("td",{staticClass:"text-xs-center"},[t._v("\n          "+t._s(e.item.address)+"\n        ")]),i("td",{staticClass:"text-xs-center"},[t._v("\n          "+t._s(e.item.receiveDate)+"\n        ")]),i("td",{staticClass:"text-xs-center"},[t._v("\n          "+t._s(e.item.releaseDate)+"\n        ")]),i("td",{staticClass:"text-xs-center"},[t._v("\n          "+t._s(e.item.submitDate)+"\n        ")]),i("td",{staticClass:"text-xs-center"},[t._v("\n          "+t._s(e.item.finishDate)+"\n        ")])]}}])}),i("div",{staticClass:"text-xs-right layout wrap",staticStyle:{position:"relative"}},[i("div",{staticClass:"flex pagging-table px-2"},[i("tiny-pagination",{attrs:{total:t.traCuuDatasTotal,page:t.traCuuDatasPage,"custom-class":"custom-tiny-class"},on:{"tiny:change-page":t.paggingDataTraCuu}})],1)])],1)],1)],1)},s=[],o=i("000e"),n=i("a18c"),r={props:["index","id"],components:{"tiny-pagination":o["a"]},data:()=>({tinhTrangHoSo:[{status:"trangThai1",statusName:"trang thai 1",count:"10"},{status:"trangThai2",statusName:"trang thai 2",count:"8"},{status:"trangThai3",statusName:"trang thai 3",count:"9"}],dangThuLy:[{dueCode:"trangThai1",dueName:"trang thai 1",count:"10"},{dueCode:"trangThai2",dueName:"trang thai 2",count:"8"},{dueCode:"trangThai3",dueName:"trang thai 3",count:"9"}],soTheoDoi:[{register:"trangThai1",registerName:"trang thai 1",count:"10"},{register:"trangThai2",registerName:"trang thai 2",count:"8"},{register:"trangThai3",registerName:"trang thai 3",count:"9"}],headers:[{text:"STT",align:"center",sortable:!1,class:"stt_column"},{text:"Mã hồ sơ",align:"center",sortable:!1,class:"mahoso_column"},{text:"Thủ tục",align:"center",sortable:!1,class:"thutuc_column"},{text:"Chủ hồ sơ",align:"center",sortable:!1,class:"chuhoso_column"},{text:"Địa chỉ",align:"center",sortable:!1,class:"diachi_column"},{text:"Ngày tiếp nhận",align:"center",sortable:!1,class:"ngaytiepnhan_column"},{text:"Ngày hẹn trả",align:"center",sortable:!1,class:"ngayhentra_column"},{text:"Ngày gửi",align:"center",sortable:!1,class:"ngaygui_column"},{text:"Ngày trả kết quả",align:"center",sortable:!1,class:"ngaytraketqua_column"}],statusSearch:null,dueSearch:null,registerSearch:null,traCuuDatas:[],traCuuDatasTotal:0,traCuuDatasPage:1,keywordSearch:""}),computed:{loading(){return this.$store.getters.loading}},watch:{},created(){var t=this;t.$nextTick(function(){let e=t.$router.history.current.query;e.hasOwnProperty("page")&&1!==e["page"]?t.traCuuDatasPage=e["page"]:t.traCuuDatasPage=1})},methods:{initData(t){var e=this;e.$store.dispatch("loadDossierCounting",{}).then(t=>{e.tinhTrangHoSo=t.hasOwnProperty("bystatus")?t.bystatus:[],e.dangThuLy=t.hasOwnProperty("bydue")?t.bydue:[],e.soTheoDoi=t.hasOwnProperty("byregister")?t.byregister:[]}),e.doLoadingDataHoSo()},goBack(){window.history.back()},quickSearch(){var t=this;t.doLoadingDataHoSo()},advancedSearch(){var t=this;t.doLoadingDataHoSo()},changeTinhTrangHoSo(t){var e=this;e.statusSearch=t.status},changeDangThuLy(t){var e=this;e.dueSearch=t.dueCode},changeSoTheoDoi(t){var e=this;e.registerSearch=t.register},paggingDataTraCuu(t){let e=this,i=e.$router.history.current,a=i.query,s="?";a["page"]="";for(let o in a)""!==a[o]&&"undefined"!==a[o]&&void 0!==a[o]&&(s+=o+"="+a[o]+"&");s+="page="+t.page,e.$router.push({path:i.path+s})},doLoadingDataHoSo(){let t=this,e=n["a"].history.current.query;console.log(e);let i={queryParams:"/o/rest/v2/dossiers",page:t.traCuuDatasPage,agency:t.govAgencyCode,service:t.serviceCode,template:t.templateNo,status:t.statusSearch,dueCode:t.dueSearch,register:t.registerSearch,keyword:t.keywordSearch};t.$store.dispatch("loadingDataHoSo",i).then(function(e){t.traCuuDatas=e.data,t.traCuuDatasTotal=e.total})}},filters:{dateTimeView(t){if(t){let e=new Date(t);return`${e.getDate().toString().padStart(2,"0")}/${(e.getMonth()+1).toString().padStart(2,"0")}/${e.getFullYear()} | ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`}return""}}},l=r,c=i("2877"),d=Object(c["a"])(l,a,s,!1,null,null,null);d.options.__file="TraCuuHoSo.vue";e["default"]=d.exports},3677:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-expansion-panel",{staticClass:"expansion-pl"},[i("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"1"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"background-triangle-small"},[i("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t.detailView?i("span",[t._v(t._s(t.currentHoSoLienThong?t.currentHoSoLienThong.dossierName:""))]):i("span",[t._v("Danh sách hồ sơ liên thông")])]),i("v-card",{},[i("v-card-text",{staticClass:"px-0 py-0"},[t.detailView?i("div",[i("v-expansion-panel",{staticClass:"expansion-pl ext__form",attrs:{expand:""}},[i("v-expansion-panel-content",{attrs:{value:!0}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"background-triangle-small"},[t._v(" I.")]),t._v("\n                  Tài liệu nộp     \n                ")]),i("thanh-phan-ho-so",{ref:"thanhphanhoso1",attrs:{onlyView:!0,id:"nm",partTypes:t.inputTypes}})],1)],1),i("v-expansion-panel",{staticClass:"expansion-pl ext__form",attrs:{expand:""}},[i("v-expansion-panel-content",{attrs:{value:!0}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"background-triangle-small"},[t._v(" II.")]),t._v("\n                  Tài liệu kết quả\n                ")]),i("thanh-phan-ho-so",{ref:"thanhphanhoso2",attrs:{onlyView:!0,id:"kq",partTypes:t.outputTypes}})],1)],1),i("v-flex",{staticClass:"mt-3 mb-2 text-right",attrs:{xs12:""}},[i("v-btn",{staticClass:"my-0 mx-0",attrs:{color:"primary"},on:{click:function(e){t.detailView=!1}}},[i("v-icon",{attrs:{size:"16"}},[t._v("undo")]),t._v("  \n                Quay lại danh sách \n              ")],1)],1)],1):i("v-data-table",{staticClass:"table-landing table-bordered",attrs:{headers:t.headers,items:t.listLienThong,"hide-actions":"","item-key":"dossierId"},scopedSlots:t._u([{key:"items",fn:function(e){return[i("tr",[i("td",{staticClass:"text-xs-center",attrs:{width:"5%"}},[i("span",[t._v(t._s(e.index+1))])]),i("td",{staticClass:"text-xs-left",attrs:{width:"30%"}},[t._v("\n                  "+t._s(e.item.dossierName)+"\n                ")]),i("td",{staticClass:"text-xs-left",attrs:{width:"10%"}},[t._v("\n                  "+t._s(e.item.dossierNo)+"\n                ")]),i("td",{staticClass:"text-xs-left",attrs:{width:"25%"}},[t._v("\n                  "+t._s(e.item.govAgencyName)+"\n                ")]),i("td",{staticClass:"text-xs-left",attrs:{width:"10%"}},[t._v("\n                  "+t._s(e.item.submitDate)+"\n                ")]),i("td",{staticClass:"text-xs-left",attrs:{width:"10%"}},[t._v("\n                  "+t._s(e.item.receiveDate)+"\n                ")]),i("td",{staticClass:"text-xs-left",attrs:{width:"10%"}},[t._v("\n                  "+t._s(e.item.dossierSubStatusText?e.item.dossierSubStatusText:e.item.dossierStatusText)+"\n                ")])])]}}])})],1)],1)],1)],1)],1)},s=[],o=(i("a18c"),i("76eb")),n=i("93f5"),r={components:{thongtinchunghoso:o["a"],"thanh-phan-ho-so":n["a"]},props:{listLienThong:{type:Array,default:()=>[]},dossierDetail:{type:Object,default:()=>{}}},data:()=>({loading:!1,inputTypes:[1,3],outputTypes:[2],detailView:!1,thongTinLienThong:{},hoSoLienThongItems:[],currentHoSoLienThong:"",lienthongPage:1,headers:[{text:"STT",align:"center",sortable:!1},{text:"Tên hồ sơ",align:"center",sortable:!1},{text:"Mã hồ sơ",align:"center",sortable:!1},{text:"Cơ quan liên thông",align:"center",sortable:!1},{text:"Ngày gửi",align:"center",sortable:!1},{text:"Ngày tiếp nhận",align:"center",sortable:!1},{text:"Trạng thái",align:"center",sortable:!1}]}),computed:{},created(){var t=this;t.$nextTick(function(){})},methods:{getDossierLogs(t){var e=this;let i={dossierId:t.dossierId,type:""};e.$store.dispatch("loadDossierLogs",i).then(e=>{e.length>0&&(t.dossierLog=e)}).catch(t=>{console.log(t)})},viewDetail(t){var e=this;console.log("item",t),e.detailView=!0,e.currentHoSoLienThong=t,setTimeout(function(){e.$refs.thanhphanhoso1&&e.$refs.thanhphanhoso1.initData(t),e.$refs.thanhphanhoso2&&e.$refs.thanhphanhoso2.initData(t)},300)},goBack(){window.history.back()}},filters:{dateTimeView(t){if(t){let e=new Date(t);return`${e.getDate().toString().padStart(2,"0")}/${(e.getMonth()+1).toString().padStart(2,"0")}/${e.getFullYear()}  ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`}return""}}},l=r,c=i("2877"),d=Object(c["a"])(l,a,s,!1,null,null,null);d.options.__file="HoSoLienThong.vue";e["a"]=d.exports},"38ec":function(t,e,i){"use strict";i.r(e);var a,s,o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",["NEW"===t.formCode||"UPDATE"===t.formCode||"COPY"===t.formCode?i("tiep-nhan-ho-so-detail",{ref:"tiepnhanhosodetail",attrs:{formCode:t.formCode}}):t._e()],1)},n=[],r=i("2877"),l={},c=Object(r["a"])(l,a,s,!1,null,null,null);c.options.__file="ChamQuaHanDetail.vue";var d=c.exports,h=i("aa35"),u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-expansion-panel",{staticClass:"expansion-p0",attrs:{expand:""}},[i("v-expansion-panel-content",{attrs:{value:!0}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"background-triangle-small"},[t._v("I. ")]),t._v("THÔNG TIN HỒ SƠ\n      ")]),i("thongtinchunghoso",{attrs:{dataDetail:t.thongTinLienThong}}),i("v-card",{staticClass:"bdt-0"},[i("v-card-text",{staticClass:"py-0"},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:"",sm2:""}},[i("v-subheader",{staticClass:"pl-0"},[t._v("Cơ quan liên thông: ")])],1),i("v-flex",{attrs:{xs12:"",sm6:""}},[i("v-select",{attrs:{items:t.govAgencyItems,"item-text":"itemName","item-value":"itemCode",placeholder:"Chọn cơ quan liên thông",autocomplete:"","return-object":"","hide-selected":""},model:{value:t.govAgency,callback:function(e){t.govAgency=e},expression:"govAgency"}})],1)],1)],1)],1)],1)],1),i("v-expansion-panel",{staticClass:"expansion-pl",staticStyle:{position:"relative"}},[i("v-expansion-panel-content",{attrs:{value:!0}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"background-triangle-small"},[t._v(" II.")]),t._v("\n        KẾT QUẢ LIÊN THÔNG\n      ")]),i("thanh-phan-ho-so",{ref:"thanhphanhoso"})],1)],1),i("v-card-actions",{staticClass:"mt-2",staticStyle:{float:"right"}},[i("v-btn",{attrs:{color:"primary",loading:t.loadingAction,disabled:t.loadingAction},on:{click:t.goBack}},[t._v("\n      Đã nhận kết quả\n      "),i("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])]),i("v-btn",{staticStyle:{height:"30px"},attrs:{color:"primary",loading:t.loadingAction,disabled:t.loadingAction},on:{click:t.postDossierLienThong}},[i("v-icon",[t._v("undo")]),t._v("  \n      Quay lại\n      "),i("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1)],1)},p=[],m=(i("a18c"),i("76eb")),g=i("93f5"),v={components:{thongtinchunghoso:m["a"],"thanh-phan-ho-so":g["a"]},data:()=>({thongTinLienThong:{},govAgencyItems:[],govAgency:"",loadingAction:!1}),computed:{loading(){return this.$store.getters.loading}},watch:{},created(){var t=this;t.$nextTick(function(){})},methods:{initData(t){var e=this;e.$store.dispatch("getDetailDossier",t).then(t=>{e.thongTinLienThong=t,e.$refs.thanhphanhoso.initData(t)}).catch(t=>{console.log(t)}),e.$store.dispatch("getGovAgency").then(t=>{console.log("govAgency",t),e.govAgencyItems=t}).catch(t=>{console.log(t)})},postDossierLienThong(){console.log("đã nhận kết quả")},goBack(){var t=this;let e=t.$router.history.current.params,i=t.$router.history.current.query;t.$router.push({path:"/danh-sach-ho-so/"+e.index,query:i})}},filters:{dateTimeView(t){if(t){let e=new Date(t);return`${e.getDate().toString().padStart(2,"0")}/${(e.getMonth()+1).toString().padStart(2,"0")}/${e.getFullYear()}  ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`}return""}}},_=v,f=Object(r["a"])(_,u,p,!1,null,null,null);f.options.__file="HoSoLienThongDetail.vue";var y=f.exports,C=i("5338"),T=i("bbba"),x={props:["id","formCode"],components:{"cham-qua-han-detail":d,"hoan-thien-bo-sung-ho-so-detail":h["default"],"ho-so-lien-thong-detail":y,"tiep-nhan-ho-so-detail":C["default"],"xem-chi-tiet-ho-so-detail-can-bo":T["default"],"chi-tiet-ho-so-lien-thong":y},data:()=>({initData:null,step:""}),beforeCreate(){var t=this;t.$nextTick(function(){let e=t.$router.history.current.query;e.hasOwnProperty("step")&&(t.step=e.step),t.$store.dispatch("loadInitResource").then(function(e){if(t.initData=e,null!==t.initData){let e=t.$refs.tiepnhanhosodetail,i=t.$refs.hoanthienbosunghosodetail,a=t.$refs.traketquadetail,s=t.$refs.chuyenphatketquadetail,o=t.$refs.xemchitiethosodetailcanbo,n=t.$refs.xemchitiethosotinhtrangxulylienthong,r=t.$refs.xemchitiethosolienthong;null!==e&&void 0!==e&&"undefined"!==e?t.$refs.tiepnhanhosodetail.initData(t.id):null!==i&&void 0!==i&&"undefined"!==i?t.$refs.hoanthienbosunghosodetail.initData(t.id):null!==a&&void 0!==a&&"undefined"!==a?t.$refs.traketquadetail.initData(t.id):null!==s&&void 0!==s&&"undefined"!==s?t.$refs.chuyenphatketquadetail.initData(t.id):null!==o&&void 0!==o&&"undefined"!==o?t.$refs.xemchitiethosodetailcanbo.initData(t.id):null!==n&&void 0!==n&&"undefined"!==n?t.$refs.xemchitiethosotinhtrangxulylienthong.initData(t.id):null!==r&&void 0!==r&&"undefined"!==r&&t.$refs.xemchitiethosolienthong.initData(t.id)}})})},watch:{$route:function(t,e){let i=this,a=t.query;a.hasOwnProperty("step")&&(i.step=a.step),i.$store.dispatch("loadInitResource").then(function(t){if(i.initData=t,null!==i.initData){let t=i.$refs.tiepnhanhosodetail,e=i.$refs.hoanthienbosunghosodetail,a=i.$refs.traketquadetail,s=i.$refs.chuyenphatketquadetail,o=i.$refs.xemchitiethosodetailcanbo,n=i.$refs.xemchitiethosotinhtrangxulylienthong,r=i.$refs.xemchitiethosolienthong;null!==t&&void 0!==t&&"undefined"!==t?i.$refs.tiepnhanhosodetail.initData(i.id):null!==e&&void 0!==e&&"undefined"!==e?i.$refs.hoanthienbosunghosodetail.initData(i.id):null!==a&&void 0!==a&&"undefined"!==a?i.$refs.traketquadetail.initData(i.id):null!==s&&void 0!==s&&"undefined"!==s?i.$refs.chuyenphatketquadetail.initData(i.id):null!==o&&void 0!==o&&"undefined"!==o?i.$refs.xemchitiethosodetailcanbo.initData(i.id):null!==n&&void 0!==n&&"undefined"!==n?i.$refs.xemchitiethosotinhtrangxulylienthong.initData(i.id):null!==r&&void 0!==r&&"undefined"!==r&&i.$refs.xemchitiethosolienthong.initData(i.id)}})}}},D=x,S=Object(r["a"])(D,o,n,!1,null,null,null);S.options.__file="DetailForward.vue";e["default"]=S.exports},4360:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return store});var vue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("a026"),vuex__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("2f62"),toastr__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("854a"),toastr__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(toastr__WEBPACK_IMPORTED_MODULE_2__),axios__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("bc3a"),axios__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_3__),_support_json__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("bbd0"),_support_json__WEBPACK_IMPORTED_MODULE_4___namespace=__webpack_require__.t("bbd0",1),jquery__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("1157"),jquery__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_5__),file_saver__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("21a6"),file_saver__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(file_saver__WEBPACK_IMPORTED_MODULE_6__);vue__WEBPACK_IMPORTED_MODULE_0__["default"].use(toastr__WEBPACK_IMPORTED_MODULE_2___default.a),vue__WEBPACK_IMPORTED_MODULE_0__["default"].use(vuex__WEBPACK_IMPORTED_MODULE_1__["a"]),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.options={closeButton:!0,timeOut:"15000"};const store=new vuex__WEBPACK_IMPORTED_MODULE_1__["a"].Store({state:{initData:_support_json__WEBPACK_IMPORTED_MODULE_4__.initData,endPointApi:"/o/rest/v2",loading:!1,loadingTable:!1,loadingDynamicBtn:!1,loadingGov:!1,validFileUpload:!1,fileTypeTPHS:["png","jpg","jpeg","pdf","docx","doc","xls","xlsx","txt","rtf"],fileTypePAYMENT:["png","jpg","jpeg"],error:null,user:{role:""},index:0,kysoSuccess:!1,activeGetCounter:!1,activeLoadingDataHoSo:!1,trangThaiHoSoList:null,listThuTucHanhChinh:null,checkInput:0,stepOverdueNextAction:"",usersNextAction:[],lePhi:{fee:"",feeNote:"",request:""},dossier:{applicantIdNo:"ccc"},dossierSelected:[],actionActive:{},serviceConfigObj:{},dossierTemplateName:"",thongTinChungHoSo:{serviceName:"",dossierTemplateName:"",serviceConfig:"",serviceOption:"",dossierNo:"",receiveDate:new Date,dueDate:(new Date).toString(),durationDate:"",dossierId:"",dossierIdCTN:"",dossierStatus:"",dossierStatusText:""},vnpostCodeItems:[],serviceConfigItems:null,serviceOptionItems:[],citys:null,cityVal:null,districtVal:null,wardVal:null,resultServices:null,dossierFiles:[],listHistoryProcessingItems:[],thanhPhanHoSo:{dossierTemplates:_support_json__WEBPACK_IMPORTED_MODULE_4__.dossierTemplates},dossierTemplates:_support_json__WEBPACK_IMPORTED_MODULE_4__.dossierTemplates,applicantId:"",applicantBussinessExit:!1,applicantNote:"",thongTinChuHoSo:{userType:!0,cityCode:"",districtCode:"",wardCode:"",applicantIdNo:"",contactEmail:"",contactName:"",address:"",applicantName:""},thongTinChuHoSoBindChuyenPhat:{cityCode:"",districtCode:"",wardCode:"",address:"",contactTelNo:""},thongTinNguoiNopHoSo:{sameUser:!0,delegateName:"",delegateCityCode:"",delegateAddress:"",delegateDistrictCode:"",delegateWardCode:"",delegateEmail:"",delegateTelNo:"",delegateIdNo:""},dichVuChuyenPhatKetQua:{viaPostal:0,postalServiceCode:"",postalAddress:"",postalCityCode:"",postalDistrictCode:"",postalWardCode:"",postalTelNo:""},viaPostal:0,data_phancong:[],dataCreateDossier:{},dataCreateFile:[],paymentProfile:"",paymentFileName:""},actions:{clearError({commit:t}){t("clearError")},loadInitResource({commit:t,state:e}){return new Promise((t,i)=>{null!==window.themeDisplay&&void 0!==window.themeDisplay?(e.initData["groupId"]=window.themeDisplay.getScopeGroupId(),e.initData["user"]={userName:window.themeDisplay.getUserName(),userEmail:"",userId:window.themeDisplay.getUserId()}):(e.initData["groupId"]=0,e.initData["user"]={userName:"",userEmail:"",userId:20164}),""===e["user"].role&&store.dispatch("getRoleUser").then(function(t){e["user"].role=t}).catch(function(t){e["user"].role=["default"],console.log(t)}),t(e.initData)})},getRoleUser({commit:t,state:e},i){return new Promise((t,i)=>{let a={headers:{groupId:window.themeDisplay?window.themeDisplay.getScopeGroupId():""}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.endPointApi+"/users/login",a).then(function(e){let i=e.data;if(i&&i.length>0){let e=[];for(let t in i)i[t]["role"]&&e.push(i[t]["role"]);console.log("roles",e),t(e)}else t(["default"])}).catch(function(t){console.log(t),i("default")})})},loadMenuConfigToDo({commit:commit,state:state}){return commit("setLoadingDynamicBtn",!0),null===state.trangThaiHoSoList?new Promise((resolve,reject)=>{store.dispatch("loadInitResource").then(function(result){let param={headers:{groupId:state.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(state.initData.menuConfigToDo,param).then(function(response){let serializable=response.data,menuData=[],index=0;for(let key in serializable.data){let current=serializable.data[key],menuDetail={index:index,active:!1,title:current["menuName"],id:current["menuGroup"],action:"description",action_active:"play_arrow",counter:-1,menuType:parseInt(current["menuType"]),queryParams:current["queryParams"]};index+=1;let tableConfig=current["tableConfig"],buttonConfig=current["buttonConfig"];if(""!==tableConfig&&void 0!==tableConfig&&"undefined"!==tableConfig&&-1!==String(tableConfig).indexOf("{")&&-1!==String(tableConfig).indexOf("}")&&(menuDetail["tableConfig"]=eval("("+tableConfig+")")),""!==buttonConfig&&void 0!==buttonConfig&&"undefined"!==buttonConfig&&-1!==String(buttonConfig).indexOf("{")&&-1!==String(buttonConfig).indexOf("}")&&(menuDetail["buttonConfig"]=eval("("+buttonConfig+")")),current.hasOwnProperty("steps"))if(current.steps.length>1)menuDetail["items"]=current.steps;else{let t=[];t.push(current.steps),menuDetail["items"]=t}menuData.push(menuDetail)}commit("setLoadingDynamicBtn",!1),commit("setMenuConfigToDo",menuData),resolve(menuData)}).catch(function(t){commit("setLoadingDynamicBtn",!1),console.log(t),reject(t)})})}):new Promise((t,e)=>{commit("setLoadingDynamicBtn",!1),t(state.trangThaiHoSoList)})},loadListThuTucHanhChinh({commit:t,state:e}){return null===e.listThuTucHanhChinh?new Promise((i,a)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:e.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.initData.getListThuTucHanhChinh,o).then(function(e){let a=e.data,s=Array.from(a.data);t("setListThuTucHanhChinh",s),i(s)}).catch(function(t){console.log(t),a(t)})})}):new Promise((t,i)=>{let a=Array.from(e.listThuTucHanhChinh);t(a)})},loadingDataHoSo({commit:t,state:e},i){return t("setLoadingTable",!0),new Promise((a,s)=>{store.dispatch("loadInitResource").then(function(o){let n={start:15*i.page-15,end:15*i.page,agency:i.agency?i.agency:"",service:i.service?i.service:"",template:i.template?i.template:"",status:i.status?i.status:"",register:i.register?i.register:"",keyword:i.keyword?i.keyword:"",domain:i.domain?i.domain:"",substatus:i.substatus?i.substatus:"",year:i.year?i.year:0,month:i.month?i.month:0,day:i.day?i.day:0,top:i.top?i.top:"",dossierNo:i.dossierNo?i.dossierNo:""};i["originality"]&&(n["originality"]=i.originality);let r={headers:{groupId:e.initData.groupId},params:n};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(i.queryParams,r).then(function(e){let i=e.data;t("setLoadingTable",!1),t("setUserNextAction",[]),a(i)}).catch(function(e){t("setLoadingTable",!1),t("setUserNextAction",[]),console.log(e),s(e)})})})},loadingCounterNotStep({commit:t,state:e},i){return new Promise((t,a)=>{store.dispatch("loadInitResource").then(function(s){let o={agency:i.agency?i.agency:"",service:i.service?i.service:"",template:i.template?i.template:"",status:i.status?i.status:"",register:i.register?i.register:"",keyword:i.keyword?i.keyword:"",domain:i.domain?i.domain:"",substatus:i.substatus?i.substatus:"",year:i.year?i.year:0,month:i.month?i.month:0,day:i.day?i.day:0,top:i.top?i.top:"",dossierNo:i.dossierNo?i.dossierNo:""};i["originality"]&&(o["originality"]=i.originality);let n={headers:{groupId:e.initData.groupId},params:o};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(i.queryParams,n).then(function(e){let i=e.data;t(i)}).catch(function(t){a(t)})})})},loadingCounterHoSo({commit:t,state:e},i){return new Promise((t,a)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:e.initData.groupId}};i.hasOwnProperty("originality")&&1===i.originality&&(o["params"]={owner:!0}),axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.initData.counterMenuStep,o).then(function(e){let i=e.data;t(i)}).catch(function(t){console.log(t),a(t)})})})},loadDossierSelected({commit:t,state:e},i){t("dossierSelected",i)},loadActionActive({commit:t,state:e},i){t("actionActive",i)},loadDictItems({commit:t,state:e},i){return new Promise((a,s)=>{store.dispatch("loadInitResource").then(function(o){let n={headers:{groupId:e.initData.groupId},params:{parent:i.parent}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.initData.regionApi+"/"+i.collectionCode+"/dictitems",n).then(function(e){let s=e.data;"ADMINISTRATIVE_REGION"===i.collectionCode&&0===i.level&&t("setCitys",s.data),a(e.data)},t=>{s(t)})})})},resetThongTinChungHoSo({commit:t}){let e={serviceConfig:{},serviceOption:"",receiveDate:new Date,dueDate:(new Date).toString(),durationDate:"",dossierId:"",dossierNo:"",govAgencyName:"",dossierIdCTN:"",processBlock:"",processUnit:"",dossierStatus:"",dossierStatusText:"",submitDate:""};t("setThongTinChungHoSo",e)},resetThongTinChuHoSo({commit:t}){let e={userType:!0,cityCode:25,districtCode:"",wardCode:"",applicantIdNo:"",contactEmail:"",contactName:"",address:"",applicantName:""};t("setThongTinChuHoSo",e)},resetThongTinNguoiNopHoSo({commit:t}){let e={sameUser:"",delegateName:"",delegateCityCode:25,delegateAddress:"",delegateDistrictCode:"",delegateWardCode:"",delegateEmail:"",delegateTelNo:"",delegateIdNo:""};t("setThongTinNguoiNopHoSo",e)},resetThanhPhanHoSo({commit:t}){t("setDossierTemplates",[])},loadDossierMark({commit:t,state:e},i){return new Promise((t,a)=>{let s={headers:{groupId:e.initData.groupId},params:{type:1}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.initData.dossierApi+"/"+i.dossierId+"/marks",s).then(function(e){let i=e.data;i.data?t(i.data):t([])},t=>{a(t)})})},loadDossierTemplates({commit:t,state:e},i){return new Promise((t,a)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:e.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.initData.dossierTemplatesApi+"/"+i.dossierTemplateNo,o).then(function(e){let i=e.data,a=function(t){try{return JSON.parse(t),JSON.parse(t)}catch(e){let i={tip:t,maxSize:10,extensions:"pdf,doc,docx,xls,xlsx,png,jpg,jpeg,txt,rtf"};return i}};if(i&&i["dossierParts"])for(let t in i["dossierParts"]){let e=i["dossierParts"][t]["partTip"];i["dossierParts"][t]["partTip"]=a(e)}t(i.dossierParts)},t=>{a(t)})})})},loadAllDossierTemplates({commit:t,state:e},i){return new Promise((t,a)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:e.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.initData.dossierTemplatesApi+"/"+i.dossierTemplateNo,o).then(function(e){let i=e.data,a=function(t){try{return JSON.parse(t),JSON.parse(t)}catch(e){let i={tip:t,maxSize:10,extensions:"pdf,doc,docx,xls,xlsx,png,jpg,jpeg,txt,rtf"};return i}};if(i&&i["dossierParts"])for(let t in i["dossierParts"]){let e=i["dossierParts"][t]["partTip"];i["dossierParts"][t]["partTip"]=a(e)}t(i.dossierParts)},t=>{a(t)})})})},deleteAttackFiles({commit:t,state:e,dispatch:i},a){return new Promise((t,i)=>{let s={headers:{groupId:e.initData.groupId}};console.log("data -delete-----",a),console.log("data-- dossier file-------",e.dossierFiles);var o=new URLSearchParams;a.hasForm||a.eform?axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(e.initData.dossierApi+"/"+a.dossierId+"/files/"+a.referenceUid+"/resetformdata",o,s).then(function(e){console.log("success"),t(e)}).catch(function(t){console.log(t),i(t)}):axios__WEBPACK_IMPORTED_MODULE_3___default.a.delete(e.initData.dossierApi+"/"+a.dossierId+"/files/"+a.fileTemplateNo+"/all",s).then(function(e){console.log("success!"),t(e)}).catch(function(t){console.log(t),i(t)})})},deleteDossierFile({commit:t,state:e},i){return new Promise((t,a)=>{let s={headers:{groupId:e.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.delete(e.initData.dossierApi+"/"+i.dossierId+"/files/"+i.referenceUid,s).then(function(e){console.log("success!"),t(e)}).catch(function(t){console.log(t),a(t)})})},resetCounterTemplate({commit:t,state:e},i){e.dossierTemplates.forEach(t=>{t.partNo===i.partNo&&(t.hasForm?t.count=1:t.count=0)})},deleteSingleFile({commit:t,state:e},i){let a={headers:{groupId:e.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.delete(e.initData.dossierApi+"/"+e.thonTinChungHoSo.dossierId+"/files/"+i.referenceUid,a).then(function(t){console.log("success")}).catch(function(t){console.log(t)})},uploadSingleFile({commit:t,state:e},i){return new Promise((t,a)=>{let s=jquery__WEBPACK_IMPORTED_MODULE_5___default()("#file"+i.partNo)[0].files,o=s[0],n=o["name"];o["name"]&&(n=o["name"].replace(/\%/g,""),n=n.replace(/\//g,""),n=n.replace(/\\/g,""));let r=new FormData;3===i.partType?(i["displayName"]&&(n=i["displayName"].replace(/\%/g,""),n=n.replace(/\//g,""),n=n.replace(/\\/g,"")),r.append("displayName",n)):r.append("displayName",n),r.append("fileType",o.type),r.append("fileSize",o.size),r.append("isSync","false"),r.append("file",o,n),r.append("dossierPartNo",i.partNo),r.append("dossierTemplateNo",i.dossierTemplateNo),r.append("fileTemplateNo",i.fileTemplateNo),r.append("formData",""),r.append("referenceUid","");let l={partTip:i.partTip,file:o};store.dispatch("validFileUpload",l),o&&e.validFileUpload?axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(e.initData.dossierApi+"/"+i.dossierId+"/files",r,{headers:{groupId:e.initData.groupId,"Content-Type":"multipart/form-data"}}).then(function(e){t(e.data),console.log("upload file success!")}).catch(function(t){console.log(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),a(t)}):a("error")})},uploadSingleOtherFile({commit:t,state:e},i){return new Promise((t,a)=>{let s=new FormData,o=i["displayName"];i["displayName"]&&(o=i["displayName"].replace(/\%/g,""),o=o.replace(/\//g,""),o=o.replace(/\\/g,"")),s.append("displayName",i.displayName?o:""),s.append("dossierPartNo",i.partNo?i.partNo:""),s.append("file",""),s.append("fileType",""),s.append("fileSize",""),s.append("isSync","false"),s.append("dossierTemplateNo",""),s.append("fileTemplateNo",""),s.append("formData",""),s.append("referenceUid",""),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(e.initData.dossierApi+"/"+i.dossierId+"/files",s,{headers:{groupId:e.initData.groupId,"Content-Type":"multipart/form-data"}}).then(function(e){t(e.data),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.success("Yêu cầu của bạn được thực hiện thành công."),console.log("upload file success!")}).catch(function(t){console.log(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),a(t)})})},uploadPaymentFile({commit:t,state:e},i){return new Promise((t,a)=>{let s=jquery__WEBPACK_IMPORTED_MODULE_5___default()("#"+i.selector)[0].files,o=s[0],n=o["name"];o["name"]&&(n=o["name"].replace(/\%/g,""),n=n.replace(/\//g,""),n=n.replace(/\\/g,""));let r=new FormData;r.append("file",o,n);let l={partTip:i["partTip"],file:o};store.dispatch("validFileUpload",l),o&&e.validFileUpload?axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(e.initData.dossierApi+"/"+i.dossierId+"/payments/"+i.referenceUid+"/confirmfile",r,{headers:{groupId:e.initData.groupId,"Content-Type":"multipart/form-data"}}).then(function(e){t(e.data),console.log("Tải file lên thành công")}).catch(function(t){console.log(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Tải file lên thất bại"),a(t)}):a("error")})},getDetailDossier({commit:t,state:e},i){return new Promise((a,s)=>{store.dispatch("loadInitResource").then(function(o){let n={headers:{groupId:e.initData.groupId}};console.log("run"),i>0?(t("setLoading",!0),axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.initData.postDossierApi+"/"+i,n).then(function(e){let i={delegateName:e.data.delegateName,delegateCityCode:e.data.delegateCityCode,delegateAddress:e.data.delegateAddress,delegateDistrictCode:e.data.delegateDistrictCode,delegateWardCode:e.data.delegateWardCode,delegateEmail:e.data.delegateEmail,delegateTelNo:e.data.delegateTelNo,delegateIdNo:e.data.delegateIdNo};a(e.data),t("setLoading",!1),t("setDossier",e.data),t("setThongTinChuHoSo",e.data),t("setLePhi",e.data),t("setThongTinNguoiNopHoSo",i),t("setThongTinChungHoSo",e.data),t("setDichVuChuyenPhatKetQua",e.data)},e=>{t("setLoading",!1),s(e)}).catch(function(t){console.log(t)})):a()})})},getGovAgency({commit:t,state:e},i){return new Promise((t,i)=>{let a={headers:{groupId:e.initData.groupId},params:{sort:"sibling"}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.initData.regionApi+"/GOVERMENT_AGENCY/dictitems",a).then(function(e){t(e.data.data)}).catch(function(t){console.log(t)})})},loadDossierFiles({commit:t,state:e},i){return new Promise((a,s)=>{let o={headers:{groupId:e.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.initData.dossierApi+"/"+i+"/files",o).then(function(e){t("setDossierFiles",e.data.data),e.data.data?a(e.data.data):a([])}).catch(function(t){console.log(t),s(t)})})},getPaymentFiles({commit:t,state:e},i){return new Promise((a,s)=>{let o={headers:{groupId:e.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.initData.dossierApi+"/"+i.dossierId+"/payments/"+i.referenceUid+"/confirmfile",o).then(function(e){200===e.status||"200"===e.status?a("hasPayment"):a(""),e.headers["content-disposition"]?t("setPaymentFileName",e.headers["content-disposition"].split(";")[1].split("=")[1].replace(/\"/g,"")):t("setPaymentFileName","file báo thanh toán")}).catch(function(t){console.log(t),s(t)})})},putPayments({commit:t,state:e},i){return new Promise((t,a)=>{let s={headers:{groupId:e.initData.groupId}},o=new URLSearchParams;axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(e.initData.dossierApi+"/keypay/"+i.referenceUid+"/"+i.referenceUid,o,s).then(function(i){store.dispatch("getActiveGetCounter",!e.activeGetCounter),i.data?t(i.data):t([])}).catch(function(t){console.log(t),a(t)})})},viewFile({commit:t,state:e,dispatch:i},a){return new Promise((t,i)=>{let s={headers:{groupId:e.initData.groupId},responseType:"blob"};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.initData.dossierApi+"/"+a.dossierId+"/files/"+a.referenceUid,s).then(function(e){var i=window.URL.createObjectURL(e.data);t(i)}).catch(function(t){console.log(t)})})},viewPaymentFile({commit:t,state:e,dispatch:i},a){return new Promise((t,i)=>{let s={headers:{groupId:e.initData.groupId},responseType:"blob"};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.initData.dossierApi+"/"+a.dossierId+"/payments/"+a.referenceUid+"/confirmfile",s).then(function(e){var i=window.URL.createObjectURL(e.data);t(i)}).catch(function(t){console.log(t)})})},viewDocument({commit:t,state:e,dispatch:i},a){return new Promise((t,i)=>{let s={headers:{groupId:e.initData.groupId},responseType:"blob"};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.initData.dossierApi+"/"+a.dossierId+"/documents/"+a.referenceUid,s).then(function(e){var i=window.URL.createObjectURL(e.data);t(i)}).catch(function(t){console.log(t)})})},postDossier({commit:t,state:e},i){return console.log("data-------------",i),new Promise((a,s)=>{t("setLoading",!0);let o={headers:{groupId:e.initData.groupId,Accept:"application/json","Content-Type":"application/x-www-form-urlencoded",cps_auth:e.initData.cps_auth}};var n=new URLSearchParams;n.append("serviceCode",i.serviceCode),n.append("govAgencyCode",i.govAgencyCode),n.append("dossierTemplateNo",i.templateNo),n.append("originality",i.originality),console.log("dataPostdossier-------------",n),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(e.initData.postDossierApi,n,o).then(function(i){i.data.serviceConfig=e.serviceConfigObj,t("setLoading",!1),t("setDossier",i.data),t("setThongTinChuHoSo",i.data),t("setLePhi",i.data),t("setThongTinChungHoSo",i.data),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.success("Yêu cầu của bạn được thực hiện thành công."),a(i.data)}).catch(function(e){s(e),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),t("setLoading",!1)})})},doCopy({commit:t,state:e},i){return new Promise((a,s)=>{t("setLoading",!0);let o={headers:{groupId:e.initData.groupId,Accept:"application/json"}};var n=new URLSearchParams;axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(e.initData.postDossierApi+"/"+i.dossierId+"/cloning",n,o).then(function(t){toastr__WEBPACK_IMPORTED_MODULE_2___default.a.success("Yêu cầu của bạn được thực hiện thành công."),a(t.data)}).catch(function(e){s(e),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),t("setLoading",!1)})})},doCancel({commit:t,state:e},i){return new Promise((a,s)=>{t("setLoading",!0);let o={headers:{groupId:e.initData.groupId,Accept:"application/json"}};var n=new URLSearchParams;axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(e.initData.postDossierApi+"/"+i.dossierId+"/cancel",n,o).then(function(t){toastr__WEBPACK_IMPORTED_MODULE_2___default.a.success("Yêu cầu của bạn được thực hiện thành công."),a(t.data)}).catch(function(e){s(e),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),t("setLoading",!1)})})},putDossier({commit:t,state:e},i){return new Promise((a,s)=>{t("setLoading",!1);let o={headers:{groupId:e.initData.groupId,Accept:"application/json","Content-Type":"application/x-www-form-urlencoded",cps_auth:e.initData.cps_auth}};var n="";n=i.userType?"citizen":"business";let r=!1;null!==i["sameUser"]&&void 0!==i["sameUser"]&&"undefined"!==i["sameUser"]&&(r=i["sameUser"]);var l=new URLSearchParams;l.append("applicantName",i.applicantName),l.append("dossierNo",i.dossierNo?i.dossierNo:""),l.append("applicantIdType",n),l.append("applicantIdNo",i.applicantIdNo),l.append("address",i.address),l.append("cityCode",i.cityCode),l.append("districtCode",i.districtCode),l.append("wardCode",i.wardCode),l.append("contactTelNo",i.contactTelNo),l.append("contactEmail",i.contactEmail),l.append("delegateName",i.delegateName),l.append("delegateIdNo",i.delegateIdNo),l.append("delegateTelNo",i.delegateTelNo),l.append("delegateEmail",i.delegateEmail),l.append("delegateAddress",i.delegateAddress),l.append("delegateCityCode",i.delegateCityCode),l.append("delegateDistrictCode",i.delegateDistrictCode),l.append("delegateWardCode",i.delegateWardCode),l.append("applicantNote",e.applicantNote),1!==i.originality&&l.append("dossierName",i.dossierName),l.append("isSameAsApplicant",r),i.editable&&l.append("dueDate",i.dueDate?i.dueDate:""),i.viaPostal&&(l.append("viaPostal",i.viaPostal),l.append("postalServiceCode",i.postalServiceCode),l.append("postalAddress",i.postalAddress),l.append("postalCityCode",i.postalCityCode),l.append("postalTelNo",i.postalTelNo)),l.append("sampleCount",i.sampleCount?i.sampleCount:0),axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(e.initData.postDossierApi+"/"+i.dossierId,l,o).then(function(e){a(e.data),t("setLoading",!1),t("setDossier",e.data),t("setThongTinChuHoSo",e.data),t("setThongTinChungHoSo",e.data),t("setLePhi",e.data),t("setDichVuChuyenPhatKetQua",e.data)}).catch(t=>{s(t)})})},updateApplicantNote({commit:t,state:e},i){return new Promise((t,a)=>{let s={headers:{groupId:e.initData.groupId,Accept:"application/json","Content-Type":"application/x-www-form-urlencoded",cps_auth:e.initData.cps_auth}};var o=new URLSearchParams;o.append("applicantNote",e.applicantNote),axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(e.initData.postDossierApi+"/"+i.dossierId,o,s).then(function(e){t(e.data)}).catch(t=>{a(t)})})},getApplicantInfos({commit:t,state:e},i){return new Promise((t,a)=>{let s={headers:{groupId:e.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.endPointApi+"/applicants/ngsp/"+i.applicantIdNo,s).then(function(e){e.data&&e.data["Data"]&&t(e.data["Data"])}).catch(function(t){console.log(t),a(t)})})},checkApplicantInfos({commit:t,state:e},i){return new Promise((t,a)=>{let s={headers:{groupId:e.initData.groupId?e.initData.groupId:"",Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}};var o=e.endPointApi+"/applicants/ngsp/verify",n=new URLSearchParams;n.append("applicantIdNo",i.applicantIdNo?i.applicantIdNo:""),n.append("applicantName",i.applicantName?i.applicantName:""),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(o,n,s).then(e=>{t(e.data)}).catch(t=>{a(t)})})},getDossierFilesApplicants({commit:t,state:e},i){return new Promise((t,a)=>{let s={headers:{groupId:e.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.initData.dossierApi+"/"+i.dossierId+"/applicant/"+i.applicantIdNo+"/files/"+i.fileTemplateNo+"/search",s).then(function(e){e.data.data?t(e.data.data):t([])}).catch(function(t){console.log(t),a(t)})})},putDuedateDossier({commit:t,state:e},i){return new Promise((a,s)=>{t("setLoading",!1);let o={headers:{groupId:e.initData.groupId,Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}};var n=new URLSearchParams;n.append("dueDate",i),axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(e.initData.postDossierApi+"/"+e.thongTinChungHoSo.dossierId,n,o).then(function(t){a(t.data)}).catch(function(t){s(t)})})},submitDossier({commit:t,state:e},i){return new Promise((t,i)=>{let a={headers:{groupId:e.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.initData.dossierApi+"/"+e.thongTinChungHoSo.dossierId+"/submitting",a).then(function(e){t(e.data)}).catch(function(t){i(t),console.log(t)})})},postDossierMark({commit:t,state:e},i){return new Promise((t,a)=>{let s={headers:{groupId:e.initData.groupId,Accept:"application/json","Content-Type":"application/x-www-form-urlencoded",cps_auth:e.initData.cps_auth}};var o=new URLSearchParams;1===i["checkInput"]?(void 0!==i.fileCheck&&"undefined"!==i.fileCheck&&null!==i.fileCheck&&o.append("fileCheck",i.fileCheck),void 0!==i.fileComment&&"undefined"!==i.fileComment&&null!==i.fileComment&&o.append("fileComment",i.fileComment)):void 0!==i.fileMark&&"undefined"!==i.fileMark&&null!==i.fileMark&&o.append("fileMark",i.fileMark);let n=e.initData.dossierApi+"/"+i.dossierId+"/marks/"+i.partNo;axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(n,o,s).then(function(e){t(e.data)}).catch(function(t){a(t)})})},postAction({commit:t,state:e},i){return new Promise((a,s)=>{t("setLoading",!0);let o={headers:{groupId:e.initData.groupId}};var n=new URLSearchParams;n.append("actionCode",i.actionCode?i.actionCode:""),n.append("actionNote",i.actionNote?i.actionNote:""),n.append("actionUser",i.actionUser?i.actionUser:""),n.append("payload",i.payload?JSON.stringify(i.payload):""),n.append("security",i.security?i.security:""),n.append("assignUsers",i.assignUsers?JSON.stringify(i.assignUsers):""),n.append("payment",i.payment?JSON.stringify(i.payment):""),n.append("createDossiers",i.createDossiers?i.createDossiers:"");let r=e.initData.dossierApi+"/"+i.dossierId+"/actions";axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(r,n,o).then(function(i){a(i.data),t("setLoading",!1),store.dispatch("getActiveGetCounter",!e.activeGetCounter)}).catch(function(t){s(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),store.commit("setLoading",!1)})})},getUserInfoFromApplicantIdNo({commit:t,state:e},i){return new Promise((t,a)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:e.initData.groupId},params:{start:0,end:5,idNo:i.idNo}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.initData.applicantApi,o).then(function(e){t(e.data.data)}).catch(function(t){console.log(t),a(t)})})})},loadAlpcaForm({commit:commit,state:state,dispatch:dispatch},data){console.log("alpaca");let id=data["id"]?data["id"]:"nm";var formScript,formData;window.$("#formAlpaca"+data.dossierPartNo+id).empty(),formScript=data.formScript?eval("("+data.formScript+")"):{},formData=data.formData?eval("("+data.formData+")"):{},formScript.data=formData,window.$("#formAlpaca"+data.dossierPartNo+id).alpaca(formScript)},putAlpacaForm({commit:t,state:e,dispatch:i},a){return new Promise((t,i)=>{let s={headers:{groupId:e.initData.groupId,cps_auth:e.initData.cps_auth}},o=a["id"]?a["id"]:"nm";try{var n=window.$("#formAlpaca"+a.dossierPartNo+o).alpaca("get"),r=n.getValue();let h=window.$("#formAlpaca"+a.dossierPartNo+o).alpaca("get").childrenByPropertyId;if(h)for(var l in h)if(h[l].isRequired()&&""===h[l].getValue())return void toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error(h[l].options.placeholder?h[l].options.placeholder+" là trường dữ liệu bắt buộc":h[l].options["name"]+" là trường dữ liệu bắt buộc");var c=new URLSearchParams;c.append("formdata",JSON.stringify(r));let u=e.initData.dossierApi+"/"+a.dossierId+"/files/"+a.referenceUid+"/formdata";axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(u,c,s).then(function(e){t(e.data)}).catch(function(t){i(a)})}catch(d){console.log(d),i(a)}})},rollBack({state:t,commit:e},i){return new Promise((e,a)=>{let s={headers:{groupId:t.initData.groupId}};try{var o=new URLSearchParams;let r=t.initData.dossierApi+"/"+i.dossierId+"/rollback";axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(r,o,s).then(function(i){e(i.data),store.dispatch("getActiveGetCounter",!t.activeGetCounter)}).catch(function(t){a(i)})}catch(n){console.log(n),a(i)}})},goToStep({state:t,commit:e},i){return new Promise((e,a)=>{let s={headers:{groupId:t.initData.groupId}};try{var o=new URLSearchParams;let r=t.initData.dossierApi+"/"+i.dossierId+"/goto/"+i.stepCode;axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(r,o,s).then(function(i){e(i.data),store.dispatch("getActiveGetCounter",!t.activeGetCounter)}).catch(function(t){a(i)})}catch(n){console.log(n),a(i)}})},postEform({commit:t,state:e},i){return new Promise((t,a)=>{let s={headers:{groupId:e.initData.groupId,"Content-Type":"multipart/form-data"}};try{let d=i["id"]?i["id"]:"nm";var o=new FormData,n=window.$("#formAlpaca"+i.partNo+d).alpaca("get"),r=n.getValue();o.append("formData",JSON.stringify(r)),o.append("file","");let h=window.$("#formAlpaca"+i.partNo+d).alpaca("get").childrenByPropertyId;if(h)for(var l in h)if(h[l].isRequired()&&""===h[l].getValue())return void toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error(h[l].options.placeholder?h[l].options.placeholder+" là trường dữ liệu bắt buộc":h[l].options["name"]+" là trường dữ liệu bắt buộc");let u=e.initData.dossierApi+"/"+i.dossierId+"/eforms/"+i.partNo;axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(u,o,s).then(function(e){t(e.data)}).catch(function(t){a(i)})}catch(c){console.log(c),a(i)}})},postEformEsignature({commit:t,state:e},i){return new Promise((t,a)=>{let s={headers:{groupId:e.initData.groupId,"Content-Type":"multipart/form-data"}};try{var o=new FormData;o.append("formData",JSON.stringify(JSON.parse(i.formData))),o.append("file","");let r=e.initData.dossierApi+"/"+i.dossierId+"/eforms/"+i.partNo;axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(r,o,s).then(function(e){t(e.data)}).catch(function(t){a(i)})}catch(n){console.log(n),a(i)}})},postVNPOST({commit:t,state:e},i){return new Promise((a,s)=>{t("setLoading",!0);let o={headers:{groupId:e.initData.groupId,Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}};var n=new URLSearchParams;n.append("customerCode","ccth"),n.append("orderNumber",e.thongTinChungHoSo.dossierId),n.append("senderProvince",i.senderProvince),n.append("senderAddress",i.senderAddress),n.append("senderName",i.senderName),n.append("senderTel",i.senderTel),n.append("receiverName",i.receiverName),n.append("receiverAddress",i.receiverAddress),n.append("receiverTel",i.receiverTel),n.append("receiverProvince",i.receiverProvince);let r="/o/rest/v2/postal/vnpost";axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(r,n,o).then(function(e){a(e.data),t("setLoading",!1)}).catch(function(e){s(e),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),t("setLoading",!1)})})},getDossierTemplateEdit({commit:t,state:e}){return new Promise((t,i)=>{var a=e.dossierTemplates,s=[];try{0===e.dossierFiles.length?dispatch("loadDossierFiles").then(e=>{e.forEach(t=>{a.forEach(e=>{t.dossierPartNo===e.partNo&&s.push({partName:e.partName,partNo:e.partNo,displayName:t.displayName,dossierFileId:t.dossierFileId,partType:e.partType,hasForm:e.hasForm,fileType:t.fileType,referenceUid:t.referenceUid})})}),t(s)}).catch(e=>{console.log(e),t([])}):e.dossierFiles.forEach(t=>{a.forEach(e=>{t.dossierPartNo===e.partNo&&s.push({partName:e.partName,partNo:e.partNo,displayName:t.displayName,dossierFileId:t.dossierFileId,partType:e.partType,hasForm:e.hasForm,fileType:t.fileType,referenceUid:t.referenceUid})})}),t(s),console.log(s)}catch(o){console.log(o),i([])}})},loadPlugin({commit:commit,state:state},item){return new Promise((resolve,reject)=>{item.plugin=!0;var urlPluginFormData=state.initData.dossierApi+"/"+item.dossierId+"/plugins/"+item.processPluginId+"/formdata",urlPluginFormScript=state.initData.dossierApi+"/"+item.dossierId+"/plugins/"+item.processPluginId+"/formscript",config_plugins={headers:{groupId:state.initData.groupId,Token:window.Liferay?window.Liferay.authToken:""},dataType:"text"};axios__WEBPACK_IMPORTED_MODULE_3___default.a.all([axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(urlPluginFormScript,config_plugins),axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(urlPluginFormData,config_plugins)]).then(axios__WEBPACK_IMPORTED_MODULE_3___default.a.spread(function(urlResponesFormScript,urlResponesFormData){var responseScript=urlResponesFormScript.data,responseData=urlResponesFormData.data;if(console.log("responseScript==============",responseScript),item.plugin=!0,-1!==responseScript.indexOf("#preview@pdf")){console.log("view pdf");var url=state.initData.dossierApi+"/"+item.dossierId+"/plugins/"+item.processPluginId+"/preview",config_blob={headers:{groupId:state.initData.groupId},responseType:"blob"};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(url,config_blob).then(function(t){var e=window.URL.createObjectURL(t.data);item.pdf=!0,item.url=e,item.no_pdf="",resolve(item)}).catch(function(t){console.log(t),item.pdf=!0,item.url="",item.no_pdf="Tài liệu đính kèm không tồn tại!",resolve(item)})}if(-1!==responseScript.indexOf("#preview@html")){console.log("view html");var config_view={headers:{groupId:state.initData.groupId},dataType:"json"};item.html=!0,item.no_html="";var url=state.initData.dossierApi+"/"+item.dossierId+"/plugins/"+item.processPluginId+"/previewhtml";axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(url,config_view).then(function(response){item.no_html="",vm.stepModel=item;var serializable=response.data,partNo=serializable.partNo,dossierFileId=serializable.dossierFileId,formReport=eval("("+serializable.formReport+")"),formData=eval("("+serializable.formData+")");console.log("formReport======",formReport),console.log("formData======",formData),formReport.data=formData,console.log("formReport_____FINAL=======",formReport),window.$("#alpacajs_form_plugin").alpaca(formReport),window.$(".dossierFilePartNo").val(""),window.$(".dossierFilePartNo").attr("id","dossierFileId"+partNo),window.$(".dossierFilePartNo").val(dossierFileId)}).catch(function(t){console.log(t),item.html=!0,item.no_html="Tài liệu đính kèm không tồn tại!",resolve(item)})}})).catch(function(t){console.log(t),reject(t)})})},getActiveGetCounter({commit:t,state:e},i){t("setActiveGetCounter",i)},getActiveLoadingDataHoSo({commit:t,state:e},i){t("setActiveLoadingDataHoSo",i)},setDefaultCityCode({commit:t,state:e},i){e.thongTinChuHoSo.cityCode=i},getListHistoryProcessingItems({commit:t,state:e},i){return new Promise((t,a)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:e.initData.groupId}};var n=[];axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.initData.dossierlogsApi+"/"+i.dossierId+"/logs",o).then(function(e){var i=e.data;for(var a in i.data)"PROCESS_TYPE"===i.data[a].notificationType&&n.push(i.data[a]);t(n)}).catch(function(t){a(t)})})})},loadDossierLogs({commit:t,state:e},i){return new Promise((t,a)=>{let s={headers:{groupId:e.initData.groupId},params:{notificationType:i.type}},o=e.initData.dossierApi+"/"+i.dossierId+"/logs";axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(o,s).then(function(e){t(e.data.data)}).catch(function(t){a(t)})})},loadPlugins({commit:t,state:e},i){return new Promise((t,a)=>{let s={headers:{groupId:e.initData.groupId}},o=e.initData.dossierApi+"/"+i.dossierId+"/plugins";axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(o,s).then(function(e){t(e.data.data)}).catch(function(t){a(t)})})},downloadFile({commit:t,state:e},i){let a={headers:{groupId:e.initData.groupId},responseType:"blob"};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.initData.dossierApi+"/"+i.dossierId+"/files/"+i.fileAttachId,a).then(function(t){var e=window.URL.createObjectURL(t.data);window.open(e)}).catch(function(t){console.log(t)})},getCpsAuthen({commit:t,state:e}){return new Promise((t,i)=>{let a={headers:{groupId:e.initData.groupId},params:{}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get("http://127.0.0.1:8081/api/onegate/token",a).then(function(e){t(e.data)}).catch(function(t){i(t)})})},loadUsersComment({commit:t,state:e},i){return new Promise((t,a)=>{var s=[];let o={headers:{groupId:e.initData.groupId},params:{userMapping:!0}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.initData.dossierApi+"/"+i+"/contacts",o).then(function(e){if(null!=e&&e.hasOwnProperty("data")){let t=e.data;jquery__WEBPACK_IMPORTED_MODULE_5___default.a.each(t,function(t,e){var i={};i.id=e.userId,i.fullname=e.userName,i.email=e.email,i.profilePictureURL=e.profileUrl,s.push(i)})}else s=[];t(s)}).catch(function(t){s=[],a(s)})})},loadCommentItems({commit:t,state:e},i){return new Promise((t,a)=>{let s={headers:{groupId:e.initData.groupId},params:{}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.initData.commentApi+"/"+i.className+"/"+i.classPK,s).then(function(e){t(e.data.data)}).catch(function(t){a(t)})})},postComment({commit:t,state:e},i){return new Promise((t,a)=>{const s={headers:{groupId:e.initData.groupId}};var o=i.pings.join(),n=new URLSearchParams;n.append("className",i.className),n.append("classPK",i.classPK),n.append("parent",null!=i.parent?i.parent:0),n.append("pings",o),n.append("content",i.content),n.append("upvoteCount",null!=i.upvoteCount?i.upvoteCount:0),n.append("opinion",i.opinion),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(e.initData.commentApi,n,s).then(function(e){var i={};null!=e&&(i=e.data,console.log("resPostCmt",i)),t(i)}).catch(function(t){toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),console.log(t)})})},putComment({commit:t,state:e},i){return new Promise((t,a)=>{const s={headers:{groupId:e.initData.groupId}};var o=i.pings.join(),n=new URLSearchParams;n.append("pings",o),n.append("content",i.content),console.log("dataPut",i),axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(e.initData.commentApi+"/"+i.commentId,n,s).then(function(e){var i={};null!=e&&(i=e.data),t(i)}).catch(function(t){console.log(t)})})},deleteComment({commit:t,state:e},i){return new Promise((t,a)=>{const s={headers:{groupId:e.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.delete(e.initData.commentApi+"/"+i.commentId,s).then(function(e){t(e)}).catch(function(t){a(t)})})},upvoteComment({commit:t,state:e},i){return new Promise((t,a)=>{const s={headers:{groupId:e.initData.groupId}};if(i.userHasUpvoted){var o=new URLSearchParams;o.append("className",i.className),o.append("classPK",i.classPK),o.append("commentId",i.commentId),o.append("upvoteCount",null!=i.upvoteCount?i.upvoteCount:0),axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(e.initData.commentApi+"/"+i.commentId+"/upvotes",o,s).then(function(e){var i={};null!=e&&(i=e.data),t(i)}).catch(function(t){console.log(t)})}else axios__WEBPACK_IMPORTED_MODULE_3___default.a.delete(e.initData.commentApi+"/"+i.commentId+"/upvotes",s).then(function(e){var i={};null!=e&&(i=e.data),t(i)}).catch(function(t){console.log(t)})})},loadProcessStep({commit:t,state:e},i){return new Promise((t,a)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:e.initData.groupId}};var n=e.initData.dossierApi+"/"+i.dossierId+"/nextactions",r=e.initData.dossierApi+"/"+i.dossierId+"/plugins";axios__WEBPACK_IMPORTED_MODULE_3___default.a.all([axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(n,o),axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(r,o)]).then(axios__WEBPACK_IMPORTED_MODULE_3___default.a.spread(function(e,i){var a=e.data.data,s=i.data.data,o=[],n=[];if(a)for(var r=0;r<a.length;r++){if(a[r].type=1,a[r].configNote){var l=JSON.parse(a[r].configNote);a[r].configNote=l}n.push(a[r])}else a=[],n=[];if(s)for(r=0;r<s.length;r++){var c={type:2,processActionId:s[r].processPluginId,actionName:s[r].pluginName};o.push(c)}var d=n,h=o;console.log("nextactions++++++++++++",d),console.log("plugins++++++++++++",h),d.push(...h),console.log("nextactions2++++++++++++",d),t(d)})).catch(function(t){a(t)})})})},pullNextactions({commit:t,state:e},i){return new Promise((a,s)=>{store.dispatch("loadInitResource").then(function(o){console.log("result",o);let n={headers:{groupId:e.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.initData.getNextAction+"/"+i.dossierId+"/nextactions",n).then(function(e){let i=e.data;t("setUserNextAction",[]),t("setCheckInput",i["checkInput"]),t("setStepOverdueNextAction",i["stepOverdue"]),i["users"]&&(Array.isArray(i["users"])?t("setUserNextAction",i["users"]):t("setUserNextAction",[i["users"]])),a(i.data)}).catch(function(e){console.log(e),s(e),t("setUserNextAction",[])})})})},pullBtnConfigStep({commit:t,state:e},i){return new Promise((t,a)=>{const s={headers:{groupId:e.initData.groupId}};new URLSearchParams;axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.initData.stepConfigApi+"/status/"+i.dossierStatus+"/"+i.dossierSubStatus,s).then(function(e){let i,a=e.data.data;i=a[0].buttonConfig&&a[0].buttonConfig.indexOf("{")>=0&&JSON.parse(a[0].buttonConfig)["buttons"]?JSON.parse(a[0].buttonConfig)["buttons"]:[],t(i)}).catch(function(t){console.log(t),a(t)})})},loadDossierDocuments({commit:t,state:e},i){let a={headers:{groupId:e.initData.groupId},params:{}},s=e.initData.documentApi+"/"+i.dossierId+"/documents";return new Promise((t,e)=>{axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(s,a).then(function(e){e.data.data?t(e.data.data):t([])}).catch(function(t){e(t)})})},loadDossierPayments({commit:t,state:e},i){let a={headers:{groupId:e.initData.groupId},params:{}},s=e.initData.dossierApi+"/"+i.dossierId+"/payment";return new Promise((t,e)=>{axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(s,a).then(function(e){t(e.data)}).catch(function(t){e(t)})})},postDossierPayments({commit:t,state:e},i){let a={headers:{groupId:e.initData.groupId}};var s=new URLSearchParams;s.append("paymentFee",i.paymentFee),s.append("paymentNote",i.paymentNote);let o=e.initData.dossierApi+"/"+i.dossierId+"/payment";return new Promise((t,e)=>{axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(o,s,a).then(function(e){t(e.data)}).catch(function(t){e(t)})})},loadDossierActions({commit:t,state:e},i){let a={headers:{groupId:e.initData.groupId},params:{stepType:i.stepType}},s=e.initData.dossierApi+"/"+i.dossierId+"/sequences";return new Promise((t,e)=>{axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(s,a).then(function(e){t(e.data)}).catch(function(t){e(t)})})},loadMermaidgraph({commit:t,state:e},i){let a={headers:{groupId:e.initData.groupId},params:{stepType:i.stepType}},s=e.initData.dossierApi+"/"+i.dossierId+"/mermaidgraph";return new Promise((t,e)=>{axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(s,a).then(function(e){t(e.data)}).catch(function(t){e(t)})})},loadDossierLienThong({commit:t,state:e},i){return new Promise((t,a)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:e.initData.groupId},params:{originDossierId:i}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.initData.dossierApi,o).then(function(e){let i=e.data;i.data?t(i.data):t([])}).catch(function(t){a(t)})})})},getDossierUserAsign({commit:t,state:e},i){return new Promise((t,a)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:e.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.initData.dossierApi+"/"+i+"/users",o).then(function(e){let i=e.data;i["data"]?Array.isArray(i["data"])?t(i.data):t([i["data"]]):t([])}).catch(function(t){a(t)})})})},postDossierUserAsign({commit:t,state:e},i){return new Promise((t,a)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:e.initData.groupId}},n=new URLSearchParams;n.append("assignUsers",i.users?JSON.stringify(i.users):""),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(e.initData.dossierApi+"/"+i.dossierId+"/users",n,o).then(function(e){t(e)}).catch(function(t){a(t)})})})},loadDossierSyncs({commit:t,state:e},i){return new Promise((t,a)=>{let s={headers:{groupId:e.initData.groupId}},o=e.endPointApi+"/dossiers/"+i.dossierId+"/syncs";axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(o,s).then(function(e){t(e.data.data)}).catch(function(t){a(t)})})},processDossierRouter({commit:t,state:e},i){return new Promise((t,a)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:e.initData.groupId,Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}},n=new URLSearchParams;n.append("actionCode",i.actionCode?i.actionCode:""),n.append("payment",i.payment?JSON.stringify(i.payment):""),n.append("assignUsers",i.toUsers?JSON.stringify(i.toUsers):""),n.append("actionNote",i.userNote?JSON.stringify(i.userNote):""),n.append("payload",i.payload?JSON.stringify(i.payload):""),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(e.initData.getNextAction+"/"+i.dossierId+"/actions",n,o).then(function(i){store.dispatch("getActiveGetCounter",!e.activeGetCounter);let a=i.data;t(a)}).catch(function(t){console.log(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),a(t)})})})},deleteDossier({commit:t,state:e},i){return new Promise((t,a)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:e.initData.groupId,Accept:"application/json"}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.delete(e.initData.getNextAction+"/"+i.dossierId,o).then(function(i){let a=i.data;store.dispatch("getActiveGetCounter",!e.activeGetCounter),t(a)}).catch(function(t){console.log(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),a(t)})})})},restoreDossier({commit:t,state:e},i){return new Promise((t,a)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:e.initData.groupId,Accept:"application/json"}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.post("/o/rest/v2/dossiers/"+i.dossierId+"/restore",o).then(function(e){let i=e.data;t(i)}).catch(function(t){console.log(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),a(t)})})})},getListDossierFiles({commit:t,state:e},i){return new Promise((t,a)=>{let s={headers:{groupId:e.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.initData.dossierApi+"/"+i+"/files",s).then(function(e){e.data.data?t(e.data.data):t([])}).catch(function(t){console.log(t),a(t)})})},deleteDossierPatch({commit:t,state:e},i){return new Promise((t,a)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:e.initData.groupId,Accept:"application/json"}};var n=0;let r=i["dossierId"].length;for(let l in i.dossierId)axios__WEBPACK_IMPORTED_MODULE_3___default.a.delete(e.initData.getNextAction+"/"+i.dossierId[l],o).then(function(i){let a=i.data;n+=1,n===r&&(store.dispatch("getActiveGetCounter",!e.activeGetCounter),store.dispatch("getActiveLoadingDataHoSo",!e.activeLoadingDataHoSo)),t(a)}).catch(function(t){console.log(t),n+=1,n===r&&(store.dispatch("getActiveGetCounter",!e.activeGetCounter),store.dispatch("getActiveLoadingDataHoSo",!e.activeLoadingDataHoSo)),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),a(t)})})})},doPrint01({commit:t,state:e},i){return new Promise((t,a)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:e.initData.groupId},responseType:"blob",params:{payload:i.payload}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.initData.getNextAction+"/"+i.dossierId+"/documents/preview/"+i.document,o).then(function(e){let i=e.data,a=window.URL.createObjectURL(i);t(a)}).catch(function(t){console.log(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),a(t)})})})},doPrint03({commit:t,state:e},i){return new Promise((t,a)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:e.initData.groupId},responseType:"blob",params:{payload:i.payload}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.initData.getNextAction+"/"+i.dossierId+"/documents/print",o).then(function(e){let i=e.data,a=window.URL.createObjectURL(i);t(a)}).catch(function(t){console.log(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),a(t)})})})},doGuiding({commit:t,state:e},i){return new Promise((t,a)=>{store.dispatch("loadInitResource").then(function(s){let o={serviceCode:i.serviceCode?i.serviceCode:"",serviceName:i.serviceName?i.serviceName:"",typeCode:i.typeCode?i.typeCode:"",templateNo:i.templateNo?i.templateNo:"",applicantName:i.applicantName?i.applicantName:"",applicantAddress:i.applicantAddress?i.applicantAddress:"",applicantEmail:i.applicantEmail?i.applicantEmail:"",applicantTelNo:i.applicantTelNo?i.applicantTelNo:"",employeeName:i.employeeName?i.employeeName:""};i.reportType&&(o["reportType"]=i.reportType);let n={headers:{groupId:e.initData.groupId},responseType:"blob",params:o};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.initData.getServiceConfigs+"/"+i.serviceConfigId+"/guide",n).then(function(e){let a=e.data;i.reportType&&file_saver__WEBPACK_IMPORTED_MODULE_6___default()(a,"HDTT"+(new Date).getTime()+".doc");let s=window.URL.createObjectURL(a);t(s)}).catch(function(t){console.log(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),a(t)})})})},doPrint02({commit:t,state:e},i){return new Promise((t,a)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:e.initData.groupId},responseType:"blob"},n=new URLSearchParams;n.append("serviceCode",i.serviceCode),n.append("govAgencyCode",i.govAgencyCode),n.append("dossiers",i.dossiers),n.append("payload",i.payload),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(e.initData.getNextAction+"/preview/"+i.document,n,o).then(function(e){let i=e.data,a=window.URL.createObjectURL(i);t(a)}).catch(function(t){console.log(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),a(t)})})})},printPay({commit:t,state:e},i){return new Promise((t,a)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:e.initData.groupId},responseType:"blob"};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.initData.getNextAction+"/"+i.dossierId+"/payments/"+i.referenceUid+"/invoicefile/preview",o).then(function(e){let i=e.data,a=window.URL.createObjectURL(i);t(a)}).catch(function(t){console.log(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),a(t)})})})},processPullBtnDetail({commit:t,state:e},i){return new Promise((t,a)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:e.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.initData.getNextAction+"/"+i.dossierId+"/nextactions/"+i.actionId,o).then(function(e){let i=e.data;t(i)}).catch(function(t){console.log(t),a(t)})})})},getNextAction({commit:t,state:e},i){return new Promise((t,a)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:e.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.initData.dossierApi+"/"+i.dossierId+"/nextactions/"+i.actionId,o).then(function(e){let i=e.data;t(i)}).catch(function(e){console.log(e),t([]),a(e)})})})},loadFormScript({state:t,commit:e},i){return new Promise((e,a)=>{store.dispatch("loadInitResource").then(function(s){jquery__WEBPACK_IMPORTED_MODULE_5___default.a.ajax({url:t.initData.dossierTemplatesApi+"/"+i.templateFileNo+"/parts/"+i.partNo+"/formscript",type:"GET",headers:{groupId:t.initData.groupId,Token:window.Liferay?window.Liferay.authToken:""},dataType:"text",success:function(t){let i=t;e(i)},error:function(t){console.log(t),e(t),a(t)}})})})},loadFormData({state:t,commit:e},i){return new Promise((e,a)=>{store.dispatch("loadInitResource").then(function(s){jquery__WEBPACK_IMPORTED_MODULE_5___default.a.ajax({url:t.initData.dossierApi+"/"+i.dossierId+"/eforms/"+i.partNo+"/formdata",type:"GET",headers:{groupId:t.initData.groupId,Token:window.Liferay?window.Liferay.authToken:""},dataType:"text",success:function(t){let i=t;e(i)},error:function(t){console.log(t),e(t),a(t)}})})})},loadDossierCounting({state:t,commit:e},i){let a={headers:{groupId:t.initData.groupId}},s="/o/rest/v2/statistics/dossiers/counting";return new Promise((t,e)=>{axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(s,a).then(function(e){t(e.data)}).catch(function(t){e(t)})})},reassignDossier({commit:t,state:e},i){return new Promise((t,a)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:e.initData.groupId}},n=new URLSearchParams;n.append("toUsers",JSON.stringify(i.toUsers)),axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(e.initData.dossierApi+"/"+i.dossierId+"/reassign",n,o).then(function(e){let i=e.data;t(i)}).catch(function(t){console.log(t),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Yêu cầu của bạn thực hiện thất bại."),a(t)})})})},pullProcessSteps({commit:t,state:e},i){return new Promise((t,a)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:e.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.initData.stepConfigApi+"/"+i.stepCode,o).then(function(e){let i=e.data;t(i)}).catch(function(t){console.log(t),a(t)})})})},loadServiceConfigsGov({commit:t,state:e},i){return new Promise((i,a)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:e.initData.groupId},params:{}};t("setLoadingGov",!0),axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.initData.serviceConfigByGovApi,o).then(function(e){t("setLoadingGov",!1);let a=e.data;a.govAgencies?i(a.govAgencies):i([])}).catch(function(e){console.log(e),t("setLoadingGov",!1),a(e)})})})},processCheckNextActions({commit:t,state:e},i){return new Promise((t,a)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:e.initData.groupId}},n=i.actionCode.split(",");axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.initData.dossierApi+"/"+i.dossierId+"/nextactions",o).then(function(e){let a=e.data,s=a.data,o=i,r=!1;for(let t in n)if(!r)for(let e in s)if(String(n[t])===String(s[e].actionCode)){o.actionCode=s[e].actionCode,r=!0;break}t(o)}).catch(function(t){console.log(t),a(t)})})})},getServiceOpionByProcess({commit:t,state:e},i){return new Promise((t,a)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:e.initData.groupId},params:{}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.initData.getServiceConfigs+"/"+i.serviceConfigId+"/processes",o).then(function(e){let i=e.data;i.data?t(i.data):t({})}).catch(function(t){console.log(t),a(t)})})})},getStatusLists({commit:t,state:e},i){return new Promise((t,i)=>{store.dispatch("loadInitResource").then(function(a){let s={headers:{groupId:e.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.endPointApi+"/dictcollections/DOSSIER_STATUS/dictitems?parent=0",s).then(function(e){let i=e.data;if(i.data){let e=i.data;null!==e&&void 0!==e&&"undefined"!==e&&e.unshift({itemCode:"",itemName:"toàn bộ"}),t(e)}else t([])}).catch(function(t){console.log(t),i(t)})})})},getVNPOSTcode({commit:t,state:e},i){return new Promise((t,i)=>{store.dispatch("loadInitResource").then(function(a){let s={headers:{groupId:e.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get("/o/rest/v2/dictcollections/VNPOST_CITY_CODE/dictitems",s).then(function(e){let i=e.data;if(i.data){let e=i.data;t(e)}else t([])}).catch(function(t){console.log(t),i(t)})})})},getSubstatusLists({commit:t,state:e},i){return new Promise((t,a)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:e.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get("/o/rest/v2/dictcollections/DOSSIER_STATUS/dictitems?parent="+i.itemCode,o).then(function(e){let i=e.data;if(i.data){let e=i.data;null!==e&&void 0!==e&&"undefined"!==e&&e.unshift({itemCode:"",itemName:"toàn bộ"}),t(e)}else t([])}).catch(function(t){console.log(t),a(t)})})})},getAgencyLists({commit:t,state:e},i){return new Promise((t,i)=>{store.dispatch("loadInitResource").then(function(a){let s={headers:{groupId:e.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get("/o/rest/v2/serviceinfos/statistics/agencies",s).then(function(e){let i=e.data;if(i.data){let e=i.data;null!==e&&void 0!==e&&"undefined"!==e&&e.unshift({administrationCode:"",administrationName:"toàn bộ"}),t(e)}else t([])}).catch(function(t){console.log(t),i(t)})})})},getServiceLists({commit:t,state:e},i){return new Promise((t,i)=>{store.dispatch("loadInitResource").then(function(a){let s={headers:{groupId:e.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.endPointApi+"/serviceinfos",s).then(function(e){let i=e.data;if(i.data){let e=i.data;null!==e&&void 0!==e&&"undefined"!==e&&e.unshift({serviceCode:"",serviceName:"toàn bộ"}),t(e)}else t([])}).catch(function(t){console.log(t),i(t)})})})},getServiceinfoFilter({commit:t,state:e},i){return new Promise((a,s)=>{store.dispatch("loadInitResource").then(function(o){let n={headers:{groupId:e.initData.groupId},params:{domain:i.domain}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.initData.getListThuTucHanhChinh,n).then(function(e){let i=e.data,s=Array.from(i.data);t("setListThuTucHanhChinh",s),a(s)}).catch(function(t){console.log(t),s(t)})})})},getDomainLists({commit:t,state:e},i){return new Promise((t,i)=>{store.dispatch("loadInitResource").then(function(a){let s={headers:{groupId:e.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.endPointApi+"/serviceinfos/statistics/domains",s).then(function(e){let i=e.data;if(i.data){let e=i.data;t(e)}else t([])}).catch(function(t){console.log(t),i(t)})})})},getExtraForm({commit:t,state:e},i){return new Promise((t,a)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:e.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.initData.dossierApi+"/"+i.dossierId+"/nextactions/"+i.actionId+"/payload",o).then(function(e){let i=e.data;i.data?t(i.data):t([])}).catch(function(t){console.log(t),a(t)})})})},getServiceInfo({commit:t,state:e},i){return new Promise((t,a)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:e.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.initData.serviceInfoApi+"/"+i.serviceInfoId,o).then(function(e){let i=e.data;t(i)}).catch(function(t){console.log(t),a(t)})})})},changeDisplayNameFile({commit:t,state:e},i){return new Promise((t,a)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:e.initData.groupId}};var n=new URLSearchParams;n.append("displayName",i.displayName),axios__WEBPACK_IMPORTED_MODULE_3___default.a.put(e.initData.serviceInfoApi+"/"+i.dossierId+"/files/"+i.dossierFileId,n,o).then(function(e){let i=e.data;t(i)}).catch(function(t){console.log(t),a(t)})})})},loadingDossierCounting({commit:t,state:e},i){return new Promise((t,i)=>{store.dispatch("loadInitResource").then(function(a){let s={headers:{groupId:e.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(e.endPointApi+"/statistics/dossiers/counting",s).then(function(e){let i=e.data;i.hasOwnProperty("data")?t(i.data):t(null)}).catch(function(t){console.log(t),i(t)})})})},loadVoting({commit:t,state:e},i){return new Promise((t,a)=>{store.dispatch("loadInitResource").then(function(s){let o={headers:{groupId:e.initData.groupId}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get("/o/rest/v2/postal/votings/"+i.className+"/"+i.classPK,o).then(e=>{let i=e.data;i&&i.data?t(i.data):t([])}).catch(t=>{a(t)})})})},submitVoting({commit:t,state:e},i){return new Promise((t,a)=>{store.dispatch("loadInitResource").then(function(s){var o=new URLSearchParams;const n={headers:{groupId:e.initData.groupId}};o.append("className",i.className),o.append("classPk",i.classPk),o.append("votingCode",i.votingCode?i.votingCode:""),o.append("selected",i.selected),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post("/o/rest/v2/postal/votings/"+i.votingId+"/results",o,n).then(e=>{t(e.data)}).catch(t=>{a(t)})})})},validFileUpload({commit:t,state:e},i){let a=i.file.name?i.file.name.split("."):"",s=a?a[a.length-1]:"",o=i.partTip["extensions"]?i.partTip["extensions"].split(","):"",n=(i.partTip["maxSize"],o?o.filter(function(t){return t===s}):"");store.commit("setValidFileUpload",!1),n&&n.length>0?Number(i.file.size)<=1048576*i.partTip["maxSize"]||!i.partTip["maxSize"]?store.commit("setValidFileUpload",!0):(toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Tài liệu tải lên dung lượng tối đa là "+i.partTip["maxSize"]+" MB"),store.commit("setValidFileUpload",!1)):i.partTip["extensions"]?(toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Tài liệu tải lên chỉ chấp nhận các định dạng "+i.partTip["extensions"]),store.commit("setValidFileUpload",!1)):store.commit("setValidFileUpload",!0)}},mutations:{setLoading(t,e){t.loading=e},setLoadingTable(t,e){t.loadingTable=e},setLoadingGov(t,e){t.loadingGov=e},setValidFileUpload(t,e){t.validFileUpload=e},setError(t,e){t.error=e},clearError(t){t.error=null},setIndex(t,e){t.index=e},setInitData(t,e){t.initData=e},setMenuConfigToDo(t,e){t.trangThaiHoSoList=e},setDataPhanCong(t,e){t.data_phancong=e},setLoadingDynamicBtn(t,e){t.loadingDynamicBtn=e},setListThuTucHanhChinh(t,e){t.listThuTucHanhChinh=e},setDossierTemplateName(t,e){t.dossierTemplateName=e},setIsDetail(t,e){t.isDetail=e},setLePhi(t,e){t.lePhi.fee=e.paymentFee,t.lePhi.feeNote=e.paymentFeeNote},setThanhPhanHoso(t,e){t.thanhPhanHoSo=e},setThanhPhanHosoTemplates(t,e){t.thanhPhanHoSo.dossierTemplates=e},setDataCreateFile(t,e){t.dataCreateFile=e},setCheckInput(t,e){t.checkInput=e},setUserNextAction(t,e){t.usersNextAction=e||[]},setStepOverdueNextAction(t,e){t.stepOverdueNextAction=e},setThongTinChuHoSo(t,e){let i=!0;"business"===e.applicantIdType&&(i=!1);let a={applicantIdNo:e.applicantIdNo,applicantName:e.applicantName,address:e.address,cityCode:e.cityCode,districtCode:e.districtCode,wardCode:e.wardCode,contactEmail:e.contactEmail,contactTelNo:e.contactTelNo,userType:i};t.thongTinChuHoSo=a},setThongTinChuHoSoBindChuyenPhat(t,e){t.thongTinChuHoSoBindChuyenPhat={cityCode:e.cityCode,districtCode:e.districtCode,wardCode:e.wardCode,address:e.address,contactTelNo:e.contactTelNo}},setThongTinNguoiNopHoSo(t,e){t.thongTinNguoiNopHoSo=Object.assign(t.thongTinNguoiNopHoSo,e)},setDichVuChuyenPhatKetQua(t,e){let i={viaPostal:e.viaPostal,postalServiceCode:e.postalServiceCode?e.postalServiceCode:"",postalAddress:e.postalAddress?e.postalAddress:"",postalCityCode:e.postalCityCode?e.postalCityCode:"",postalDistrictCode:e.postalDistrictCode?e.postalDistrictCode:"",postalWardCode:e.postalWardCode?e.postalWardCode:"",postalTelNo:e.postalTelNo?e.postalTelNo:""};t.dichVuChuyenPhatKetQua=i},setViaPostal(t,e){t.viaPostal=e},setServiceConfigObj(t,e){t.serviceConfigObj=e},setThongTinChungHoSo(t,e){var i;if(1===e.processUnit&&e.processBlock>8){let t,a=Math.floor(e.processBlock/8)+" ngày";t=e.processBlock%8!==0?8*(e.processBlock/8-Math.floor(e.processBlock/8))+" giờ":"",i=`${a} ${t}`}else 0===e.processUnit?i=e.processBlock+" ngày":1===e.processUnit&&e.processBlock<=8&&(i=e.processBlock+" giờ");let a={dossierTemplateNo:e.dossierTemplateNo,dossierTemplateName:e.dossierTemplateName,serviceName:e.serviceName,serviceConfig:e.serviceConfig,serviceOption:e.dossierTemplateNo,receiveDate:new Date(e.receiveDate),dueDate:new Date(e.dueDate).toString(),durationDate:i,dossierId:e.dossierId,dossierIdCTN:e.dossierIdCTN,dossierStatus:e.dossierStatus,dossierNo:e.dossierNo,govAgencyName:e.govAgencyName,dossierStatusText:e.dossierStatusText,submitDate:e.submitDate};t.thongTinChungHoSo=a},setThongTinChungHoSoDueDate(t,e){t.thongTinChungHoSo.dueDate=e},setThongTinChungHoSoDurationDate(t,e){t.thongTinChungHoSo.durationDate=e},setThongTinChungHoSoReceiveDate(t,e){t.thongTinChungHoSo.receiveDate=e},setserviceConfigItems(t,e){t.serviceConfigItems=e},setServiceOptionItems(t,e){t.serviceOptionItems=e},setServiceOptionThongTinChungHoSo(t,e){t.thongTinChungHoSo.serviceOption=e},setCitys(t,e){t.citys=e},dossierSelected(t,e){t.dossierSelected=e},actionActive(t,e){t.actionActive=e},setResultServices(t,e){t.resultServices=e},setDossierTemplates(t,e){t.dossierTemplates=e},setDossier(t,e){t.dossier=e},setDanhSachHoSo(t,e){t.danhSachHoSo=e},setCityVal(t,e){t.cityVal=e},setDistrictVal(t,e){t.districtVal=e},setWardVal(t,e){t.wardVal=e},setDossierFiles(t,e){t.dossierFiles=e},setSameUser(t,e){t.thongTinNguoiNopHoSo.sameUser=e},setSameUser2(t,e){t.sameUser2=e},setPrintPH(t,e){t.printPH=e},setlistHistoryProcessingItems(t,e){t.listHistoryProcessingItems=e},setUsersComment(t,e){t.usersComment=e},setCommentItems(t,e){t.commentItems=e},setKysoSuccess(t,e){t.kysoSuccess=e},setActiveGetCounter(t,e){t.activeGetCounter=e},setActiveLoadingDataHoSo(t,e){t.activeLoadingDataHoSo=e},setDataCreateDossier(t,e){t.dataCreateDossier=e},setPaymentProfile(t,e){t.paymentProfile=e},setPaymentFileName(t,e){t.paymentFileName=e},setApplicantBussinessExit(t,e){t.applicantBussinessExit=e},setApplicantNote(t,e){t.applicantNote=e},setApplicantId(t,e){t.applicantId=e}},getters:{loading(t){return t.loading},loadingTable(t){return t.loadingTable},loadingGov(t){return t.loadingGov},error(t){return t.error},index(t){return t.index},dossierSelected(t){return t.dossierSelected},actionActive(t){return t.actionActive},loadingMenuConfigToDo(t){return new Promise((t,e)=>{store.dispatch("loadMenuConfigToDo").then(function(e){t(e)})})},loadingInitData(t){return t.initData},loadingDynamicBtn(t){return t.loadingDynamicBtn},loadingListThuTucHanhChinh(t){store.dispatch("loadListThuTucHanhChinh")},lePhi(t){return t.lePhi},isDetail(t){return t.isDetail},dossierTemplateName(t){return t.dossierTemplateName},thongTinChungHoSo(t,e){return t.thongTinChungHoSo},thongTinChuHoSo(t){return t.thongTinChuHoSo},thongTinChuHoSoBindChuyenPhat(t){return t.thongTinChuHoSoBindChuyenPhat},kysoSuccess(t){return t.kysoSuccess},activeGetCounter(t){return t.activeGetCounter},activeLoadingDataHoSo(t){return t.activeLoadingDataHoSo},thanhPhanHoSo(t){return t.thanhPhanHoSo},thongTinNguoiNopHoSo(t){return t.thongTinNguoiNopHoSo},dichVuChuyenPhatKetQua(t){return t.dichVuChuyenPhatKetQua},viaPostal(t){return t.viaPostal},serviceOptionItems(t){return t.serviceOptionItems},getDictItems(t){return e=>{return"ADMINISTRATIVE_REGION"===e.collectionCode&&0===e.level?null==t.citys?store.dispatch("loadDictItems",e):new Promise((e,i)=>{e({total:t.citys.length,data:t.citys})}):store.dispatch("loadDictItems",e)}},getDataCreateFile(t){return t.dataCreateFile},getCheckInput(t){return t.checkInput},getUsersNextAction(t){return t.usersNextAction},getStepOverdueNextAction(t){return t.stepOverdueNextAction},resultServices(t){return t.resultServices},dossierTemplates(t){return t.dossierTemplates},dataDetailDossier(t){return t.dossier},dossier(t){return t.dossier},getCityVal(t){return t.cityVal},getDistrictVal(t){return t.districtVal},getWardVal(t){return t.wardVal},dossierFiles(t){return t.dossierFiles},sameUser2(t){return t.sameUser2},getVnpostCodeItems(t){return t.vnpostCodeItems},listHistoryProcessingItems(t){return t.listHistoryProcessingItems},subStatusNew(t){return t.subStatusNew},usersComment(t){return t.usersComment},commentItems(t){return t.commentItems},dataPhanCong(t){return t.data_phancong},getDataCreateDossier(t){return t.dataCreateDossier},getPaymentProfile(t){return t.paymentProfile},getPaymentFileName(t){return t.paymentFileName},getUser(t){return t.user},getApplicantIdNo(t){return t.applicantId},getApplicantNote(t){return t.applicantNote},getApplicantBussinessExit(t){return t.applicantBussinessExit}}})},4678:function(t,e,i){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(t){var e=o(t);return i(e)}function o(t){var e=a[t];if(!(e+1)){var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}return e}s.keys=function(){return Object.keys(a)},s.resolve=o,t.exports=s,s.id="4678"},"4a3a":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"phancong",staticStyle:{"background-color":"white",width:"100%"}},[i("v-expansion-panel",{staticClass:"expansion-pl"},[i("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"1"}},[""!==t.esignType&&"digital"!==t.esignType?i("div",{attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"background-triangle-small"},[i("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("Duyệt hồ sơ\n      ")]):t._e(),i("v-card",[i("v-card-text",{staticClass:"px-0 py-0"},["captcha"===t.esignType?i("v-flex",{staticClass:"my-3",attrs:{xs12:"",sm12:""}},[i("span",{staticClass:"ml-3",staticStyle:{color:"#ec0f0f"}},[t._v("(*) Xác thực ký duyệt hồ sơ")]),i("v-captcha",{ref:"captcha"})],1):t._e(),"password"===t.esignType?i("v-flex",{staticClass:"my-3 pl-3",attrs:{xs12:"",sm4:""}},[i("span",{staticClass:"ml-3",staticStyle:{color:"#ec0f0f"}},[t._v("(*) Xác thực ký duyệt hồ sơ")]),i("v-text-field",{attrs:{box:"",label:"Nhập mật khẩu xác thực","append-icon":t.e1?"visibility":"visibility_off","append-icon-cb":function(){return t.e1=!t.e1},rules:[function(t){return!!t||"Yêu cầu nhập mật khẩu"}],type:t.e1?"password":"text",name:"input-10-2",required:""},model:{value:t.passWord,callback:function(e){t.passWord=e},expression:"passWord"}})],1):t._e()],1)],1)],1)],1)],1)},s=[],o=i("1157"),n=i.n(o),r=i("854a"),l=i.n(r),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-flex",{staticClass:"text-xs-center",attrs:{xs12:"",sm12:""}},[i("span",[t._v("Kéo thả các ô vuông đúng thứ tự của từ")]),i("br"),i("v-chip",{staticStyle:{"background-color":"#81D4FA"},attrs:{label:"","text-color":"white"}},[t._v("\n      "+t._s(t.captcha)+"\n    ")])],1),i("div",{directives:[{name:"drag-and-drop",rawName:"v-drag-and-drop:options",value:t.options,expression:"options",arg:"options"}],staticClass:"drag-wrapper text-xs-center mt-3"},[i("ul",{attrs:{id:"captcha"}},t._l(t.arrCaptcha,function(e,a){return i("li",{key:a,staticClass:"item-captcha",staticStyle:{padding:"10px 15px","background-color":"#81D4FA","margin-right":"2px",color:"#fff","font-weight":"bold"}},[t._v(t._s(e))])}),0)])],1)},d=[],h=(i("a18c"),i("a026")),u=i("d8c5"),p=i.n(u);h["default"].use(p.a);var m={props:["index"],components:{},data:()=>({options:{},arrCaptcha:[],captcha:"",currentlyDragging:null,loggedEvent:"",images:[{name:"Image 1",src:"http://placehold.it/100/000000/ffffff"},{name:"Image 2",src:"http://placehold.it/100/C93742/ffffff"},{name:"Image 3",src:"http://placehold.it/100/6894D1/ffffff"}]}),computed:{loading(){return this.$store.getters.loading}},created(){var t=this;t.makeRandomString(),t.shuffleArrCaptcha(t.arrCaptcha)},watch:{},methods:{makeRandomString(){for(var t=this,e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<4;a++)e+=i.charAt(Math.floor(Math.random()*i.length));e&&(t.arrCaptcha=t.shuffleArrCaptcha(e.split(""))),t.captcha=e},shuffleArrCaptcha(t){var e=t.length,i=null,a=0;while(e>0)a=Math.floor(Math.random()*e),e--,i=t[e],t[e]=t[a],t[a]=i;return t},checkValidCatcha(){var t=this,e="";let i=n()("#captcha").children();console.log(i);for(var a=0;a<i.length;a++)e+=i[a].innerHTML;return t.captcha===e}},filters:{dateTimeView(t){if(t){let e=new Date(t);return`${e.getDate().toString().padStart(2,"0")}/${(e.getMonth()+1).toString().padStart(2,"0")}/${e.getFullYear()}`}return""}}},g=m,v=i("2877"),_=Object(v["a"])(g,c,d,!1,null,null,null);_.options.__file="Captcha.vue";var f=_.exports;function y(){return document.getElementById("plugin0")}l.a.options={closeButton:!0,timeOut:"5000"};var C=y,T={props:{detailDossier:{},dataEsign:{}},components:{"v-captcha":f},data:()=>({tabActive:"tabs-1",activeKS:!1,noteReason:"",thongTinHoSo:{},passWord:"",e1:!0}),created(){""!==this.esignType&&"digital"!==this.esignType||(this.activeKS=!0)},computed:{kysoSuccess(){return this.$store.getters.kysoSuccess},esignType(){return this.dataEsign.signatureType}},watch:{},mounted(){""!==this.esignType&&"digital"!==this.esignType||(this.activeKS=!0)},methods:{changeActive(){var t=this;console.log("tabActive",t.tabActive)},doExport(){let t=this,e={textValue:t.noteReason,required:"password"===t.esignType?t.passWord:"digital"===t.esignType||""===t.esignType?t.activeKS:t.$refs.captcha.checkValidCatcha()};return console.log("exportData",e),e},checkCreateFile(t){var e;e=Array.isArray(t.createFiles)?t.createFiles:[t.createFiles];var i=!1;if(e.length>0)for(var a=e.length,s=0;s<a;s++){var o=e[s];0===o.counter&&(i=!0)}else i=!0;return i},kySo(t){console.log("run ky so data payload",t);var e,i=this;e=Array.isArray(t.createFiles)?t.createFiles:[t.createFiles];var a=[],s=!1;if(e.length>0)for(var o=e.length,n=0;n<o;n++){var r=e[n];if(0===r.counter){s=!0;break}var l=r.dossierFileId,c=r.dossierPartId;if(l&&c&&"digital"===i.esignType){let t=l+","+c;a.push(t)}else if(l&&"digital"!==i.esignType){let t=l;a.push(t)}}else alert("Không tồn tại tệp điện tử. Vui lòng kiểm tra lại");console.log("idArr",a);var d=t.eSignature;if(d){if(s)return void alert("Tệp điện tử chưa sẵn sàng. Xin vui lòng chờ trong giây lát");if(a){var h={};h.actionCode=t.actionCode,h.actionUser=window.themeDisplay.getUserName()?window.themeDisplay.getUserName():"",h.actionNote="",h.postStepCode=t.postStepCode?t.postStepCode:"",h.payload=t.payload?t.payload:"",h.assignUsers=t.assignUsers?t.assignUsers:"",h.payment=t.payment?t.payment:"",h.userNote=t.userNote?t.userNote:"";var u=a.join(";"),p=t.actionName;if(console.log("strIdArr",u),console.log("paramObj",h),"digital"===i.esignType){if(!C().valid)return d=!1,void alert("Plugin ký số không hoạt động");i.kyDuyetYCGiamDinh(u,h,p)}else"captcha"!==i.esignType&&"password"!==i.esignType&&""!==i.esignType||i.completeKyDuyetCaptchaSignature(u,h,p)}}},kyDuyetYCGiamDinh(t,e,i){var a=this,s="/o/rest/v2/defaultsignature/digitalSignature/"+a.detailDossier.dossierId+"/hashComputed";console.log(a.detailDossier.dossierId),n.a.ajax({type:"POST",url:s,async:!1,dataType:"json",headers:{groupId:window.themeDisplay.getScopeGroupId(),Token:window.Liferay.authToken},data:{strIdArr:t,actionCode:e.actionCode,postStepCode:e.postStepCode},success:function(t){console.log(t);var s=t.msg;if("fileEntryId"!==s){var o=t.hashComputers,n=t.signFieldNames,r=t.fileNames,l=t.fileEntryId;console.log("hashComputers: "+o),console.log("signFieldNames: "+n),console.log("fileNames: "+r),console.log("msgs: "+s);var c=[];if(C().valid){for(var d=0;d<o.length;d++){var h=o[d],u=C().Sign(h);if(0===u||7===u){var p=C().Signature,m=n[d],g=r[d];console.log("sign: "+p),console.log("signFieldName: "+m),console.log("fileName: "+g),c.push(p)}else alert(C().ErrorMessage)}a.completeKyDuyetManyYCGiamDinh(c.join(","),n.join(","),r.join(","),l.join(","),e,i)}else alert("Plugin ký số không hoạt động")}else alert("Không tìm thấy file bản thảo. Tạm dừng tiến trình ký số")},error:function(t){}})},completeKyDuyetManyYCGiamDinh(t,e,i,a,s,o){var r=this,c="/o/rest/v2/defaultsignature/digitalSignature/"+r.detailDossier.dossierId+"/dossierFiles";n.a.ajax({type:"PUT",url:c,async:!1,dataType:"json",headers:{groupId:window.themeDisplay.getScopeGroupId(),Token:window.Liferay.authToken},data:{actionCode:s["actionCode"],actionUser:s["actionUser"],actionNote:s["actionNote"],assignUserId:s["assignUserId"],postStepCode:s["postStepCode"],subUsers:s["subUsers"],payload:s["payload"]?JSON.stringify(s["payload"]):"",assignUsers:s["assignUsers"],payment:s["payment"]?JSON.stringify(s["payment"]):"",userNote:s["userNote"],sign:t,signFieldName:e,fileName:i,fileEntryId:a},success:function(t){console.log(t);var e=t.msg;"success"===e?(r.$store.commit("setKysoSuccess",!0),l.a.success("Thực hiện ký số thành công.")):"fileEntryId"===e?alert("Cảnh báo: Không tìm thấy file bản thảo. Tạm dừng tiến trình đóng dấu số"):alert(e)},error:function(){alert("Thực hiện ký số thất bại")}})},completeKyDuyetCaptchaSignature(t,e,i){var a=this,s="/o/rest/v2/defaultsignature/"+a.detailDossier.dossierId+"/dossierFiles";n.a.ajax({type:"PUT",url:s,async:!1,dataType:"json",headers:{groupId:window.themeDisplay.getScopeGroupId()?window.themeDisplay.getScopeGroupId():"",Token:window.Liferay.authToken?window.Liferay.authToken:""},data:{actionCode:e["actionCode"],actionUser:e["actionUser"],actionNote:e["actionNote"],assignUserId:e["assignUserId"],postStepCode:e["postStepCode"],subUsers:e["subUsers"],payload:e["payload"]?JSON.stringify(e["payload"]):"",assignUsers:e["assignUsers"],payment:e["payment"]?JSON.stringify(e["payment"]):"",userNote:e["userNote"],fileEntryId:t},success:function(t){a.$store.commit("setKysoSuccess",!0),l.a.success("Thực hiện ký số thành công.")},error:function(){l.a.error("Thực hiện ký số thất bại")}})},completeKyDuyetYCGiamDinh(t,e,i,a,s,o){var r=this,c="/o/rest/v2/defaultsignature/digitalSignature/"+r.detailDossier.dossierId+"/dossierFile";n.a.ajax({type:"PUT",url:c,async:!1,dataType:"json",headers:{groupId:window.themeDisplay.getScopeGroupId(),Token:window.Liferay?window.Liferay.authToken:"","Cache-Control":"no-cache"},data:{actionCode:s["actionCode"],actionUser:s["actionUser"],actionNote:s["actionNote"],assignUserId:s["assignUserId"],postStepCode:s["postStepCode"],subUsers:s["subUsers"],sign:t,signFieldName:e,fileName:i,fileEntryId:a},success:function(t){console.log(t);var e=t.msg;"success"===e?l.a.success("Yêu cầu của bạn được thực hiện thành công."):"fileEntryId"===e?alert("Cảnh báo: Không tìm thấy file bản thảo. Tạm dừng tiến trình đóng dấu số"):alert(e)},error:function(){alert("ky so false")}})}}},x=T,D=Object(v["a"])(x,a,s,!1,null,null,null);D.options.__file="KyPheDuyetTaiLieu.vue";e["a"]=D.exports},"4d55":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._v("\n  1232\n  "),i("div",{staticClass:"row-header no__hidden_class"},[null!==t.trangThaiHoSoList?i("div",{staticClass:"background-triangle-big"},[i("span",[t._v(t._s(t.trangThaiHoSoList[t.index]["title"]))])]):t._e(),i("div",{staticClass:"layout row wrap header_tools row-blue"},[i("div",{staticClass:"flex pl-3 text-ellipsis text-bold",staticStyle:{position:"relative"}},[i("v-select",{attrs:{placeholder:"Tìm kiếm theo tên hồ sơ, tên thủ tục ...",solo:"",chips:"",tags:"","deletable-chips":"","item-value":"value","item-text":"text","content-class":"adv__search__select","return-object":""},on:{input:t.keywordEventChange},model:{value:t.advSearchItems,callback:function(e){t.advSearchItems=e},expression:"advSearchItems"}}),i("v-fade-transition",[t.menusss?i("div",{staticClass:"adv__search_container"},[t._l(t.advSearchTools,function(e,a){return e.display?i("v-layout",{key:a,attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:"",sm5:""}},[i("v-select",{attrs:{items:t.advSearchTools,label:"Chọn điều kiện lọc","single-line":"","item-value":"value","item-text":"text",disabled:""},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"item.value"}})],1),i("v-flex",{staticClass:"text-center",attrs:{xs12:"",sm1:""}},[i("v-btn",{staticClass:"my-0 mx-0",attrs:{icon:""}},[i("v-icon",{attrs:{size:"16"}},[t._v("drag_handle")])],1)],1),"year_month_day"===e.spec?i("v-flex",{staticClass:"pr-2",attrs:{xs2:"",sm2:""}},[i("v-select",{attrs:{items:t.itemFilterSupport.years,label:"Chọn năm",autocomplete:"","single-line":"","item-value":"value","item-text":"name","hide-selected":""},on:{change:function(i){t.changeAdvFilterData(i,"year",e.index)}},model:{value:t.itemFilterSupport.year,callback:function(e){t.$set(t.itemFilterSupport,"year",e)},expression:"itemFilterSupport.year"}})],1):t._e(),"year_month_day"===e.spec?i("v-flex",{staticClass:"pr-2",attrs:{xs2:"",sm2:""}},[i("v-select",{attrs:{items:t.itemFilterSupport.months,label:"Chọn tháng",autocomplete:"","single-line":"","item-value":"value","item-text":"name"},on:{change:function(i){t.changeAdvFilterData(i,"month",e.index)}},model:{value:t.itemFilterSupport.month,callback:function(e){t.$set(t.itemFilterSupport,"month",e)},expression:"itemFilterSupport.month"}})],1):t._e(),"year_month_day"===e.spec?i("v-flex",{attrs:{xs2:"",sm2:""}},[i("v-select",{attrs:{items:t.itemFilterSupport.days,label:"Chọn ngày",autocomplete:"","single-line":"","item-value":"value","item-text":"name"},on:{change:function(i){t.changeAdvFilterData(i,"day",e.index)}},model:{value:t.itemFilterSupport.day,callback:function(e){t.$set(t.itemFilterSupport,"day",e)},expression:"itemFilterSupport.day"}})],1):t._e(),"top"===e.spec?i("v-flex",{attrs:{xs:"",12:"",sm6:""}},[i("v-select",{attrs:{items:t.itemFilterSupport.tops,label:e.text+":",autocomplete:"","single-line":"","item-value":"value","item-text":"name"},on:{change:function(i){t.changeAdvFilterData(i,e.spec,e.index)}},model:{value:t.itemFilterSupport.top,callback:function(e){t.$set(t.itemFilterSupport,"top",e)},expression:"itemFilterSupport.top"}})],1):t._e(),"status"===e.spec?i("v-flex",{attrs:{xs:"",12:"",sm6:""}},[i("v-select",{attrs:{items:t.itemFilterSupport.statusLists,label:e.text+":",autocomplete:"","single-line":"","item-value":"itemCode","item-text":"itemName"},on:{change:function(i){t.changeAdvFilterData(i,e.spec,e.index)}},model:{value:t.itemFilterSupport.status,callback:function(e){t.$set(t.itemFilterSupport,"status",e)},expression:"itemFilterSupport.status"}})],1):t._e(),"substatus"===e.spec?i("v-flex",{attrs:{xs:"",12:"",sm6:""}},[i("v-select",{attrs:{items:t.itemFilterSupport.substatusLists,label:e.text+":",autocomplete:"","single-line":"","item-value":"itemCode","item-text":"itemName"},on:{change:function(i){t.changeAdvFilterData(i,e.spec,e.index)}},model:{value:t.itemFilterSupport.substatus,callback:function(e){t.$set(t.itemFilterSupport,"substatus",e)},expression:"itemFilterSupport.substatus"}})],1):t._e(),"agency"===e.spec?i("v-flex",{attrs:{xs:"",12:"",sm6:""}},[i("v-select",{attrs:{items:t.itemFilterSupport.agencyLists,label:e.text+":",autocomplete:"","single-line":"","item-value":"administrationCode","item-text":"administrationName"},on:{change:function(i){t.changeAdvFilterData(i,e.spec,e.index)}},model:{value:t.itemFilterSupport.agency,callback:function(e){t.$set(t.itemFilterSupport,"agency",e)},expression:"itemFilterSupport.agency"}})],1):t._e(),"service"===e.spec?i("v-flex",{attrs:{xs:"",12:"",sm6:""}},[i("v-select",{attrs:{items:t.itemFilterSupport.serviceLists,label:e.text+":",autocomplete:"","single-line":"","item-value":"serviceCode","item-text":"serviceName"},on:{change:function(i){t.changeAdvFilterData(i,e.spec,e.index)}},model:{value:t.itemFilterSupport.service,callback:function(e){t.$set(t.itemFilterSupport,"service",e)},expression:"itemFilterSupport.service"}})],1):t._e(),"domain"===e.spec?i("v-flex",{attrs:{xs:"",12:"",sm6:""}},[i("v-select",{attrs:{items:t.itemFilterSupport.domainLists,label:e.text+":",autocomplete:"","single-line":"","item-value":"domainCode","item-text":"domainName"},on:{change:function(i){t.changeAdvFilterData(i,e.spec,e.index)}},model:{value:t.itemFilterSupport.domain,callback:function(e){t.$set(t.itemFilterSupport,"domain",e)},expression:"itemFilterSupport.domain"}})],1):t._e(),"register"===e.spec?i("v-flex",{attrs:{xs:"",12:"",sm6:""}},[i("v-text-field",{attrs:{placeholder:e.text},model:{value:t.itemFilterSupport.register,callback:function(e){t.$set(t.itemFilterSupport,"register",e)},expression:"itemFilterSupport.register"}})],1):t._e()],1):t._e()}),i("v-layout",{attrs:{wrap:""}},[i("v-flex",{staticClass:"no__selected__items",attrs:{xs12:"",sm10:""}},[i("v-select",{attrs:{items:t.advSearchTools,label:"Chọn điều kiện lọc",autocomplete:"","single-line":"","item-value":"text","item-text":"text","return-object":"","hide-selected":""},on:{change:t.selectedAdvFilter},model:{value:t.advSearchToolsSelected,callback:function(e){t.advSearchToolsSelected=e},expression:"advSearchToolsSelected"}})],1),i("v-flex",{staticClass:"text-right",attrs:{xs12:"",sm2:""}},[i("v-btn",{staticClass:"mx-0 my-0 mt-1",attrs:{color:"primary"},nativeOn:{click:function(e){t.menusss=!1}}},[i("v-icon",{staticClass:"mr-2"},[t._v("clear")]),t._v("\n                  Quay lại\n                ")],1)],1)],1)],2):t._e()])],1),i("div",{staticClass:"flex text-right",staticStyle:{"margin-left":"auto","max-width":"50px"}},[i("v-btn",{staticClass:"my-0 mx-2",attrs:{icon:""},nativeOn:{click:function(e){return t.showAdvFilter(e)}}},[i("v-icon",{attrs:{size:"16"}},[t._v("filter_list")])],1)],1)])]),i("v-layout",{staticClass:"menu_header_list pt-3 pb-2",class:{no__border__bottom:null===t.btnDynamics||void 0===t.btnDynamics||"undefined"===t.btnDynamics||null!==t.btnDynamics&&void 0!==t.btnDynamics&&"undefined"!==t.btnDynamics&&0===t.btnDynamics.length},attrs:{wrap:""}},[1!==t.originality?i("v-layout",{attrs:{wrap:""}},[i("v-flex",{staticClass:"pl-2 pr-2 input-group--text-field-box",attrs:{xs12:"",sm3:""}},[i("v-select",{attrs:{items:t.listLinhVuc,autocomplete:"",label:"Chọn lĩnh vực","item-text":"displayName","item-value":"domainCode","return-object":"","hide-selected":!0,clearable:""},on:{change:t.changeDomain},model:{value:t.linhVucSelected,callback:function(e){t.linhVucSelected=e},expression:"linhVucSelected"}})],1),i("v-flex",{staticClass:"pl-2 pr-2 input-group--text-field-box",attrs:{xs12:"",sm3:""}},[i("v-select",{attrs:{items:t.listThuTucHanhChinh,autocomplete:"",label:"Chọn thủ tục hành chính","item-text":"displayName","item-value":"serviceConfigId","return-object":"","hide-selected":!0,clearable:""},on:{change:t.changeServiceConfigs},model:{value:t.thuTucHanhChinhSelected,callback:function(e){t.thuTucHanhChinhSelected=e},expression:"thuTucHanhChinhSelected"}})],1),i("v-flex",{staticClass:"pl-2 pr-2 input-group--text-field-box",attrs:{xs12:"",sm3:""}},[i("v-select",{attrs:{items:t.listDichVu,label:"Chọn dịch vụ",autocomplete:"","item-text":"optionName","item-value":"processOptionId","return-object":"","hide-selected":!0},on:{change:t.changeDichVuConfigs},model:{value:t.dichVuSelected,callback:function(e){t.dichVuSelected=e},expression:"dichVuSelected"}})],1),i("v-flex",{staticClass:"pl-2 pr-2",attrs:{xs12:"",sm3:""}},[i("div",{staticStyle:{position:"relative"}},[i("v-text-field",{attrs:{label:"Nhập mã hồ sơ","append-icon":"search",box:"","append-icon-cb":t.changeDossierNoKey},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.changeDossierNoKey(e):null}},model:{value:t.dossierNoKey,callback:function(e){t.dossierNoKey=e},expression:"dossierNoKey"}})],1)])],1):t._e(),null!==t.dossierCounting&&void 0!==t.dossierCounting&&t.dossierCounting.length>0&&t.dossierCountingShow?i("div",{staticClass:"py-1 px-1",staticStyle:{background:"#f6f6f6","border-top":"1px solid lightgrey"}},t._l(t.dossierCounting,function(e,a){return i("v-chip",{key:a,on:{click:function(i){t.changeAdvFilterDataChips(e)}}},["deleted"===e.key?i("v-avatar",{staticStyle:{"background-color":"#da0e0e","border-color":"#da0e0e",color:"#fff"}},[i("v-icon",{attrs:{size:"16"}},[t._v("delete")])],1):i("v-avatar",{staticStyle:{"background-color":"#0b72ba","border-color":"#0b72ba",color:"#fff"}},[t._v(t._s(e.count))]),t._v("\n        "+t._s(e.title)+"\n      ")],1)}),1):t._e()],1),t.loadingDynamicBtn?i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:"",sm6:""}}),i("v-flex",{attrs:{xs12:"",sm2:""}},[i("content-placeholders",{staticClass:"mt-3"},[i("content-placeholders-text",{attrs:{lines:1}})],1)],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[i("content-placeholders",{staticClass:"mt-3"},[i("content-placeholders-text",{attrs:{lines:1}})],1)],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[i("content-placeholders",{staticClass:"mt-3"},[i("content-placeholders-text",{attrs:{lines:1}})],1)],1)],1):t._e(),t.loadingDynamicBtn?t._e():i("div",{staticClass:"btn_wrap_actions"},[t.getUser("Administrator_data")&&"deleted"!==t.currentQueryState["status"]?i("v-btn",{attrs:{color:"red",dark:""},nativeOn:{click:function(e){t.btnActionEvent(null,{form:"UNDO_DOSSIER"},0,!0)}}},[t._v("\n         Undo   \n    ")]):t._e(),t.getUser("Administrator_data")?i("v-menu",{staticStyle:{position:"relative !important"},attrs:{bottom:""}},[i("v-btn",{attrs:{slot:"activator",color:"red",dark:""},slot:"activator"},[t._v("Go to   "),i("v-icon",{attrs:{size:"18"}},[t._v("arrow_drop_down")])],1),i("v-list",[i("v-list-tile",{on:{click:function(e){t.btnActionEvent(t.selectedDoAction[t.selectedDoAction.length-1],{form:"GOTO_DONE"},0,!0)}}},[i("v-list-tile-title",[t._v("Hoàn thành")])],1),i("v-list-tile",{on:{click:function(e){t.btnActionEvent(t.selectedDoAction[t.selectedDoAction.length-1],{form:"GOTO_CANCEL"},0,!0)}}},[i("v-list-tile-title",[t._v("Rút hồ sơ")])],1),i("v-list-tile",{on:{click:function(e){t.btnActionEvent(t.selectedDoAction[t.selectedDoAction.length-1],{form:"GOTO_DENY"},0,!0)}}},[i("v-list-tile-title",[t._v("Từ chối")])],1)],1)],1):t._e(),t.getUser("Administrator_data")&&"deleted"!==t.currentQueryState["status"]?i("v-btn",{attrs:{color:"red",dark:""},nativeOn:{click:function(e){t.btnActionEvent(null,{form:"CHANGE_DATA_DOSSIER"},0,!0)}}},[t._v("\n      Điều chỉnh dữ liệu\n    ")]):t._e(),t.getUser("Administrator")&&"deleted"!==t.currentQueryState["status"]?i("v-btn",{attrs:{color:"red",dark:""},nativeOn:{click:function(e){t.btnActionEvent(null,{form:"DELETE"},0,!0)}}},[t._v("\n      DELETE\n    ")]):t._e(),t.getUser("Administrator_data")&&t.currentQueryState.hasOwnProperty("status")&&"deleted"===t.currentQueryState["status"]?i("v-btn",{attrs:{color:"red",dark:""},nativeOn:{click:function(e){t.btnActionEvent(null,{form:"RESTORE_DOSSIER"},0,!0)}}},[t._v("\n      Khôi phục hồ sơ\n    ")]):t._e(),t._l(t.btnDynamics,function(e,a){return String(e.form).indexOf("VIEW")<0&&3!==t.menuType?i("v-btn",{key:a,attrs:{color:"primary",loading:t.loadingAction&&a===t.indexAction,disabled:t.loadingAction&&a===t.indexAction},nativeOn:{click:function(i){t.btnActionEvent(null,e,a,!0)}}},[t._v("\n      "+t._s(e.title)+t._s(e.tiltle)+"\n      "),i("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])]):t._e()})],2),i("v-data-table",{staticClass:"table-landing table-bordered",attrs:{headers:t.headers,items:t.hosoDatas,"total-items":t.hosoDatasTotal,"item-key":"dossierId","select-all":3!==t.menuType&&1!==t.originality&&t.btnDynamics.length>0||t.getUser("Administrator")||t.getUser("Administrator_data"),"no-data-text":"Không có hồ sơ nào","hide-actions":""},scopedSlots:t._u([{key:"headers",fn:function(e){return[i("tr",[3!==t.menuType&&1!==t.originality&&t.btnDynamics.length>0||t.getUser("Administrator")||t.getUser("Administrator_data")?i("th",{staticClass:"v_data_table_check_all"},[t.getUser("Administrator")?i("v-checkbox",{attrs:{"input-value":e.all,indeterminate:e.indeterminate,primary:"","hide-details":""},nativeOn:{click:function(e){return t.toggleAll(e)}}}):i("v-checkbox",{attrs:{"input-value":e.all,indeterminate:e.indeterminate,disabled:!t.thuTucHanhChinhSelected||t.thuTucHanhChinhSelected&&"0"===t.thuTucHanhChinhSelected.serviceConfigId||t.thuTucHanhChinhSelected&&""===t.thuTucHanhChinhSelected.serviceConfigId,primary:"","hide-details":""},nativeOn:{click:function(e){return t.toggleAll(e)}}})],1):t._e(),t._l(e.headers,function(e){return i("th",{key:e.text,class:e["class"]?e["class"]:"",attrs:{width:e["width"]?e["width"]+"px":""}},[i("v-tooltip",{attrs:{bottom:""}},[i("span",{attrs:{slot:"activator"},slot:"activator"},[t._v(t._s(e.text))]),i("span",[t._v(t._s(e.text))])])],1)})],2)]}},{key:"items",fn:function(e){return[i("tr",[3!==t.menuType&&1!==t.originality&&t.btnDynamics.length>0||t.getUser("Administrator")||t.getUser("Administrator_data")?i("td",{staticClass:"v_data_table_check_all"},[t.getUser("Administrator")||t.getUser("Administrator_data")?i("v-checkbox",{attrs:{primary:"","hide-details":"",color:"primary"},on:{change:t.changeSelected},model:{value:e.selected,callback:function(i){t.$set(e,"selected",i)},expression:"props.selected"}}):i("v-checkbox",{attrs:{disabled:0===e.item["assigned"]||!t.thuTucHanhChinhSelected||t.thuTucHanhChinhSelected&&"0"===t.thuTucHanhChinhSelected.serviceConfigId||t.thuTucHanhChinhSelected&&""===t.thuTucHanhChinhSelected.serviceConfigId,primary:"","hide-details":"",color:"primary"},on:{change:t.changeSelected},model:{value:e.selected,callback:function(i){t.$set(e,"selected",i)},expression:"props.selected"}})],1):t._e(),i("td",{staticClass:"text-xs-center px-0 py-0"},[t.loadingTable?i("content-placeholders",[i("content-placeholders-text",{attrs:{lines:1}})],1):i("span",{class:{no_acction__event:!e.item["permission"]},staticStyle:{cursor:"pointer"},on:{click:function(i){t.viewDetail(e.item,e.index)}}},[t._v("\n            "+t._s(15*t.hosoDatasPage-15+e.index+1)+"\n          ")])],1),t._l(t.headers,function(a,s){return a.hasOwnProperty("value")?i("td",{key:s+"_"+e.item.dossierId,class:a["class_column"]},[t.loadingTable?i("content-placeholders",[i("content-placeholders-text",{attrs:{lines:1}})],1):i("div",{class:{no_acction__event:!e.item["permission"]},staticStyle:{cursor:"pointer"},on:{click:function(i){t.viewDetail(e.item,e.index)}}},[a.hasOwnProperty("layout_view")?i("template-rendering",{attrs:{item:e.item,layout_view:a.layout_view}}):i("span",[t._v("\n              "+t._s(e.item[a.value])+"\n            ")])],1)],1):t._e()}),t.hideAction?t._e():i("td",{staticClass:"text-xs-center px-0 py-0"},[t.loadingTable?i("content-placeholders",[i("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),t.loadingTable||null===t.btnDynamics&&void 0===t.btnDynamics&&"undefined"===t.btnDynamics&&null===t.btnDossierDynamics&&void 0===t.btnDossierDynamics&&"undefined"===t.btnDossierDynamics?t._e():i("v-menu",{attrs:{left:"","nudge-left":50,"nudge-top":15}},[i("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(i){t.processPullBtnDynamics(e.item)}},slot:"activator"},[i("v-icon",[t._v("more_vert")])],1),i("v-list",[t._l(t.btnDynamics,function(a,s){return 3===t.menuType?i("v-list-tile",{key:s+"_menu_"+e.item.dossierId,attrs:{disabled:-1===String(e.item["permission"]).indexOf("write")},on:{click:function(i){t.btnActionEvent(e.item,a,e.index,!1)}}},[i("v-list-tile-title",[t._v(t._s(a.title)+t._s(a.tiltle))])],1):t._e()}),t._l(t.btnDossierDynamics,function(a,s){return(a["enable"]>0||"special"===a["autoEvent"])&&3!==t.menuType?i("v-list-tile",{key:s+"_"+e.item.dossierId,attrs:{disabled:2===a["enable"]||-1===String(e.item["permission"]).indexOf("write")},on:{click:function(i){t.processPullBtnDetail(e.item,a,e.index,s)}}},[i("v-list-tile-title",[t._v(t._s(a.actionName))])],1):t._e()}),t._l(t.btnStepsDynamics,function(a,s){return-1!==String(e.item["permission"]).indexOf("write")&&"NEW"!==String(a.form)&&3!==t.menuType?i("v-list-tile",{key:s+"_"+e.item.dossierId+"_"+e.item.dossierId,on:{click:function(i){t.btnActionEvent(e.item,a,t.index,!1)}}},[i("v-list-tile-title",[t._v(t._s(a.title))])],1):t._e()}),i("v-list-tile",{attrs:{disabled:!e.item["permission"]},on:{click:function(i){t.viewDetail(e.item,e.index)}}},[t._v("\n                Xem chi tiết\n              ")])],2)],1)],1)],2)]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}),i("div",{staticClass:"text-xs-right layout wrap",staticStyle:{position:"relative"}},[i("div",{staticClass:"flex pagging-table px-2"},[i("tiny-pagination",{attrs:{total:t.hosoDatasTotal,page:t.hosoDatasPage,"custom-class":"custom-tiny-class"},on:{"tiny:change-page":t.paggingData}})],1)]),i("v-dialog",{attrs:{"max-width":"400",transition:"fade-transition",persistent:""},model:{value:t.dialogAction,callback:function(e){t.dialogAction=e},expression:"dialogAction"}},[i("v-card",[i("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-card-title",{staticClass:"headline"},[t._v(t._s(t.itemAction.title)+t._s(t.itemAction.tiltle))]),i("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogAction=!1}}},[i("v-icon",[t._v("clear")])],1),t.loadingAction?i("v-progress-linear",{staticClass:"my-0",attrs:{indeterminate:!0}}):t._e(),i("v-card-text",{staticClass:"pb-0 pt-4"},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{staticClass:"px-2 pb-3",attrs:{xs12:""}},[i("v-select",{attrs:{items:t.listThuTucHanhChinh,autocomplete:"",placeholder:"chọn thủ tục hành chính","item-text":"serviceName","item-value":"serviceConfigId","return-object":"","hide-selected":!0},on:{change:t.changeServiceConfigs},model:{value:t.thuTucHanhChinhSelected,callback:function(e){t.thuTucHanhChinhSelected=e},expression:"thuTucHanhChinhSelected"}})],1),i("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[t.thuTucHanhChinhSelected&&t.listDichVu.length>1?i("v-select",{attrs:{items:t.listDichVu,label:"Dịch vụ:",autocomplete:"",placeholder:"chọn dịch vụ","item-text":"optionName","item-value":"processOptionId","return-object":"","hide-selected":!0,rules:[function(t){return!!t||"dịch vụ bắt buộc phải chọn."}],required:""},on:{change:t.changeDichVuConfigs},model:{value:t.dichVuSelected,callback:function(e){t.dichVuSelected=e},expression:"dichVuSelected"}}):t._e()],1)],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"red darken-3",flat:"flat",loading:t.loadingAction,disabled:t.loadingAction},nativeOn:{click:function(e){t.dialogAction=!1}}},[i("v-icon",[t._v("undo")]),t._v(" \n            Quay lại\n            "),i("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1),i("v-btn",{attrs:{color:"primary",flat:"flat",loading:t.loadingAction,disabled:t.loadingAction},nativeOn:{click:function(e){t.doSubmitDialogAction(t.itemAction)}}},[i("v-icon",[t._v("save")]),t._v(" \n            Đồng ý\n            "),i("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1)],1)],1)],1),i("v-dialog",{attrs:{"max-width":"1000",transition:"fade-transition",persistent:""},model:{value:t.dialogActionProcess,callback:function(e){t.dialogActionProcess=e},expression:"dialogActionProcess"}},[i("v-card",[i("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.validProcess,callback:function(e){t.validProcess=e},expression:"validProcess"}},[i("v-card-title",{staticClass:"headline"},[t._v(t._s(t.itemAction.actionName))]),i("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogActionProcess=!1}}},[i("v-icon",[t._v("clear")])],1),t.loadingActionProcess?i("v-progress-linear",{staticClass:"my-0",attrs:{indeterminate:!0}}):t._e(),i("v-card-text",{staticClass:"py-0 px-0"},[i("v-layout",{attrs:{wrap:""}},[t.dialogActionProcess?i("thong-tin-co-ban-ho-so",{attrs:{detailDossier:t.thongtinhoso}}):t._e(),t.dialogActionProcess&&t.showPhanCongNguoiThucHien?i("phan-cong",{attrs:{type:t.type_assign},model:{value:t.assign_items,callback:function(e){t.assign_items=e},expression:"assign_items"}}):t._e(),t.dialogActionProcess&&t.showTraKetQua?i("tra-ket-qua",{attrs:{resultFiles:t.returnFiles}}):t._e(),t.dialogActionProcess&&t.showThuPhi?i("thu-phi",{attrs:{viaPortal:t.viaPortalDetail},model:{value:t.payments,callback:function(e){t.payments=e},expression:"payments"}}):t._e(),t.dialogActionProcess&&t.showYkienCanBoThucHien?i("y-kien-can-bo",{ref:"ykiencanbo",attrs:{user_note:t.userNote}}):t._e()],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"primary",loading:t.loadingActionProcess,disabled:t.loadingActionProcess},nativeOn:{click:function(e){t.submitFormXuLy(t.dossierItemDialogPick,t.itemDialogPick,t.resultDialogPick,t.indexDialogPick,!1)}}},[i("v-icon",[t._v("save")]),t._v(" \n          Xác nhận\n          "),i("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1),i("v-btn",{attrs:{color:"red",dark:"",loading:t.loadingActionProcess,disabled:t.loadingActionProcess},nativeOn:{click:function(e){t.dialogActionProcess=!1}}},[i("v-icon",[t._v("undo")]),t._v(" \n          Quay lại\n          "),i("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1)],1)],1)],1),i("v-dialog",{attrs:{"max-width":"900",transition:"fade-transition"},model:{value:t.dialogPDF,callback:function(e){t.dialogPDF=e},expression:"dialogPDF"}},[i("v-card",[i("v-card-title",{staticClass:"headline"},[t._v(t._s(t.itemAction.title)+t._s(t.itemAction.tiltle))]),i("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogPDF=!1}}},[i("v-icon",[t._v("clear")])],1),t.dialogPDFLoading?i("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[i("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):t._e(),i("iframe",{directives:[{name:"show",rawName:"v-show",value:!t.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPDFPreview",src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1),i("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"700px"},model:{value:t.dialog_statusAction,callback:function(e){t.dialog_statusAction=e},expression:"dialog_statusAction"}},[i("v-card",[i("v-card-title",{staticClass:"headline"},[t._v("\n        Trạng thái xử lý\n      ")]),i("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(e){return t.closeDialogStatusAction(e)}}},[i("v-icon",[t._v("clear")])],1),i("v-card-text",{staticStyle:{"max-height":"350px"}},t._l(t.selected,function(e,a){return i("div",{key:e.dossierIdCTN},[i("v-layout",{staticClass:"py-1 align-center row-list-style",staticStyle:{"border-bottom":"1px solid #ddd",position:"relative"},attrs:{wrap:""}},[i("v-flex",{attrs:{xs11:""}},[i("span",{staticClass:"text-bold",staticStyle:{position:"absolute"}},[t._v(t._s(a+1)+".")]),i("div",{staticClass:"ml-4"},[i("span",{staticClass:"text-bold"},[t._v(t._s(e.dossierNo))]),t._v(" - "+t._s(e.serviceName))])]),i("v-flex",{staticClass:"text-right",attrs:{xs1:""}},[e.statusAction?i("v-tooltip",{attrs:{top:""}},[i("v-icon",{attrs:{slot:"activator",size:"20",color:"primary"},slot:"activator"},[t._v("\n                  check\n                ")]),i("span",[t._v("Thành công")])],1):i("v-tooltip",{attrs:{top:""}},[i("v-icon",{attrs:{slot:"activator",size:"20",color:"red darken-3"},slot:"activator"},[t._v("\n                  block\n                ")]),i("span",[t._v("Thất bại")])],1)],1)],1)],1)}),0),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"primary",loading:t.loadingAction,disabled:t.loadingAction},nativeOn:{click:function(e){return t.resend(e)}}},[i("v-icon",{attrs:{size:"20"}},[t._v("refresh")]),t._v(" \n          Thử lại\n          "),i("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1),i("v-btn",{attrs:{color:"red",dark:"",loading:t.loadingAction,disabled:t.loadingAction},nativeOn:{click:function(e){return t.closeDialogStatusAction(e)}}},[i("v-icon",[t._v("undo")]),t._v(" \n          Thoát\n          "),i("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1)],1)],1),i("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"700px"},model:{value:t.dialog_printGuide,callback:function(e){t.dialog_printGuide=e},expression:"dialog_printGuide"}},[i("v-card",[i("v-card-title",{staticClass:"headline"},[t._v("\n        Thông tin phiếu hướng dẫn hoàn thiện hồ sơ\n      ")]),i("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialog_printGuide=!1}}},[i("v-icon",[t._v("clear")])],1),i("v-card-text",[i("v-form",{ref:"formGuide",attrs:{"lazy-validation":""},model:{value:t.validGuide,callback:function(e){t.validGuide=e},expression:"validGuide"}},[i("v-layout",{staticClass:"py-1 align-center row-list-style",attrs:{wrap:""}},[i("v-flex",{staticClass:"px-2 pb-3",attrs:{xs12:""}},[i("div",{staticClass:"my-2"},[t._v("Thủ tục hành chính:")]),i("v-select",{staticClass:"input-group--text-field-box",attrs:{items:t.listThuTucHanhChinh,autocomplete:"",placeholder:"Chọn thủ tục hành chính","item-text":"serviceName","item-value":"serviceConfigId","return-object":"","hide-selected":!0,rules:[function(t){return!!t||"Thủ tục bắt buộc phải chọn."}],required:""},on:{change:t.changeServiceConfigsGuide},model:{value:t.thuTucHanhChinhSelectedGuide,callback:function(e){t.thuTucHanhChinhSelectedGuide=e},expression:"thuTucHanhChinhSelectedGuide"}})],1),i("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[i("div",{staticClass:"my-2"},[t._v("Dịch vụ:")]),i("v-select",{staticClass:"input-group--text-field-box",attrs:{items:t.listDichVuGuide,placeholder:"Chọn dịch vụ",autocomplete:"","item-text":"optionName","item-value":"processOptionId","return-object":"","hide-selected":!0,rules:[function(t){return!!t||"dịch vụ bắt buộc phải chọn."}],required:""},model:{value:t.dichVuSelectedGuide,callback:function(e){t.dichVuSelectedGuide=e},expression:"dichVuSelectedGuide"}})],1),i("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[i("div",{staticClass:"my-2"},[t._v("Tên người làm thủ tục:")]),i("v-text-field",{attrs:{placeholder:"Nhập tên người làm thủ tục",box:"",rules:[function(t){return!!t||"Trường dữ liệu bắt buộc"}],required:""},model:{value:t.applicantNameGuide,callback:function(e){t.applicantNameGuide=e},expression:"applicantNameGuide"}})],1),i("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[i("div",{staticClass:"my-2"},[t._v("Địa chỉ:")]),i("v-text-field",{attrs:{placeholder:"Nhập địa chỉ",box:""},model:{value:t.applicantAddressGuide,callback:function(e){t.applicantAddressGuide=e},expression:"applicantAddressGuide"}})],1),i("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[i("div",{staticClass:"my-2"},[t._v("Thư điện tử:")]),i("v-text-field",{attrs:{box:"",placeholder:"Nhập thư điện tử"},model:{value:t.applicantEmailGuide,callback:function(e){t.applicantEmailGuide=e},expression:"applicantEmailGuide"}})],1),i("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[i("div",{staticClass:"my-2"},[t._v("Số điện thoại:")]),i("v-text-field",{attrs:{box:""},model:{value:t.applicantTelNoGuide,callback:function(e){t.applicantTelNoGuide=e},expression:"applicantTelNoGuide"}})],1)],1)],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{staticClass:"mr-3",attrs:{color:"primary",loading:t.loadingAction,disabled:t.loadingAction},on:{click:function(e){t.doGuiding("doc")}}},[i("v-icon",[t._v("save")]),t._v("  \n          Lưu phiếu hướng dẫn\n          "),i("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1),i("v-btn",{staticClass:"mr-3",attrs:{color:"primary",loading:t.loadingAction,disabled:t.loadingAction},on:{click:function(e){t.doGuiding("pdf")}}},[i("v-icon",[t._v("print")]),t._v("  \n          In phiếu hướng dẫn\n          "),i("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1)],1)],1),i("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"700px"},model:{value:t.dialog_extraForm,callback:function(e){t.dialog_extraForm=e},expression:"dialog_extraForm"}},[i("v-card",[i("v-card-title",{staticClass:"headline"},[t._v("\n        Điều chỉnh dữ liệu mã hồ sơ: "+t._s(t.selectedDoAction.length>0?t.selectedDoAction[t.selectedDoAction.length-1]["dossierNo"]:"")+"\n      ")]),i("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialog_extraForm=!1}}},[i("v-icon",[t._v("clear")])],1),i("v-card-text",{staticClass:"px-0",attrs:{flat:""}},[i("form-bo-sung-thong-tin",{ref:"formBoSungThongTinNgan",attrs:{dossier_id:t.dossierIdSelected,action_id:t.actionId,type:"dieuchinhdulieu"}})],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{staticClass:"mr-3",attrs:{color:"primary"},on:{click:function(e){t.doChangeDossierExtraForm()}}},[i("v-icon",[t._v("save")]),t._v("  \n          Xác nhận\n        ")],1),i("v-btn",{staticClass:"mr-3",attrs:{color:"primary"},on:{click:function(e){t.dialog_extraForm=!1}}},[i("v-icon",[t._v("clear")]),t._v("  \n          Hủy\n        ")],1)],1)],1)],1)],1)},s=[],o=i("a18c"),n=i("e4e5"),r=i("000e"),l=i("1136"),c=i("7121"),d=i("c23d"),h=i("bf3f"),u=i("f374"),p=i("87c1"),m=i("bbd0"),g=i("d80f"),v={props:["index"],components:{"tiny-pagination":r["a"],"thong-tin-co-ban-ho-so":l["a"],"phan-cong":c["a"],"tra-ket-qua":d["a"],"xac-nhan-thu-phi":h["a"],"thu-phi":u["a"],"y-kien-can-bo":p["a"],"template-rendering":n["a"],"form-bo-sung-thong-tin":g["a"]},data:()=>({isAdminSuper:!1,actionId:"",dossierIdSelected:"",dossierCountingShow:!1,dossierCounting:[],advSearchToolsSelected:[],advSearchTools:m.advSearchTools,advSearchItems:[],advObjectSearch:{},menusss:!1,itemFilterSupport:{years:[{value:"",name:"Lọc theo năm"},{value:"2017",name:"năm 2017"},{value:"2018",name:"năm 2018"},{value:"2019",name:"năm 2019"}],year:"",months:[{value:"",name:"Lọc theo tháng"},{value:"1",name:"tháng 1"},{value:"2",name:"tháng 2"},{value:"3",name:"tháng 3"},{value:"4",name:"tháng 4"},{value:"5",name:"tháng 5"},{value:"6",name:"tháng 6"},{value:"7",name:"tháng 7"},{value:"8",name:"tháng 8"},{value:"9",name:"tháng 9"},{value:"10",name:"tháng 10"},{value:"11",name:"tháng 11"},{value:"12",name:"tháng 12"}],month:"",days:[],day:"",tops:[{value:"",name:"toàn bộ"},{value:"overdue",name:"hồ sơ đang quá hạn cần giải quyết"},{value:"delay",name:"chậm hạn trả"},{value:"coming",name:"sắp đến hạn"}],top:"",statusLists:[],status:"",substatusLists:[{itemCode:"",itemName:"toàn bộ"}],substatus:"",agencyLists:[],agency:"",serviceLists:[],service:"",domainLists:[],domain:"",keyword:"",register:""},itemFilterKey:["year","month","day","top","status","substatus","agency","service","domain","keyword","register"],menuType:0,type_assign:"",assign_items:[],returnFiles:[],payments:"",viaPortalDetail:0,countSelected:0,statusFailed:0,dialog_statusAction:!1,dialog_printGuide:!1,dialog_extraForm:!1,validGuide:!1,applicantNameGuide:"",applicantEmailGuide:"",applicantTelNoGuide:"",applicantAddressGuide:"",dossierSelected:[{dossierNo:"18ACE289",serviceName:"Đăng ký, cấp Giấy chứng nhận quyền sử dụng đất, quyền sở hữu nhà ở và tài sản khác gắn liền với đất lần đầu đối với tài sản gắn liền với đất mà chủ sở hữu không đồng thời là người sử dụng đất",statusAction:!1}],buttonConfigItem:{},textNote:"",thongtinhoso:{},dossierId:0,valid:!0,isCallBack:!0,trangThaiHoSoList:null,listDichVu:[],dichVuSelected:null,btnDynamics:[],btnDossierDynamics:[],btnStepsDynamics:[],loading:!0,headers:[],hideAction:!1,hosoDatas:[],hosoDatasTotal:0,hosoDatasPage:1,hosoTotalPage:0,selectedDoAction:[],selectMultiplePage:[],selected:[],listThuTucHanhChinh:[],listThuTuc:[],thuTucHanhChinhSelected:null,thuTucHanhChinhSelectedGuide:null,listLinhVuc:[],linhVucSelected:null,listDichVuGuide:[],dichVuSelectedGuide:null,templateNoGuide:"",domainCode:"",govAgencyCode:"",serviceCode:"",templateNo:"",dossierNoKey:"",dialogAction:!1,loadingAction:!1,dialogActionProcess:!1,loadingActionProcess:!1,validProcess:!1,indexAction:-1,itemAction:{title:""},showThongTinCoBanHoSo:!1,showYkienCanBoThucHien:!1,showFormBoSungThongTinNgan:!1,showPhanCongNguoiThucHien:!1,showTaoTaiLieuKetQua:!1,showKyPheDuyetTaiLieu:!1,showTraKetQua:!1,showXacNhanThuPhi:!1,showThuPhi:!1,showThucHienThanhToanDienTu:!1,dossierItemDialogPick:null,itemDialogPick:null,resultDialogPick:null,indexDialogPick:0,userNote:0,dialogPDF:!1,dialogPDFLoading:!0,filterForm:null,checkSelectAll:!1,titleLanding:"",currentQueryState:""}),computed:{loadingDynamicBtn(){return this.$store.getters.loadingDynamicBtn},loadingTable(){return this.$store.getters.loadingTable},originality(){var t=this;return t.getOriginality()},currentUser(){return this.$store.getters.loadingInitData.user},activeLoadingDataHoSo(){return this.$store.getters.activeLoadingDataHoSo}},created(){var t=this;t.selectMultiplePage=[],t.itemFilterSupport.days=[{value:"",name:"Lọc theo ngày"}];for(let e=1;e<=31;e++){let i={value:e,name:"Ngày "+e};t.itemFilterSupport.days.push(i)}t.$nextTick(function(){t.checkSelectAll=3!==t.menuType&&1!==t.originality;let e=t.$router.history.current.query,i=t.$router.history.current.query;t.currentQueryState=e,e.hasOwnProperty("page")&&"1"!==e["page"]?t.hosoDatasPage=parseInt(e["page"]):t.hosoDatasPage=1,t.setStateAdvSearch(i)})},updated(){var t=this;t.$nextTick(function(){let e=t.$router.history.current.params,i=t.$router.history.current.query;t.currentQueryState=i,e.hasOwnProperty("index")&&t.isCallBack&&(t.isCallBack=!1,t.checkSelectAll=3!==t.menuType&&1!==t.originality,t.$store.commit("setLoadingDynamicBtn",!0),setTimeout(()=>{t.$store.dispatch("loadMenuConfigToDo").then(function(e){t.btnDynamics=[],t.trangThaiHoSoList=e,t.menuType=parseInt(t.trangThaiHoSoList[t.index]["menuType"]),t.processListTTHC(i),t.processListDomain(i),null!==t.trangThaiHoSoList[t.index]["tableConfig"]&&void 0!==t.trangThaiHoSoList[t.index]["tableConfig"]&&t.trangThaiHoSoList[t.index]["tableConfig"].hasOwnProperty("headers")&&(t.headers=t.trangThaiHoSoList[t.index]["tableConfig"]["headers"]),null!==t.trangThaiHoSoList[t.index]["tableConfig"]&&void 0!==t.trangThaiHoSoList[t.index]["tableConfig"]&&t.trangThaiHoSoList[t.index]["tableConfig"].hasOwnProperty("hideAction")&&(t.hideAction=t.trangThaiHoSoList[t.index]["tableConfig"]["hideAction"]),null!==t.trangThaiHoSoList[t.index]["buttonConfig"]&&void 0!==t.trangThaiHoSoList[t.index]["buttonConfig"]&&t.trangThaiHoSoList[t.index]["buttonConfig"].hasOwnProperty("buttons")&&(t.btnDynamics=t.trangThaiHoSoList[t.index]["buttonConfig"]["buttons"]),null!==t.trangThaiHoSoList[t.index]["buttonConfig"]&&void 0!==t.trangThaiHoSoList[t.index]["buttonConfig"]&&t.trangThaiHoSoList[t.index]["buttonConfig"].hasOwnProperty("layout_view")&&(t.filterForm=t.trangThaiHoSoList[t.index]["buttonConfig"]["layout_view"]);let a=[],s=[];for(let i in t.btnDynamics)t.btnDynamics[i].hasOwnProperty("onlySteps")?a.push(t.btnDynamics[i]):s.push(t.btnDynamics[i]);if(t.btnDynamics=[],t.btnDynamics=s,t.btnStepsDynamics=[],i.hasOwnProperty("step"))for(let n in t.trangThaiHoSoList[t.index]["items"]){let e=t.trangThaiHoSoList[t.index]["items"][n];if(String(e.stepCode)===String(i.step)){for(let i in a)for(var o=0;o<a[i].onlySteps.length;o++)String(a[i].onlySteps[o])===String(e.stepCode)&&t.btnDynamics.push(a[i]);break}}t.$store.commit("setLoadingDynamicBtn",!1)})},200))})},watch:{$route:function(t,e){let i=this,a=t.query,s=e.query;if(i.currentQueryState=a,i.checkSelectAll=3!==i.menuType&&1!==i.originality,a.hasOwnProperty("q")){i.btnDynamics=[],i.$store.commit("setLoadingDynamicBtn",!0),i.menuType=i.trangThaiHoSoList[i.index]["menuType"],i.headers=i.trangThaiHoSoList[i.index]["tableConfig"]["headers"],null!==i.trangThaiHoSoList[i.index]["tableConfig"]&&void 0!==i.trangThaiHoSoList[i.index]["tableConfig"]&&i.trangThaiHoSoList[i.index]["tableConfig"].hasOwnProperty("hideAction")&&(i.hideAction=i.trangThaiHoSoList[i.index]["tableConfig"]["hideAction"]),null!==i.trangThaiHoSoList[i.index]["buttonConfig"]&&void 0!==i.trangThaiHoSoList[i.index]["buttonConfig"]&&i.trangThaiHoSoList[i.index]["buttonConfig"].hasOwnProperty("buttons")&&(i.btnDynamics=i.trangThaiHoSoList[i.index]["buttonConfig"]["buttons"]),null!==i.trangThaiHoSoList[i.index]["buttonConfig"]&&void 0!==i.trangThaiHoSoList[i.index]["buttonConfig"]&&i.trangThaiHoSoList[i.index]["buttonConfig"].hasOwnProperty("layout_view")&&(i.filterForm=i.trangThaiHoSoList[i.index]["buttonConfig"]["layout_view"]);let t=[],e=[];for(let a in i.btnDynamics)i.btnDynamics[a].hasOwnProperty("onlySteps")?t.push(i.btnDynamics[a]):e.push(i.btnDynamics[a]);if(i.btnDynamics=[],i.btnDynamics=e,i.btnStepsDynamics=[],a.hasOwnProperty("step"))for(let s in i.trangThaiHoSoList[i.index]["items"]){let e=i.trangThaiHoSoList[i.index]["items"][s];if(String(e.stepCode)===String(a.step)){for(let a in t)for(var o=0;o<t[a].onlySteps.length;o++)String(t[a].onlySteps[o])===String(e.stepCode)&&i.btnDynamics.push(t[a]);break}}if(a.hasOwnProperty("page")?(i.hosoDatasPage=parseInt(a.page),a.page===s["page"]&&(i.selectMultiplePage=[])):(i.hosoDatasPage=1,i.selectMultiplePage=[]),i.$store.commit("setLoadingDynamicBtn",!1),null===i.listLinhVuc||void 0===i.listLinhVuc||null!==i.listLinhVuc&&void 0!==i.listLinhVuc&&0===i.listLinhVuc.length)i.processListDomain(a);else for(let s in i.listLinhVuc)String(i.listLinhVuc[s]["domainCode"])===String(a.domain)&&(i.linhVucSelected=i.listLinhVuc[s],i.domainCode=i.linhVucSelected["domainCode"]);null===i.listThuTucHanhChinh||void 0===i.listThuTucHanhChinh||null!==i.listThuTucHanhChinh&&void 0!==i.listThuTucHanhChinh&&0===i.listThuTucHanhChinh.length?i.processListTTHC(a):i.doLoadingDataHoSo(),i.setStateAdvSearch(a)}},activeLoadingDataHoSo(t){var e=this;setTimeout(function(){e.doLoadingDataHoSo()},100)},selectMultiplePage:{handler:function(t){let e=this;if(t.length>0){e.selectedDoAction=[];for(let i in t)e.selectedDoAction=e.selectedDoAction.concat(t[i]["selected"])}else e.selectedDoAction=[]},deep:!0}},methods:{toggleAll(){var t=this;if(t.getUser("Administrator"))t.selected.length?t.selected=[]:t.selected=t.hosoDatas;else{if(!t.thuTucHanhChinhSelected||t.thuTucHanhChinhSelected&&"0"===t.thuTucHanhChinhSelected.serviceConfigId||t.thuTucHanhChinhSelected&&""===t.thuTucHanhChinhSelected.serviceConfigId)return;t.selected.length?t.selected=[]:t.selected=t.hosoDatas.filter(function(t){return 0!==t["assigned"]})}t.selectMultiplePage[t.hosoDatasPage-1]["selected"]=t.selected},getUser(t){let e=this,i=e.$store.getters.getUser.role,a=i.findIndex(e=>e===t);return a>=0},changeSelected(){let t=this;t.selectMultiplePage[t.hosoDatasPage-1]["selected"]=t.selected},setStateAdvSearch(t){let e=this;if(t.hasOwnProperty("adv_renew")){e.advSearchItems=[];for(let i in e.itemFilterKey)for(let a in t){if(e.itemFilterKey[i]===a&&t[a]){e.itemFilterSupport[e.itemFilterKey[i]]=t[a];break}e.itemFilterSupport[e.itemFilterKey[i]]=""}for(let t in e.itemFilterKey){let i=e.itemFilterKey[t],a=e.advSearchTools.find(function(t){return t.spec===i});if(e.itemFilterSupport[i])if("keyword"===i)e.advSearchItems.push({spec:i,value:i+":"+e.itemFilterSupport[i],text:i+":"+e.itemFilterSupport[i],index:-1});else if("year"===i){let t=e.advSearchItems.find(function(t){return"year_month_day"===t.spec});t?(t["value"]="year_month_day:"+e.itemFilterSupport[i]+"_"+e.itemFilterSupport["month"]+"_"+e.itemFilterSupport["day"],t["text"]="year_month_day:"+e.itemFilterSupport[i]+"_"+e.itemFilterSupport["month"]+"_"+e.itemFilterSupport["day"],t["index"]=0):e.advSearchItems.push({spec:"year_month_day",value:"year_month_day:"+e.itemFilterSupport[i]+"_"+e.itemFilterSupport["month"]+"_"+e.itemFilterSupport["day"],text:"year_month_day:"+e.itemFilterSupport[i]+"_"+e.itemFilterSupport["month"]+"_"+e.itemFilterSupport["day"],index:0})}else if("month"===i){let t=e.advSearchItems.find(function(t){return"year_month_day"===t.spec});t?(t["value"]="year_month_day:"+e.itemFilterSupport["year"]+"_"+e.itemFilterSupport[i]+"_"+e.itemFilterSupport["day"],t["text"]="year_month_day:"+e.itemFilterSupport["year"]+"_"+e.itemFilterSupport[i]+"_"+e.itemFilterSupport["day"],t["index"]=0):e.advSearchItems.push({spec:"year_month_day",value:"year_month_day:"+e.itemFilterSupport["year"]+"_"+e.itemFilterSupport[i]+"_"+e.itemFilterSupport["day"],text:"year_month_day:"+e.itemFilterSupport["year"]+"_"+e.itemFilterSupport[i]+"_"+e.itemFilterSupport["day"],index:0})}else if("day"===i){let t=e.advSearchItems.find(function(t){return"year_month_day"===t.spec});t?(t["value"]="year_month_day:"+e.itemFilterSupport["year"]+"_"+e.itemFilterSupport["month"]+"_"+e.itemFilterSupport[i],t["text"]="year_month_day:"+e.itemFilterSupport["year"]+"_"+e.itemFilterSupport["month"]+"_"+e.itemFilterSupport[i],t["index"]=0):e.advSearchItems.push({spec:"year_month_day",value:"year_month_day:"+e.itemFilterSupport["year"]+"_"+e.itemFilterSupport["month"]+"_"+e.itemFilterSupport[i],text:"year_month_day:"+e.itemFilterSupport["year"]+"_"+e.itemFilterSupport["month"]+"_"+e.itemFilterSupport[i],index:0})}else e.advSearchItems.push({spec:i,value:i+":"+e.itemFilterSupport[i],text:i+":"+e.itemFilterSupport[i],index:a["index"]})}}else e.advSearchItems=[];for(let i in e.advSearchTools){e.advSearchTools[i].display=!1,e.advSearchTools[i].disabled=!1;let t=e.advSearchItems.find(function(t){return t.spec===e.advSearchTools[i].spec});t&&(e.advSearchTools[i].display=!0,e.advSearchTools[i].disabled=!0)}},resend(){var t=this;t.doActions(null,t.buttonConfigItem,null,!0)},closeDialogStatusAction(){var t=this;t.dialog_statusAction=!1,t.selectedDoAction=t.selectedDoAction.filter(function(t){return!t.statusAction})},submitFormXuLy(t,e,i,a,s){var o=this;if(o.showYkienCanBoThucHien){let s=o.$refs.ykiencanbo.doExport();s.valid&&(o.textNote=s.text,o.processAction(t,e,i,a,!1))}else o.processAction(t,e,i,a,!1)},processListTTHC(t){let e=this;e.$store.dispatch("loadListThuTucHanhChinh").then(function(i){if((!t.hasOwnProperty("domain")||t.hasOwnProperty("domain")&&""===String(t.domain))&&(e.listThuTucHanhChinh=i.map(t=>{return t["displayName"]=t["serviceCode"]+" - "+t["serviceName"],t})),e.listThuTuc=i.map(t=>{return t["displayName"]=t["serviceCode"]+" - "+t["serviceName"],t}),t.hasOwnProperty("service_config")&&"0"!==String(t.service_config)){for(let a in e.listThuTucHanhChinh)if(String(e.listThuTucHanhChinh[a].serviceConfigId)===String(t.service_config)){if(e.thuTucHanhChinhSelected=e.listThuTucHanhChinh[a],null!==e.thuTucHanhChinhSelected&&void 0!==e.thuTucHanhChinhSelected&&e.thuTucHanhChinhSelected.hasOwnProperty("options"))if(e.govAgencyCode=e.thuTucHanhChinhSelected.govAgencyCode,e.serviceCode=e.thuTucHanhChinhSelected.serviceCode,t.hasOwnProperty("template_no")){e.listDichVu=e.thuTucHanhChinhSelected.options;for(let i in e.listDichVu)e.listDichVu[i].templateNo===t.template_no&&(e.dichVuSelected=e.listDichVu[i],e.templateNo=e.dichVuSelected.templateNo)}else e.listDichVu=[],e.dichVuSelected=null,e.govAgencyCode="",e.serviceCode="",e.templateNo="";break}}else e.thuTucHanhChinhSelected=null,e.dichVuSelected=null,e.govAgencyCode="",e.serviceCode="",e.templateNo="";e.doLoadingDataHoSo()})},processListDomain(t){let e=this;e.$store.dispatch("getDomainLists").then(function(i){if(i.length>0&&(e.listLinhVuc=i.map(t=>{return t["displayName"]=t["domainCode"]+" - "+t["domainName"],t})),t.hasOwnProperty("domain")&&""!==String(t.domain)){for(let a in e.listLinhVuc)String(e.listLinhVuc[a]["domainCode"])===String(t.domain)&&(e.linhVucSelected=e.listLinhVuc[a],e.domainCode=e.linhVucSelected["domainCode"]);let i={domain:e.linhVucSelected.domainCode};e.$store.dispatch("getServiceinfoFilter",i).then(t=>{e.listThuTucHanhChinh=t.map(t=>{return t["displayName"]=t["serviceCode"]+" - "+t["serviceName"],t})})}else e.linhVucSelected=null})},checkPemissionSpecialAction(t,e,i){var a=this,s=!0;if("PRINT_01"!==t&&"PRINT_02"!==t&&"PRINT_03"!==t&&"GUIDE"!==t&&"PREVIEW"!==t&&"BETIMES"!==t){let t=a.$store.getters.getUsersNextAction;if(t.length>0){let i=t.filter(function(t){return t["userId"].toString()===e["userId"].toString()});s=i.length>0}else s=!1}return"ROLLBACK_01"!==t&&"ROLLBACK_02"!==t&&"ROLLBACK_03"!==t||(s=!1),s},paggingData(t){let e=this,i=e.$router.history.current,a=i.query,s="?";a["page"]="";for(let o in a)""!==a[o]&&"undefined"!==a[o]&&void 0!==a[o]&&(s+=o+"="+a[o]+"&");s+="page="+t.page,e.$router.push({path:i.path+s})},doLoadingDataHoSo(){let t=this;t.selected=[];let e=o["a"].history.current.query;if(console.log("currentQuery======",e),e.hasOwnProperty("q")){let a;a=e.q.indexOf("step")>0?e.q:e["step"]?e.q+"&step="+e["step"]:e.q;var i=null;if(3!==t.menuType)i={queryParams:a,page:t.hosoDatasPage,agency:e.hasOwnProperty("agency")?e.agency:t.govAgencyCode,service:e.hasOwnProperty("service")?e.service:t.serviceCode,template:e.hasOwnProperty("template")?e.template:t.templateNo,domain:e.hasOwnProperty("domain")?e.domain:t.domainCode,status:e.hasOwnProperty("status")?e.status:"",substatus:e.hasOwnProperty("substatus")?e.substatus:"",year:e.hasOwnProperty("year")?e.year:0,month:e.hasOwnProperty("month")?e.month:0,day:e.hasOwnProperty("day")?e.day:0,top:e.hasOwnProperty("top")?e.top:"",keyword:e.hasOwnProperty("keyword")?e.keyword:"",register:e.hasOwnProperty("register")?e.register:"",dossierNo:t.dossierNoKey?t.dossierNoKey:""};else{let s=e.hasOwnProperty("status")&&"deleted"===e["status"]?-1:"";i={queryParams:a,page:t.hosoDatasPage,agency:e.hasOwnProperty("agency")?e.agency:t.govAgencyCode,service:e.hasOwnProperty("service")?e.service:t.serviceCode,template:e.hasOwnProperty("template")?e.template:t.templateNo,domain:e.hasOwnProperty("domain")?e.domain:t.domainCode,status:e.hasOwnProperty("status")&&e["status"]&&"deleted"!==e["status"]?e.status:"",substatus:e.hasOwnProperty("substatus")?e.substatus:"",year:e.hasOwnProperty("year")?e.year:0,month:e.hasOwnProperty("month")?e.month:0,day:e.hasOwnProperty("day")?e.day:0,top:e.hasOwnProperty("top")?e.top:"",keyword:e.hasOwnProperty("keyword")?e.keyword:"",register:e.hasOwnProperty("register")?e.register:"",originality:e.hasOwnProperty("originality")&&e["originality"]?e.originality:s,dossierNo:t.dossierNoKey?t.dossierNoKey:""}}t.$store.dispatch("loadingDataHoSo",i).then(function(e){if(t.hosoDatas=e.data,t.hosoDatasTotal=e.total,t.hosoTotalPage=Math.ceil(t.hosoDatasTotal/15),t.hosoTotalPage>0&&0===t.selectMultiplePage.length){for(let e=0;e<t.hosoTotalPage;e++){let i={selected:[],page:e+1};t.selectMultiplePage.push(i)}console.log("selectMultiplePage",t.selectMultiplePage)}t.selected=t.selectMultiplePage[t.hosoDatasPage-1]["selected"]}).catch(e=>{t.hosoDatas=[],t.hosoDatasTotal=0})}3===t.menuType||"3"===String(t.menuType)?setTimeout(()=>{t.$store.dispatch("loadingDossierCounting").then(function(e){if(null!==e&&void 0!==e){if(t.dossierCounting=e,t.getUser("Administrator_data")){let e={key:"deleted",title:"Hồ sơ đã xóa",count:0};t.dossierCounting.push(e)}}else t.dossierCounting=[];t.dossierCountingShow=!0})},200):t.dossierCountingShow=!1},changeServiceConfigs(t){let e=this;e.selectMultiplePage=[],null!==t&&"null"!==t&&t.hasOwnProperty("options")?this.listDichVu=t.options:this.listDichVu=[],null!==this.listDichVu&&void 0!==this.listDichVu&&"undefined"!==this.listDichVu&&this.listDichVu.length>0?(this.dichVuSelected=this.listDichVu[0],this.templateNo=this.dichVuSelected.templateNo):this.dichVuSelected=null;let i=e.$router.history.current,a=i.query,s="?";a["service_config"]="",a["template_no"]="";for(let o in a)"page"===o?s+=o+"=1&":""!==a[o]&&"undefined"!==a[o]&&void 0!==a[o]&&"step"!==o&&(s+=o+"="+a[o]+"&");-1===String(a["q"]).indexOf("&step")&&3!==e.menuType&&(s+="step="+a["step"]+"&"),null!==this.listDichVu&&void 0!==this.listDichVu&&"undefined"!==this.listDichVu&&this.listDichVu.length>0?(s+="service_config="+t.serviceConfigId,s+="&template_no="+this.dichVuSelected.templateNo,e.govAgencyCode=t.govAgencyCode,e.serviceCode=t.serviceCode):(e.templateNo="",e.govAgencyCode="",e.serviceCode=""),e.$router.push({path:i.path+s})},changeServiceConfigsGuide(t){null!==t&&"null"!==t&&t.hasOwnProperty("options")?this.listDichVuGuide=t.options:this.listDichVuGuide=[],null!==this.listDichVuGuide&&void 0!==this.listDichVuGuide&&"undefined"!==this.listDichVuGuide&&this.listDichVuGuide.length>0?(this.dichVuSelectedGuide=this.listDichVuGuide[0],this.templateNoGuide=this.dichVuSelectedGuide.templateNo):this.dichVuSelectedGuide=null},changeDomain(t){let e=this;e.selectMultiplePage=[],e.linhVucSelected=t,t?setTimeout(function(){let t={domain:e.linhVucSelected.domainCode};e.$store.dispatch("getServiceinfoFilter",t).then(t=>{e.listThuTucHanhChinh=t.map(t=>{return t["displayName"]=t["serviceCode"]+" - "+t["serviceName"],t})})},100):e.listThuTucHanhChinh=e.listThuTuc,e.domainCode=null!==t?e.linhVucSelected["domainCode"]:"";let i=e.$router.history.current,a=i.query,s="?";a["domain"]="";for(let o in a)"page"===o?s+=o+"=1&":""!==a[o]&&"undefined"!==a[o]&&void 0!==a[o]&&"step"!==o&&(s+=o+"="+a[o]+"&");-1===String(a["q"]).indexOf("&step")&&3!==e.menuType&&(s+="step="+a["step"]+"&"),s+="domain="+e.domainCode,e.$router.push({path:i.path+s,query:{renew:Math.floor(100*Math.random())+1}})},changeDossierNoKey(){var t=this;t.selectMultiplePage=[],setTimeout(function(){t.dossierNoKey?(t.dossierNoKey.length>3||""===t.dossierNoKey)&&t.doLoadingDataHoSo():t.doLoadingDataHoSo()},200)},clearDossierNoKey(){this.dossierNoKey="",this.changeDossierNoKey()},changeDichVuConfigs(t){let e=this;e.selectMultiplePage=[];let i=e.$router.history.current,a=i.query,s="?";a["template_no"]="";for(let o in a)""!==a[o]&&"undefined"!==a[o]&&void 0!==a[o]&&(s+=o+"="+a[o]+"&");s+="template_no="+t.templateNo,e.templateNo=t.templateNo,e.$router.push({path:i.path+s})},btnActionEvent(t,e,i,a){let s=this;if(s.buttonConfigItem={},s.buttonConfigItem=e,s.itemAction=e,s.indexAction=i,"NEW"===String(e.form)){let t=!0;null!==s.dichVuSelected&&void 0!==s.dichVuSelected&&"undefined"!==s.dichVuSelected&&null!==s.listDichVu&&void 0!==s.listDichVu&&1===s.listDichVu.length&&(t=!1),t?s.dialogAction=!0:s.doCreateDossier()}else if("UPDATE"===String(e.form))o["a"].push({path:"/danh-sach-ho-so/"+s.index+"/ho-so/"+t.dossierId+"/"+s.itemAction.form,query:s.$router.history.current.query});else if("ADD"===String(e.form))o["a"].push({path:"/danh-sach-ho-so/"+s.index+"/bo-sung-ho-so/"+t.dossierId,query:s.$router.history.current.query});else if("COPY"===String(e.form))s.doCopy(t,e,i,a);else if("CANCEL"===String(e.form))s.doCancel(t,e,i,a);else if("PRINT_01"===String(e.form))s.doPrint01(t,e,i,a);else if("PRINT_02"===String(e.form))s.doPrint02(t,e,i,a);else if("PRINT_03"===String(e.form))s.doPrint03(t,e,i,a);else if("GUIDING"===String(e.form))s.dialog_printGuide=!0;else if("PREVIEW"===String(e.form))s.doPreview(t,e,i,a);else if("ACTIONS"===String(e.form))s.doActions(t,e,i,a);else if("DELETE"===String(e.form))s.doDeleteDossier(t,e,i,a);else if("ROLLBACK_01"===String(e.form)){let a={actionCode:9e3};s.processAction(t,e,a,i,!0)}else if("ROLLBACK_02"===String(e.form)){let a={actionCode:9e3};s.processAction(t,e,a,i,!0)}else if("OVERDUE"===String(e.form)){let e={actionCode:8500,dossierId:t.dossierId,overdue:t["extendDate"]};s.processPullBtnDetailRouter(t,null,e,null,8500)}else if("PREOVERDUE"===String(e.form)){let e={actionCode:8501,dossierId:t.dossierId,preoverdue:t["extendDate"]};s.processPullBtnDetailRouter(t,null,e,null,8501)}else if("BETIMES"===String(e.form)){let e={actionCode:8400,dossierId:t.dossierId,betimes:t["extendDate"]};s.processPullBtnDetailRouter(t,null,e,null,8400)}else if("CHANGE_DATA_DOSSIER"===String(e.form))s.doChangeDossier(t,e,i,a);else if("UNDO_DOSSIER"===String(e.form))s.doUndoDossier(t,e,i,a);else if("RESTORE_DOSSIER"===String(e.form))s.doRestoreDossier(t,e,i,a);else if("GOTO_DONE"===String(e.form)){if(!t)return void alert("Chọn hồ sơ để thực hiện");let e={stepCode:400,stepName:"hoàn thành"};s.gotoStep(t,e)}else if("GOTO_CANCEL"===String(e.form)){if(!t)return void alert("Chọn hồ sơ để thực hiện");let e={stepCode:410,stepName:"rút"};s.gotoStep(t,e)}else if("GOTO_DENY"===String(e.form)){if(!t)return void alert("Chọn hồ sơ để thực hiện");let e={stepCode:420,stepName:"từ chối"};s.gotoStep(t,e)}},doPrint01(t,e,i,a){let s=this;s.dialogPDFLoading=!0,s.dialogPDF=!0;let o={dossierId:t.dossierId,document:e.document};s.$store.dispatch("doPrint01",o).then(function(t){s.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=t})},doPrint02(t,e,i,a){let s=this;if(console.log("vm.selectedDoAction",s.selectedDoAction),null===s.thuTucHanhChinhSelected||void 0===s.thuTucHanhChinhSelected||"undefined"===s.thuTucHanhChinhSelected)alert("Loại thủ tục bắt buộc phải chọn");else{let t={document:e.document,serviceCode:s.thuTucHanhChinhSelected.serviceCode,govAgencyCode:s.thuTucHanhChinhSelected.govAgencyCode,dossiers:JSON.stringify(s.selectedDoAction)};s.dialogPDFLoading=!0,s.dialogPDF=!0,s.$store.dispatch("doPrint02",t).then(function(t){s.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=t})}},doPrint03(t,e,i,a){let s=this;s.dialogPDFLoading=!0,s.dialogPDF=!0;let o={dossierId:t.dossierId,document:e.document};s.$store.dispatch("doPrint03",o).then(function(t){s.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=t})},doGuiding(t){let e=this;if(e.$refs.formGuide.validate()){e.loadingAction=!0;let i={serviceConfigId:e.thuTucHanhChinhSelectedGuide.serviceConfigId,serviceCode:e.thuTucHanhChinhSelectedGuide.serviceCode,serviceName:e.thuTucHanhChinhSelectedGuide.serviceName,templateNo:e.templateNoGuide,applicantName:e.applicantNameGuide,applicantAddress:e.applicantAddressGuide,applicantEmail:e.applicantEmailGuide,applicantTelNo:e.applicantTelNoGuide,typeCode:"DOC_03"};"doc"===t&&(i["reportType"]="word"),"doc"!==t&&(e.dialogPDFLoading=!0,e.dialogPDF=!0),e.$store.dispatch("doGuiding",i).then(function(i){e.loadingAction=!1,e.dialog_printGuide=!1,e.dialogPDFLoading=!1,"doc"!==t&&(document.getElementById("dialogPDFPreview").src=i)}).catch(function(){e.loadingAction=!1})}},doPreview(t,e,i,a){let s=this;s.dialogPDFLoading=!0,s.dialogPDF=!0;let o={dossierId:t.dossierId,document:e.document};s.$store.dispatch("doPrint03",o).then(function(t){s.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=t})},doActions(t,e,i,a){let s=this;s.$router.history.current.query,e.action;if(a)if(s.countSelected=0,1===s.selectedDoAction.length)for(let n in s.selectedDoAction){let t=s.selectedDoAction[n];o["a"].push({path:"/danh-sach-ho-so/"+s.index+"/chi-tiet-ho-so/"+t["dossierId"],query:{activeTab:"tabs-1",btnIndex:null}})}else s.selectedDoAction.length>1?s.$store.dispatch("loadActionActive",e).then(function(){s.$store.dispatch("loadDossierSelected",s.selectedDoAction).then(function(){let t=s.selectedDoAction.map(t=>{return t.dossierId}).join(","),i=s.$router.history.current.query;i["dossiers"]=t,i["actionActive"]=JSON.stringify(e),o["a"].push({path:"/danh-sach-ho-so/"+s.index+"/xu-ly-ho-so",query:i})})}):alert("Chọn hồ sơ để thao tác")},doCopy(t,e,i,a){let s=this,n={dossierId:t.dossierId};s.loadingAction=!0,s.$store.dispatch("doCopy",n).then(function(t){s.loadingAction=!1,s.indexAction=-1,o["a"].push({path:"/danh-sach-ho-so/"+s.index+"/ho-so/"+t.dossierId+"/"+s.itemAction.form,query:s.$router.history.current.query})}).catch(t=>{s.loadingAction=!1})},doCancel(t,e,i,a){let s=this;if(s.loadingAction=!0,a);else{let e={dossierId:t.dossierId};s.$store.dispatch("doCancel",e).then(function(t){s.loadingAction=!1,s.indexAction=-1,o["a"].push({path:"/danh-sach-ho-so/"+s.index+"/ho-so/"+t.dossierId+"/"+s.itemAction.form,query:s.$router.history.current.query})}).catch(t=>{s.loadingAction=!1})}},doChangeDossier(t,e,i,a){let s=this;s.$router.history.current.query;if(a)if(s.selectedDoAction.length>0){let t=s.selectedDoAction.length;s.actionId=9100,s.dossierIdSelected=s.selectedDoAction[t-1].dossierId,s.dialog_extraForm=!0}else alert("Chọn hồ sơ để thực hiện")},doUndoDossier(t,e,i,a){let s=this;s.$router.history.current.query;if(s.selectedDoAction.length>0){let t=s.selectedDoAction.length,e=confirm("Xác thực Undo hồ sơ với mã: "+s.selectedDoAction[t-1].dossierNo);if(e){let e={dossierId:s.selectedDoAction[t-1].dossierId};s.$store.dispatch("rollBack",e).then(function(t){setTimeout(function(){s.doLoadingDataHoSo()},300)}).catch(function(){setTimeout(function(){s.doLoadingDataHoSo()},300)})}}else alert("Chọn hồ sơ để thực hiện")},gotoStep(t,e){let i=this;i.$router.history.current.query;if(i.selectedDoAction.length>0){let t=i.selectedDoAction.length,a=confirm("Xác thực "+e["stepName"]+" hồ sơ với mã: "+i.selectedDoAction[t-1].dossierNo);if(a){let a={dossierId:i.selectedDoAction[t-1].dossierId,stepCode:e["stepCode"]};i.$store.dispatch("goToStep",a).then(function(t){setTimeout(function(){i.doLoadingDataHoSo()},300)}).catch(function(){setTimeout(function(){i.doLoadingDataHoSo()},300)})}}else alert("Chọn hồ sơ để thực hiện")},doChangeDossierExtraForm(){let t=this,e=t.$refs.formBoSungThongTinNgan.checkValid();if(e){let e=t.$refs.formBoSungThongTinNgan.formSubmitData();if(e){let i=confirm("Bạn có chắc chắn thực hiện hành động điều chỉnh dữ liệu?");if(i){let i=t.selectedDoAction.length,a={dossierId:t.selectedDoAction[i-1].dossierId,actionCode:t.actionId,payload:e};t.$store.dispatch("processDossierRouter",a).then(function(e){t.doLoadingDataHoSo(),t.dialog_extraForm=!1}).catch(function(){t.dialog_extraForm=!1,t.doLoadingDataHoSo()})}}else t.dialog_extraForm=!1}},doRestoreDossier(){let t=this,e=confirm("Bạn có chắc chắn thực hiện hành động khôi phục hồ sơ?");if(e)if(t.selectedDoAction.length>0){let e=0,i=t.selectedDoAction.length;for(let a in t.selectedDoAction){let s={dossierId:t.selectedDoAction[a]["dossierId"]};console.log("filter Restore",s),t.selectedDoAction[a]["originality"]&&t.$store.dispatch("restoreDossier",s).then(function(a){e+=1,e===i&&t.doLoadingDataHoSo()}).catch(function(){e+=1,e===i&&t.doLoadingDataHoSo()})}}else alert("Chọn hồ sơ để thực hiện")},doDeleteDossier(t,e,i,a){let s=this,n=confirm("Bạn có chắc chắn thực hiện hành động xóa hồ sơ?");if(!n)return!1;{let e=s.$router.history.current.query;if(a){let t={dossierId:0};if(s.selectedDoAction.length>0){let e=[];for(let t in s.selectedDoAction)e.push(s.selectedDoAction[t]["dossierId"]);t["dossierId"]=e,s.$store.dispatch("deleteDossierPatch",t).then(function(t){})}else alert("Chọn hồ sơ để thực hiện")}else{let i={dossierId:t.dossierId};s.$store.dispatch("deleteDossier",i).then(function(t){s.dialogActionProcess=!1,s.loadingActionProcess=!1,o["a"].push({path:s.$router.history.current.path,query:{recount:Math.floor(100*Math.random())+1,renew:Math.floor(100*Math.random())+1,q:e["q"]}})})}}},doCreateDossier(){let t=this,e={serviceCode:t.serviceCode,govAgencyCode:t.govAgencyCode,templateNo:t.templateNo,originality:t.getOriginality()};t.$store.commit("setDataCreateDossier",e),t.loadingAction=!0,t.$store.dispatch("postDossier",e).then(function(e){t.loadingAction=!1,t.indexAction=-1,o["a"].push({path:"/danh-sach-ho-so/"+t.index+"/ho-so/"+e.dossierId+"/"+t.itemAction.form,query:t.$router.history.current.query})}).catch(e=>{t.loadingAction=!1})},doSubmitDialogAction(t){let e=this;e.$refs.form.validate()&&e.doCreateDossier()},processPullBtnDynamics(t){let e=this;e.btnDossierDynamics=[];let i={dossierId:t.dossierId,dossierStatus:t.dossierStatus,dossierSubStatus:t.dossierSubStatus};if(e.dossierId=t.dossierId,""===t.dossierStatus||""===t.dossierSubStatus)e.$store.dispatch("pullNextactions",i).then(t=>{e.btnDossierDynamics=t});else{e.btnStepsDynamics=[];var a=[e.$store.dispatch("pullNextactions",i),e.$store.dispatch("pullBtnConfigStep",i)];Promise.all(a).then(t=>{e.btnDossierDynamics=t[0],e.btnStepsDynamics=t[1]}).catch(t=>{e.$store.dispatch("pullNextactions",i).then(t=>{e.btnDossierDynamics=t})})}},processAction(t,e,i,a,s){let n=this;var r=null;n.payments&&(r={requestPayment:n.payments["requestPayment"],advanceAmount:Number(n.payments["advanceAmount"].toString().replace(/\./g,"")),feeAmount:Number(n.payments["feeAmount"].toString().replace(/\./g,"")),serviceAmount:Number(n.payments["serviceAmount"].toString().replace(/\./g,"")),shipAmount:Number(n.payments["shipAmount"].toString().replace(/\./g,""))});let l={dossierId:t.dossierId,actionCode:i.actionCode,toUsers:n.assign_items,payment:r,userNote:n.textNote?n.textNote:""};n.dossierId=t.dossierId;let c=n.$router.history.current.query,d="?";c["recount"]=Math.floor(100*Math.random())+1,c["renew"]=Math.floor(100*Math.random())+1;for(let o in c)""!==c[o]&&"undefined"!==c[o]&&void 0!==c[o]&&(d+=o+"="+c[o]+"&");if(n.loadingActionProcess=!0,s){let t=confirm("Bạn có muốn thực hiện hành động này?");if(!t)return!1;n.$store.dispatch("processDossierRouter",l).then(function(t){n.dialogActionProcess=!1,n.loadingActionProcess=!1,n.$router.push({path:n.$router.history.current.path+d})})}else t.statusAction||n.$store.dispatch("processCheckNextActions",l).then(function(t){n.$store.dispatch("processDossierRouter",t).then(function(t){n.dialogActionProcess=!1,n.loadingActionProcess=!1,"ACTIONS"===String(e.form)?(n.hosoDatas.splice(a,1),n.selectedDoAction[a].statusAction=!0,n.countSelected+=1,n.countSelected===n.selectedDoAction.length&&n.statusFailed>0&&n.selectedDoAction.length>1?n.dialog_statusAction=!0:n.countSelected===n.selectedDoAction.length&&0===n.statusFailed&&o["a"].push({path:n.$router.history.current.path,query:{recount:Math.floor(100*Math.random())+1,renew:Math.floor(100*Math.random())+1,q:c["q"]}})):o["a"].push({path:n.$router.history.current.path,query:{recount:Math.floor(100*Math.random())+1,renew:Math.floor(100*Math.random())+1,q:c["q"]}})}).catch(function(){n.loadingActionProcess=!1,"ACTIONS"===String(e.form)&&(n.countSelected+=1,n.statusFailed+=1,n.selectedDoAction[a].statusAction=!1,n.countSelected===n.selectedDoAction.length&&n.statusFailed>0&&n.selectedDoAction.length>1&&(n.dialog_statusAction=!0))})})},processPullBtnDetailRouter(t,e,i,a,s){let n=this,r=!1;if(n.dossierId=t.dossierId,n.showYkienCanBoThucHien=!1,n.showFormBoSungThongTinNgan=!1,n.showPhanCongNguoiThucHien=!1,n.showTaoTaiLieuKetQua=!1,n.showKyPheDuyetTaiLieu=!1,n.showTraKetQua=!1,n.showXacNhanThuPhi=!1,n.showThuPhi=!1,n.showThucHienThanhToanDienTu=!1,n.dossierItemDialogPick=t,n.itemDialogPick=e,n.resultDialogPick=i,n.indexDialogPick=a,n.userNote=0,null!==i&&void 0!==i&&"undefined"!==i&&(i.hasOwnProperty("userNote")||i.hasOwnProperty("extraForm")||i.hasOwnProperty("allowAssignUser")||i.hasOwnProperty("createFiles")||i.hasOwnProperty("eSignature")||i.hasOwnProperty("returnFiles")||i.hasOwnProperty("payment")||i.hasOwnProperty("overdue")||i.hasOwnProperty("betimes"))){if(!i.hasOwnProperty("userNote")||1!==i.userNote&&"1"!==i.userNote&&2!==i.userNote&&"2"!==i.userNote||(r=!0,n.showYkienCanBoThucHien=!0,n.userNote=i.userNote),i.hasOwnProperty("extraForm")&&i.extraForm&&(r=!0,n.showFormBoSungThongTinNgan=!0),i.hasOwnProperty("allowAssignUser")&&0!==i.allowAssignUser&&(n.assign_items=i.toUsers,n.type_assign=i.allowAssignUser,r=!0,n.showPhanCongNguoiThucHien=!0),i.hasOwnProperty("returnFiles")&&null!==i.createFiles&&void 0!==i.createFiles&&"undefined"!==i.createFiles&&i.createFiles.length>0&&(r=!0,n.showTaoTaiLieuKetQua=!0),i.hasOwnProperty("eSignature")&&i.eSignature&&(r=!0,n.showKyPheDuyetTaiLieu=!0),i.hasOwnProperty("returnFiles")&&null!==i.returnFiles&&void 0!==i.returnFiles&&"undefined"!==i.returnFiles&&i.returnFiles.length>0&&(r=!0,n.showTraKetQua=!0,n.returnFiles=i.returnFiles),i.hasOwnProperty("payment")&&null!==i.payment&&void 0!==i.payment&&"undefined"!==i.payment&&i.payment.requestPayment>0)if(2===i.payment.requestPayment||"2"===i.payment.requestPayment){r=!0;let t={dossierId:n.dossierId};n.$store.dispatch("loadDossierPayments",t).then(t=>{n.paymentProfile=t}).catch(t=>{})}else r=!0,n.showThuPhi=!0,n.payments=i.payment,n.viaPortalDetail=t.viaPostal;i.hasOwnProperty("overdue")&&(r=!0),i.hasOwnProperty("betimes")&&(r=!0)}if(r){let e={activeTab:"tabs-1",btnIndex:s};o["a"].push({path:"/danh-sach-ho-so/"+n.index+"/chi-tiet-ho-so/"+t["dossierId"],query:e})}else n.processAction(t,e,i,a,!0)},processPullBtnDetail(t,e,i,a){let s=this;if(1===e["enable"]||"special"===e["autoEvent"]){s.itemAction=e;let o={dossierId:t.dossierId,actionId:e.processActionId};s.dossierId=t.dossierId,s.loadingActionProcess=!0,s.$store.dispatch("processPullBtnDetail",o).then(function(o){s.processPullBtnDetailRouter(t,e,o,i,a)})}},goBack(){window.history.back()},viewDetail(t,e){console.log("permission: ",t.permission),null!==t.permission&&""!==t.permission&&o["a"].push("/danh-sach-ho-so/"+this.index+"/chi-tiet-ho-so/"+t["dossierId"])},keywordEventChange(t){let e=this;e.selectMultiplePage=[],console.log("keywordEventChange",t),e.advObjectSearch={};for(let i in t)if("string"===typeof t[i]&&null!==t[i]&&void 0!==t[i]&&"undefined"!==t[i])if(t[i].startsWith("keyword:")||t[i].startsWith("year_month_day:")||t[i].startsWith("top:")||t[i].startsWith("status:")||t[i].startsWith("substatus:")||t[i].startsWith("agency:")||t[i].startsWith("service:")||t[i].startsWith("domain:")||t[i].startsWith("register:")||(e.advObjectSearch["keyword"]=t[i]),t[i].startsWith("keyword:"))e.advObjectSearch["keyword"]=t[i].replace("keyword:","");else for(let a in e.advSearchItems)t[i].startsWith(e.advSearchItems[a].spec+":")&&(e.advObjectSearch[e.advSearchItems[a].spec]=t[i].replace(e.advSearchItems[a].spec+":",""));else{let a=t[i].value;e.advObjectSearch[t[i].spec]=a.replace(t[i].spec+":","")}e.advSearchItems=[];for(let i in e.advObjectSearch){if(!e.advObjectSearch.hasOwnProperty(i))continue;let t=e.advObjectSearch[i];if("string"===typeof t&&null!==t&&void 0!==t&&""!==t)if("keyword"===i)e.advSearchItems.push({spec:i,value:i+":"+t,text:i+":"+t,index:-1});else{let a=-2;for(let t in e.advSearchTools)if(e.advSearchTools[t].spec===i){a=e.advSearchTools[t].index;break}e.advSearchItems.push({spec:i,value:i+":"+t,text:i+":"+t,index:a})}else"string"!==typeof t&&null!==t&&void 0!==t&&""!==t&&e.advSearchItems.push({spec:i,value:i+":"+t.value,text:i+":"+t.value,index:i+":"+t.index})}for(let i in e.advSearchTools)e.advSearchTools[i].display=!1,e.advSearchTools[i].disabled=!1,null!==e.advObjectSearch[e.advSearchTools[i].spec]&&void 0!==e.advObjectSearch[e.advSearchTools[i].spec]&&""!==e.advObjectSearch[e.advSearchTools[i].spec]&&(e.advSearchTools[i].display=!0,e.advSearchTools[i].disabled=!0);console.log("vm.advSearchItems",e.advSearchItems),e.doRedirectFilter()},selectedAdvFilter(t){let e=this;e.advSearchTools[t.index].display=!0,e.advSearchTools[t.index].disabled=!0;let i=!1;for(let a in e.advSearchItems)if(e.advSearchItems[a].index===t.index){i=!0;break}i||e.advSearchItems.push({spec:e.advSearchTools[t.index].spec,value:e.advSearchTools[t.index].spec+":__",text:e.advSearchTools[t.index].spec+":__",index:t.index})},showAdvFilter(){let t=this;t.menusss=!t.menusss,t.$store.dispatch("getStatusLists").then(function(e){t.itemFilterSupport.statusLists=e;let i={itemCode:"deleted",itemName:"Đã xóa"};t.getUser("Administrator_data")&&t.itemFilterSupport.statusLists.push(i)});let e={itemCode:""};t.$store.dispatch("getSubstatusLists",e).then(function(e){t.itemFilterSupport.substatusLists=e}),t.$store.dispatch("getAgencyLists").then(function(e){t.itemFilterSupport.agencyLists=e}),t.$store.dispatch("getServiceLists").then(function(e){t.itemFilterSupport.serviceLists=e}),t.$store.dispatch("getDomainLists").then(function(e){t.itemFilterSupport.domainLists=e})},changeAdvFilterData(t,e,i){let a=this;if(console.log("data change advSearch",t,e,i),"status"===e){let e={itemCode:t};a.$store.dispatch("getSubstatusLists",e).then(function(t){a.itemFilterSupport.substatusLists=t})}let s=t;"year"===e?(a.itemFilterSupport.year=t,s=a.itemFilterSupport.year+"_"+a.itemFilterSupport.month+"_"+a.itemFilterSupport.day,e="year_month_day"):"month"===e?(a.itemFilterSupport.month=t,s=a.itemFilterSupport.year+"_"+a.itemFilterSupport.month+"_"+a.itemFilterSupport.day,e="year_month_day"):"day"===e?(a.itemFilterSupport.day=t,s=a.itemFilterSupport.year+"_"+a.itemFilterSupport.month+"_"+a.itemFilterSupport.day,e="year_month_day"):a.itemFilterSupport[e]=t;for(let o in a.advSearchItems)if(console.log("adv Search index",a.advSearchItems[o].index),a.advSearchItems[o].index===i){console.log("vm.itemFilterSupport2",a.itemFilterSupport),a.advSearchItems[o].value=e+":"+s,a.advSearchItems[o].text=e+":"+s;break}a.doRedirectFilter()},doRedirectFilter(){let t=this;t.selectMultiplePage=[];let e=t.$router.history.current,i=e.query,a="?";for(let s in i)""!==i[s]&&"undefined"!==i[s]&&void 0!==i[s]&&"top"!==s&&"status"!==s&&"substatus"!==s&&"agency"!==s&&"service"!==s&&"domain"!==s&&"register"!==s&&"year"!==s&&"month"!==s&&"day"!==s&&"adv_renew"!==s&&"keyword"!==s&&(a+=s+"="+i[s]+"&");for(let s in t.advSearchItems){let e=t.advSearchItems[s];if("year_month_day"===e.spec){let t=e.text.replace(e.spec+":","");const[i,s,o]=t.split("_");a+="year="+i+"&month="+s+"&day="+o+"&"}else console.log("currentItemFilter.spec",e.text.replace(e.spec+":","")),a+=e.spec+"="+e.text.replace(e.spec+":","")+"&"}a+="adv_renew="+Math.floor(100*Math.random())+1,a=a.replace(/=__/g,"="),t.$router.push({path:e.path+a})},changeAdvFilterDataChips(t){let e=this,i=-2;for(let o in e.advSearchTools)"delay"===t.key||"overdue"===t.key||"coming"===t.key?"top"===e.advSearchTools[o]["spec"]&&(i=e.advSearchTools[o]["index"],e.advSearchTools[o].display=!0,e.advSearchTools[o].disabled=!0):"status"===e.advSearchTools[o]["spec"]&&(i=e.advSearchTools[o]["index"],e.advSearchTools[o].display=!0,e.advSearchTools[o].disabled=!0);let a="";a="delay"===t.key||"overdue"===t.key||"coming"===t.key?"top":"status";let s=!0;for(let o in e.advSearchItems)if("status"===e.advSearchItems[o]["spec"]){if("delay"!==t.key&&"overdue"!==t.key&&"coming"!==t.key){e.advSearchItems[o].value="status:"+t.key,e.advSearchItems[o].text="status:"+t.key,s=!1;break}}else if("top"===e.advSearchItems[o]["spec"]&&("delay"===t.key||"overdue"===t.key||"coming"===t.key)){e.advSearchItems[o].value="top:"+t.key,e.advSearchItems[o].text="top:"+t.key,s=!1;break}s&&e.advSearchItems.push({spec:a,value:a+":"+t.key,text:a+":"+t.key,index:i}),e.doRedirectFilter()},validate(){return!0},callback(t){t?alert(t):alert("please check you are not robot")}}},_=v,f=i("2877"),y=Object(f["a"])(_,a,s,!1,null,null,null);y.options.__file="Landing.vue";e["default"]=y.exports},"4ea3":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"comment-temp"},[i("div",[i("v-expansion-panel",{staticClass:"expansion-pl-transparent"},[i("v-expansion-panel-content",{attrs:{"hide-actions":"",value:!0}},[i("v-card",{staticClass:"comments__container"},[i("v-card-text",{staticClass:"pl-4"},[i("div",{attrs:{id:"comments-container-el"}})])],1)],1)],1)],1)])},s=[],o=i("854a"),n=i.n(o);n.a.options={closeButton:!0,timeOut:"10000"};var r={props:["classPK","className"],data:()=>({usersComment:[],comment:[],argShowMore:!0,checkOpinion:!0,validFileUpload:!0,fileTypeAllow:["png","jpg","jpeg","pdf","docx","doc","xls","xlsx","txt","rtf"]}),computed:{loading(){return this.$store.getters.loading},initData(){return this.$store.getters.loadingInitData}},watch:{classPK(t){var e=this;e.$store.dispatch("loadUsersComment",t).then(t=>{e.usersComment=t,e.initComment()}).catch(t=>{e.initComment()})}},created(){},mounted(){},methods:{runComment(){var t=this;t.classPK&&t.initComment()},validateFile(t){let e=this,i=t.file.name?t.file.name.split("."):"",a=i?i[i.length-1]:"",s=e.fileTypeAllow,o=10,r=s?s.filter(function(t){return t===a}):"";e.validFileUpload=!1,r&&r.length>0?Number(t.file.size)<=1048576*o?e.validFileUpload=!0:(n.a.error("Tài liệu tải lên dung lượng tối đa là "+o+" MB"),e.validFileUpload=!1):(n.a.error("Tài liệu tải lên chỉ chấp nhận các định dạng "+s.toString()),e.validFileUpload=!1)},initComment:function(){var t=this;window.$("#comments-container-el").comments({profilePictureURL:"https://png.icons8.com/material/50/000000/guest-male.png",textareaRows:2,enableAttachments:!0,enableHashtags:!0,enablePinging:!1,postCommentOnEnter:!1,forceResponsive:!1,readOnly:!1,textareaPlaceholderText:"Thêm bình luận mới",newestText:"Mới nhất",oldestText:"Cũ nhất",popularText:"Phổ biến",attachmentsText:"Đính kèm",sendText:"Gửi",replyText:"Trả lời",editText:"Sửa",editedText:"Đã sửa",youText:"Bạn",saveText:"Ghi lại",deleteText:"Xóa",hideRepliesText:"Ẩn câu trả lời",noCommentsText:"Không có bình luận nào",noAttachmentsText:"Không có tệp đính kèm",attachmentDropText:"Kéo thả tệp đính kèm",fieldMappings:{id:"commentId",parent:"parent",userId:"userId",created:"createdDate",modified:"modifiedDate",content:"content",fileURL:"fileUrl",fileMimeType:"fileType",fileName:"fileName",pings:"pings",creator:"userId",fullname:"fullname",profileURL:"profileUrl",profilePictureURL:"pictureUrl",isNew:"isNew",createdByAdmin:"isAdmin",createdByCurrentUser:"createdByCurrentUser",upvoteCount:"upvoteCount",userHasUpvoted:"userHasUpvoted",email:"email",opinion:"opinion",className:"className",classPK:"classPK"},timeFormatter:function(t){if(t){let e=new Date(t);return e.setHours(e.getHours()-7),`${e.getDate().toString().padStart(2,"0")}/${(e.getMonth()+1).toString().padStart(2,"0")}/${e.getFullYear()} ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`}return""},getUsers:function(e,i){e(t.usersComment)},getComments:function(e,i){var a={classPK:t.classPK,className:t.className};let s=t.$store.dispatch("loadCommentItems",a);s.then(i=>{var a=[];window.$.each(i,function(e,i){t.comment=i,t.formatComment(t.comment),a.push(t.comment)}),e(a)}).catch(t=>{e([]),i()})},postComment:function(e,i,a){e.classPK=t.classPK,e.className=t.className,e.opinion=document.getElementById("opinion").checked,t.$store.dispatch("postComment",e).then(e=>{e.opinion&&window.$(".opinion").hide(),document.getElementById("opinion").checked=!1,t.comment=e,t.formatComment(t.comment),i(t.comment)})},putComment:function(e,i,a){e.classPK=t.classPK,e.className=t.className,t.$store.dispatch("putComment",e).then(e=>{t.comment=e,t.formatComment(t.comment),i(t.comment)})},deleteComment:function(e,i,a){e.classPK=t.classPK,e.className=t.className,t.$store.dispatch("deleteComment",e).then(t=>{i()}).catch(t=>{a(),console.log(t)})},upvoteComment:function(e,i,a){e.classPK=t.classPK,e.className=t.className,t.$store.dispatch("upvoteComment",e).then(e=>{t.comment=e,t.formatComment(t.comment),i(t.comment)}).catch(t=>{console.log(t)})},uploadAttachments:function(e,i,a){var s=0,o=[],n=function(){s++,s===e.length&&(0===o.length?a():i(o))};window.$(e).each(function(e,i){var a=new FormData;window.$(Object.keys(i)).each(function(t,e){var s=i[e];s&&a.append(e,s)}),a.append("file",i.file),a.append("className",t.className),a.append("classPK",t.classPK),a.append("parent",null!=i.parent?i.parent:0),a.append("fileName",i.file.name),a.append("fileType",i.file.type),a.append("fileSize",i.file.size),a.append("pings",i.pings.join()),a.append("opinion",document.getElementById("opinion").checked),a.append("email",""),a.append("fullname",t.initData.user.userName),a.append("opinion",document.getElementById("opinion").checked);let s={file:i.file};t.validateFile(s),t.validFileUpload?window.$.ajax({url:t.initData.commentApi+"/uploads",dataType:"json",type:"POST",headers:{groupId:t.initData.groupId},data:a,cache:!1,contentType:!1,processData:!1,success:function(e){e.opinion&&window.$(".opinion").hide(),document.getElementById("opinion").checked=!1,t.formatComment(e),o.push(t.comment),n(),e.opinion&&window.$(".opinion").hide(),document.getElementById("opinion").checked=!1},error:function(t,e){n()}}):n()})}})},formatComment:function(t){var e=this;e.comment=t,0===t.parent&&(e.comment.parent=null),""===t.fileName&&(e.comment.fileName=null),""===t.fileType&&(e.comment.fileType=null),""===t.fileUrl&&(e.comment.fileUrl=null),""===t.pictureUrl&&(e.comment.pictureUrl="https://png.icons8.com/material/50/000000/guest-male.png"),e.comment.fullname=t.fullname,e.comment.opinion=t.opinion,e.comment.pings=t.pings.toString().split(","),e.comment.createdDate=e.comment.createDate,e.comment.modifiedDate=e.comment.modifiedDate},dateTimeView(t){if(t){let e=new Date(t);return`${e.getDate().toString().padStart(2,"0")}/${(e.getMonth()+1).toString().padStart(2,"0")}/${e.getFullYear()} ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`}return""}},filters:{dateTimeView(t){if(t){let e=new Date(t);return`${e.getDate().toString().padStart(2,"0")}/${(e.getMonth()+1).toString().padStart(2,"0")}/${e.getFullYear()}  ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`}return""}}},l=r,c=i("2877"),d=Object(c["a"])(l,a,s,!1,null,null,null);d.options.__file="Comment.vue";e["a"]=d.exports},5338:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-form",{ref:"formTiepNhanHoSo",attrs:{"lazy-validation":""},model:{value:t.validTNHS,callback:function(e){t.validTNHS=e},expression:"validTNHS"}},[i("div",{staticClass:"row-header"},[i("div",{staticClass:"background-triangle-big"},["UPDATE"===t.formCode?i("span",[t._v("SỬA HỒ SƠ")]):"COPY"===t.formCode?i("span",[t._v("SAO CHÉP HỒ SƠ")]):i("span",[t._v("THÊM MỚI HỒ SƠ")])]),i("div",{staticClass:"layout row wrap header_tools row-blue"},[i("div",{staticClass:"flex xs8 sm10 pl-3 text-ellipsis text-bold",attrs:{title:t.thongTinChiTietHoSo.serviceName}},[t._v("\n        "+t._s(t.thongTinChiTietHoSo.serviceName)+"\n      ")]),i("div",{staticClass:"flex xs4 sm2 text-right",staticStyle:{"margin-left":"auto"}},[i("v-btn",{staticClass:"my-0 mx-0 btn-border-left",attrs:{flat:"","active-class":"temp_active"},on:{click:t.goBack}},[i("v-icon",{attrs:{size:"18"}},[t._v("reply")]),t._v("  \n          Quay lại\n        ")],1)],1)])]),1!==t.originality?i("div",{staticStyle:{position:"relative"}},[i("v-expansion-panel",{staticClass:"expansion-pl"},[i("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"1"}},[i("thong-tin-chung",{ref:"thongtinchunghoso"})],1)],1)],1):i("div",{staticStyle:{position:"relative"}},[i("v-expansion-panel",{staticClass:"expansion-pl"},[i("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"1"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"background-triangle-small"},[i("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("\n          HƯỚNG DẪN      \n        ")]),i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:"",sm12:""}},[i("div",{staticClass:"ml-3 mr-3",domProps:{innerHTML:t._s(t.thongTinChiTietHoSo.dossierNote)}})])],1)],1)],1)],1),i("thong-tin-chu-ho-so",{ref:"thongtinchuhoso"}),1!==t.originality?i("div",[i("v-expansion-panel",{staticClass:"expansion-pl"},[i("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"1"}},[i("div",{staticStyle:{display:"flex","align-items":"center"},attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"background-triangle-small"},[i("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("\n          Tên hồ sơ     \n        ")]),i("div",[i("v-card",[i("v-card-text",[i("v-text-field",{attrs:{"multi-line":"",rows:2,box:"",label:"nhập tên hồ sơ..."},model:{value:t.briefNote,callback:function(e){t.briefNote=e},expression:"briefNote"}})],1)],1)],1)])],1)],1):t._e(),i("div",{staticStyle:{position:"relative"}},[i("v-expansion-panel",{staticClass:"expansion-pl"},[i("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"1"}},[i("div",{staticStyle:{display:"flex","align-items":"center"},attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"background-triangle-small"},[i("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("\n          Thành phần hồ sơ     \n          "),t.stateEditSample||1===t.originality?1!==t.originality?i("v-text-field",{staticClass:"px-0 py-0",staticStyle:{width:"90px","max-width":"90px"},attrs:{type:"number"},model:{value:t.thongTinChiTietHoSo.sampleCount,callback:function(e){t.$set(t.thongTinChiTietHoSo,"sampleCount",e)},expression:"thongTinChiTietHoSo.sampleCount"}}):t._e():i("span",[t._v("("+t._s(0===t.thongTinChiTietHoSo.sampleCount?"?":t.thongTinChiTietHoSo.sampleCount)+" bộ hồ sơ)")]),t._v("  \n          "),t.stateEditSample||1===t.originality?1!==t.originality?i("v-icon",{staticStyle:{cursor:"pointer"},attrs:{size:"16",color:"primary"},on:{click:function(e){e.stopPropagation(),t.stateEditSample=!t.stateEditSample}}},[t._v("done")]):t._e():i("v-icon",{staticStyle:{cursor:"pointer"},attrs:{size:"16",color:"primary"},on:{click:function(e){e.stopPropagation(),t.stateEditSample=!t.stateEditSample}}},[t._v("edit")])],1),i("thanh-phan-ho-so",{ref:"thanhphanhoso",attrs:{onlyView:!1,id:"nm",partTypes:t.inputTypes}})],1)],1)],1),0!==t.viaPortalDetail?i("div",{staticStyle:{position:"relative"}},[i("v-expansion-panel",{staticClass:"expansion-pl"},[i("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"2"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"background-triangle-small"},[i("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("Dịch vụ chuyển phát kết quả")]),i("dich-vu-chuyen-phat-ket-qua",{ref:"dichvuchuyenphatketqua",on:{changeViapostal:t.changeViapostal}})],1)],1)],1):t._e(),i("div",{staticStyle:{position:"relative"}},[i("v-expansion-panel",{staticClass:"expansion-pl"},[i("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"2"}},[t.showThuPhi?i("thu-phi",{attrs:{viaPortal:t.viaPortalDetail},model:{value:t.payments,callback:function(e){t.payments=e},expression:"payments"}}):t._e()],1)],1)],1),i("v-tabs",{staticClass:"mb-4",attrs:{"icons-and-text":"",centered:""}},[i("v-tabs-slider",{attrs:{color:"primary"}}),1!==t.originality&&t.tiepNhanState?i("v-tab",{attrs:{href:"#tab-2"},on:{click:function(e){t.tiepNhanHoSo()}}},[i("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{flat:"",loading:t.loadingAction,disabled:t.loadingAction}},[i("v-icon",{attrs:{size:"20"}},[t._v("save")]),t._v("   \n        "),"UPDATE"===t.formCode?i("span",[t._v("Lưu hồ sơ")]):i("span",[t._v("Tiếp nhận")]),i("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1):t._e(),1!==t.originality&&"UPDATE"!==t.formCode&&"COPY"!==t.formCode&&t.tiepNhanState?i("v-tab",{attrs:{href:"#tab-4"},on:{click:function(e){t.tiepNhanHoSo("add")}}},[i("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{flat:"",loading:t.loadingAction,disabled:t.loadingAction}},[i("v-icon",{attrs:{size:"20"}},[t._v("note_add")]),t._v("   \n        "),i("span",[t._v("Tiếp nhận và thêm mới")]),i("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1):t._e(),1===t.originality?i("v-tab",{attrs:{href:"#tab-3"},on:{click:t.luuHoSo}},[i("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{flat:"",loading:t.loadingAction,disabled:t.loadingAction}},[i("v-icon",{attrs:{size:"20"}},[t._v("save")]),t._v("  \n        Lưu\n        "),i("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1):t._e(),i("v-tab",{attrs:{href:"#tab-5"},on:{click:t.goBack}},[i("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{flat:"",loading:t.loadingAction,disabled:t.loadingAction}},[i("v-icon",{attrs:{size:"18"}},[t._v("reply")]),t._v("  \n        Quay lại\n        "),i("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1)],1)],1)},s=[],o=i("a18c"),n=i("854a"),r=i.n(n),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-form",{ref:"formChuHoSo",attrs:{"lazy-validation":""},model:{value:t.valid_thongtinchuhoso,callback:function(e){t.valid_thongtinchuhoso=e},expression:"valid_thongtinchuhoso"}},[i("div",[i("div",{staticStyle:{position:"relative"}},[i("v-expansion-panel",{staticClass:"expansion-pl"},[i("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"1"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"background-triangle-small"},[i("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v(" Thông tin chủ hồ sơ")]),i("v-card",[(!t.thongTinChuHoSo.userType||1===t.originality&&"business"===t.thongTinChuHoSo.applicantIdType)&&t.bussinessExits?i("v-tooltip",{staticStyle:{position:"absolute",right:"5px","z-index":"101"},attrs:{left:""}},[i("v-btn",{staticClass:"my-0 mt-1",staticStyle:{width:"32px!important",height:"32px!important"},attrs:{slot:"activator",fab:"",icon:"",small:"",dark:"",color:"primary"},nativeOn:{click:function(e){t.getApplicantInfos()}},slot:"activator"},[i("v-icon",{attrs:{dark:""}},[t._v("account_balance")])],1),i("span",[t._v("Đối chiếu thông tin doanh nghiệp")])],1):t._e(),i("v-card-text",{staticClass:"pt-3"},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"pl-0"},[t._v(" "+t._s(t.labelSwitch[t.thongTinChuHoSo.userType].cmtnd)+" "),i("span",{staticStyle:{color:"red"}},[t._v(" * ")]),t._v(": ")])],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[1===t.originality||"1"===t.originality?i("v-text-field",{attrs:{rules:[function(t){return!!t||"Trường dữ liệu bắt buộc"}],required:"",disabled:t.loadingVerify},on:{input:t.changeApplicantInfos},model:{value:t.thongTinChuHoSo.applicantIdNo,callback:function(e){t.$set(t.thongTinChuHoSo,"applicantIdNo",e)},expression:"thongTinChuHoSo.applicantIdNo"}}):t._e(),3===t.originality||"3"===t.originality?i("suggestions",{class:t.loadingVerify?"input-group--disabled":"",style:t.loadingVerify?"color:#00000061":"",attrs:{options:t.searchOptions,onItemSelected:t.onSearchItemSelected,onInputChange:t.onInputChange},scopedSlots:t._u([{key:"item",fn:function(e){return i("div",{staticClass:"single-item"},[i("v-list-tile-content",[i("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.applicantName)}}),i("v-list-tile-sub-title",{domProps:{innerHTML:t._s(e.item.applicantIdNo)}})],1)],1)}}]),model:{value:t.thongTinChuHoSo.applicantIdNo,callback:function(e){t.$set(t.thongTinChuHoSo,"applicantIdNo",e)},expression:"thongTinChuHoSo.applicantIdNo"}}):t._e()],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"pl-0"},[t._v(" "+t._s(t.labelSwitch[t.thongTinChuHoSo.userType].nguoi_nop)),i("span",{staticStyle:{color:"red"}},[t._v(" * ")]),t._v(": ")])],1),i("v-flex",{attrs:{xs12:"",sm6:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-text-field",{attrs:{rules:[function(t){return!!t||"Trường dữ liệu bắt buộc"}],required:"",disabled:t.loadingVerify},on:{input:t.changeApplicantInfos},model:{value:t.thongTinChuHoSo.applicantName,callback:function(e){t.$set(t.thongTinChuHoSo,"applicantName",e)},expression:"thongTinChuHoSo.applicantName"}})],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"pl-0"},[t._v("Địa chỉ "),1===t.originality?i("span",{staticStyle:{color:"red"}},[t._v(" * ")]):t._e(),t._v(": ")])],1),i("v-flex",{attrs:{xs12:"",sm10:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-text-field",{attrs:{"multi-line":"",rows:"2",rules:1===t.originality?[function(t){return!!t||"Trường dữ liệu bắt buộc"}]:"",required:""},model:{value:t.thongTinChuHoSo.address,callback:function(e){t.$set(t.thongTinChuHoSo,"address",e)},expression:"thongTinChuHoSo.address"}})],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"pl-0"},[t._v("Tỉnh/Thành phố"),i("span",{staticStyle:{color:"red"}},[t._v(" * ")]),t._v(" : ")])],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-select",{attrs:{items:t.citys,"item-text":"itemName","item-value":"itemCode",autocomplete:"",rules:[function(t){return!!t||"Trường dữ liệu bắt buộc"}],required:""},on:{change:t.onChangeCity},model:{value:t.thongTinChuHoSo.cityCode,callback:function(e){t.$set(t.thongTinChuHoSo,"cityCode",e)},expression:"thongTinChuHoSo.cityCode"}})],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"pl-0"},[t._v("Quận/Huyện "),i("span",{staticStyle:{color:"red"}},[t._v(" * ")]),t._v(" : ")])],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-select",{attrs:{items:t.districts,"item-text":"itemName","item-value":"itemCode",autocomplete:"",rules:[function(t){return!!t||"Trường dữ liệu bắt buộc"}],required:""},on:{change:t.onChangeDistrict},model:{value:t.thongTinChuHoSo.districtCode,callback:function(e){t.$set(t.thongTinChuHoSo,"districtCode",e)},expression:"thongTinChuHoSo.districtCode"}})],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"pl-0"},[t._v("Xã/Phường "),i("span",{staticStyle:{color:"red"}},[t._v(" * ")]),t._v(" : ")])],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-select",{attrs:{items:t.wards,"item-text":"itemName","item-value":"itemCode",autocomplete:"",rules:[function(t){return!!t||"Trường dữ liệu bắt buộc"}],required:""},on:{change:t.onChangeWard},model:{value:t.thongTinChuHoSo.wardCode,callback:function(e){t.$set(t.thongTinChuHoSo,"wardCode",e)},expression:"thongTinChuHoSo.wardCode"}})],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"pl-0"},[t._v("Số điện thoại "),i("span",{staticStyle:{color:"red"}},[t._v(" * ")]),t._v(": ")])],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-text-field",{attrs:{"append-icon":"phone",rules:[t.rules.telNo,t.rules.required],required:""},model:{value:t.thongTinChuHoSo.contactTelNo,callback:function(e){t.$set(t.thongTinChuHoSo,"contactTelNo",e)},expression:"thongTinChuHoSo.contactTelNo"}})],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"pl-0"},[t._v("Địa chỉ E-mail "),1===t.originality?i("span",{staticStyle:{color:"red"}},[t._v(" * ")]):t._e(),t._v(": ")])],1),i("v-flex",{attrs:{xs12:"",sm6:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-text-field",{attrs:{rules:1===t.originality?[t.rules.email,t.rules.required]:t.thongTinChuHoSo.contactEmail&&1!==t.originality?[t.rules.email]:"",required:""},model:{value:t.thongTinChuHoSo.contactEmail,callback:function(e){t.$set(t.thongTinChuHoSo,"contactEmail",e)},expression:"thongTinChuHoSo.contactEmail"}})],1)],1)],1)],1)],1)],1),1!==t.originality?i("div",{staticClass:"absolute__btn",staticStyle:{width:"380px"}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-radio-group",{attrs:{row:""},on:{change:t.checkApplicantInfos},model:{value:t.thongTinChuHoSo.userType,callback:function(e){t.$set(t.thongTinChuHoSo,"userType",e)},expression:"thongTinChuHoSo.userType"}},[i("v-radio",{attrs:{label:"Công dân",value:!0}}),i("v-radio",{attrs:{label:"Tổ chức, doanh nghiệp",value:!1}})],1)],1):t._e(),1!==t.originality?i("div",{staticStyle:{position:"relative"}},[i("v-expansion-panel",{staticClass:"expansion-pl"},[i("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"1"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"background-triangle-small"},[i("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v(" Thông tin người nộp hồ sơ")]),i("v-card",[i("v-card-text",[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"pl-0"},[t._v("CMND/Hộ chiếu "),i("span",{staticStyle:{color:"red"}},[t._v(" * ")]),t._v(": ")])],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),1===t.originality||"1"===t.originality?i("v-text-field",{attrs:{rules:[function(t){return!!t||"Trường dữ liệu bắt buộc"}],required:""},model:{value:t.thongTinNguoiNopHoSo.delegateIdNo,callback:function(e){t.$set(t.thongTinNguoiNopHoSo,"delegateIdNo",e)},expression:"thongTinNguoiNopHoSo.delegateIdNo"}}):t._e(),3===t.originality||"3"===t.originality?i("suggestions",{attrs:{options:t.searchOptions,onItemSelected:t.onSearchItemSelected1,onInputChange:t.onInputChange1},scopedSlots:t._u([{key:"item",fn:function(e){return i("div",{staticClass:"single-item"},[i("v-list-tile-content",[i("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.applicantName)}}),i("v-list-tile-sub-title",{domProps:{innerHTML:t._s(e.item.applicantIdNo)}})],1)],1)}}]),model:{value:t.thongTinNguoiNopHoSo.delegateIdNo,callback:function(e){t.$set(t.thongTinNguoiNopHoSo,"delegateIdNo",e)},expression:"thongTinNguoiNopHoSo.delegateIdNo"}}):t._e()],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"pl-0"},[t._v("Họ và tên "),i("span",{staticStyle:{color:"red"}},[t._v(" * ")]),t._v(": ")])],1),i("v-flex",{attrs:{xs12:"",sm6:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-text-field",{attrs:{rules:[function(t){return!!t||"Trường dữ liệu bắt buộc"}],required:""},model:{value:t.thongTinNguoiNopHoSo.delegateName,callback:function(e){t.$set(t.thongTinNguoiNopHoSo,"delegateName",e)},expression:"thongTinNguoiNopHoSo.delegateName"}})],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"pl-0"},[t._v("Địa chỉ: ")])],1),i("v-flex",{attrs:{xs12:"",sm10:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-text-field",{attrs:{"multi-line":"",rows:"2"},model:{value:t.thongTinNguoiNopHoSo.delegateAddress,callback:function(e){t.$set(t.thongTinNguoiNopHoSo,"delegateAddress",e)},expression:"thongTinNguoiNopHoSo.delegateAddress"}})],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"pl-0"},[t._v("Tỉnh/Thành phố "),i("span",{staticStyle:{color:"red"}},[t._v(" * ")]),t._v(" : ")])],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-select",{attrs:{items:t.citys,"item-text":"itemName","item-value":"itemCode",autocomplete:"",rules:[function(t){return!!t||"Trường dữ liệu bắt buộc"}],required:""},on:{change:t.onChangeDelegateCity},model:{value:t.thongTinNguoiNopHoSo.delegateCityCode,callback:function(e){t.$set(t.thongTinNguoiNopHoSo,"delegateCityCode",e)},expression:"thongTinNguoiNopHoSo.delegateCityCode"}})],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"pl-0"},[t._v("Quận/Huyện "),i("span",{staticStyle:{color:"red"}},[t._v(" * ")]),t._v(" : ")])],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-select",{attrs:{items:t.delegateDistricts,"item-text":"itemName","item-value":"itemCode",autocomplete:"",rules:[function(t){return!!t||"Trường dữ liệu bắt buộc"}],required:""},on:{change:t.onChangeDelegateDistrict},model:{value:t.thongTinNguoiNopHoSo.delegateDistrictCode,callback:function(e){t.$set(t.thongTinNguoiNopHoSo,"delegateDistrictCode",e)},expression:"thongTinNguoiNopHoSo.delegateDistrictCode"}})],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"pl-0"},[t._v("Xã/Phường "),i("span",{staticStyle:{color:"red"}},[t._v(" * ")]),t._v(" : ")])],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-select",{attrs:{items:t.delegateWards,"item-text":"itemName","item-value":"itemCode",autocomplete:"",rules:[function(t){return!!t||"Trường dữ liệu bắt buộc"}],required:""},model:{value:t.thongTinNguoiNopHoSo.delegateWardCode,callback:function(e){t.$set(t.thongTinNguoiNopHoSo,"delegateWardCode",e)},expression:"thongTinNguoiNopHoSo.delegateWardCode"}})],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"pl-0"},[t._v("Số điện thoại: ")])],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-text-field",{attrs:{rules:[t.rules.telNo],"append-icon":"phone"},model:{value:t.thongTinNguoiNopHoSo.delegateTelNo,callback:function(e){t.$set(t.thongTinNguoiNopHoSo,"delegateTelNo",e)},expression:"thongTinNguoiNopHoSo.delegateTelNo"}})],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"pl-0"},[t._v("Email: ")])],1),i("v-flex",{attrs:{xs12:"",sm6:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-text-field",{attrs:{rules:t.thongTinNguoiNopHoSo.delegateEmail?[t.rules.email]:""},model:{value:t.thongTinNguoiNopHoSo.delegateEmail,callback:function(e){t.$set(t.thongTinNguoiNopHoSo,"delegateEmail",e)},expression:"thongTinNguoiNopHoSo.delegateEmail"}})],1)],1)],1)],1)],1)],1),i("div",{staticClass:"absolute__btn",staticStyle:{width:"150px","margin-top":"4px"}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-checkbox",{attrs:{label:"Giống chủ hồ sơ"},model:{value:t.thongTinNguoiNopHoSo.sameUser,callback:function(e){t.$set(t.thongTinNguoiNopHoSo,"sameUser",e)},expression:"thongTinNguoiNopHoSo.sameUser"}})],1)],1):t._e()],1)])]),i("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"700px"},model:{value:t.dialog_applicantInfos,callback:function(e){t.dialog_applicantInfos=e},expression:"dialog_applicantInfos"}},[i("v-card",[i("v-card-title",{staticClass:"headline"},[t._v("\n        Thông tin doanh nghiệp\n      ")]),i("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialog_applicantInfos=!1}}},[i("v-icon",[t._v("clear")])],1),i("v-card-text",{staticClass:"py-1"},[i("v-layout",{staticClass:"py-1 align-center",attrs:{wrap:""}},[i("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[i("div",{staticClass:"my-2"},[i("span",{staticClass:"text-bold"},[t._v("Tên tổ chức, doanh nghiệp: ")]),i("span",[t._v(t._s(t.applicantInfos.applicantName))])])]),i("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[i("div",{staticClass:"my-2"},[i("span",{staticClass:"text-bold"},[t._v("Mã số thuế: ")]),i("span",[t._v(t._s(t.applicantInfos.applicantIdNo))])])]),i("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[i("div",{staticClass:"my-2"},[i("span",{staticClass:"text-bold"},[t._v("Loại hình doanh nghiệp: ")]),i("span",[t._v(t._s(t.applicantInfos.companyType))])])]),i("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[i("div",{staticClass:"my-2"},[i("span",{staticClass:"text-bold"},[t._v("Địa chỉ:")]),i("span",[t._v(t._s(t.applicantInfos.address))])])]),i("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[i("div",{staticClass:"my-2"},[i("span",{staticClass:"text-bold"},[t._v("Người đại diện: ")]),i("span",[t._v(t._s(t.applicantInfos.representatives))])])]),i("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[i("div",{staticClass:"my-2"},[i("span",{staticClass:"text-bold"},[t._v("Tình trạng: ")]),i("span",[t._v(t._s(t.applicantInfos.companyStatus))])])])],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{staticClass:"mr-3",attrs:{color:"primary"},nativeOn:{click:function(e){t.dialog_applicantInfos=!1}}},[i("v-icon",[t._v("clear")]),t._v("  \n          Thoát\n        ")],1)],1)],1)],1)],1)},c=[],d=i("bc3a"),h=i.n(d),u=i("c4f6"),p=i.n(u);r.a.options={closeButton:!0,timeOut:"5000"};var m={components:{suggestions:p.a},data:()=>({valid_thongtinchuhoso:!1,loadingVerify:!1,citys:[],delegateDistricts:[],districts:[],delegateWards:[],wards:[],applicantItems:[],applicantItems2:[],applicantIdNo:"",labelSwitch:{true:{cmtnd:"CMND/ Hộ chiếu",nguoi_nop:"Họ và tên"},false:{cmtnd:"Mã số thuế",nguoi_nop:"Tên tổ chức, doanh nghiệp"}},thongTinChuHoSo:{userType:!0,cityCode:"",districtCode:"",wardCode:"",applicantIdNo:"",applicantIdType:"",contactEmail:"",contactTelNo:"",contactName:"",address:"",applicantName:""},thongTinNguoiNopHoSo:{sameUser:!1,delegateName:"",delegateCityCode:"",delegateAddress:"",delegateDistrictCode:"",delegateWardCode:"",delegateEmail:"",delegateTelNo:"",delegateIdNo:""},applicantInfos:{applicantName:"",applicantIdNo:"",companyType:"",companyStatus:"",address:"",representatives:""},bussinessExits:!1,validBussinessInfos:!0,messageCheckApplicant:"",search:null,search2:null,searchQuery:"",selectedSearchItem:null,searchOptions:{},functionTimeOut:null,dialog_applicantInfos:!1,rules:{required:t=>!!t||"Trường dữ liệu bắt buộc",email:t=>{const e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(t)||"Địa chỉ Email không hợp lệ"},passWord:t=>{const e=/^(?![0-9]{6,})[0-9a-zA-Z]{6,}$/;return e.test(t)||"Gồm các ký tự 0-9, a-z và ít nhất 6 ký tự"},telNo:t=>{const e=/^([0-9]{0,})$/;return e.test(t)||"Gồm các ký tự 0-9"}}}),computed:{loading(){return this.$store.getters.loading},originality(){var t=this;return console.log("originality",t.getOriginality()),t.getOriginality()},viaPostal(){return this.$store.getters.viaPostal},dichVuChuyenPhatKetQua(){return this.$store.getters.dichVuChuyenPhatKetQua},ThongTinChuHoSoBindChuyenPhat(){let t={cityCode:this.thongTinChuHoSo.cityCode,address:this.thongTinChuHoSo.address,districtCode:this.thongTinChuHoSo.districtCode,wardCode:this.thongTinChuHoSo.wardCode,contactTelNo:this.thongTinChuHoSo.contactTelNo};return t}},created(){},watch:{thongTinChuHoSo:{handler:function(t){let e=this,i={delegateName:t.applicantName,delegateCityCode:t.cityCode,delegateAddress:t.address,delegateDistrictCode:t.districtCode,delegateWardCode:t.wardCode,delegateEmail:t.contactEmail,delegateTelNo:t.contactTelNo,delegateIdNo:t.applicantIdNo};e.thongTinNguoiNopHoSo.sameUser&&(t.cityCode&&t.cityCode!==e.thongTinNguoiNopHoSo["delegateCityCode"]&&e.onChangeDelegateCity(t.cityCode),t.districtCode&&t.districtCode!==e.thongTinNguoiNopHoSo["delegateDistrictCode"]&&e.onChangeDelegateDistrict(t.districtCode),e.thongTinNguoiNopHoSo=Object.assign(e.thongTinNguoiNopHoSo,i))},deep:!0},thongTinNguoiNopHoSo:{handler:function(t){var e=this;let i=e.thongTinChuHoSo;if(t.sameUser){let t={delegateName:i.applicantName,delegateCityCode:i.cityCode,delegateAddress:i.address,delegateDistrictCode:i.districtCode,delegateWardCode:i.wardCode,delegateEmail:i.contactEmail,delegateTelNo:i.contactTelNo,delegateIdNo:i.applicantIdNo};i.cityCode&&i.cityCode!==e.thongTinNguoiNopHoSo["delegateCityCode"]&&e.onChangeDelegateCity(i.cityCode),i.districtCode&&i.districtCode!==e.thongTinNguoiNopHoSo["delegateDistrictCode"]&&e.onChangeDelegateDistrict(i.districtCode),e.thongTinNguoiNopHoSo=Object.assign(e.thongTinNguoiNopHoSo,t)}else this.$store.dispatch("resetThongTinNguoiNopHoSo")},deep:!0},ThongTinChuHoSoBindChuyenPhat(t){this.$store.commit("setThongTinChuHoSoBindChuyenPhat",t)},search(t){t&&this.querySelections(t)},search2(t){t&&this.querySelections2(t)}},methods:{initData(t){var e=this;e.$store.commit("setApplicantId",t.applicantIdNo);let i={delegateName:t.delegateName,delegateCityCode:t.delegateCityCode,delegateAddress:t.delegateAddress,delegateDistrictCode:t.delegateDistrictCode,delegateWardCode:t.delegateWardCode,delegateEmail:t.delegateEmail,delegateTelNo:t.delegateTelNo,delegateIdNo:t.delegateIdNo},a=Object.assign(e.thongTinNguoiNopHoSo,i);e.thongTinNguoiNopHoSo=a;let s=!0;"business"===t.applicantIdType&&(s=!1);let o={userType:s,cityCode:t.cityCode,districtCode:t.districtCode,wardCode:t.wardCode,applicantIdNo:t.applicantIdNo,applicantIdType:t.applicantIdType,contactEmail:t.contactEmail,contactName:t.contactName,contactTelNo:t.contactTelNo,address:t.address,applicantName:t.applicantName,cityName:t.cityName,districtName:t.districtName,wardName:t.wardName},n=Object.assign(e.thongTinChuHoSo,o);e.thongTinChuHoSo=n,e.checkApplicantInfos(),e.$nextTick(function(){var i={collectionCode:"ADMINISTRATIVE_REGION",level:0,parent:0};e.$store.getters.getDictItems(i).then(function(t){e.citys=t.data}),setTimeout(function(){t.cityCode&&e.$store.getters.getDictItems({collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:t.cityCode}).then(function(t){e.districts=t.data}),console.log("districtCode-----------",t.districtCode),t.districtCode&&e.$store.getters.getDictItems({collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:t.districtCode}).then(function(t){e.wards=t.data}),t.delegateCityCode&&e.$store.getters.getDictItems({collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:t.delegateCityCode}).then(function(t){e.delegateDistricts=t.data}),t.delegateDistrictCode&&e.$store.getters.getDictItems({collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:t.delegateDistrictCode}).then(function(t){e.delegateWards=t.data})},200)})},onChangeCity(t){var e=this;let i={collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:t};e.thongTinChuHoSo.districtCode="",e.thongTinChuHoSo.wardCode="",e.$store.commit("setCityVal",t),e.$store.getters.getDictItems(i).then(function(t){e.districts=t.data,e.wards=[],e.thongTinNguoiNopHoSo.sameUser&&(e.delegateDistricts=t.data,e.wards=[])})},onChangeDistrict(t){var e=this;let i={collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:t};e.thongTinChuHoSo.wardCode="",e.$store.commit("setDistrictVal",t),e.$store.getters.getDictItems(i).then(function(t){e.wards=t.data,e.thongTinNguoiNopHoSo.sameUser&&(e.delegateWards=t.data)})},onChangeWard(t){this.$store.commit("setWardVal",t)},querySelections(t){var e=this;let i={idNo:t};e.$store.dispatch("getUserInfoFromApplicantIdNo",i).then(t=>{e.applicantItems=t}).catch(t=>{})},querySelections2(t){var e=this;let i={idNo:t};e.$store.dispatch("getUserInfoFromApplicantIdNo",i).then(t=>{e.applicantItems2=t}).catch(t=>{})},onChangeDelegateCity(t){var e=this;e.thongTinNguoiNopHoSo.delegateDistrictCode="",e.thongTinNguoiNopHoSo.delegateWardCode="";let i={collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:t};e.$store.getters.getDictItems(i).then(function(t){e.delegateDistricts=t.data,e.thongTinNguoiNopHoSo.sameUser&&(e.districts=t.data)})},showValid(){var t=this;let e={validForm:t.$refs.formChuHoSo.validate(),message:t.messageCheckApplicant,validApplicant:t.validBussinessInfos};return e},onChangeDelegateDistrict(t){var e=this;e.thongTinNguoiNopHoSo.delegateWardCode="";let i={collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:t};e.$store.getters.getDictItems(i).then(function(t){e.delegateWards=t.data,e.thongTinNguoiNopHoSo.sameUser&&(e.wards=t.data)})},onInputChange(t){let e=this;if(e.functionTimeOut&&clearTimeout(e.functionTimeOut),e.functionTimeOut=setTimeout(function(){(3===e.originality&&!e.thongTinChuHoSo.userType||1===e.originality&&"business"===e.thongTinChuHoSo.applicantIdType)&&e.checkApplicantInfos(),e.$store.commit("setApplicantId",t)},2e3),0===t.trim().length)return null;const i=`/o/rest/v2/applicants?start=0&end=5&idNo=${t}`;return new Promise(t=>{e.$store.dispatch("loadInitResource").then(e=>{let a={headers:{}};h.a.get(i,a).then(e=>{let i=[];e.data.hasOwnProperty("data")&&(i=e.data.data),t(i)})})})},onInputChange1(t){let e=this;if(0===t.trim().length)return null;const i=`/o/rest/v2/applicants?start=0&end=5&idNo=${t}`;return new Promise(t=>{e.$store.dispatch("loadInitResource").then(e=>{let a={headers:{}};h.a.get(i,a).then(e=>{let i=[];e.data.hasOwnProperty("data")&&(i=e.data.data),t(i)})})})},onSearchItemSelected(t){var e=this;function i(t){return new Promise((i,a)=>{setTimeout(()=>{e.onChangeCity(t),i()},Math.floor(100*Math.random())+1)})}function a(t){return new Promise((i,a)=>{setTimeout(()=>{e.onChangeDistrict(t),i()},Math.floor(100*Math.random())+1)})}e.selectedSearchItem=t,console.log("selectedSearchItem",e.selectedSearchItem),e.thongTinChuHoSo["applicantIdNo"]=t.applicantIdNo.toString(),e.thongTinChuHoSo["applicantName"]=t["applicantName"]?t["applicantName"]:"",e.thongTinChuHoSo["address"]=t["address"]?t["address"]:"",e.thongTinChuHoSo["contactTelNo"]=t["contactTelNo"]?t["contactTelNo"]:"",e.thongTinChuHoSo["contactEmail"]=t["contactEmail"]?t["contactEmail"]:"",e.thongTinChuHoSo.cityCode=t["cityCode"]?t["cityCode"]:"",e.$store.commit("setApplicantId",e.thongTinChuHoSo["applicantIdNo"]),e.checkApplicantInfos(),""!==e.thongTinChuHoSo["cityCode"]&&null!==e.thongTinChuHoSo["cityCode"]&&void 0!==e.thongTinChuHoSo["cityCode"]&&0!==e.thongTinChuHoSo["cityCode"]&&"0"!==e.thongTinChuHoSo["cityCode"]&&i(e.thongTinChuHoSo["cityCode"]).then(function(){e.thongTinChuHoSo.districtCode=t["districtCode"]?t["districtCode"]:"",""!==e.thongTinChuHoSo["districtCode"]&&null!==e.thongTinChuHoSo["districtCode"]&&void 0!==e.thongTinChuHoSo["districtCode"]&&0!==e.thongTinChuHoSo["districtCode"]&&"0"!==e.thongTinChuHoSo["districtCode"]&&a(e.thongTinChuHoSo["districtCode"]).then(function(){e.thongTinChuHoSo.wardCode=t["wardCode"]?t["wardCode"]:""})})},onSearchItemSelected1(t){var e=this;function i(t){return new Promise((i,a)=>{setTimeout(()=>{e.onChangeCity(t),i()},Math.floor(100*Math.random())+1)})}function a(t){return new Promise((i,a)=>{setTimeout(()=>{e.onChangeDistrict(t),i()},Math.floor(100*Math.random())+1)})}e.selectedSearchItem=t,console.log("selectedSearchItem1",t),e.thongTinNguoiNopHoSo["delegateIdNo"]=t.applicantIdNo.toString(),e.thongTinNguoiNopHoSo["delegateName"]=t["applicantName"]?t["applicantName"]:"",e.thongTinNguoiNopHoSo["delegateAddress"]=t["address"]?t["address"]:"",e.thongTinNguoiNopHoSo["delegateTelNo"]=t["contactTelNo"]?t["contactTelNo"]:"",e.thongTinNguoiNopHoSo["delegateEmail"]=t["contactEmail"]?t["contactEmail"]:"",e.thongTinNguoiNopHoSo["delegateCityCode"]=t["cityCode"]?t["cityCode"]:"",null!==e.thongTinNguoiNopHoSo["delegateCityCode"]&&void 0!==e.thongTinNguoiNopHoSo["delegateCityCode"]&&0!==e.thongTinNguoiNopHoSo["delegateCityCode"]&&"0"!==e.thongTinNguoiNopHoSo["delegateCityCode"]&&i(e.thongTinNguoiNopHoSo["delegateCityCode"]).then(function(){e.thongTinNguoiNopHoSo["delegateDistrictCode"]=t["districtCode"]?t["districtCode"]:"",null!==e.thongTinNguoiNopHoSo["delegateDistrictCode"]&&void 0!==e.thongTinNguoiNopHoSo["delegateDistrictCode"]&&0!==e.thongTinNguoiNopHoSo["delegateDistrictCode"]&&"0"!==e.thongTinNguoiNopHoSo["delegateDistrictCode"]&&a(e.thongTinNguoiNopHoSo["delegateDistrictCode"]).then(function(){e.thongTinNguoiNopHoSo["delegateWardCode"]=t["wardCode"]?t["wardCode"]:""})})},getThongTinChuHoSo(){return this.thongTinChuHoSo},getThongTinNguoiNopHoSo(){return this.thongTinNguoiNopHoSo},changeApplicantInfos(){let t=this;t.functionTimeOut&&clearTimeout(t.functionTimeOut),t.functionTimeOut=setTimeout(function(){(3===t.originality&&!t.thongTinChuHoSo.userType||1===t.originality&&"business"===t.thongTinChuHoSo.applicantIdType)&&t.checkApplicantInfos(),t.$store.commit("setApplicantId",t.thongTinChuHoSo.applicantIdNo)},2e3)},checkApplicantInfos(){let t=this;if(3===t.originality&&!t.thongTinChuHoSo.userType&&t.thongTinChuHoSo.applicantIdNo||1===t.originality&&"business"===t.thongTinChuHoSo.applicantIdType){let e={applicantIdNo:t.thongTinChuHoSo.applicantIdNo,applicantName:t.thongTinChuHoSo.applicantName};t.$store.dispatch("checkApplicantInfos",e).then(e=>{e&&e.hasOwnProperty("error")&&!0===e.error?(t.bussinessExits=!1,t.validBussinessInfos=!1,t.messageCheckApplicant=e.message):e&&e.hasOwnProperty("warning")&&!0===e.warning?(t.bussinessExits=!0,t.validBussinessInfos=!1,t.messageCheckApplicant=e.message):!e||e.hasOwnProperty("error")||e.hasOwnProperty("warning")||(t.bussinessExits=!0,t.validBussinessInfos=!0)}).catch(function(){t.loadingVerify=!1})}},getApplicantInfos(){let t=this,e={applicantIdNo:t.thongTinChuHoSo.applicantIdNo};t.$store.dispatch("getApplicantInfos",e).then(e=>{t.applicantInfos["applicantName"]=e["MainInformation"]["NAME"],t.applicantInfos["applicantIdNo"]=e["MainInformation"]["ENTERPRISE_GDT_CODE"],t.applicantInfos["address"]=e["HOAdress"]["AddressFullText"],t.applicantInfos["representatives"]=e["Representatives"]["FULL_NAME"],t.applicantInfos["companyType"]=e["MainInformation"]["ENTERPRISE_TYPE_NAME"],t.applicantInfos["companyStatus"]=e["MainInformation"]["ENTERPRISE_STATUS_NAME"],t.dialog_applicantInfos=!0})}}},g=m,v=i("2877"),_=Object(v["a"])(g,l,c,!1,null,null,null);_.options.__file="TiepNhanHoSo_ThongTinChuHoSo.vue";var f=_.exports,y=i("93f5"),C=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-card",[i("v-card-text",[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"pl-0"},[t._v("\n            Mã hồ sơ: \n          ")])],1),i("v-flex",{attrs:{xs12:"",sm4:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"text-bold",staticStyle:{float:"left"}},[i("span",{staticClass:"text-bold"},[t._v("\n              "+t._s(t.thongTinChungHoSo.dossierNo)+"\n            ")])])],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"pl-0"},[t._v("Thời gian giải quyết: ")])],1),i("v-flex",{attrs:{xs12:"",sm4:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),t.loading?t._e():i("v-subheader",{staticStyle:{float:"left"}},[i("span",{staticClass:"text-bold"},[t._v("\n              "+t._s(t.durationText(t.thongTinChungHoSo.durationUnit,t.thongTinChungHoSo.durationCount))+" làm việc\n            ")])])],1),i("v-flex",{attrs:{xs12:""}}),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"pl-0"},[t._v("Ngày tiếp nhận: ")])],1),i("v-flex",{attrs:{xs12:"",sm4:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticStyle:{float:"left"}},[i("span",{staticClass:"text-bold"},[t._v(t._s(t.thongTinChungHoSo.receiveDate))])])],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"pl-0"},[t._v("Ngày hẹn trả: ")])],1),i("v-flex",{attrs:{xs12:"",sm4:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),t.loading||!1!==t.editable&&null!==t.editable&&void 0!==t.editable&&"undefined"!==t.editable?t._e():i("v-subheader",{staticStyle:{float:"left",height:"100%"}},[i("span",{staticClass:"text-bold"},[t._v("\n              "+t._s(t.thongTinChungHoSo.dueDate)+"\n            ")])]),t.loading||!0!==t.editable?t._e():i("v-subheader",{staticStyle:{float:"left",height:"100%"}},[i("vue-ctk-date-time-picker",{ref:"datepicker",attrs:{format:"YYYY-MM-DDTHH:mm",formatted:"DD/MM/YYYY HH:mm","time-format":"HH:mm","without-header":!0,label:t.dueDateInput?"":"Chọn ngày","min-date":t.minDate},model:{value:t.dueDateInput,callback:function(e){t.dueDateInput=e},expression:"dueDateInput"}}),i("v-icon",{staticClass:"hover-pointer",on:{click:t.showDatePicker}},[t._v("event")])],1)],1)],1)],1)],1)],1)},T=[],x=i("e30a"),D=i.n(x),S={components:{"vue-ctk-date-time-picker":D.a},data:()=>({minDate:null,editable:!1,dueDateInput:null,dataPostDossier:{serviceCode:"",govAgencyCode:"",processOptionId:""},thongTinChungHoSo:{serviceName:"",dossierTemplateName:"",serviceConfig:"",serviceOption:"",dossierNo:"",receiveDate:"",dueDate:"",durationDate:"",dossierId:"",dossierIdCTN:"",dossierStatus:"",dossierStatusText:"",durationUnit:"",durationCount:""}}),created(){var t=this;t.$nextTick(function(){t.minDate=t.getCurentDateTime("date")})},computed:{loading(){return this.$store.getters.loading},isDetail(){return this.$store.getters.isDetail}},watch:{dueDateInput(t){this.thongTinChungHoSo["dueDate"]=this.getDuedateF(t)}},methods:{initData(t){var e=this;let i={serviceName:t.serviceName,dossierTemplateName:t.dossierTemplateName,dossierNo:t.dossierNo?t.dossierNo:"",dueDate:null,receiveDate:t.receivingDate?e.dateTimeView(t.receivingDate):t.receiveDate,durationDate:t.durationDate,dossierId:t.dossierId,dossierIdCTN:t.dossierIdCTN,dossierStatus:t.dossierStatus,dossierStatusText:t.dossierStatusText,durationUnit:t.durationUnit,durationCount:t.durationCount};t.receivingDuedate&&t.editable?i.dueDate=t.receivingDuedate:t.receivingDuedate&&!t.editable?i.dueDate=t.receivingDuedate?e.dateTimeView(t.receivingDuedate):t.dueDate:i.dueDate=t.dueDate,e.thongTinChungHoSo=i,e.editable=t.editable,e.thongTinChungHoSo["editable"]=e.editable,e.editable&&(e.dueDateInput=e.thongTinChungHoSo.dueDate?e.formatDateInput(new Date(Number(e.thongTinChungHoSo.dueDate))):null),e.minDate=e.getCurentDateTime("date")},getthongtinchunghoso(){return this.thongTinChungHoSo},getCurentDateTime(t){let e=new Date;return"datetime"===t?`${e.getDate().toString().padStart(2,"0")}/${(e.getMonth()+1).toString().padStart(2,"0")}/${e.getFullYear()} | ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`:"date"===t?`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate()}`:void 0},changeDate(){this.thongTinChungHoSo["dueDate"]=this.getDuedate()},changeDossierNo(t){this.thongTinChungHoSo["dossierNo"]=t},getDuedate(){let t=this.dueDateInput?new Date(this.dueDateInput).getTime():"";return t},getDuedateF(t){let e=new Date(t).getTime();return e},durationText(t,e){var i;if(1===t&&e>8){let t,a=Math.floor(e/8)+" ngày";t=e%8!==0?8*(e/8-Math.floor(e/8))+" giờ":"",i=`${a} ${t}`}else 0===t?i=e+" ngày":1===t&&e<=8&&(i=e+" giờ");return i},goBack(){let t=this,e=t.$router.history.current.params,i=t.$router.history.current.query;t.$router.push({path:"/danh-sach-ho-so/"+e.index,query:i})},dateTimeView(t){if(t){let e=new Date(t);return`${e.getDate().toString().padStart(2,"0")}/${(e.getMonth()+1).toString().padStart(2,"0")}/${e.getFullYear()} ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`}},formatDateInput(t){return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")} ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`},showDatePicker(){this.$refs.datepicker.showDatePicker()}},filters:{dateTimeView(t){if(t){let e=new Date(t);return`${e.getDate().toString().padStart(2,"0")}/${(e.getMonth()+1).toString().padStart(2,"0")}/${e.getFullYear()} ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`}return""}}},b=S,P=Object(v["a"])(b,C,T,!1,null,null,null);P.options.__file="TiepNhanHoSo_ThongTinChung.vue";var I=P.exports,A=i("f374"),N=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-card",[i("v-card-text",[i("v-slide-y-transition",[2===t.dichVuChuyenPhatKetQua.viaPostal?i("v-form",{ref:"formDichVuChuyenPhat",attrs:{"lazy-validation":""},model:{value:t.valid_dichvuchuyenphat,callback:function(e){t.valid_dichvuchuyenphat=e},expression:"valid_dichvuchuyenphat"}},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"pl-0"},[t._v("Dịch vụ đăng ký "),i("span",{staticStyle:{color:"red"}},[t._v(" * ")]),t._v(": ")])],1),i("v-flex",{attrs:{xs12:"",sm10:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-select",{attrs:{items:t.postalServiceItems,"item-text":"itemName","item-value":"itemCode",autocomplete:"",rules:[function(t){return!!t||"Trường dữ liệu bắt buộc"}],required:""},model:{value:t.dichVuChuyenPhatKetQua.postalServiceCode,callback:function(e){t.$set(t.dichVuChuyenPhatKetQua,"postalServiceCode",e)},expression:"dichVuChuyenPhatKetQua.postalServiceCode"}})],1),i("v-flex",{attrs:{xs12:""}}),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"pl-0"},[t._v("Địa chỉ trả kết quả"),i("span",{staticStyle:{color:"red"}},[t._v(" * ")]),t._v(": ")])],1),i("v-flex",{attrs:{xs12:"",sm6:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-text-field",{attrs:{rules:[function(t){return!!t||"Trường dữ liệu bắt buộc"}],required:""},model:{value:t.dichVuChuyenPhatKetQua.postalAddress,callback:function(e){t.$set(t.dichVuChuyenPhatKetQua,"postalAddress",e)},expression:"dichVuChuyenPhatKetQua.postalAddress"}})],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"pl-0"},[t._v("SĐT người nhận"),i("span",{staticStyle:{color:"red"}},[t._v(" * ")]),t._v(": ")])],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-text-field",{attrs:{"append-icon":"phone",rules:[t.rules.telNo,t.rules.required],required:""},model:{value:t.dichVuChuyenPhatKetQua.postalTelNo,callback:function(e){t.$set(t.dichVuChuyenPhatKetQua,"postalTelNo",e)},expression:"dichVuChuyenPhatKetQua.postalTelNo"}})],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"pl-0"},[t._v("Bưu cục"),i("span",{staticStyle:{color:"red"}},[t._v(" * ")]),t._v(": ")])],1),i("v-flex",{attrs:{xs12:"",sm6:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-select",{attrs:{items:t.vnPostItems,"item-text":"itemName","item-value":"itemCode",autocomplete:"",rules:[function(t){return!!t||"Trường dữ liệu bắt buộc"}],required:""},model:{value:t.dichVuChuyenPhatKetQua.postalCityCode,callback:function(e){t.$set(t.dichVuChuyenPhatKetQua,"postalCityCode",e)},expression:"dichVuChuyenPhatKetQua.postalCityCode"}})],1)],1)],1):t._e()],1)],1)],1),i("div",{staticClass:"absolute__btn",staticStyle:{width:"400px","margin-top":"4px"}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),i("v-radio-group",{attrs:{row:""},on:{change:function(e){t.changeViaPostal(e)}},model:{value:t.dichVuChuyenPhatKetQua.viaPostal,callback:function(e){t.$set(t.dichVuChuyenPhatKetQua,"viaPostal",e)},expression:"dichVuChuyenPhatKetQua.viaPostal"}},[i("v-radio",{attrs:{label:"Nhận kết quả trực tiếp",value:1}}),i("v-radio",{attrs:{label:"Nhận kết quả tại nhà",value:2}})],1)],1)],1)},w=[],k={data:()=>({valid_dichvuchuyenphat:!1,citys:[],resultDistricts:[],resultWards:[],vnPostItems:[],postalServiceItems:[{itemName:"VNPOST",itemCode:"VNPOST"}],rules:{required:t=>!!t||"Trường dữ liệu bắt buộc",email:t=>{const e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(t)||"Địa chỉ Email không hợp lệ"},telNo:t=>{const e=/^([0-9]{0,})$/;return e.test(t)||"Gồm các ký tự 0-9"}}}),computed:{loading(){return this.$store.getters.loading},thongTinChuHoSoBindChuyenPhat(){return this.$store.getters.thongTinChuHoSoBindChuyenPhat},dichVuChuyenPhatKetQua(){return this.$store.getters.dichVuChuyenPhatKetQua}},created(){let t=this;t.$store.dispatch("getVNPOSTcode").then(e=>{t.vnPostItems=e}),this.postalServiceItems.length>0&&(this.dichVuChuyenPhatKetQua.postalServiceCode=this.postalServiceItems[0].itemCode)},watch:{thongTinChuHoSoBindChuyenPhat(t){}},mounted(){var t=this,e={collectionCode:"ADMINISTRATIVE_REGION",level:0,parent:0},i=t.dichVuChuyenPhatKetQua;t.$store.getters.getDictItems(e).then(function(e){t.citys=e.data}),i.postalCityCode&&(e.parent=i.postalCityCode,e.level=1,t.$store.getters.getDictItems(e).then(function(e){t.resultDistricts=e.data})),i.postalDistrictCode&&(e.parent=i.postalDistrictCode,e.level=1,t.$store.getters.getDictItems(e).then(function(e){t.resultWards=e.data}))},methods:{initData(t){var e=this;e.$nextTick(function(){})},onChangeResultCity(t){var e=this;let i={collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:t};console.log("onChangeResultCity",t),e.$store.getters.getDictItems(i).then(function(t){e.resultDistricts=t.data})},onChangeResultDistrict(t){var e=this;let i={collectionCode:"ADMINISTRATIVE_REGION",level:2,parent:t};console.log("onChangeResultDistrict",t),e.$store.getters.getDictItems(i).then(function(t){e.resultWards=t.data})},changeViaPostal(t){console.log("changeViaPostal",t),this.$store.commit("setViaPostal",2===t?2:1),this.$emit("changeViapostal",t);let e={viaPostal:2===t?2:1,postalServiceCode:this.dichVuChuyenPhatKetQua.postalServiceCode?this.dichVuChuyenPhatKetQua.postalServiceCode:"",postalAddress:this.dichVuChuyenPhatKetQua.postalAddress?this.dichVuChuyenPhatKetQua.postalAddress:"",postalCityCode:this.dichVuChuyenPhatKetQua.postalCityCode?this.dichVuChuyenPhatKetQua.postalCityCode:"",postalDistrictCode:this.dichVuChuyenPhatKetQua.postalDistrictCode?this.dichVuChuyenPhatKetQua.postalDistrictCode:"",postalWardCode:this.dichVuChuyenPhatKetQua.postalWardCode?this.dichVuChuyenPhatKetQua.postalWardCode:"",postalTelNo:this.dichVuChuyenPhatKetQua.postalTelNo?this.dichVuChuyenPhatKetQua.postalTelNo:""};this.$store.commit("setDichVuChuyenPhatKetQua",e),console.log("dichVuChuyenPhatKetQua",this.dichVuChuyenPhatKetQua)},validDichVuChuyenPhat(){var t=this;return t.$refs.formDichVuChuyenPhat.validate()}}},E=k,F=Object(v["a"])(E,N,w,!1,null,null,null);F.options.__file="TiepNhanHoSo_DichVuChuyenPhatKetQua.vue";var O=F.exports;r.a.options={closeButton:!0,timeOut:"5000"};var H={props:["index","id","formCode"],components:{"thong-tin-chu-ho-so":f,"thanh-phan-ho-so":y["a"],"thong-tin-chung":I,"thu-phi":A["a"],"dich-vu-chuyen-phat-ket-qua":O},data:()=>({validTNHS:!1,dossierId:"",mark:!0,stateEditSample:!1,tiepNhanState:!0,thongTinChiTietHoSo:{},payments:{},paymentProfile:{},briefNote:"",receiveDateEdit:"",editableDate:!1,dueDateEdit:"",viaPortalDetail:0,showThuPhi:!1,inputTypes:[1,3],outputTypes:[2],sampleCount:0,loadingAction:!1}),computed:{loading(){return this.$store.getters.loading},originality(){var t=this;return t.getOriginality()},dichVuChuyenPhatKetQua(){return this.$store.getters.dichVuChuyenPhatKetQua},thongTinChuHoSo(){return this.$store.getters.thongTinChuHoSo}},created(){var t=this;t.$nextTick(function(){t.dossierId=t.id})},watch:{},methods:{initData:function(t){var e=this;e.$store.dispatch("getDetailDossier",t).then(t=>{if(e.dossierId=t.dossierId,e.briefNote=t.dossierName?t.dossierName:"",t["editable"]=!1,""===t.dossierStatus?e.$store.dispatch("pullNextactions",t).then(i=>{if(i){var a=i.filter(function(t){return 1100===t.actionCode||"1100"===t.actionCode});e.$store.dispatch("processPullBtnDetail",{dossierId:t.dossierId,actionId:a[0]?a[0].processActionId:""}).then(i=>{t["editable"]=!(!i||!i.receiving)&&i.receiving.editable,t["receivingDuedate"]=i&&i.receiving&&i.receiving.dueDate?i.receiving.dueDate:null,t["receivingDate"]=i&&i.receiving?i.receiving.receiveDate:"",e.editableDate=!(!i||!i.receiving)&&i.receiving.editable,e.dueDateEdit=i&&i.receiving&&i.receiving.dueDate?i.receiving.dueDate:"",e.receiveDateEdit=i&&i.receiving?i.receiving.receiveDate:"",i&&i.payment&&i.payment.requestPayment>0&&(e.showThuPhi=!0,e.payments=i.payment),e.$refs.thongtinchunghoso&&e.$refs.thongtinchunghoso.initData(t)})}else e.$refs.thongtinchunghoso&&e.$refs.thongtinchunghoso.initData(t)}):e.$refs.thongtinchunghoso&&(console.log("has thong tin chung ho so"),e.$refs.thongtinchunghoso.initData(t)),e.thongTinChiTietHoSo=t,e.$refs.thongtinchuhoso.initData(t),e.$refs.thanhphanhoso.initData(t),e.viaPortalDetail=t.viaPostal,t.viaPostal>0){let i=t.address?t.address+", "+t.wardName+" - "+t.districtName+" - "+t.cityName:"";"NEW"===e.formCode&&1===e.originality&&(t["postalAddress"]=i,t["postalTelNo"]=e.thongTinChuHoSo["contactTelNo"]),e.$store.commit("setDichVuChuyenPhatKetQua",t)}}).catch(t=>{})},luuHoSo(){var t=this;console.log("luu Ho So--------------------"),t.$store.commit("setPrintPH",!1);let e=this.$refs.thongtinchunghoso?this.$refs.thongtinchunghoso.getthongtinchunghoso():{},i=this.$refs.thongtinchuhoso.thongTinChuHoSo,a=this.$refs.thongtinchuhoso?this.$refs.thongtinchuhoso.thongTinNguoiNopHoSo:{},s=(this.$refs.thanhphanhoso.dossierTemplateItems,this.$refs.dichvuchuyenphatketqua?this.$refs.dichvuchuyenphatketqua.dichVuChuyenPhatKetQua:{});console.log("validate TNHS formThongtinchuhoso.validate()",t.$refs.thongtinchuhoso.showValid());let n=t.$refs.thongtinchuhoso.showValid();if(n["validForm"]){let l=!1;if(n["validApplicant"])l=!0;else{let t=confirm(n["message"]+" Bạn có muốn tiếp tục?");t&&(l=!0)}if(l){if(!t.$refs.thanhphanhoso.validDossierTemplate())return;if(2===s.viaPostal&&!t.$refs.dichvuchuyenphatketqua.validDichVuChuyenPhat())return;let n=t.$refs.thanhphanhoso.dossierFilesItems,l=[];n&&n.forEach(function(e,i){e.eForm&&(e["dossierId"]=t.dossierId,l.push(t.$store.dispatch("putAlpacaForm",e)))});let c=Object.assign(i,a,s,e);c["dossierId"]=t.dossierId,c["sampleCount"]=t.thongTinChiTietHoSo.sampleCount,c["originality"]=t.originality,console.log("data put dossier --\x3e",c),setTimeout(function(){t.$store.dispatch("putDossier",c).then(function(e){if("UPDATE"===t.formCode)t.goBack();else{var i=t.$store.getters.loadingInitData;let e=i.user.userName?i.user.userName:"",a={dossierId:t.dossierId,actionCode:1100,actionNote:"",actionUser:e,payload:"",security:"",assignUsers:"",payment:t.payments,createDossiers:"",dueDate:c.dueDate};t.$store.dispatch("postAction",a).then(function(e){t.$router.history.current.query;o["a"].push({path:"/danh-sach-ho-so/4/chi-tiet-ho-so/"+e.dossierId,query:{activeTab:"tabs-1"}}),t.tiepNhanState=!1})}}).catch(function(t){r.a.error("Yêu cầu của bạn thực hiện thất bại.")})},500)}}},tiepNhanHoSo(t){var e=this;console.log("luu Ho So--------------------"),e.$store.commit("setPrintPH",!1);var i=this.$refs.thongtinchunghoso.getthongtinchunghoso();let a=this.$refs.thongtinchuhoso.getThongTinChuHoSo(),s=this.$refs.thongtinchuhoso.getThongTinNguoiNopHoSo(),o=(this.$refs.thanhphanhoso.dossierTemplateItems,e.dichVuChuyenPhatKetQua);console.log("validate TNHS formThongtinchuhoso.validate()",e.$refs.thongtinchuhoso.showValid());let n=e.$refs.thongtinchuhoso.showValid();if(n["validForm"]){let c=!1;if(n["validApplicant"])c=!0;else{let t=confirm(n["message"]+" Bạn có muốn tiếp tục?");t&&(c=!0)}if(c){if(console.log("valid confirm2",c),e.loadingAction=!0,!e.$refs.thanhphanhoso.validDossierTemplate())return void(e.loadingAction=!1);if(2===o.viaPostal&&!e.$refs.dichvuchuyenphatketqua.validDichVuChuyenPhat())return void(e.loadingAction=!1);let n=e.$refs.thanhphanhoso.dossierFilesItems,d=[];n&&n.forEach(function(t,i){t.eForm&&(t["dossierId"]=e.dossierId,d.push(e.$store.dispatch("putAlpacaForm",t)))});var l=Object.assign(a,s,o,i);l["dossierId"]=e.dossierId,l["sampleCount"]=e.thongTinChiTietHoSo.sampleCount,l["dossierName"]=e.briefNote,l["originality"]=e.originality,console.log("data put dossier --\x3e",l),e.$store.dispatch("putDossier",l).then(function(i){if(e.loadingAction=!1,"UPDATE"===e.formCode)e.goBack();else{var a=e.$store.getters.loadingInitData;let i=a.user.userName?a.user.userName:"";var s={};e.showThuPhi&&(s={requestPayment:e.payments["requestPayment"],paymentNote:e.payments["paymentNote"],advanceAmount:Number(e.payments["advanceAmount"].toString().replace(/\./g,"")),feeAmount:Number(e.payments["feeAmount"].toString().replace(/\./g,"")),serviceAmount:Number(e.payments["serviceAmount"].toString().replace(/\./g,"")),shipAmount:Number(e.payments["shipAmount"].toString().replace(/\./g,""))});var o={dueDate:e.editableDate&&l.dueDate?l.dueDate:e.dueDateEdit,receiveDate:e.receiveDateEdit};let n={dossierId:e.dossierId,actionCode:1100,actionNote:"",actionUser:i,payload:o,security:"",assignUsers:"",payment:s,createDossiers:""};e.loadingAction=!0,e.$store.dispatch("postAction",n).then(function(i){if(e.loadingAction=!1,t){let t=e.$router.history.current,i=t.query,a=e.$store.getters.getDataCreateDossier;e.loadingAction=!0,e.$store.dispatch("postDossier",a).then(function(t){e.loadingAction=!1,e.dossierId=t.dossierId,e.$refs.thongtinchunghoso.changeDossierNo(t.dossierNo);let a="?";for(let e in i)""!==i[e]&&"undefined"!==i[e]&&void 0!==i[e]&&(a+=e+"="+i[e]+"&");console.log("queryString=====",a),e.$router.push({path:"/danh-sach-ho-so/0/ho-so/"+t.dossierId+"/NEW"+a,query:{renew:Math.floor(100*Math.random())+1}})}).catch(t=>{e.loadingAction=!1})}else e.goBack(),e.tiepNhanState=!1}).catch(t=>{e.loadingAction=!1})}}).catch(t=>{e.loadingAction=!1,console.log("rejectXhr==========",t),r.a.error("Yêu cầu của bạn thực hiện thất bại.")})}}},boSungHoSo(){var t=this;console.log("luu Ho So--------------------"),t.$store.commit("setPrintPH",!1);let e=this.$refs.thongtinchunghoso.getthongtinchunghoso(),i=this.$refs.thongtinchuhoso.thongTinChuHoSo,a=this.$refs.thongtinchuhoso.thongTinNguoiNopHoSo,s=this.$refs.thanhphanhoso.dossierTemplateItems,o=this.$refs.lephi.lePhi,n=this.$refs.dichvuchuyenphatketqua.dichVuChuyenPhatKetQua;if(console.log("validate TNHS formThongtinchuhoso.validate()",t.$refs.thongtinchuhoso.showValid()),t.$refs.thongtinchuhoso.showValid()){let r=t.$refs.thanhphanhoso.dossierFilesItems,l=s,c=[],d=[];l&&(l.forEach(function(e,i){1===e.partType&&(e["dossierId"]=t.dossierId,d.push(t.$store.dispatch("postDossierMark",e)))}),r.forEach(function(e,i){e.eForm&&(e["dossierId"]=t.dossierId,c.push(t.$store.dispatch("putAlpacaForm",e)))})),Promise.all(d).then(t=>{}).catch(function(t){}),Promise.all(c).then(r=>{console.log(r);let l=Object.assign(i,a,s,o,n,e);console.log("data put dossier --\x3e",l),l["dossierId"]=t.dossierId,t.$store.dispatch("putDossier",l).then(function(e){let i={dossierId:t.dossierId,actionCode:7100,payload:"",security:"",assignUsers:{},payment:{},createDossiers:{},dueDate:l.dueDate};t.$store.dispatch("postAction",i).then(function(t){})})}).catch(t=>{})}},changeViapostal(t){this.viaPortalDetail=t?2:1},goBack(){let t=this,e=t.$router.history.current.params,i=t.$router.history.current.query;t.$router.push({path:"/danh-sach-ho-so/"+e.index,query:i})}}},L=H,$=Object(v["a"])(L,a,s,!1,null,null,null);$.options.__file="TiepNhanHoSoDetail.vue";e["default"]=$.exports},"5de0":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.loading?i("content-placeholders",{staticClass:"mt-3"},[i("content-placeholders-text",{attrs:{lines:1}})],1):t.dossierSelected.length>0?i("div",{staticClass:"row-header"},[i("div",{staticClass:"background-triangle-big"},[i("span",[t._v(t._s(t.actionActive["tiltle"]?t.actionActive["tiltle"]:"XỬ LÝ HỒ SƠ"))])]),i("div",{staticClass:"layout row wrap header_tools row-blue"},[i("div",{staticClass:"flex xs8 sm10 pl-3 text-ellipsis text-bold",attrs:{title:t.dossierSelected[0].serviceName}},[t._v("\n        "+t._s(t.dossierSelected[0].serviceName)+"\n      ")]),i("div",{staticClass:"flex xs4 sm2 text-right",staticStyle:{"margin-left":"auto"}},[i("v-btn",{staticClass:"my-0 mx-0 btn-border-left",attrs:{flat:"","active-class":"temp_active"},on:{click:t.goBack}},[i("v-icon",{attrs:{size:"16"}},[t._v("reply")]),t._v("  \n          Quay lại\n        ")],1)],1)])]):t._e(),t.dossierSelected.length>0?i("v-expansion-panel",{staticClass:"expansion-pl"},[i("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"1"}},[i("v-card",[i("v-card-text",{staticClass:"px-0 pt-0"},[i("v-data-table",{staticClass:"table-landing table-bordered",attrs:{headers:t.headersTable,items:t.dossierSelected,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[i("tr",{class:{active:e.index%2==1}},[i("td",{staticClass:"text-xs-center"},[i("div",[i("span",[t._v(t._s(e.index+1))])])]),i("td",{staticClass:"text-xs-left"},[i("div",[i("span",[t._v(t._s(e.item.dossierNo))]),i("br"),e.item.online?i("span",{staticStyle:{color:"blue"}},[t._v("Hồ sơ trực tuyến")]):i("span",{staticStyle:{color:"green"}},[t._v("Hồ sơ một cửa")])])]),i("td",{staticClass:"text-xs-left"},[i("div",[i("span",[t._v(t._s(e.item.applicantName))])])]),i("td",{staticClass:"text-xs-left"},[i("div",[i("span",[t._v(t._s(e.item.wardName)+", "+t._s(e.item.districtName)+", "+t._s(e.item.cityName))])])]),i("td",{staticClass:"text-xs-left"},[i("div",[i("span",[t._v(" Tiếp nhận: "+t._s(e.item.receiveDate)),i("br"),t._v("\n                      Hẹn trả: "+t._s(e.item.receiveDate)),i("br"),i("span",[t._v(t._s(e.item.dossierOverdue))])])])])])]}}])})],1)],1)],1)],1):t._e(),i("v-dialog",{attrs:{"max-width":"900",transition:"fade-transition"},model:{value:t.dialogPDF,callback:function(e){t.dialogPDF=e},expression:"dialogPDF"}},[i("v-card",[i("v-card-title",{staticClass:"headline"},[t._v("File đính kèm")]),i("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogPDF=!1}}},[i("v-icon",[t._v("clear")])],1),t.dialogPDFLoading?i("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[i("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):t._e(),i("iframe",{directives:[{name:"show",rawName:"v-show",value:!t.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPDFPreview",src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1),i("div",[t.btnStateVisible?i("v-layout",{attrs:{wrap:""}},[t.showFormBoSungThongTinNgan?i("form-bo-sung-thong-tin",{ref:"formBoSungThongTinNgan",attrs:{dossier_id:Number(t.id),action_id:Number(t.actionIdCurrent)}}):t._e(),t.showPhanCongNguoiThucHien?i("phan-cong",{ref:"phancong",attrs:{type:t.type_assign},model:{value:t.assign_items,callback:function(e){t.assign_items=e},expression:"assign_items"}}):t._e(),t.showTaoTaiLieuKetQua?i("tai-lieu-ket-qua",{attrs:{detailDossier:t.thongTinChiTietHoSo,createFiles:t.createFiles}}):t._e(),t.showExtendDateEdit?i("ngay-gia-han",{ref:"ngaygiahan",attrs:{type:t.typeExtendDate,extendDateEdit:t.extendDateEdit}}):t._e(),t.showEditDate?i("ngay-hen-tra",{ref:"ngayhentra",attrs:{dueDateEdit:t.dueDateEdit}}):t._e(),t.showTraKetQua?i("tra-ket-qua",{attrs:{detailDossier:t.thongTinChiTietHoSo,createFiles:t.returnFiles}}):t._e(),t.showThuPhi?i("thu-phi",{attrs:{viaPortal:t.viaPortalDetail,detailDossier:t.thongTinChiTietHoSo},model:{value:t.payments,callback:function(e){t.payments=e},expression:"payments"}}):t._e(),t.showPostalService?i("thong-tin-buu-chinh",{attrs:{postalService:t.thongTinChiTietHoSo}}):t._e(),t.showYkienCanBoThucHien?i("y-kien-can-bo",{ref:"ykiencanbo",attrs:{user_note:t.userNote}}):t._e(),i("div",{staticClass:"my-2 mx-3"},[i("v-btn",{attrs:{color:"primary",loading:t.loadingActionProcess,disabled:t.loadingActionProcess},nativeOn:{click:function(e){t.processAction()}}},[i("v-icon",[t._v("save")]),t._v(" \n          Xác nhận\n          "),i("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1),i("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.goBack()}}},[i("v-icon",{attrs:{size:"16"}},[t._v("reply")]),t._v("  \n          Quay lại\n        ")],1)],1)],1):t._e(),t.btnStateVisible?t._e():i("v-alert",{attrs:{outline:"",color:"success",icon:"check_circle",value:!0}},[t._v("\n      Thực hiện thành công!\n    ")])],1),i("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"700px"},model:{value:t.dialog_statusAction,callback:function(e){t.dialog_statusAction=e},expression:"dialog_statusAction"}},[i("v-card",[i("v-card-title",{staticClass:"headline"},[t._v("\n        Trạng thái xử lý\n      ")]),i("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(e){return t.closeDialogStatusAction(e)}}},[i("v-icon",[t._v("clear")])],1),i("v-card-text",{staticStyle:{"max-height":"350px"}},t._l(t.dossierSelected,function(e,a){return i("div",{key:e.dossierId},[i("v-layout",{staticClass:"py-1 align-center row-list-style",staticStyle:{"border-bottom":"1px solid #ddd",position:"relative"},attrs:{wrap:""}},[i("v-flex",{attrs:{xs11:""}},[i("span",{staticClass:"text-bold",staticStyle:{position:"absolute"}},[t._v(t._s(a+1)+".")]),i("div",{staticClass:"ml-4"},[i("span",{staticClass:"text-bold"},[t._v(t._s(e.dossierNo))]),t._v(" - "+t._s(e.applicantName))])]),i("v-flex",{staticClass:"text-right",attrs:{xs1:""}},[e.statusAction?i("v-tooltip",{attrs:{top:""}},[i("v-icon",{attrs:{slot:"activator",size:"20",color:"primary"},slot:"activator"},[t._v("\n                  check\n                ")]),i("span",[t._v("Thành công")])],1):i("v-tooltip",{attrs:{top:""}},[i("v-icon",{attrs:{slot:"activator",size:"20",color:"red darken-3"},slot:"activator"},[t._v("\n                  block\n                ")]),i("span",[t._v("Thất bại")])],1)],1)],1)],1)}),0),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"primary",loading:t.loadingAction,disabled:t.loadingAction},nativeOn:{click:function(e){t.processAction()}}},[i("v-icon",{attrs:{size:"20"}},[t._v("refresh")]),t._v(" \n          Thử lại\n          "),i("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1),i("v-btn",{attrs:{color:"red",dark:"",loading:t.loadingAction,disabled:t.loadingAction},nativeOn:{click:function(e){return t.closeDialogStatusAction(e)}}},[i("v-icon",[t._v("undo")]),t._v(" \n          Thoát\n          "),i("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1)],1)],1)],1)},s=[],o=i("a18c"),n=(i("4ea3"),i("1136")),r=i("7121"),l=i("c23d"),c=i("f374"),d=i("4a3a"),h=i("87c1"),u=i("24fb"),p=i("d80f"),m=i("93f5"),g=i("0838"),v=i("26ed"),_=i("8bf2"),f={props:["index"],components:{"thong-tin-co-ban-ho-so":n["a"],"phan-cong":r["a"],"tra-ket-qua":l["a"],"thu-phi":c["a"],"ky-duyet":d["a"],"y-kien-can-bo":h["a"],"tai-lieu-ket-qua":u["a"],"form-bo-sung-thong-tin":p["a"],"thanh-phan-ho-so":m["a"],"ngay-hen-tra":g["a"],"ngay-gia-han":v["a"],"thong-tin-buu-chinh":_["a"]},data:()=>({headersTable:[{text:"#",align:"center",sortable:!1},{text:"Mã hồ sơ",align:"center",sortable:!1},{text:"Chủ hồ sơ",align:"center",sortable:!1},{text:"Địa chỉ",align:"center",sortable:!1},{text:"Thời gian",align:"center",sortable:!1}],mutilpleAction:!1,actionExits:[],dossierProcess:[],countProcessed:0,activeNotify:!1,dialog_statusAction:!1,thongTinChiTietHoSo:{},nextActions:[],payments:"",dossierActions:[],itemselect:"",actionNote:"",actionsSubmitLoading:!1,showThongTinCoBanHoSo:!1,showYkienCanBoThucHien:!1,showFormBoSungThongTinNgan:!1,showPhanCongNguoiThucHien:!1,showTaoTaiLieuKetQua:!1,showKyPheDuyetTaiLieu:!1,showTraKetQua:!1,showThuPhi:!1,showEditDate:!1,showExtendDateEdit:!1,showPostalService:!1,dueDateEdit:"",checkInput:0,viaPortalDetail:0,showThucHienThanhToanDienTu:!1,dossierItemDialogPick:"",itemDialogPick:"",resultDialogPick:"",indexDialogPick:"",userNote:0,partView:"",stateView:!1,payment_type:0,type_assign:0,returnFiles:[],assign_items:[],btnStateVisible:!0,dialogActionProcess:!1,rollbackable:!1,dialogPDF:!1,dialogPDFLoading:!1,loadingActionProcess:!1,loadingAction:!1,arrDossierId:[],actionActiveTmp:[]}),computed:{loading(){return this.$store.getters.loading},originality(){var t=this;return t.getOriginality()},dossierSelected(){var t=this;return t.$store.getters.dossierSelected},actionActive(){return console.log("actionActive-------",this.$store.getters.actionActive),this.$store.getters.actionActive},activeGetCounter(){return this.$store.getters.activeGetCounter}},created(){var t=this;t.$nextTick(function(){t.btnIndex=-1;let e=t.$router.history.current.query;if(console.log("currentQuery",e),0===t.dossierSelected.length){let i=[];if(e.hasOwnProperty("dossiers")){let a=e.dossiers.split(",");t.arrDossierId=a,a.forEach(e=>{i.push(t.$store.dispatch("getDetailDossier",e))}),Promise.all(i).then(e=>{t.$store.dispatch("loadDossierSelected",e)}).catch(t=>{})}}else{let i=[];if(e.hasOwnProperty("dossiers")){let a=e.dossiers.split(",");t.arrDossierId=a,a.forEach(e=>{i.push(t.$store.dispatch("getDetailDossier",e))}),Promise.all(i).then(e=>{t.$store.dispatch("loadDossierSelected",e)}).catch(t=>{})}}try{if(void 0===t.actionActive.action||null===t.actionActive.action||""===t.actionActive.action){let i=JSON.parse(e.actionActive);i&&t.$store.dispatch("loadActionActive",i)}}catch(i){console.log(i)}t.getNextActions()})},updated(){var t=this;t.$nextTick(function(){})},watch:{},methods:{initData(t){},goBack(){window.history.back()},processPullBtnDetailRouter(t,e,i,a){console.log("result Nextaction",i);let s=this,o=!1;s.dossierId=t.dossierId,s.showYkienCanBoThucHien=!1,s.showFormBoSungThongTinNgan=!1,s.showPhanCongNguoiThucHien=!1,s.showTaoTaiLieuKetQua=!1,s.showKyPheDuyetTaiLieu=!1,s.showTraKetQua=!1,s.showThuPhi=!1,s.showEditDate=!1,s.showThucHienThanhToanDienTu=!1,s.dossierItemDialogPick=t,s.itemDialogPick=e,s.resultDialogPick=i,s.indexDialogPick=a,s.userNote=0,null!==i&&void 0!==i&&"undefined"!==i&&(i.hasOwnProperty("userNote")||i.hasOwnProperty("extraForm")||i.hasOwnProperty("allowAssignUser")||i.hasOwnProperty("createFiles")||i.hasOwnProperty("eSignature")||i.hasOwnProperty("returnFiles")||i.hasOwnProperty("payment")||i.hasOwnProperty("checkInput"))&&(!i.hasOwnProperty("userNote")||1!==i.userNote&&"1"!==i.userNote&&2!==i.userNote&&"2"!==i.userNote||(o=!0,s.showYkienCanBoThucHien=!0,s.userNote=i.userNote),i.hasOwnProperty("extraForm")&&i.extraForm&&(o=!0,s.showFormBoSungThongTinNgan=!0),i.hasOwnProperty("allowAssignUser")&&0!==i.allowAssignUser&&(console.log("allowAssignUser",i.toUsers),Array.isArray(i.toUsers)?s.assign_items=i.toUsers:s.assign_items=[i.toUsers],s.type_assign=i.allowAssignUser,o=!0,s.showPhanCongNguoiThucHien=!0),i.hasOwnProperty("createFiles")&&null!==i.createFiles&&void 0!==i.createFiles&&"undefined"!==i.createFiles&&i.createFiles.length>0&&(o=!0,s.showTaoTaiLieuKetQua=!0,s.createFiles=i.createFiles),i.hasOwnProperty("eSignature")&&i.eSignature&&(o=!0,s.showKyPheDuyetTaiLieu=!0),i.hasOwnProperty("returnFiles")&&null!==i.returnFiles&&void 0!==i.returnFiles&&"undefined"!==i.returnFiles&&i.returnFiles.length>0&&(o=!0,s.showTraKetQua=!0,s.returnFiles=i.returnFiles),i.hasOwnProperty("payment")&&null!==i.payment&&void 0!==i.payment&&"undefined"!==i.payment&&5===i.payment.requestPayment&&(o=!0,s.showThuPhi=!0,s.payments=i.payment,s.viaPortalDetail=t.viaPostal),i.hasOwnProperty("checkInput")&&null!==i.checkInput&&void 0!==i.checkInput&&"undefined"!==i.checkInput&&(s.checkInput=i.checkInput,2===i.checkInput&&(o=!0,s.$refs.thanhphanhoso.initData(s.thongTinChiTietHoSo))),i.hasOwnProperty("receiving")&&null!==i.receiving&&void 0!==i.receiving&&"undefined"!==i.receiving&&!0===i.receiving.editable&&(o=!0,s.showEditDate=!0,s.dueDateEdit=""!==i.receiving.dueDate?new Date(i.receiving.dueDate):"",s.receiveDateEdit=i.receiving.receiveDate)),o&&(s.dialogActionProcess=!0,s.loadingActionProcess=!1)},processPullBtnDetail(t,e){let i=this;i.btnIndex=e,i.itemAction=t,i.actionIdCurrent=t.processActionId;let a={dossierId:i.dossierSelected[0].dossierId,actionId:t.processActionId};i.dialogActionProcess=!1,i.$store.dispatch("processPullBtnDetail",a).then(function(a){i.processPullBtnDetailRouter(i.dossierSelected[0],t,a,e)})},doCopy(t,e,i,a){let s=this,n={dossierId:t.dossierId};s.loadingAction=!0,s.$store.dispatch("doCopy",n).then(function(t){s.loadingAction=!1,s.indexAction=-1,o["a"].push({path:"/danh-sach-ho-so/"+s.index+"/ho-so/"+t.dossierId+"/"+s.itemAction.form,query:s.$router.history.current.query})})},doCancel(t,e,i,a){let s=this;if(s.loadingAction=!0,a)console.log(s.selected);else{let e={dossierId:t.dossierId};s.$store.dispatch("doCancel",e).then(function(t){s.loadingAction=!1,s.indexAction=-1,o["a"].push({path:"/danh-sach-ho-so/"+s.index+"/ho-so/"+t.dossierId+"/"+s.itemAction.form,query:s.$router.history.current.query})})}},processAction(){var t=this,e=t.$store.getters.loadingInitData,i=e.user.userName?e.user.userName:"";if(t.dossierProcess=t.dossierSelected.filter(function(t){return!1===t["statusAction"]||!t["statusAction"]}),t.countProcessed=0,t.mutilpleAction){for(let a in t.actionExits)for(let e in t.dossierSelected)if(!1===t.dossierSelected[e]["statusAction"]||!t.dossierSelected[e]["statusAction"]){let s={dossierId:t.dossierSelected[e].dossierId,actionCode:t.actionExits[a].actionCode,actionUser:i};t.postAction(s,t.dossierSelected[e],e)}}else for(let a in t.dossierSelected)if(!1===t.dossierSelected[a]["statusAction"]||!t.dossierSelected[a]["statusAction"]){let e={dossierId:t.dossierSelected[a].dossierId,actionCode:t.actionActive.action,actionUser:i};t.postAction(e,t.dossierSelected[a],a)}},postAction(t,e,i){var a=this,s=!0,o=!0;if(a.showPhanCongNguoiThucHien){t["toUsers"]=a.assign_items;let e=a.$refs.phancong.doExport();console.log("validPhanCong",e),s=!!e}var n=null;if(a.payments&&(n={requestPayment:a.payments["requestPayment"],advanceAmount:Number(a.payments["advanceAmount"].toString().replace(/\./g,"")),feeAmount:Number(a.payments["feeAmount"].toString().replace(/\./g,"")),serviceAmount:Number(a.payments["serviceAmount"].toString().replace(/\./g,"")),shipAmount:Number(a.payments["shipAmount"].toString().replace(/\./g,""))}),a.showThuPhi&&(t["payment"]=n),a.showFormBoSungThongTinNgan&&(t["payload"]=a.$refs.formBoSungThongTinNgan.formSubmitData()),a.showKyPheDuyetTaiLieu){a.$refs.kypheduyettailieu.doExport()}if(a.showEditDate){let e=a.$refs.ngayhentra.getDateInput();console.log("dueDateEdit",e);let i={dueDate:e,receiveDate:a.receiveDateEdit};t["payload"]=i}if(a.showYkienCanBoThucHien){let e=a.$refs.ykiencanbo.doExport(),i="";e.valid?(o=!0,i=e.text):o=!1,t["userNote"]=i}a.validateAction=!(!s||!o);a.$router.history.current.query;a.showYkienCanBoThucHien,a.validateAction&&(a.loadingActionProcess=!0,a.$store.dispatch("processDossierRouter",t).then(function(t){a.countProcessed+=1,a.dossierSelected[i]["statusAction"]=!0,a.countProcessed===a.dossierProcess.length*a.actionExits.length&&a.activeNotify?a.dialog_statusAction=!0:a.countProcessed===a.dossierProcess.length*a.actionExits.length&&(a.loadingActionProcess=!1,a.loadingAction=!1,a.btnStateVisible=!1,setTimeout(function(){a.goBack()},500))}).catch(function(t){a.countProcessed+=1,a.activeNotify=!0,a.dossierSelected[i]["statusAction"]=!1,a.countProcessed===a.dossierProcess.length*a.actionExits.length&&a.activeNotify?a.dialog_statusAction=!0:a.countProcessed===a.dossierProcess.length*a.actionExits.length&&(a.loadingActionProcess=!1,a.loadingAction=!1,a.btnStateVisible=!1,setTimeout(function(){a.goBack()},500))}))},doPrint02(t,e,i,a){let s=this;if(null===s.thuTucHanhChinhSelected||void 0===s.thuTucHanhChinhSelected||"undefined"===s.thuTucHanhChinhSelected)alert("Loại thủ tục bắt buộc phải chọn");else{let t={document:e.document,serviceCode:s.thuTucHanhChinhSelected.serviceCode,govAgencyCode:s.thuTucHanhChinhSelected.govAgencyCode,dossiers:JSON.stringify(s.selected)};s.dialogPDFLoading=!0,s.dialogPDF=!0,s.$store.dispatch("doPrint02",t).then(function(t){s.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=t})}},doPrint03(t,e,i,a){let s=this;s.dialogPDFLoading=!0,s.dialogPDF=!0;let o={dossierId:t.dossierId,document:e.document};s.$store.dispatch("doPrint03",o).then(function(t){s.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=t})},doGuiding(t,e,i,a){let s=this;if(null===s.thuTucHanhChinhSelected||void 0===s.thuTucHanhChinhSelected||"undefined"===s.thuTucHanhChinhSelected)alert("Loại thủ tục bắt buộc phải chọn");else{let t={serviceConfigId:s.thuTucHanhChinhSelected.serviceConfigId};s.dialogPDFLoading=!0,s.dialogPDF=!0,s.$store.dispatch("doGuiding",t).then(function(t){s.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=t})}},getNextActions(){let t=this;console.log("run next action");t.$router.history.current.query;let e={};t.dossierSelected.length>0?e["dossierId"]=t.dossierSelected[0].dossierId:e["dossierId"]=t.arrDossierId[0];let i=t.$router.history.current.query;t.$store.dispatch("pullNextactions",e).then(function(e){e=e.filter(function(t){return 1===t.enable});var a=[];if(void 0!==t.actionActive.action&&null!==t.actionActive.action&&"undefined"!==t.actionActive.action&&""!==t.actionActive.action&&(a=t.actionActive.action.split(",")),1===a.length){t.actionExits=a;let s=e.filter(function(e){return e.actionCode.toString()===t.actionActive.action.toString()});t.dialogActionProcess=!0,t.mutilpleAction=!1,t.processPullBtnDetail(s[0],i.btnIndex)}else{t.mutilpleAction=!0,t.actionExits=[];for(let i in a){var s,o=!1;for(let t in e)if(a[i].toString()===e[t].actionCode.toString()){o=!0,s=e[t];break}o&&t.actionExits.push(s)}t.dialogActionProcess=!0,console.log("actionExits",t.actionExits[0]),t.actionExits[0]&&t.processPullBtnDetail(t.actionExits[0],i.btnIndex)}})},postNextActions(t){var e=this;if(t["dossierId"]=e.thongTinChiTietHoSo.dossierId,t.allowAssignUser>0)e.$store.dispatch("reassignDossier",t).then(i=>{console.log(i);let a={dossierId:e.dossierId,actionCode:t.actionCode,actionNote:e.actionNote,actionUser:"",payload:"",security:"",assignUsers:"",payment:"",createDossiers:""};e.$store.dispatch("postAction",a).then(t=>{console.log(t)})});else{let i={dossierId:e.dossierId,actionCode:t.actionCode,actionNote:e.actionNote,actionUser:"",payload:"",security:"",assignUsers:"",payment:"",createDossiers:""};e.$store.dispatch("postAction",i).then(t=>{console.log(t)})}},closeDialogStatusAction(){let t=this;t.dialog_statusAction=!1,t.btnStateVisible=!1,setTimeout(function(){t.goBack()},500)}},filters:{dateTimeView(t){if(t){let e=new Date(t);return`${e.getDate().toString().padStart(2,"0")}/${(e.getMonth()+1).toString().padStart(2,"0")}/${e.getFullYear()} | ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`}return""},getMaxDueDate(t){let e=Math.max.apply(Math,t.map(function(t){return t.actionOverdue}));return e}}},y=f,C=i("2877"),T=Object(C["a"])(y,a,s,!1,null,null,null);T.options.__file="XuLyHoSo.vue";e["default"]=T.exports},"610f":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("label",{class:t.className,style:t.maxWidth,attrs:{role:"checkbox",title:t.toggled?t.title_checked:t.title_unchecked,"aria-checked":t.ariaChecked}},[i("input",{staticClass:"v-switch-input",attrs:{type:"checkbox"},on:{change:function(e){return e.stopPropagation(),t.toggle(e)}}}),i("div",{staticClass:"v-switch-core",style:t.coreStyle},[i("div",{staticClass:"v-switch-button",style:t.buttonStyle})]),t.labels?[t.toggled?i("span",{staticClass:"v-switch-label v-left",style:t.labelStyle,domProps:{innerHTML:t._s(t.labelChecked)}}):i("span",{staticClass:"v-switch-label v-right",style:t.labelStyle,domProps:{innerHTML:t._s(t.labelUnchecked)}})]:t._e()],2)},s=[];const o={colorChecked:"#75C791",colorUnchecked:"#bfcbd9",cssColors:!1,labelChecked:"on",labelUnchecked:"off",width:50,height:22,margin:3},n=(t,e)=>{return"object"===typeof t&&t.hasOwnProperty(e)},r=t=>t+"px";var l={name:"toggle-button",props:{title_checked:"",title_unchecked:"",value:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},sync:{type:Boolean,default:!1},speed:{type:Number,default:300},color:{type:[String,Object],validator(t){return"object"===typeof t?t.checked||t.unchecked:"string"===typeof t}},cssColors:{type:Boolean,default:!1},labels:{type:[Boolean,Object],default:!1,validator(t){return"object"===typeof t?t.checked||t.unchecked:"boolean"===typeof t}},height:{type:Number,default:o.height},width:{type:Number,default:o.width}},computed:{className(){let{toggled:t,disabled:e}=this;return["vue-js-switch",{toggled:t,disabled:e}]},ariaChecked(){return this.toggled.toString()},coreStyle(){return{width:r(this.width),height:r(this.height),backgroundColor:this.cssColors?null:this.colorCurrent,borderRadius:r(Math.round(this.height/2))}},maxWidth(){return{width:r(this.width)+"!important"}},buttonRadius(){return this.height-2*o.margin},distance(){return r(this.width-this.height+o.margin)},buttonStyle(){return{width:r(this.buttonRadius),height:r(this.buttonRadius),transition:`transform ${this.speed}ms`,transform:this.toggled?`translate3d(${this.distance}, 3px, 0px)`:null}},labelStyle(){return{lineHeight:r(this.height)}},colorChecked(){let{color:t}=this;return"object"!==typeof t?t||o.colorChecked:n(t,"checked")?t.checked:o.colorChecked},colorUnchecked(){let{color:t}=this;return n(t,"unchecked")?t.unchecked:o.colorUnchecked},colorCurrent(){return this.toggled?this.colorChecked:this.colorUnchecked},labelChecked(){return n(this.labels,"checked")?this.labels.checked:o.labelChecked},labelUnchecked(){return n(this.labels,"unchecked")?this.labels.unchecked:o.labelUnchecked}},watch:{value(t){this.sync&&(this.toggled=!!t)}},data(){return{toggled:!!this.value}},methods:{toggle(t){this.toggled=!this.toggled,this.$emit("input",this.toggled),this.$emit("change",{value:this.toggled,srcEvent:t})}}},c=l,d=i("2877"),h=Object(d["a"])(c,a,s,!1,null,null,null);h.options.__file="toggleButton.vue";e["a"]=h.exports},6570:function(module,__webpack_exports__,__webpack_require__){"use strict";var toastr__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("854a"),toastr__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(toastr__WEBPACK_IMPORTED_MODULE_0__);toastr__WEBPACK_IMPORTED_MODULE_0___default.a.options={closeButton:!0,timeOut:"5000"},__webpack_exports__["a"]={props:{id:{type:String,default:()=>"nm"},detailDossier:{type:Object,default:()=>{}},createFiles:{type:Array,default:()=>[]}},data:()=>({dossierTemplateItems:[],dossierMarksItems:[],dossierFilesItems:[],thongTinHoSo:{},valid:!0,stateView:!1,dialogAddOtherTemp:!1,loadingAddOther:!1,otherDossierTemplate:"",sheet:!1,partView:"",dossierFileIdView:"",stateEdit:!1,progressUploadPart:"",dialogPDF:!1,dialogPDFLoading:!0,stateAddFileOther:!1,dossierTemplatesItemSelect:{},fileViews:[],sampleCount:0,fileTemplateItems:[]}),computed:{loading(){return this.$store.getters.loading},originality(){var t=this;return t.getOriginality()},initDataResource(){return this.$store.getters.loadingInitData}},created(){var t=this;t.page=1,t.$nextTick(function(){console.log("vm.detailDossier------------",t.detailDossier),t.detailDossier["dossierId"]&&t.$store.dispatch("loadDossierFiles",t.detailDossier.dossierId).then(e=>{t.dossierFilesItems=e,t.createFiles=t.mergeDossierTemplateVsDossierFiles(t.createFiles,e),console.log("vm.createFiles------------",t.createFiles),console.log("vm.dossierFilesItems------------",t.dossierFilesItems)}).catch(t=>{})})},mounted(){var t=this;t.$nextTick(function(){t.createFiles.length>0&&setTimeout(function(){console.log("vm.createFiles------------",t.createFiles),console.log("vm.dossierFilesItems------------",t.dossierFilesItems),t.genAllAlpacaForm(t.dossierFilesItems,t.createFiles)},300)})},methods:{genAllAlpacaForm(t,e){var i=this;if(t.length>0){var a=t.filter(t=>{return t.eForm}),s=e.filter(t=>{return t.eForm});a.length>0?a.forEach(t=>{t.eForm&&i.$store.dispatch("loadAlpcaForm",t)}):e.forEach(t=>{t.eForm&&(t["templateFileNo"]=i.detailDossier.dossierTemplateNo,i.showAlpacaJSFORM(t))}),s.length!==a.length&&s.forEach(t=>{let e=a.findIndex(e=>{return t.partNo===e.dossierPartNo});-1===e&&(t["templateFileNo"]=i.detailDossier.dossierTemplateNo,i.showAlpacaJSFORM(t))})}else e.forEach(t=>{t.eForm&&(t["templateFileNo"]=i.detailDossier.dossierTemplateNo,i.showAlpacaJSFORM(t))})},mergeDossierTemplateVsDossierFiles(t,e){return 0!==e.length?t.forEach(t=>{var i=e.find(e=>{return t.partNo===e.dossierPartNo&&e.eForm});i?t["daKhai"]=!0:!i&&t.eForm&&(t["daKhai"]=!1)}):t.forEach(t=>{t.eForm&&(t["daKhai"]=!1)}),t},showAlpacaJSFORM(item){var vm=this;item["dossierId"]=vm.detailDossier.dossierId,vm.$store.dispatch("loadFormScript",item).then(resScript=>{vm.$store.dispatch("loadFormData",item).then(resData=>{var formScript,formData;window.$("#formAlpaca"+item.partNo+vm.id).empty(),formScript=resScript?eval("("+resScript+")"):{},formData=resData?eval("("+resData+")"):{},formScript.data=formData,window.$("#formAlpaca"+item.partNo+vm.id).alpaca(formScript)})})},loadAlpcaForm(t){var e=this,i=e.dossierFilesItems.find(e=>{return e.dossierPartNo===t.partNo&&e.eForm});i?(i["id"]=e.id,e.$store.dispatch("loadAlpcaForm",i)):e.createFiles.forEach(i=>{i.eForm&&t.partNo===i.partNo&&(i["templateFileNo"]=e.detailDossier.dossierTemplateNo,e.showAlpacaJSFORM(i))})},previewFileEfom(t,e){var i=this;i.dossierFilesItems.forEach(e=>{e.dossierPartNo===t.partNo&&e.eForm&&(e["dossierId"]=i.detailDossier.dossierId,i.dialogPDFLoading=!0,i.dialogPDF=!0,e["id"]=i.id,i.$store.dispatch("putAlpacaForm",e).then(t=>{setTimeout(function(){i.$store.dispatch("viewFile",e).then(t=>{i.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+i.id).src=t})},1e3)}).catch(t=>{toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn được thực hiện thất bại.")}))})},viewFile(t){var e=this;e.dossierFilesItems.forEach(i=>{i["dossierId"]=e.detailDossier.dossierId,i.dossierPartNo===t.partNo&&this.$store.dispatch("viewFile",i)})},viewFile2(t){var e=this;if("doc"===t.fileType||"docx"===t.fileType||"xlsx"===t.fileType||"xls"===t.fileType||"zip"===t.fileType||"rar"===t.fileType||"txt"===t.fileType){var i=e.initDataResource.dossierApi+"/"+e.detailDossier.dossierId+"/files/"+t.referenceUid;window.open(i)}else e.dialogPDFLoading=!0,e.dialogPDF=!0,t["dossierId"]=e.detailDossier.dossierId,e.$store.dispatch("viewFile",t).then(t=>{e.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+e.id).src=t})},viewFileWithPartNo(t){var e=this;if(e.dossierFilesItems){var i=e.dossierFilesItems.filter(e=>{return e.dossierPartNo===t.partNo&&!e.eForm});if(!i)return;e.fileViews=i,e.partView!==t.partNo?(e.stateView=!0,e.partView=t.partNo):(e.stateView=!e.stateView,e.partView=t.partNo)}},checkStyle(t){return"calc(100% - 50px)"},downloadFileTemplate(t,e){var i=this;if(i.fileTemplateItems.length>0){let e=i.fileTemplateItems.find(e=>{return t.fileTemplateNo===e.fileTemplateNo});if(e){let t=i.initDataResource.serviceInfoApi+"/"+e.serviceCode+"/filetemplates/"+e.fileTemplateNo;window.open(t)}else console.log("ko thay file")}}}}},"680c":function(t,e,i){},7121:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"phancong",staticStyle:{"background-color":"white",width:"100%"}},[i("v-expansion-panel",{staticClass:"expansion-pl"},[i("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"1"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"background-triangle-small"},[i("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("Chọn người thực hiện\n      ")]),i("v-card",[1===t.type?i("div",{staticClass:"px-4 py-1"},[i("v-layout",{attrs:{wrap:""}},t._l(t.data_phancong,function(e,a){return i("v-checkbox",{key:e.userId,staticStyle:{display:"inline-block","min-width":"190px","max-width":"190px"},attrs:{slot:"activator",label:e.userName,title:e.userName},on:{change:function(e){t.changeAssigned(e,a)}},slot:"activator",model:{value:e.assigned,callback:function(i){t.$set(e,"assigned",i)},expression:"item.assigned"}})}),1),t.assignValidate?t._e():i("span",{staticClass:"ml-3",staticStyle:{color:"#f44336"}},[t._v("* Yêu cầu chọn người để thực hiện")])],1):i("v-card-text",{staticClass:"px-4 py-1"},[i("v-layout",{staticClass:"my-1",attrs:{wrap:""}},t._l(t.data_phancong,function(e,a){return i("div",{key:e.userId,staticClass:"ml-3"},[i("v-layout",{attrs:{wrap:""}},[i("v-tooltip",{attrs:{top:""}},[i("v-checkbox",{staticStyle:{"min-width":"150px"},attrs:{slot:"activator",label:e.userName},on:{change:function(e){t.checkAsign(e,a)}},slot:"activator",model:{value:e.assigned,callback:function(i){t.$set(e,"assigned",i)},expression:"item.assigned"}}),i("span",{staticClass:"pl-0"},[t._v(" "+t._s(e.userName)+" ")])],1),i("toggle-button",{staticClass:"mx-1 btn-tgl",attrs:{id:"btn-"+a,title_checked:"Thực hiện",title_unchecked:"Phối hợp",labels:{checked:"TH",unchecked:"PH"},color:{checked:"#7DCE94",unchecked:"#82C7EB"},width:50},on:{change:function(e){t.changeTypeAssign(e,a)}},model:{value:t.presenterAddGroup,callback:function(e){t.presenterAddGroup=e},expression:"presenterAddGroup"}})],1)],1)}),0),t.assignValidate?t._e():i("span",{staticClass:"ml-3",staticStyle:{color:"#f44336"}},[t._v("* Yêu cầu chọn người để thực hiện")])],1)],1)],1)],1)],1)},s=[],o=i("610f"),n={components:{"toggle-button":o["a"]},props:{assign_items:{type:Array,default:()=>[]},type:{type:Number,default:()=>1},configNote:{type:Object,default:()=>{}}},model:{prop:"assign_items"},data:()=>({data_phancong:[],assignedtype_items:{2:[{text:"Không có phân công",value:0},{text:"Thực hiện chính",value:1},{text:"Thực hiện phối hợp",value:2}],3:[{text:"Không có phân công",value:0},{text:"Thực hiện chính",value:1},{text:"Thực hiện phối hợp",value:2},{text:"Theo dõi",value:3}]},title_asign:{1:"PHÂN CÔNG NGƯỜI THỰC HIỆN",2:"PHÂN CÔNG THỰC HIỆN, PHỐI HỢP",3:"PHÂN CÔNG THỰC HIỆN, PHỐI HỢP VÀ THEO DÕI"},presenterAddGroup:!0,assignValidate:!0}),created(){setTimeout(function(){window.$(".btn-tgl").addClass("btn-hidden")},200)},mounted(){this.data_phancong=this.assign_items},methods:{changeAssigned(t,e){var i=this;1===i.type&&(i.assign_items[e].assigned=!0===t?1:0)},checkAsign(t,e){var i=this;t?(i.assign_items[e].assigned=1,window.$(`#btn-${e}`).removeClass("btn-hidden")):(i.assign_items[e].assigned=0,window.$(`#btn-${e}`).addClass("btn-hidden"))},changeTypeAssign(t,e){var i=this;t.value?(i.assign_items[e].assigned=1,window.$(`#btn-${e}`).removeClass("btn-hidden")):(i.assign_items[e].assigned=2,window.$(`#btn-${e}`).addClass("btn-hidden"))},doExport(){var t=this;let e=t.assign_items.filter(function(t){return Number(t.assigned)>0});return 0===e.length?(t.assignValidate=!1,t.assignValidate):(t.assignValidate=!0,t.assignValidate)}}},r=n,l=i("2877"),c=Object(l["a"])(r,a,s,!1,null,null,null);c.options.__file="PhanCongNguoiThucHien.vue";e["a"]=c.exports},"76eb":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",[i("v-card-text",{staticClass:"pb-0"},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:"",sm2:""}},[i("v-subheader",{staticClass:"pl-0 text-header"},[t._v("Thủ tục: ")])],1),i("v-flex",{attrs:{xs12:"",sm10:""}},[i("v-subheader",{staticClass:"pl-0 header-text-field text-header"},[t._v("  "+t._s(t.thongTinChiTietHoSo.serviceName)+" ")])],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[i("v-subheader",{staticClass:"pl-0 text-header"},[t._v("Mã số hồ sơ: ")])],1),i("v-flex",{attrs:{xs12:"",sm4:""}},[i("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[t._v("  "+t._s(t.thongTinChiTietHoSo.dossierNo)+" ")])],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[i("v-subheader",{staticClass:"pl-0 text-header"},[t._v("Thời hạn giải quyết: ")])],1),i("v-flex",{attrs:{xs12:"",sm4:""}},[i("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[t._v("  "+t._s(t.durationText(t.thongTinChiTietHoSo.durationUnit,t.thongTinChiTietHoSo.durationCount))+" làm việc  ")])],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[i("v-subheader",{staticClass:"pl-0 text-header"},[t._v("Ngày tiếp nhận: ")])],1),i("v-flex",{attrs:{xs12:"",sm4:""}},[i("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[t._v("  "+t._s(t.thongTinChiTietHoSo.receiveDate)+" ")])],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[i("v-subheader",{staticClass:"pl-0 text-header"},[t._v("Ngày hẹn trả: ")])],1),i("v-flex",{attrs:{xs12:"",sm4:""}},[i("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[t._v("  "+t._s(t.thongTinChiTietHoSo.dueDate)+" ")])],1)],1)],1)],1)},s=[],o={data:()=>({thongTinChiTietHoSo:{}}),computed:{loading(){return this.$store.getters.loading}},created(){},methods:{initData(t){this.thongTinChiTietHoSo=t},durationText(t,e){var i;if(1===t&&e>8){let t,a=Math.floor(e/8)+" ngày";t=e%8!==0?8*(e/8-Math.floor(e/8))+" giờ":"",i=`${a} ${t}`}else 0===t?i=e+" ngày":1===t&&e<=8&&(i=e+" giờ");return i}},filters:{dateTimeView(t){if(t){let e=new Date(t);return`${e.getDate().toString().padStart(2,"0")}/${(e.getMonth()+1).toString().padStart(2,"0")}/${e.getFullYear()}  ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`}return""}}},n=o,r=i("2877"),l=Object(r["a"])(n,a,s,!1,null,null,null);l.options.__file="ThongTinChungHoSo.vue";e["a"]=l.exports},8685:function(t,e,i){},"87c1":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-expansion-panel",{staticClass:"expansion-pl ext__form"},[i("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"1"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"background-triangle-small"},[i("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),i("span",[t._v("Ý kiến cán bộ")]),2===t.user_note?i("span",{staticClass:"red--text text--darken-3"},[t._v("*")]):t._e()]),i("v-card",[i("v-card-text",{staticClass:"py-2 px-4"},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:""}},[i("v-form",{ref:"userNoteForm",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-text-field",{attrs:{"multi-line":"",rows:4,rules:2===t.user_note?[function(){return""!==t.noteYkien||"Trường dữ liệu bắt buộc"}]:[],box:"",label:"nhập ý kiến"},model:{value:t.noteYkien,callback:function(e){t.noteYkien=e},expression:"noteYkien"}})],1)],1)],1)],1)],1)],1)],1)},s=[],o={props:{user_note:{type:Number,required:!0},configNote:{type:Object,required:!1}},data:()=>({noteYkien:"",valid:!1}),methods:{initData(t){var e=this;e.$store.dispatch("getDetailDossier",t).then(t=>{e.thongTinChiTietHoSo=t})},doExport(){let t=this,e={text:t.noteYkien,valid:t.$refs.userNoteForm.validate()};return e}}},n=o,r=i("2877"),l=Object(r["a"])(n,a,s,!1,null,null,null);l.options.__file="YkienCanBoThucHien.vue";e["a"]=l.exports},"885b":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"phancong",staticStyle:{"background-color":"white",width:"100%"}},[1===t.type?i("div",[i("v-layout",{attrs:{wrap:""}},t._l(t.data_phancong,function(e,a){return i("v-checkbox",{key:e.userId,staticStyle:{display:"inline-block","min-width":"190px","max-width":"190px"},attrs:{slot:"activator",label:e.userName,title:e.userName},on:{change:function(e){t.changeAssigned(e,a)}},slot:"activator",model:{value:e.assigned,callback:function(i){t.$set(e,"assigned",i)},expression:"item.assigned"}})}),1),t.assignValidate?t._e():i("span",{staticClass:"ml-3",staticStyle:{color:"#f44336"}},[t._v("* Yêu cầu chọn người để thực hiện")])],1):i("v-card-text",[i("v-layout",{staticClass:"my-1",attrs:{wrap:""}},t._l(t.data_phancong,function(e,a){return i("div",{key:e.userId,staticClass:"ml-3"},[i("v-layout",{attrs:{wrap:""}},[i("v-tooltip",{attrs:{top:""}},[i("v-checkbox",{staticStyle:{"min-width":"150px"},attrs:{slot:"activator",label:e.userName},on:{change:function(e){t.checkAsign(e,a)}},slot:"activator",model:{value:e.assigned,callback:function(i){t.$set(e,"assigned",i)},expression:"item.assigned"}}),i("span",{staticClass:"pl-0"},[t._v(" "+t._s(e.userName)+" ")])],1),i("toggle-button",{staticClass:"mx-1 btn-tgl",attrs:{id:"btn-"+a,title_checked:"Thực hiện",title_unchecked:"Phối hợp",labels:{checked:"TH",unchecked:"PH"},color:{checked:"#7DCE94",unchecked:"#82C7EB"},width:50},on:{change:function(e){t.changeTypeAssign(e,a)}},model:{value:t.presenterAddGroup,callback:function(e){t.presenterAddGroup=e},expression:"presenterAddGroup"}})],1)],1)}),0),t.assignValidate?t._e():i("span",{staticClass:"ml-3",staticStyle:{color:"#f44336"}},[t._v("* Yêu cầu chọn người thực hiện")])],1)],1)},s=[],o=i("610f"),n={components:{"toggle-button":o["a"]},props:{reAsignUsers:{type:Array,default:()=>[]},type:{type:Number,default:()=>1},configNote:{type:Object,default:()=>{}}},model:{prop:"reAsignUsers"},data:()=>({data_phancong:[],assignedtype_items:{2:[{text:"Không có phân công",value:0},{text:"Thực hiện chính",value:1},{text:"Thực hiện phối hợp",value:2}],3:[{text:"Không có phân công",value:0},{text:"Thực hiện chính",value:1},{text:"Thực hiện phối hợp",value:2},{text:"Theo dõi",value:3}]},title_asign:{1:"PHÂN CÔNG NGƯỜI THỰC HIỆN",2:"PHÂN CÔNG THỰC HIỆN, PHỐI HỢP",3:"PHÂN CÔNG THỰC HIỆN, PHỐI HỢP VÀ THEO DÕI"},presenterAddGroup:!0,assignValidate:!0}),created(){setTimeout(function(){window.$(".btn-tgl").addClass("btn-hidden")},200)},mounted(){this.data_phancong=this.reAsignUsers},watch:{reAsignUsers(t){this.data_phancong=t}},methods:{changeAssigned(t,e){var i=this;1===i.type&&(i.reAsignUsers[e].assigned=!0===t?1:0)},checkAsign(t,e){var i=this;t?(i.reAsignUsers[e].assigned=1,window.$(`#btn-${e}`).removeClass("btn-hidden")):(i.reAsignUsers[e].assigned=0,window.$(`#btn-${e}`).addClass("btn-hidden"))},changeTypeAssign(t,e){var i=this;t.value?(i.reAsignUsers[e].assigned=1,window.$(`#btn-${e}`).removeClass("btn-hidden")):(i.reAsignUsers[e].assigned=2,window.$(`#btn-${e}`).addClass("btn-hidden"))},doExport(){var t=this;let e=t.reAsignUsers.filter(function(t){return Number(t.assigned)>0});return 0===e.length?(t.assignValidate=!1,t.assignValidate):(t.assignValidate=!0,t.assignValidate)}}},r=n,l=i("2877"),c=Object(l["a"])(r,a,s,!1,null,null,null);c.options.__file="PhanCongLai.vue";e["a"]=c.exports},"8bf2":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-expansion-panel",{staticClass:"expansion-pl"},[i("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"1"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"background-triangle-small"},[i("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("Thông tin gửi bưu chính\n    ")]),i("v-card",[i("v-layout",{staticClass:"my-2",attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:"",sm2:""}},[i("v-subheader",{staticClass:"pl-0"},[t._v("Dịch vụ đăng ký: ")])],1),i("v-flex",{attrs:{xs12:"",sm4:""}},[i("p",{staticClass:"mb-0",staticStyle:{"padding-top":"9px"}},[t._v("VNPOST")])]),i("v-flex",{attrs:{xs12:"",sm2:""}},[i("v-subheader",{staticClass:"pl-0"},[t._v("Bưu cục: ")])],1),i("v-flex",{attrs:{xs12:"",sm4:""}},[i("p",{staticClass:"mb-0",staticStyle:{"padding-top":"9px"}},[t._v(t._s(t.postName))])]),i("v-flex",{attrs:{xs12:"",sm2:""}},[i("v-subheader",{staticClass:"pl-0"},[t._v("Tên người nhận: ")])],1),i("v-flex",{attrs:{xs12:"",sm4:""}},[i("p",{staticClass:"mb-0",staticStyle:{"padding-top":"9px"}},[t._v(t._s(t.postalService.applicantName))])]),i("v-flex",{attrs:{xs12:"",sm2:""}},[i("v-subheader",{staticClass:"pl-0"},[t._v("Số điện thoại: ")])],1),i("v-flex",{attrs:{xs12:"",sm4:""}},[i("p",{staticClass:"mb-0",staticStyle:{"padding-top":"9px"}},[t._v(t._s(t.postalService.postalTelNo))])]),i("v-flex",{attrs:{xs12:"",sm2:""}},[i("v-subheader",{staticClass:"pl-0"},[t._v("Địa chỉ: ")])],1),i("v-flex",{attrs:{xs12:"",sm10:""}},[i("p",{staticClass:"mb-0",staticStyle:{"padding-top":"9px"}},[t._v(t._s(t.postalService.postalAddress))])])],1)],1)],1)],1)},s=[],o={props:{postalService:{type:Object,default:()=>{}}},data:()=>({postName:""}),computed:{},created(){var t=this;t.$nextTick(function(){let t=this;t.$store.dispatch("getVNPOSTcode").then(e=>{let i=e.filter(function(e){return Number(e.itemCode)===Number(t.postalService.postalCityCode)});i.length>0&&(t.postName=i[0].itemName)})})},methods:{}},n=o,r=i("2877"),l=Object(r["a"])(n,a,s,!1,null,null,null);l.options.__file="ThongTinGuiBuuChinh.vue";e["a"]=l.exports},9190:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"form-chitiet",staticStyle:{"background-color":"#ffff"}},[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:"",sm12:""}},[i("div",{staticClass:"row-header"},[i("div",{staticClass:"background-triangle-big"},[i("span",[t._v("TÊN THỦ TỤC")])]),i("div",{staticClass:"layout row wrap header_tools row-blue"},[i("div",{staticClass:"flex xs8 sm10 pl-3 text-ellipsis text-bold",attrs:{title:t.thongTinChungHoSo.serviceName}},[t._v("\n              "+t._s(t.thongTinChungHoSo.serviceName)+"\n            ")]),i("div",{staticClass:"flex xs4 sm2 text-right",staticStyle:{"margin-left":"auto"}})])])]),i("v-flex",{staticClass:"text-xs-center mt-4",attrs:{xs12:"",sm12:""}},[i("h3",{staticClass:"text-xs-center"},[t._v("NỘP HỒ SƠ THÀNH CÔNG")])]),i("v-flex",{attrs:{xs12:""},domProps:{innerHTML:t._s(t.thongTinChungHoSo.submissionNote)}}),i("v-flex",{attrs:{xs12:"",sm12:""}},[i("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.goBack()}}},[t._v("Quay lại danh sách   "),i("v-icon",{attrs:{size:"16"}},[t._v("undo")])],1)],1)],1)],1)},s=[],o=i("a18c"),n={props:{id:{type:Number,default:()=>0},index:{type:Number,default:()=>0}},data:()=>({thongTinChungHoSo:{},dossierTemplateItems:[],dossierFilesItems:[],dossierTemplateSendItems:[]}),created(){var t=this;t.$nextTick(function(){t.$store.dispatch("getDetailDossier",t.id).then(e=>{t.thongTinChungHoSo=e;let i=[];i.push(t.$store.dispatch("loadDossierTemplates",e)),i.push(t.$store.dispatch("loadDossierFiles",e.dossierId)),Promise.all(i).then(e=>{t.dossierTemplateItems=e[0],t.dossierFilesItems=e[1],t.dossierTemplateSendItems=t.filterDossierTemplateSend()}).catch(t=>{})})})},computed:{loading(){return this.$store.getters.loading}},methods:{initData(t){var e=this;e.thongTinChungHoSo=t},goBack(){o["a"].push({path:"/danh-sach-ho-so/0",query:{recount:Math.floor(100*Math.random())+1,renew:Math.floor(100*Math.random())+1,q:"/o/rest/v2/dossiers/todo?owner=true&order=true&step=110,130,510"}})},filterDossierTemplateSend(){var t=this;let e=[];return t.dossierTemplateItems.length>0&&t.dossierFilesItems.length>0?(t.dossierTemplateItems.forEach(i=>{let a=t.dossierFilesItems.findIndex(t=>{return i.partNo===t.dossierPartNo});-1!==a&&e.push(i)}),e):[]},back(){},dateTimeView(t){if(t){let e=new Date(t);return`${e.getDate().toString().padStart(2,"0")}/${(e.getMonth()+1).toString().padStart(2,"0")}/${e.getFullYear()} ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`}},formatDateInput(t){return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")} ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`}},filters:{dateTimeView(t){if(t){let e=new Date(t);return`${e.getDate().toString().padStart(2,"0")}/${(e.getMonth()+1).toString().padStart(2,"0")}/${e.getFullYear()} ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`}return""}}},r=n,l=i("2877"),c=Object(l["a"])(r,a,s,!1,null,null,null);c.options.__file="NopThanhCong.vue";e["default"]=c.exports},"93f5":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-card",[t._l(t.dossierTemplateItems,function(e,a){return t.partTypes.includes(e.partType)&&t.checkVisibleTemp(e,a)?i("div",{key:e.partNo,staticClass:"form_alpaca",staticStyle:{position:"relative"}},[i("v-expansion-panel",{staticClass:"expaned__list__data"},[i("v-expansion-panel-content",{attrs:{"hide-actions":"",value:t.currentFormView==="formAlpaca"+e.partNo+t.id}},[i("div",{staticStyle:{"background-color":"#fff"},attrs:{slot:"header"},on:{click:function(e){t.stateView=!1}},slot:"header"},[i("div",{staticStyle:{"align-items":"center",background:"#fff","padding-left":"25px"},style:{width:t.checkStyle(e)}},[i("div",{staticClass:"mr-2",staticStyle:{"min-width":"18px",display:"flex"},on:{click:function(i){t.onlyView&&e.hasForm?t.viewFile2(e):t.loadAlpcaForm(e)}}},[i("div",{staticClass:"header__tphs"},[i("span",{staticClass:"text-bold"},[t._v(t._s(a+1)+".")]),t._v("  ")]),i("div",{staticClass:"header__tphs"},[i("v-tooltip",{staticStyle:{"max-width":"100% !important"},attrs:{top:""}},[i("span",{attrs:{slot:"activator"},slot:"activator"},[t._v("\n                      "+t._s(e.partName)+"  \n                      "),e.required?i("span",{staticStyle:{color:"red"}},[t._v(" (*) ")]):t._e(),t._v("\n                        \n                    ")]),e.partTip["tip"]?i("span",[t._v(t._s(e.partTip["tip"]))]):t._e()]),e.hasForm&&e.daKhai&&(1===t.originality&&2!==e.partType||1!==t.originality)?i("v-tooltip",{attrs:{top:""}},[i("i",{staticClass:"fa fa-file-text-o",staticStyle:{color:"#0d71bb","font-size":"13px"},attrs:{slot:"activator","aria-hidden":"true"},slot:"activator"}),i("span",[t._v("Biểu mẫu trực tuyến (Đã khai)")])]):t._e(),e.hasForm&&!e.daKhai&&(1===t.originality&&2!==e.partType||1!==t.originality)?i("v-tooltip",{attrs:{top:""}},[i("i",{staticClass:"fa fa-file-o",staticStyle:{color:"#0d71bb","font-size":"13px"},attrs:{slot:"activator"},slot:"activator"}),i("span",[t._v("Biểu mẫu trực tuyến (Chưa khai)")])]):t._e(),t._v("\n                    \n                  "),!e.hasForm&&e.hasFileTemp?i("v-tooltip",{attrs:{top:""}},[i("v-icon",{staticStyle:{color:"#0d71bb"},attrs:{slot:"activator",size:"16",color:"primary"},on:{click:function(i){i.stopPropagation(),t.downloadFileTemplate(e,a)}},slot:"activator"},[t._v("save_alt")]),i("span",[t._v("Biểu mẫu điền thủ công")])],1):t._e()],1)]),i("div",{staticStyle:{display:"flex"}},[1===t.checkInput&&2===e.fileCheck&&e.stateEditFileCheck?i("v-text-field",{attrs:{placeholder:"Nhập lý do",rules:[function(t){return!!t||"Bạn phải nhập lý do trước khi gửi"}],required:""},on:{keyup:function(i){if(!("button"in i)&&t._k(i.keyCode,"enter",13,i.key,"Enter"))return null;t.changeFileComment(e,a)}},model:{value:e.fileComment,callback:function(i){t.$set(e,"fileComment",i)},expression:"item.fileComment"}}):t._e(),1===t.checkInput&&2===e.fileCheck&&e.stateEditFileCheck?i("v-tooltip",{attrs:{top:""}},[i("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(i){i.stopPropagation(),t.changeFileComment(e,a)}},slot:"activator"},[i("v-icon",{staticClass:"mx-0",attrs:{size:"16",color:"primary"}},[t._v("send")])],1),i("span",[t._v("Gửi")])],1):t._e()],1),e.fileComment&&!e.stateEditFileCheck?i("i",{staticStyle:{"font-size":"12px",color:"#0d71bb","margin-left":"10px"}},[t._v(t._s(e.fileComment))]):t._e(),e.fileComment&&!e.stateEditFileCheck&&1===t.checkInput?i("v-tooltip",{attrs:{top:""}},[i("v-icon",{staticStyle:{"font-size":"13px",color:"#0d71bb","margin-left":"10px",cursor:"pointer"},attrs:{slot:"activator"},on:{click:function(t){t.stopPropagation(),e.stateEditFileCheck=!e.stateEditFileCheck}},slot:"activator"},[t._v("edit")]),i("span",[t._v("Chỉnh sửa ý kiến")])],1):t._e(),t._l(t.dossierFilesItems,function(a,s){return e.partNo!==a.dossierPartNo||a.eForm?t._e():i("div",{key:s},[i("div",{style:{width:"calc(100% - 370px)",display:"flex","align-items":"center",background:"#fff","padding-left":"15px","font-size":"12px","margin-bottom":t.onlyView?"5px":"0px"}},[i("span",{staticClass:"ml-3",staticStyle:{cursor:"pointer"},on:{click:function(e){e.stopPropagation(),t.viewFile2(a)}}},[0!==a.fileSize?i("v-icon",[t._v("attach_file")]):t._e(),t._v("\n                    "+t._s(a.displayName)+" - \n                    "),i("i",[t._v(t._s(a.modifiedDate))])],1),t.onlyView||1===t.checkInput?t._e():i("v-btn",{staticClass:"mx-0 my-0",attrs:{icon:"",ripple:""},on:{click:function(e){e.stopPropagation(),t.deleteSingleFile(a,s)}}},[i("v-icon",{staticStyle:{color:"red"}},[t._v("delete_outline")])],1)],1)])}),i("div",{staticClass:"mr-3 my-1 py-2",staticStyle:{display:"none",border:"1px solid #f3ae75"},attrs:{id:"fileApplicant-"+e.partNo}},t._l(t.dossierFilesApplicant,function(a,s){return a.dossierTemplateNo===t.thongTinHoSo["dossierTemplateNo"]&&e.partNo===a.dossierPartNo?i("div",{key:s},[a.eForm?i("div",{style:{width:"calc(100% - 0px)",display:"flex","align-items":"center",background:"#fff","padding-left":"15px","font-size":"12px","margin-bottom":t.onlyView?"5px":"0px"}},[i("v-tooltip",{staticStyle:{"max-width":"100%"},attrs:{top:""}},[i("span",{staticClass:"ml-3",staticStyle:{cursor:"pointer"},attrs:{slot:"activator"},on:{click:function(e){e.stopPropagation(),t.viewGiayToDaNop(a)}},slot:"activator"},[i("i",{staticClass:"ml-1 fa fa-file-o",staticStyle:{color:"#0d71bb","font-size":"13px"}}),t._v("  \n                        "+t._s(a.referenceUid)+"."+t._s(a.fileType)+" - \n                        "),i("i",[t._v(t._s(a.modifiedDate))])]),i("span",[t._v("Bản khai trực tuyến")])])],1):i("div",{style:{width:"calc(100% - 0px)",display:"flex","align-items":"center",background:"#fff","padding-left":"15px","font-size":"12px","margin-bottom":t.onlyView?"5px":"0px"}},[i("v-tooltip",{staticStyle:{"max-width":"100%"},attrs:{top:""}},[i("span",{staticClass:"ml-3",staticStyle:{cursor:"pointer"},attrs:{slot:"activator"},on:{click:function(e){e.stopPropagation(),t.viewGiayToDaNop(a)}},slot:"activator"},[0!==a.fileSize?i("v-icon",{staticStyle:{color:"#0d71bb"}},[t._v("attach_file")]):t._e(),t._v("\n                        "+t._s(a.displayName)+" - \n                        "),i("i",[t._v(t._s(a.modifiedDate))])],1),i("span",[t._v("Đính kèm")])])],1)]):t._e()}),0)],2)]),e.hasForm&&!t.onlyView?i("v-card",[i("v-card-text",{staticStyle:{"background-color":"rgba(244, 247, 213, 0.19)"}},[i("v-layout",{attrs:{wrap:""}},[t.stateView?t._e():i("v-flex",{staticClass:"text-xs-right",attrs:{xs12:""}},[i("div",{style:t.pstFixed>t.pstEl&&t.pstFixed<t.endEl+t.pstEl?"position:fixed;top:5px;z-index:101":"",attrs:{id:"wrapForm"+e.partNo+t.id}},[e.hasForm&&!t.onlyView&&1!==t.checkInput?i("v-btn",{attrs:{color:"primary"},on:{click:function(i){t.saveAlpacaForm(e,a)}}},[t._v("Lưu lại")]):t._e(),e.daKhai&&e.hasForm&&!t.onlyView&&1!==t.checkInput?i("v-btn",{attrs:{color:"primary"},on:{click:function(i){t.deleteSingleFileEform(e,a)}}},[t._v("Xóa")]):t._e(),e.daKhai&&e.hasForm?i("v-btn",{attrs:{color:"primary"},on:{click:function(i){t.previewFileEfom(e,a)}}},[t._v("In")]):t._e()],1),!t.onlyView||e.daKhai?i("div",{class:{no_acction__event:t.onlyView},attrs:{id:"formAlpaca"+e.partNo+t.id}}):t._e()])],1)],1)],1):t._e()],1)],1),i("div",{staticClass:"absolute__btn group__thanh_phan mr-1"},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-layout",{attrs:{row:"",wrap:""}},[1===t.originality||1!==e.partType||t.thongTinHoSo.online||1===t.checkInput?t._e():i("v-flex",{staticClass:"layout wrap",staticStyle:{width:"110px"}},[i("v-select",{attrs:{items:t.fileMarkItems,disabled:t.onlyView},on:{change:function(e){t.changeFileMark(e,a)}},model:{value:t.dossierTemplateItems[a].fileMark,callback:function(e){t.$set(t.dossierTemplateItems[a],"fileMark",e)},expression:"dossierTemplateItems[index].fileMark"}})],1),1===t.checkInput?i("v-flex",{staticClass:"layout wrap",staticStyle:{width:"120px"}},[i("v-select",{attrs:{items:t.fileCheckItems,"item-text":"text","item-value":"value"},on:{change:function(e){t.changeFileCheck(e,a)}},model:{value:t.dossierTemplateItems[a].fileCheck,callback:function(e){t.$set(t.dossierTemplateItems[a],"fileCheck",e)},expression:"dossierTemplateItems[index].fileCheck"}})],1):e.fileCheck>0?i("v-flex",{staticClass:"layout wrap",style:{width:"20px","align-items":"center","margin-left":"10px","margin-top":t.thongTinHoSo.online?"10px":"0px"}},[1===e.fileCheck?i("v-tooltip",{attrs:{top:""}},[i("v-icon",{staticClass:"mx-0",attrs:{slot:"activator",size:"16",color:"primary"},slot:"activator"},[t._v("done")]),i("span",[t._v("Đạt")])],1):2===e.fileCheck?i("v-tooltip",{attrs:{top:""}},[i("v-icon",{staticClass:"mx-0",attrs:{slot:"activator",size:"16",color:"primary"},slot:"activator"},[t._v("close")]),i("span",[t._v("Không đạt")])],1):t._e()],1):t._e(),1!==t.checkInput?i("v-flex",{class:{"text-xs-right":t.onlyView},style:{width:t.onlyView?"auto":"90px"}},[i("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"file"+e.partNo},on:{change:function(i){t.onUploadSingleFile(i,e,a)}}}),3!==e.partType||3!==t.originality||t.onlyView?t._e():i("v-tooltip",{attrs:{top:""}},[i("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(i){t.addFileOther(e)}},slot:"activator"},[i("v-icon",{staticClass:"mx-0",attrs:{size:"16",color:"primary"}},[t._v("add")])],1),i("span",[t._v("Thêm giấy tờ khác")])],1),t.progressUploadPart===e.partNo?i("v-progress-circular",{attrs:{width:2,size:25,color:"green",indeterminate:""}}):t.progressUploadPart===e.partNo||t.onlyView?t._e():i("v-tooltip",{attrs:{left:""}},[i("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(i){t.pickFile(e)}},slot:"activator"},[i("v-badge",[i("v-icon",{attrs:{size:"16",color:"primary"}},[t._v("cloud_upload")])],1)],1),e.partTip["extensions"]||e.partTip["maxSize"]?i("span",[t._v("Chấp nhận tải lên các định dạng: "+t._s(e.partTip["extensions"])+". Tối đa "+t._s(e.partTip["maxSize"])+" MB ")]):i("span",[t._v("Tải file lên")])],1),t.partNoApplicantHasFile(e.partNo)&&!t.onlyView?i("v-tooltip",{attrs:{top:""}},[i("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(i){t.showFilesApplicant(e.partNo)}},slot:"activator"},[i("v-badge",[i("v-icon",{attrs:{size:"16",color:"orange darken-3"}},[t._v("warning")])],1)],1),i("span",[t._v("Giấy tờ đã nộp")])],1):t._e()],1):t._e()],1)],1)],1):t._e()}),t.partTypes.includes(2)?t._e():i("div",[i("v-layout",{staticClass:"mx-4",attrs:{wrap:""}},[!t.onlyView||t.onlyView&&t.applicantNoteDossier?i("v-flex",{staticClass:"my-0 py-2 text-bold",staticStyle:{width:"60px"}},[t._v("Ghi chú:")]):t._e(),i("v-flex",{staticStyle:{width:"calc(100% - 80px)"}},[t.onlyView?t._e():i("div",{staticClass:"pl-2"},[i("v-text-field",{staticClass:"py-0",attrs:{"multi-line":"",rows:"3"},on:{input:t.changeApplicantNote},model:{value:t.applicantNoteDossier,callback:function(e){t.applicantNoteDossier=e},expression:"applicantNoteDossier"}})],1),t.onlyView&&t.applicantNoteDossier?i("p",{staticClass:"my-0 py-2"},[t._v("\n            "+t._s(t.applicantNoteDossier)+" \n          ")]):t._e()])],1)],1),i("v-dialog",{attrs:{"max-width":"400",transition:"fade-transition",persistent:""},model:{value:t.dialogAddOtherTemp,callback:function(e){t.dialogAddOtherTemp=e},expression:"dialogAddOtherTemp"}},[i("v-card",[i("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-card-title",{staticClass:"headline"},[t._v("Tên giấy tờ")]),i("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(e){return t.cancelDialog(e)}}},[i("v-icon",[t._v("clear")])],1),t.loadingAddOther?i("v-progress-linear",{staticClass:"my-0",attrs:{indeterminate:!0}}):t._e(),i("v-card-text",{staticClass:"pb-0 pt-4"},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{staticClass:"px-2 pb-3 fix__label",attrs:{xs12:""}},[i("v-text-field",{attrs:{label:"Tên giấy tờ:",rules:[function(t){return!!t||"Bạn phải điền tên giấy tờ."}],required:""},model:{value:t.otherDossierTemplate,callback:function(e){t.otherDossierTemplate=e},expression:"otherDossierTemplate"}})],1)],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"red darken-3",flat:"flat"},nativeOn:{click:function(e){return t.cancelDialog(e)}}},[t._v("\n              Quay lại\n            ")]),i("v-btn",{attrs:{color:"primary",flat:"flat",loading:t.loadingAddOther},nativeOn:{click:function(e){return t.addOtherTemplate(e)}}},[t._v("\n              Đồng ý\n              "),i("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])])],1)],1)],1)],1)],2),i("v-dialog",{staticStyle:{overflow:"hidden"},attrs:{"max-width":"900",transition:"fade-transition"},model:{value:t.dialogPDF,callback:function(e){t.dialogPDF=e},expression:"dialogPDF"}},[i("v-card",[i("v-card-title",{staticClass:"headline"},[t.pdfEform?i("span",[t._v("Bản khai trực tuyến")]):i("span",[t._v("File đính kèm")])]),i("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogPDF=!1}}},[i("v-icon",[t._v("clear")])],1),t.dialogPDFLoading?i("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[i("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):t._e(),i("iframe",{directives:[{name:"show",rawName:"v-show",value:!t.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPDFPreview"+t.id,src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1)],1)},s=[],o=i("334d"),n=o["a"],r=i("2877"),l=Object(r["a"])(n,a,s,!1,null,null,null);l.options.__file="TiepNhanHoSo_ThanhPhanHoSo.vue";e["a"]=l.exports},"9a33":function(module,__webpack_exports__,__webpack_require__){"use strict";var _router__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("a18c"),jquery__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("1157"),jquery__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__),toastr__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("854a"),toastr__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(toastr__WEBPACK_IMPORTED_MODULE_2__),_Comment_vue__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("4ea3"),_form_xu_ly_ThongTinCoBanHoSo_vue__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("1136"),_form_xu_ly_PhanCongNguoiThucHien_vue__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("7121"),_form_xu_ly_TraKetQua_vue__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("c23d"),_form_xu_ly_FeeDetail_vue__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("f374"),_ChiTietThanhToan_vue__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("cb0a"),_form_xu_ly_ThucHienThanhToanDienTu_vue__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("fc7b"),_form_xu_ly_KyPheDuyetTaiLieu_vue__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("4a3a"),_form_xu_ly_YkienCanBoThucHien_vue__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("87c1"),_form_xu_ly_TaoTaiLieuKetQua_vue__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("24fb"),_form_xu_ly_FormBoSungThongTinNgan_vue__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("d80f"),_TiepNhan_TiepNhanHoSo_ThanhPhanHoSo_vue__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("93f5"),_form_xu_ly_EditDate_vue__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("0838"),_form_xu_ly_ExtendDateEdit_vue__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("26ed"),_HoSoLienThong_vue__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("3677"),_form_xu_ly_PhanCongLai_vue__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("885b"),_form_xu_ly_ThongTinGuiBuuChinh_vue__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("8bf2"),mermaid__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("fbdb"),mermaid__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(mermaid__WEBPACK_IMPORTED_MODULE_20__);mermaid__WEBPACK_IMPORTED_MODULE_20___default.a.initialize({theme:"forest",startOnLoad:!1}),__webpack_exports__["a"]={props:["index","id"],components:{comment:_Comment_vue__WEBPACK_IMPORTED_MODULE_3__["a"],"thong-tin-co-ban-ho-so":_form_xu_ly_ThongTinCoBanHoSo_vue__WEBPACK_IMPORTED_MODULE_4__["a"],"phan-cong":_form_xu_ly_PhanCongNguoiThucHien_vue__WEBPACK_IMPORTED_MODULE_5__["a"],"tra-ket-qua":_form_xu_ly_TraKetQua_vue__WEBPACK_IMPORTED_MODULE_6__["a"],"thu-phi":_form_xu_ly_FeeDetail_vue__WEBPACK_IMPORTED_MODULE_7__["a"],"thanh-toan-dien-tu":_form_xu_ly_ThucHienThanhToanDienTu_vue__WEBPACK_IMPORTED_MODULE_9__["a"],"ky-duyet":_form_xu_ly_KyPheDuyetTaiLieu_vue__WEBPACK_IMPORTED_MODULE_10__["a"],"y-kien-can-bo":_form_xu_ly_YkienCanBoThucHien_vue__WEBPACK_IMPORTED_MODULE_11__["a"],"tai-lieu-ket-qua":_form_xu_ly_TaoTaiLieuKetQua_vue__WEBPACK_IMPORTED_MODULE_12__["a"],"form-bo-sung-thong-tin":_form_xu_ly_FormBoSungThongTinNgan_vue__WEBPACK_IMPORTED_MODULE_13__["a"],"thanh-phan-ho-so":_TiepNhan_TiepNhanHoSo_ThanhPhanHoSo_vue__WEBPACK_IMPORTED_MODULE_14__["a"],"ngay-hen-tra":_form_xu_ly_EditDate_vue__WEBPACK_IMPORTED_MODULE_15__["a"],"thong-tin-buu-chinh":_form_xu_ly_ThongTinGuiBuuChinh_vue__WEBPACK_IMPORTED_MODULE_19__["a"],"ngay-gia-han":_form_xu_ly_ExtendDateEdit_vue__WEBPACK_IMPORTED_MODULE_16__["a"],"chi-tiet-thanh-toan":_ChiTietThanhToan_vue__WEBPACK_IMPORTED_MODULE_8__["a"],"ho-so-lien-thong":_HoSoLienThong_vue__WEBPACK_IMPORTED_MODULE_17__["a"],"phan-cong-lai":_form_xu_ly_PhanCongLai_vue__WEBPACK_IMPORTED_MODULE_18__["a"]},data:()=>({inputTypes:[1,3],outputTypes:[2],actionIdCurrent:0,validateAction:!0,btnIndex:-1,processActionCurrent:0,activeTab:"tabs-1",activeTab2:"",btnDossierDynamics:[],btnStepsDynamics:[],loadingAction:!1,indexAction:-1,indexActionStep:-1,dossierId:"",className:"org.opencps.dossiermgt.model.Dossier",dossierFilesItems:[],dossierTemplatesItems:[],fileViews:[],showContactDetail:!1,listHistoryProcessing:[],dossierTemplatesTN:[],dossierTemplatesKQ:[],thongTinChiTietHoSo:{},dialogPDF:!1,dialogPDFLoading:!0,loadingAlpacajsForm:!1,nextActions:[],createFiles:[],returnFiles:[],processSteps:[],documents:[],payments:"",dossierActions:[],reAsignUsers:[],itemselect:"",dossierSyncs:[],stepModel:null,actionNote:"",actionsSubmitLoading:!1,showThongTinCoBanHoSo:!1,showYkienCanBoThucHien:!1,showFormBoSungThongTinNgan:!1,showPhanCongNguoiThucHien:!1,showTaoTaiLieuKetQua:!1,showKyPheDuyetTaiLieu:!1,dataEsign:"",typeEsign:"",showTraKetQua:!1,showThuPhi:!1,showPostalService:!1,showThanhToanDienTu:!1,showEditDate:!1,showExtendDateEdit:!1,checkInput:0,viaPortalDetail:0,showThucHienThanhToanDienTu:!1,dossierItemDialogPick:"",itemDialogPick:"",resultDialogPick:"",indexDialogPick:"",userNote:0,partView:"",stateView:!1,paymentDetail:"",paymentProfile:"",payment_type:0,type_assign:0,assign_items:[],btnStateVisible:!0,extendDateEdit:"",typeExtendDate:"",dueDateEdit:"",receiveDateEdit:"",dialogActionProcess:!1,rollbackable:!1,configNote:null,actionSpecial:!1,btnPlugins:[],loadingPlugin:!1,listDossierFiles:[],headers:[{text:"#",align:"center",sortable:!1},{text:"Vai trò",align:"center",sortable:!1,class:"vaitro_column"},{text:"Công việc",align:"center",sortable:!1,class:"congviec_column"},{text:"Thời hạn quy định",align:"center",sortable:!1,class:"thoihanquydinh_column"},{text:"Ngày bắt đầu",align:"center",sortable:!1,class:"ngaybatdau_column"},{text:"Người thực hiện",align:"center",sortable:!1,class:"nguoithuchien_column"},{text:"Kết quả",align:"center",sortable:!1,class:"ketqua_column"}],headerSyncs:[{text:"Nhật kí hồ sơ",align:"center",sortable:!1,class:"nhatki_column"},{text:"Trao đổi trực tuyến",align:"center",sortable:!1,class:"traodoitructuyen_column"}],filterDossierActionItems:[{text:"Tất cả",value:""},{text:"Có thao tác thực hiện",value:"1"},{text:"Không thao tác thực hiện",value:"2"}],filterDossierAction:null,filterDossierSyncItems:[{text:"Tất cả",value:"1,2"},{text:"Thông tin trao đổi",value:"2"}],filterDossierSync:null,messageChat:"",isCallBack:!0,printDocument:!1,alertObj:{icon:"check_circle",color:"success",message:"Thực hiện thành công!"},stateViewResult:!0,stateViewDocument:!0,listLienThong:[],modelPlugin:null,dialogPlugin:!1,dialog_reAsign:!1,loadingMermaidgraph:!1,typeTienTrinh:1,votingItems:[],loadingVoting:!1}),computed:{loading(){return this.$store.getters.loading},originality(){var t=this;return t.getOriginality()},dataCreateFile(){return this.$store.getters.getDataCreateFile},getCheckInput(){return this.$store.getters.getCheckInput},usersNextAction(){return this.$store.getters.getUsersNextAction},stepOverdueNextAction(){return this.$store.getters.getStepOverdueNextAction},currentUser(){return this.$store.getters.loadingInitData.user},kysoSuccess(){return this.$store.getters.kysoSuccess}},created(){var t=this;t.$nextTick(function(){t.initData(t.id),t.btnIndex=-1;let e=t.$router.history.current.query;e.hasOwnProperty("activeTab")&&(t.activeTab=e.activeTab,t.btnIndex=e["btnIndex"],e.hasOwnProperty("actionSpecial")&&null!==e["actionSpecial"]&&void 0!==e["actionSpecial"]&&"undefined"!==e["actionSpecial"]&&(t.actionSpecial=e["actionSpecial"]),t.thongTinChiTietHoSo["dossierId"]=t.id,t.btnStateVisible=!0),t.$store.commit("setKysoSuccess",!1)})},updated(){var t=this;t.$nextTick(function(){})},watch:{$route:function(t,e){t.query},kysoSuccess(t){var e=this;t&&(e.loadingAction=!1,e.dialogActionProcess=!1,e.loadingActionProcess=!1,e.alertObj={icon:"check_circle",color:"success",message:"Thực hiện thành công!"},e.btnStateVisible=!1)}},methods:{initData(t){var e=this;e.dossierId=t,e.$store.dispatch("getDetailDossier",t).then(i=>{e.thongTinChiTietHoSo=i,e.loadThanhToan(),e.loadHoSoLienThong(),e.getNextActions(),i["dossierSubStatus"]&&e.$store.dispatch("pullBtnConfigStep",i).then(t=>{e.btnStepsDynamics=t}),1===e.originality&&"done"===i["dossierStatus"]&&(e.activeTab2="tabs-1b",e.loadVoting()),e.runComment(),e.$store.dispatch("loadDossierDocuments",i).then(t=>{Array.isArray(t)?e.documents=t:e.documents.push(t)}),e.$store.dispatch("getListDossierFiles",t).then(t=>{e.listDossierFiles=t}),e.$refs.thanhphanhoso&&e.$refs.thanhphanhoso.initData(i),e.$refs.thanhphanhoso1&&e.$refs.thanhphanhoso1.initData(i),e.$refs.thanhphanhoso2&&e.$refs.thanhphanhoso2.initData(i)})},recountFileTemplates(){var t=this;t.dossierTemplatesItems.forEach(e=>{e.count=0,t.dossierFilesItems.forEach(t=>{e.partNo===t.dossierPartNo&&e.count++})})},runComment(){var t=this;t.$refs.comment&&t.$refs.comment.runComment()},goBack(){window.history.back()},viewFile(t){var e=this;e.dossierFilesItems.forEach(i=>{i["dossierId"]=e.thongTinChiTietHoSo.dossierId,i.dossierPartNo===t.partNo&&this.$store.dispatch("viewFile",i)})},downloadFileLogs(t){var e=this;let i={fileAttachId:t,dossierId:e.id};this.$store.dispatch("downloadFile",i)},loadDossierActions(t){var e=this;if(e.thongTinChiTietHoSo.dossierId){let i={dossierId:e.thongTinChiTietHoSo.dossierId,stepType:t};e.$store.dispatch("loadDossierActions",i).then(t=>{if(t.data){let a=t.data;for(var i=0;i<a.length;i++)if(a[i].hasOwnProperty("actions")&&null!==a[i]["actions"]&&void 0!==a[i]["actions"]&&!Array.isArray(a[i]["actions"])){let t=[];t.push(a[i]["actions"]),a[i]["actions"]=t}e.dossierActions=a}})}},loadMermaidgraph(t){var e=this;if(document.getElementById("mermaid_dossier").innerHTML="",e.thongTinChiTietHoSo.dossierId){let t={dossierId:e.thongTinChiTietHoSo.dossierId};e.loadingMermaidgraph=!0,e.$store.dispatch("loadMermaidgraph",t).then(t=>{e.loadingMermaidgraph=!1,mermaid__WEBPACK_IMPORTED_MODULE_20___default.a.render("theGraph",t,function(t){document.getElementById("mermaid_dossier").innerHTML=t})}).catch(function(){e.loadingMermaidgraph=!1})}},loadDossierSyncs(t){var e=this;if(e.thongTinChiTietHoSo.dossierId){let t={dossierId:e.thongTinChiTietHoSo.dossierId,info:"1,2"};e.$store.dispatch("loadDossierSyncs",t).then(t=>{null!==t&&void 0!==t&&"undefined"!==t?Array.isArray(t)?e.dossierSyncs=t:e.dossierSyncs=[t]:e.dossierSyncs=[]})}},changeTypeTienTrinh(t){let e=this;2===t&&setTimeout(function(){e.loadMermaidgraph()},200)},loadDossierLogs(t){var e=this;let i={dossierId:e.thongTinChiTietHoSo.dossierId},a=e.$store.dispatch("getListHistoryProcessingItems",i);a.then(function(t){e.listHistoryProcessing=[],e.listHistoryProcessing=t})},deleteDossierFileVersion(t){var e=this;t["dossierId"]=e.thongTinChiTietHoSo.dossierId,e.$store.dispatch("deleteAttackFiles",t).then(t=>{})},pickFile(t){document.getElementById("file"+t.partNo).click()},postChat(){var t=this;if(t.messageChat){let e={dossierId:t.thongTinChiTietHoSo.dossierId,actionCode:3===t.originality?"8200":"8100",actionNote:t.messageChat,actionUser:""};t.$store.dispatch("postAction",e).then(e=>{t.loadDossierSyncs()}),t.messageChat=""}},getNextAction(t){var e=this;if(e.actionIdCurrent=t.processActionId,1===t.type){let i={dossierId:e.thongTinChiTietHoSo.dossierId,actionId:t.processActionId};e.$store.dispatch("getNextAction",i).then(t=>{e.stepModel=t}).catch(t=>{e.stepModel=null})}else{let i={dossierId:e.thongTinChiTietHoSo.dossierId,actionId:t.processActionId};e.$store.dispatch("loadPlugin",i).then(t=>{e.stepModel=t}).catch(t=>{e.stepModel=null})}},processPullBtnplugin(t,e){var i=this;let a={dossierId:i.thongTinChiTietHoSo.dossierId,processPluginId:t.processPluginId};i.dialogPlugin=!0,i.loadingPlugin=!0,i.$store.dispatch("loadPlugin",a).then(e=>{i.modelPlugin=e,i.modelPlugin["pluginName"]=t.pluginName,i.loadingPlugin=!1}).catch(t=>{i.modelPlugin=null,i.loadingPlugin=!1})},processPullBtnDetailRouter(t,e,i,a){let s=this,o=!1;if(s.dossierId=t.dossierId,s.showYkienCanBoThucHien=!1,s.showFormBoSungThongTinNgan=!1,s.showPhanCongNguoiThucHien=!1,s.showTaoTaiLieuKetQua=!1,s.showKyPheDuyetTaiLieu=!1,s.showTraKetQua=!1,s.showThuPhi=!1,s.showPostalService=!1,s.showThanhToanDienTu=!1,s.showEditDate=!1,s.showExtendDateEdit=!1,s.showThucHienThanhToanDienTu=!1,s.dossierItemDialogPick=t,s.itemDialogPick=e,s.resultDialogPick=i,s.indexDialogPick=a,s.userNote=0,i.hasOwnProperty("configNote")&&null!==i.configNote&&void 0!==i.configNote&&"undefined"!==i.configNote)try{s.configNote=JSON.parse(i.configNote),s.configNote.confirm&&(o=!0)}catch(n){}if(null!==i&&void 0!==i&&"undefined"!==i&&(i.hasOwnProperty("userNote")||i.hasOwnProperty("extraForm")||i.hasOwnProperty("allowAssignUser")||i.hasOwnProperty("createFiles")||i.hasOwnProperty("eSignature")||i.hasOwnProperty("returnFiles")||i.hasOwnProperty("payment")||i.hasOwnProperty("checkInput")||i.hasOwnProperty("overdue")||i.hasOwnProperty("betimes"))){if(!i.hasOwnProperty("userNote")||1!==i.userNote&&"1"!==i.userNote&&2!==i.userNote&&"2"!==i.userNote||(o=!0,s.showYkienCanBoThucHien=!0,s.userNote=i.userNote),i.hasOwnProperty("extraForm")&&i.extraForm&&(o=!0,s.showFormBoSungThongTinNgan=!0),i.hasOwnProperty("allowAssignUser")&&0!==i.allowAssignUser&&(Array.isArray(i.toUsers)?s.assign_items=i.toUsers:s.assign_items=[i.toUsers],s.type_assign=i.allowAssignUser,o=!0,s.showPhanCongNguoiThucHien=!0),i.hasOwnProperty("createFiles")&&null!==i.createFiles&&void 0!==i.createFiles&&"undefined"!==i.createFiles&&(o=!0,Array.isArray(i.createFiles)?s.createFiles=i.createFiles:s.createFiles=[i.createFiles],s.showTaoTaiLieuKetQua=!0),i.hasOwnProperty("eSignature")&&i.eSignature&&(o=!0,s.showKyPheDuyetTaiLieu=!0,s.dataEsign=i),i.hasOwnProperty("returnFiles")&&null!==i.returnFiles&&void 0!==i.returnFiles&&"undefined"!==i.returnFiles&&(o=!0,Array.isArray(i.returnFiles)?s.returnFiles=i.returnFiles:s.returnFiles=[i.returnFiles],s.showTraKetQua=!0),i.hasOwnProperty("preCondition")&&null!==i.preCondition&&void 0!==i.preCondition&&"undefined"!==i.preCondition&&i.preCondition.indexOf("sendViaPostal=1")>=0&&(o=!0,s.showPostalService=!0),i.hasOwnProperty("payment")&&null!==i.payment&&void 0!==i.payment&&"undefined"!==i.payment&&i.payment.requestPayment>0)if(3!==i.payment.requestPayment&&"3"!==i.payment.requestPayment||610!==t["stepCode"]&&611!==t["stepCode"])o=!0,s.showThuPhi=!0,s.payments=i.payment,s.viaPortalDetail=t.viaPostal;else{o=!0,s.showThanhToanDienTu=!0;let e={dossierId:s.dossierId,referenceUid:t.referenceUid};s.$store.dispatch("loadDossierPayments",e).then(t=>{s.paymentProfile=t}).catch(t=>{})}i.hasOwnProperty("receiving")&&null!==i.receiving&&void 0!==i.receiving&&"undefined"!==i.receiving&&!0===i.receiving.editable&&(o=!0,s.showEditDate=!0,s.dueDateEdit=""!==i.receiving.dueDate?new Date(i.receiving.dueDate):"",s.receiveDateEdit=i.receiving.receiveDate),i.hasOwnProperty("overdue")&&(o=!0,s.showExtendDateEdit=!0,s.extendDateEdit=i.overdue,s.typeExtendDate="overdue"),i.hasOwnProperty("preoverdue")&&(o=!0,s.showExtendDateEdit=!0,s.extendDateEdit=i.preoverdue,s.typeExtendDate="preoverdue"),i.hasOwnProperty("betimes")&&(o=!0,s.showExtendDateEdit=!0,s.extendDateEdit=i.betimes,s.typeExtendDate="betimes")}o?(s.loadingAction=!1,s.dialogActionProcess=!0,s.loadingActionProcess=!1):(s.loadingAction=!0,s.processAction(s.thongTinChiTietHoSo,e,i,a,!1))},processPullBtnDetail(t,e){let i=this;i.btnIndex=e,i.itemAction=t,i.actionIdCurrent=t.processActionId,i.processActionCurrent=t.processActionId;let a={dossierId:i.thongTinChiTietHoSo.dossierId,actionId:t.processActionId};i.dossierId=i.thongTinChiTietHoSo.dossierId,i.loadingAction=!0,i.dialogActionProcess=!1,i.loadingActionProcess=!0,i.$store.dispatch("processPullBtnDetail",a).then(function(a){i.loadingActionProcess=!1,i.processPullBtnDetailRouter(i.thongTinChiTietHoSo,t,a,e)}).catch(function(t){i.loadingAction=!1,i.loadingActionProcess=!1})},btnActionEvent(t,e){let i=this;if(i.itemAction=t,i.indexAction=e,"UPDATE"===String(t.form))_router__WEBPACK_IMPORTED_MODULE_0__["a"].push({path:"/danh-sach-ho-so/"+i.index+"/ho-so/"+i.thongTinChiTietHoSo.dossierId+"/"+i.itemAction.form,query:i.$router.history.current.query});else if("ADD"===String(t.form))_router__WEBPACK_IMPORTED_MODULE_0__["a"].push({path:"/danh-sach-ho-so/"+i.index+"/bo-sung-ho-so/"+i.thongTinChiTietHoSo.dossierId,query:i.$router.history.current.query});else if("COPY"===String(t.form))i.doCopy(i.thongTinChiTietHoSo,t,e);else if("CANCEL"===String(t.form))i.doCancel(i.thongTinChiTietHoSo,t,e);else if("PRINT_01"===String(t.form))i.doPrint01(i.thongTinChiTietHoSo,t,e);else if("PRINT_02"===String(t.form))i.doPrint02(i.thongTinChiTietHoSo,t,e);else if("PRINT_03"===String(t.form))i.doPrint03(i.thongTinChiTietHoSo,t,e);else if("GUIDE"===String(t.form));else if("PREVIEW"===String(t.form))i.doPreview(i.thongTinChiTietHoSo,t,e);else if("ACTIONS"===String(t.form));else if("DELETE"===String(t.form))i.doDeleteDossier(i.thongTinChiTietHoSo,t,e);else if("ROLLBACK_01"===String(t.form)){let t={dossierId:i.thongTinChiTietHoSo.dossierId,actionCode:9e3};i.doActionSpecial(t)}else if("ROLLBACK_02"===String(t.form)){let t={dossierId:i.thongTinChiTietHoSo.dossierId,actionCode:9e3};i.doActionSpecial(t)}else if("OVERDUE"===String(t.form)){i.btnIndex=8500;let t={actionCode:8500,dossierId:i.thongTinChiTietHoSo.dossierId,overdue:i.thongTinChiTietHoSo["extendDate"]?i.thongTinChiTietHoSo["extendDate"]:""};i.processPullBtnDetailRouter(i.thongTinChiTietHoSo,null,t,null)}else if("PREOVERDUE"===String(t.form)){i.btnIndex=8501;let t={actionCode:8501,dossierId:i.thongTinChiTietHoSo.dossierId,preoverdue:i.thongTinChiTietHoSo["extendDate"]?i.thongTinChiTietHoSo["extendDate"]:""};i.processPullBtnDetailRouter(i.thongTinChiTietHoSo,null,t,null)}else if("BETIMES"===String(t.form)){i.btnIndex=8400;let t={actionCode:8400,dossierId:i.thongTinChiTietHoSo.dossierId,betimes:i.thongTinChiTietHoSo["extendDate"]?i.thongTinChiTietHoSo["extendDate"]:""};i.processPullBtnDetailRouter(i.thongTinChiTietHoSo,null,t,null)}},doPrint01(t,e,i){let a=this;a.dialogPDFLoading=!0,a.dialogPDF=!0;let s={dossierId:t.dossierId,document:e.document};a.$store.dispatch("doPrint01",s).then(function(t){a.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=t})},doPreview(t,e,i){let a=this;a.dialogPDFLoading=!0,a.dialogPDF=!0;let s={dossierId:t.dossierId,document:e.document};a.$store.dispatch("doPrint03",s).then(function(t){a.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=t})},doCopy(t,e,i){let a=this,s={dossierId:t.dossierId};a.loadingAction=!0,a.$store.dispatch("doCopy",s).then(function(t){a.loadingAction=!1,_router__WEBPACK_IMPORTED_MODULE_0__["a"].push({path:"/danh-sach-ho-so/"+a.index+"/ho-so/"+t.dossierId+"/"+a.itemAction.form,query:a.$router.history.current.query})}).catch(function(t){a.loadingAction=!1})},doDeleteDossier(t,e,i){let a=this,s=confirm("Bạn có muốn thực hiện hành động này?");if(!s)return!1;{let e={dossierId:t.dossierId};a.$router.history.current.query;a.$store.dispatch("deleteDossier",e).then(function(t){a.dialogActionProcess=!1,a.loadingActionProcess=!1,a.goBack()})}},doCancel(t,e,i){let a=this;a.loadingAction=!0;let s={dossierId:t.dossierId};a.$store.dispatch("doCancel",s).then(function(t){a.loadingAction=!1,a.indexAction=-1,_router__WEBPACK_IMPORTED_MODULE_0__["a"].push({path:"/danh-sach-ho-so/"+a.index+"/ho-so/"+t.dossierId+"/"+a.itemAction.form,query:a.$router.history.current.query})}).catch(function(t){a.loadingAction=!1})},doCreateDossier(){let t=this,e={serviceCode:t.serviceCode,govAgencyCode:t.govAgencyCode,templateNo:t.templateNo,originality:t.getOriginality()};t.loadingAction=!0,t.$store.dispatch("postDossier",e).then(function(e){t.loadingAction=!1,t.indexAction=-1,_router__WEBPACK_IMPORTED_MODULE_0__["a"].push({path:"/danh-sach-ho-so/"+t.index+"/ho-so/"+e.dossierId+"/"+t.itemAction.form,query:t.$router.history.current.query})}).catch(e=>{t.loadingAction=!1})},rollBack(){var t=this;let e={dossierId:t.thongTinChiTietHoSo.dossierId};t.$store.dispatch("rollBack",e).then(e=>{t.getNextActions(),t.rollbackable=!1,t.btnStateVisible=!0}).catch(e=>{t.alertObj={icon:"error",color:"error",message:"Rút lại hồ sơ không thành công!"},t.btnStateVisible=!1})},rollBackDossier(t){var e=this;let i={dossierId:e.thongTinChiTietHoSo.dossierId,actionCode:9e3};t?e.doActionSpecial(i):e.$store.dispatch("postAction",i).then(function(t){e.getNextActions(),e.rollbackable=!1,e.btnStateVisible=!0}).catch(function(t){})},processAction(t,e,i,a,s){let o=this;var n=!0,r=!0,l=!0,c=!0,d=!0,h=!1,u=o.$store.getters.loadingInitData;let p=u.user.userName?u.user.userName:"",m={dossierId:t.dossierId,actionCode:i.actionCode,actionUser:p};if(o.showPhanCongNguoiThucHien){m["toUsers"]=o.assign_items;let t=o.$refs.phancong.doExport();n=!!t}var g=null;if(o.payments&&(g={requestPayment:o.payments["requestPayment"],paymentNote:o.payments["paymentNote"],advanceAmount:Number(o.payments["advanceAmount"].toString().replace(/\./g,"")),feeAmount:Number(o.payments["feeAmount"].toString().replace(/\./g,"")),serviceAmount:Number(o.payments["serviceAmount"].toString().replace(/\./g,"")),shipAmount:Number(o.payments["shipAmount"].toString().replace(/\./g,""))}),o.showThuPhi){m["payment"]=g;let t=g["feeAmount"]+g["serviceAmount"]+g["shipAmount"]-g["advanceAmount"];if(0===t&&3===o.originality){let t=confirm("Tổng phí còn phải nộp: 0 đồng. Bạn có muốn tiếp tục?");if(!t)return void(o.loadingActionProcess=!1)}}if(o.showThanhToanDienTu){o.$refs.epayment.validPayment();let t=o.$refs.epayment.validPayment(),e=o.$store.getters.getPaymentProfile;if(e&&e["paymentFile"]&&t){c=!0,m["payment"]={requestPayment:3,advanceAmount:e.advanceAmount?e.advanceAmount:0,feeAmount:e.feeAmount?e.feeAmount:0,paymentAmount:e.paymentAmount?e.paymentAmount:0,paymentNote:e.paymentNote?e.paymentNote:"",serviceAmount:e.serviceAmount?e.serviceAmount:0,shipAmount:e.shipAmount?e.shipAmount:0};let t=m["payment"],i=t["feeAmount"]+t["serviceAmount"]+t["shipAmount"]-t["advanceAmount"];if(0===i&&3===o.originality){let t=confirm("Tổng phí còn phải nộp: 0 đồng. Bạn có muốn tiếp tục?");if(!t)return void(o.loadingActionProcess=!1)}}else c=!1}if(o.showEditDate){let t=o.$refs.ngayhentra.getDateInput(),e={dueDate:t,receiveDate:o.receiveDateEdit};m["payload"]=e}if(o.showExtendDateEdit){let t=o.$refs.ngaygiahan.doExport();l=!!t.valid;let e={extendDate:t.extendDate};"overdue"===o.typeExtendDate?e={extendDate:t.extendDate,delayNote:t.text,lockState:""}:"preoverdue"===o.typeExtendDate&&(e={extendDate:t.extendDate,delayNote:t.text,lockState:"CONFIRM"}),m["payload"]=e}if(o.showFormBoSungThongTinNgan){m["payload"]=o.$refs.formBoSungThongTinNgan.formSubmitData();let t=o.$refs.formBoSungThongTinNgan.checkValid();d=!!t}if(o.showYkienCanBoThucHien){let t=o.$refs.ykiencanbo.doExport(),e="";t.valid?(r=!0,e=t.text):r=!1,m["userNote"]=e}if(o.showKyPheDuyetTaiLieu){let t=o.$refs.kypheduyettailieu.doExport();t.required?h=!0:(h=!1,"digital"!==o.dataEsign.signatureType&&alert("Yêu cầu xác thực ký duyệt"))}o.validateAction=!!(n&&r&&l&&c&&d),o.dossierId=t.dossierId;let v=o.$router.history.current.query;if(o.loadingActionProcess=!0,s){let t=confirm("Bạn có muốn thực hiện hành động này?");if(!t||!o.validateAction)return!1;o.loadingActionProcess=!0,o.$store.dispatch("processDossierRouter",m).then(function(t){o.loadingAction=!1,o.dialogActionProcess=!1,o.loadingActionProcess=!1,o.alertObj={icon:"check_circle",color:"success",message:"Thực hiện thành công!"},o.btnStateVisible=!1,t.hasOwnProperty("rollbackable")&&null!==t["rollbackable"]&&void 0!==t["rollbackable"]&&(o.rollbackable=t.rollbackable),t.hasOwnProperty("dossierDocumentId")&&null!==t["dossierDocumentId"]&&void 0!==t["dossierDocumentId"]&&0!==t["dossierDocumentId"]&&"0"!==t["dossierDocumentId"]&&(o.printDocument=!0),_router__WEBPACK_IMPORTED_MODULE_0__["a"].push({path:o.$router.history.current.path,query:{recount:Math.floor(100*Math.random())+1,renew:Math.floor(100*Math.random())+1,q:v["q"]}})}).catch(function(t){o.loadingAction=!1,o.loadingActionProcess=!1})}else if(o.validateAction){if(2===o.checkInput&&null!==o.$refs.thanhphanhoso&&void 0!==o.$refs.thanhphanhoso&&"undefined"!==o.$refs.thanhphanhoso){var _=o.$refs.thanhphanhoso.validDossierTemplate();if(!_)return o.loadingAction=!1,void(o.loadingActionProcess=!1)}if(o.loadingActionProcess=!0,o.showKyPheDuyetTaiLieu){if(h){let t={dossierId:o.thongTinChiTietHoSo.dossierId,actionId:o.processActionCurrent};o.$store.dispatch("processPullBtnDetail",t).then(function(t){o.dataEsign=t;let e=o.$refs.kypheduyettailieu.checkCreateFile(o.dataEsign);if(e){var i;if(o.dataEsign.createFiles)if(i=Array.isArray(o.dataEsign.createFiles)?o.dataEsign.createFiles:[o.dataEsign.createFiles],i=i.filter(t=>{return!0===t.eForm}),i.length>0){let t=i.length,e=0;for(let s=0;s<t;s++){let n=i[s];var a=o.listDossierFiles.find(t=>{return t.dossierPartNo===n.partNo});a?(a["dossierId"]=o.thongTinChiTietHoSo.dossierId,o.$store.dispatch("putAlpacaForm",a).then(i=>{e+=1,e===t&&(o.loadingAction=!1,o.loadingActionProcess=!1,o.doAction())}).catch(t=>{})):(n["dossierId"]=o.thongTinChiTietHoSo.dossierId,o.$store.dispatch("postEformEsignature",n).then(i=>{e+=1,e===t&&(o.loadingAction=!1,o.loadingActionProcess=!1,o.doAction())}).catch(t=>{}))}}}else{var s="";if(o.showThuPhi){s={requestPayment:o.payments["requestPayment"],paymentNote:o.payments["paymentNote"],advanceAmount:Number(o.payments["advanceAmount"].toString().replace(/\./g,"")),feeAmount:Number(o.payments["feeAmount"].toString().replace(/\./g,"")),serviceAmount:Number(o.payments["serviceAmount"].toString().replace(/\./g,"")),shipAmount:Number(o.payments["shipAmount"].toString().replace(/\./g,""))},t["payment"]=s;let e=s["feeAmount"]+s["serviceAmount"]+s["shipAmount"]-s["advanceAmount"];if(0===e&&3===o.originality){let t=confirm("Tổng phí còn phải nộp: 0 đồng. Bạn có muốn tiếp tục?");if(!t)return void(o.loadingActionProcess=!1)}}if(o.showYkienCanBoThucHien){let e=o.$refs.ykiencanbo.doExport(),i="";e.valid?(r=!0,i=e.text):r=!1,t["userNote"]=i}o.loadingAction=!1,o.loadingActionProcess=!1,o.$refs.kypheduyettailieu.kySo(t)}}).catch(function(t){o.loadingAction=!1,o.loadingActionProcess=!1})}}else o.$store.dispatch("processDossierRouter",m).then(function(t){2!==o.checkInput&&"2"!==o.checkInput||o.$store.dispatch("updateApplicantNote",o.thongTinChiTietHoSo).then(function(t){}),o.loadingAction=!1,o.dialogActionProcess=!1,o.loadingActionProcess=!1,o.alertObj={icon:"check_circle",color:"success",message:"Thực hiện thành công!"},o.btnStateVisible=!1,t.hasOwnProperty("rollbackable")&&null!==t["rollbackable"]&&void 0!==t["rollbackable"]&&(o.rollbackable=t.rollbackable),t.hasOwnProperty("dossierDocumentId")&&null!==t["dossierDocumentId"]&&void 0!==t["dossierDocumentId"]&&0!==t["dossierDocumentId"]&&"0"!==t["dossierDocumentId"]&&(o.printDocument=!0),"new"===o.thongTinChiTietHoSo.dossierStatus&&1===o.originality&&_router__WEBPACK_IMPORTED_MODULE_0__["a"].push("/danh-sach-ho-so/"+o.index+"/nop-thanh-cong/"+o.thongTinChiTietHoSo.dossierId),o.checkInput=0,o.$store.commit("setCheckInput",0),"ACTIONS"===String(e.form)||_router__WEBPACK_IMPORTED_MODULE_0__["a"].push({path:o.$router.history.current.path,query:{recount:Math.floor(100*Math.random())+1,renew:Math.floor(100*Math.random())+1,q:v["q"]}}),jquery__WEBPACK_IMPORTED_MODULE_1___default()("html, body").animate({scrollTop:0},500,"linear")}).catch(function(t){o.loadingAction=!1,o.loadingActionProcess=!1})}},doPrint02(t,e,i,a){let s=this;if(null===s.thuTucHanhChinhSelected||void 0===s.thuTucHanhChinhSelected||"undefined"===s.thuTucHanhChinhSelected)alert("Loại thủ tục bắt buộc phải chọn");else{let t={document:e.document,serviceCode:s.thuTucHanhChinhSelected.serviceCode,govAgencyCode:s.thuTucHanhChinhSelected.govAgencyCode,dossiers:JSON.stringify(s.selected)};s.dialogPDFLoading=!0,s.dialogPDF=!0,s.$store.dispatch("doPrint02",t).then(function(t){s.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=t})}},doPrint03(t,e,i,a){let s=this;s.dialogPDFLoading=!0,s.dialogPDF=!0;let o={dossierId:t.dossierId,document:e.document};s.$store.dispatch("doPrint03",o).then(function(t){s.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=t})},doGuiding(t,e,i,a){let s=this;if(null===s.thuTucHanhChinhSelected||void 0===s.thuTucHanhChinhSelected||"undefined"===s.thuTucHanhChinhSelected)alert("Loại thủ tục bắt buộc phải chọn");else{let t={serviceConfigId:s.thuTucHanhChinhSelected.serviceConfigId};s.dialogPDFLoading=!0,s.dialogPDF=!0,s.$store.dispatch("doGuiding",t).then(function(t){s.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=t})}},doActionSpecial(t){var e=this;let i=e.$router.history.current.query;e.loadingAction=!0,e.$store.dispatch("postAction",t).then(function(t){e.loadingAction=!1,e.dialogActionProcess=!1,e.loadingActionProcess=!1,e.btnStateVisible=!1,t.hasOwnProperty("rollbackable")&&null!==t["rollbackable"]&&void 0!==t["rollbackable"]&&(e.rollbackable=t.rollbackable),t.hasOwnProperty("dossierDocumentId")&&null!==t["dossierDocumentId"]&&void 0!==t["dossierDocumentId"]&&0!==t["dossierDocumentId"]&&"0"!==t["dossierDocumentId"]&&(e.printDocument=!0),e.checkInput=0,e.$store.commit("setCheckInput",0),_router__WEBPACK_IMPORTED_MODULE_0__["a"].push({path:e.$router.history.current.path,query:{recount:Math.floor(100*Math.random())+1,renew:Math.floor(100*Math.random())+1,q:i["q"]}})}).catch(function(t){e.loadingActionProcess=!1,e.loadingAction=!1})},getNextActions(){let t=this,e=(t.$router.history.current.query,{dossierId:t.thongTinChiTietHoSo.dossierId}),i=t.$router.history.current.query;t.dossierId=t.thongTinChiTietHoSo.dossierId,t.$store.dispatch("pullNextactions",e).then(function(e){if(t.btnDossierDynamics=e,i.hasOwnProperty("btnIndex")&&null!==i.btnIndex&&""!==i.btnIndex)if(t.btnStateVisible=!0,t.dialogActionProcess=!0,"8500"===i.btnIndex.toString()){let e={actionCode:8500,dossierId:t.thongTinChiTietHoSo.dossierId,overdue:t.thongTinChiTietHoSo["extendDate"]};t.processPullBtnDetailRouter(t.thongTinChiTietHoSo,null,e,null)}else if("8501"===i.btnIndex.toString()){let e={actionCode:8501,dossierId:t.thongTinChiTietHoSo.dossierId,preoverdue:t.thongTinChiTietHoSo["extendDate"]};t.processPullBtnDetailRouter(t.thongTinChiTietHoSo,null,e,null)}else if("8400"===i.btnIndex.toString()){let e={actionCode:8400,dossierId:t.thongTinChiTietHoSo.dossierId,betimes:t.thongTinChiTietHoSo["extendDate"]};t.processPullBtnDetailRouter(t.thongTinChiTietHoSo,null,e,null)}else 1===t.btnDossierDynamics[i.btnIndex].enable||2===t.btnDossierDynamics[i.btnIndex].enable?t.processPullBtnDetail(t.btnDossierDynamics[i.btnIndex],i.btnIndex):t.dialogActionProcess=!1;t.checkInput=t.getCheckInput,null!==t.getCheckInput&&void 0!==t.getCheckInput&&0!==t.checkInput&&setTimeout(function(){t.$refs.thanhphanhoso.initData(t.thongTinChiTietHoSo)},300)}),t.$store.dispatch("loadPlugins",{dossierId:t.thongTinChiTietHoSo.dossierId}).then(e=>{t.btnPlugins=e}).catch(e=>{t.btnPlugins=[]}),t.loadDossierSyncs(t.thongTinChiTietHoSo.dossierId)},showAlpacaJSFORM(item){var vm=this;item.eform&&vm.$store.dispatch("loadFormScript",item).then(resScript=>{vm.$store.dispatch("loadFormData",item).then(resData=>{var formScript,formData;formScript=resScript?eval("("+resScript+")"):{},formData=resData?eval("("+resData+")"):{},formScript.data=formData,window.$("#formAlpaca"+item.partNo).alpaca(formScript)})})},onUploadSingleFile(t,e,i){var a=this;t.dataItem=e,t["dossierId"]=a.thongTinChiTietHoSo.dossierId,t["dossierTemplateNo"]=a.thongTinChiTietHoSo.dossierTemplateNo,a.$store.dispatch("uploadSingleFile",t).then(function(t){}).catch(function(t){})},submitAlpacajsForm(t){var e=this;let i={dossierId:e.thongTinChiTietHoSo.dossierId,dossierPartNo:t.partNo};e.$store.dispatch("putAlpacaForm",i)},postNextActions(t){var e=this;if(t["dossierId"]=e.thongTinChiTietHoSo.dossierId,t.allowAssignUser>0)e.$store.dispatch("reassignDossier",t).then(i=>{let a={dossierId:e.dossierId,actionCode:t.actionCode,actionNote:e.actionNote,actionUser:"",payload:"",security:"",assignUsers:"",payment:"",createDossiers:""};e.$store.dispatch("postAction",a).then(t=>{})});else{let i={dossierId:e.dossierId,actionCode:t.actionCode,actionNote:e.actionNote,actionUser:"",payload:"",security:"",assignUsers:"",payment:"",createDossiers:""};e.$store.dispatch("postAction",i).then(t=>{})}},viewFileWithPartNo(t){var e=this;if(e.dossierFilesItems){var i=e.dossierFilesItems.filter(e=>{return e.dossierPartNo===t.partNo});if(!i)return;e.fileViews=i,e.partView!==t.partNo?(e.stateView=!0,e.partView=t.partNo):(e.stateView=!e.stateView,e.partView=t.partNo)}},viewFile2(t){var e=this;e.dialogPDFLoading=!0,e.dialogPDF=!0,t["dossierId"]=e.thongTinChiTietHoSo.dossierId,e.$store.dispatch("viewFile",t).then(t=>{e.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=t})},viewFileDocument(t){var e=this;e.dialogPDFLoading=!0,e.dialogPDF=!0,t["dossierId"]=e.thongTinChiTietHoSo.dossierId,e.$store.dispatch("viewDocument",t).then(t=>{e.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=t})},loadTPHS(){var t=this;t.$refs.thanhphanhoso1&&setTimeout(function(){t.$refs.thanhphanhoso1.initData(t.thongTinChiTietHoSo)},150),t.$refs.thanhphanhoso2&&setTimeout(function(){t.$refs.thanhphanhoso2.initData(t.thongTinChiTietHoSo)},150)},loadThanhToan(){var t=this;let e={dossierId:t.dossierId,referenceUid:t.thongTinChiTietHoSo.referenceUid};t.$store.dispatch("loadDossierPayments",e).then(e=>{t.paymentDetail=e}).catch(t=>{})},loadHoSoLienThong(){var t=this;let e=t.thongTinChiTietHoSo.dossierId;t.$store.dispatch("loadDossierLienThong",e).then(e=>{t.listLienThong=e}).catch(t=>{console.log(t)})},loadVoting(){let t=this,e={className:"dossier",classPK:t.id};t.$store.dispatch("loadVoting",e).then(function(e){t.votingItems=e,console.log("votingItems",t.votingItems)}).catch(function(t){})},submitVoting(){let t=this,e=[];if(t.votingItems.length>0){for(var i in t.loadingVoting=!0,t.votingItems)t.votingItems[i]["className"]="dossier",t.votingItems[i]["classPk"]=t.id,e.push(t.$store.dispatch("submitVoting",t.votingItems[i]));Promise.all(e).then(e=>{t.loadingVoting=!1,t.loadVoting(),toastr__WEBPACK_IMPORTED_MODULE_2___default.a.success("Đánh giá của bạn được gửi thành công")}).catch(e=>{t.loadingVoting=!1,toastr__WEBPACK_IMPORTED_MODULE_2___default.a.error("Gửi đánh giá không thành công")})}},doAction(){let t=this,e={dossierId:t.thongTinChiTietHoSo.dossierId,actionId:t.processActionCurrent};t.$store.dispatch("processPullBtnDetail",e).then(function(e){var i="";if(t.showThuPhi&&(i={requestPayment:t.payments["requestPayment"],paymentNote:t.payments["paymentNote"],advanceAmount:Number(t.payments["advanceAmount"].toString().replace(/\./g,"")),feeAmount:Number(t.payments["feeAmount"].toString().replace(/\./g,"")),serviceAmount:Number(t.payments["serviceAmount"].toString().replace(/\./g,"")),shipAmount:Number(t.payments["shipAmount"].toString().replace(/\./g,""))},e["payment"]=i),t.showYkienCanBoThucHien){let i=t.$refs.ykiencanbo.doExport();e["userNote"]=i.text}t.$refs.kypheduyettailieu.kySo(e)}).catch(function(e){t.loadingAction=!1,t.loadingActionProcess=!1})},printViewDocument(){let t=this;t.dialogPDFLoading=!0,t.dialogPDF=!0;let e={dossierId:t.thongTinChiTietHoSo.dossierId};t.$store.dispatch("doPrint03",e).then(function(e){t.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=e})},filterNextActionEnable(t){var e=!1;if(t&&Array.isArray(t))for(let i in t)0!==t[i]["enable"]&&(e=!0);return e},checkPemissionSpecialAction(t,e,i){var a=this,s=!0;if("PRINT_01"!==t&&"PRINT_02"!==t&&"PRINT_03"!==t&&"GUIDE"!==t&&"PREVIEW"!==t&&"BETIMES"!==t){let t=a.$store.getters.getUsersNextAction;if(t.length>0){let i=t.filter(function(t){return t["userId"].toString()===e["userId"].toString()});s=i.length>0}else s=!1}return"ROLLBACK_01"!==t&&"ROLLBACK_02"!==t&&"ROLLBACK_03"!==t||(s=!1),s},checkPemissionPhanCongLai(t){let e=this,i=!0,a=e.$store.getters.getUsersNextAction,s=[{userId:e.thongTinChiTietHoSo.lastActionUserId?e.thongTinChiTietHoSo.lastActionUserId:""}],o=a.concat(s);if(o.length>0){let e=o.filter(function(e){return e["userId"].toString()===t["userId"].toString()});i=e.length>0}else i=!1;return i},reAsign(){let t=this;t.$store.dispatch("getDossierUserAsign",t.thongTinChiTietHoSo.dossierId).then(function(e){t.reAsignUsers=e,t.dialog_reAsign=!0})},doReAsign(){let t=this,e={dossierId:t.thongTinChiTietHoSo.dossierId,users:t.reAsignUsers},i=t.$refs.phanconglai.doExport();i&&t.checkPemissionPhanCongLai(t.currentUser)&&(t.loadingAction=!0,t.$store.dispatch("postDossierUserAsign",e).then(function(e){setTimeout(function(){t.getNextActions()},300),t.dialog_reAsign=!1,t.loadingAction=!1}).catch(function(e){t.loadingAction=!1,console.log(e)}))},changeStateViewResult(t){var e=this;e.stateViewResult=t},getUser(t){let e=this,i=e.$store.getters.getUser.role,a=i.findIndex(e=>e===t);return a>=0},checkActionSpecial(t){var e=this;if(Array.isArray(t)){var i=0;return jquery__WEBPACK_IMPORTED_MODULE_1___default()(t).each(function(t,a){if("PRINT_01"!==a.form&&"PRINT_02"!==a.form&&"PRINT_03"!==a.form&&"GUIDE"!==a.form&&"PREVIEW"!==a.form&&"BETIMES"!==a.form){let t=e.$store.getters.getUsersNextAction;if(t.length>0){let a=t.filter(function(t){return t["userId"].toString()===e.currentUser["userId"].toString()});a.length>0&&(i+=1)}}}),i>0}return!1}},filters:{dateTimeView(t){if(t){let e=new Date(Number(t));return`${e.getDate().toString().padStart(2,"0")}/${(e.getMonth()+1).toString().padStart(2,"0")}/${e.getFullYear()} ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`}return""},getMaxDueDate(t){let e=Math.max.apply(Math,t.map(function(t){return t.actionOverdue}));return e},getThoiHanQuyDinh(t){return t>0?t+" ngày":""}}}},a18c:function(t,e,i){"use strict";var a=i("a026"),s=i("8c4f"),o=i("be4d");const n=[{path:"/danh-sach-ho-so/:index",name:"Landing",component:()=>Promise.resolve().then(i.bind(null,"4d55")),props:!0},{path:"/m/danh-sach-ho-so/:index",name:"LandingMobile",component:()=>Promise.resolve().then(i.bind(null,"dfd7")),props:!0},{path:"/tra-cuu-ho-so",name:"TraCuuHoSo",component:()=>Promise.resolve().then(i.bind(null,"3436")),props:!0},{path:"/danh-sach-ho-so/:index/tiep-nhan-ho-so/:id/:formCode",name:"TiepNhanHoSoDetail",component:()=>Promise.resolve().then(i.bind(null,"5338")),props:!0},{path:"/danh-sach-ho-so/:index/chi-tiet-ho-so/:id",name:"XemChiTietHoSoDetailCanBo",component:()=>Promise.resolve().then(i.bind(null,"bbba")),props:!0},{path:"/danh-sach-ho-so/:index/xu-ly-ho-so",name:"XuLyHoSo",component:()=>Promise.resolve().then(i.bind(null,"5de0")),props:!0},{path:"/danh-sach-ho-so/:index/bo-sung-ho-so/:id",name:"HoanThienBoSungHoSoDetail",component:()=>Promise.resolve().then(i.bind(null,"aa35")),props:!0},{path:"/danh-sach-ho-so/:index/ho-so/:id/:formCode",name:"DetailForward",component:()=>Promise.resolve().then(i.bind(null,"38ec")),props:!0},{path:"/add-dvc/:serviceCode",name:"DanhSachThuTuc",component:()=>Promise.resolve().then(i.bind(null,"eaee")),props:!0},{path:"/danh-sach-ho-so/:index/nop-thanh-cong/:id",name:"NopThanhCong",component:()=>Promise.resolve().then(i.bind(null,"9190")),props:!0},{path:"/thanh-toan-thanh-cong",name:"ThanhToanThanhCong",component:()=>Promise.resolve().then(i.bind(null,"d4a9")),props:!0},{path:"*",name:"NotFound",component:o["a"]}];a["default"].use(s["a"]);const r=new s["a"]({routes:n});e["a"]=r},aa35:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"row-header"},[i("div",{staticClass:"background-triangle-big"},[t._v(" HOÀN THIỆN BỔ SUNG HỒ SƠ ")]),i("div",{staticClass:"layout row wrap header_tools row-blue"},[i("div",{staticClass:"flex xs8 sm10 pl-3 text-ellipsis text-bold"},[t._v("\n        "+t._s(t.thongTinChiTietHoSo.serviceName)+"\n      ")]),i("div",{staticClass:"flex xs4 sm2 text-right",staticStyle:{"margin-left":"auto"}},[i("v-btn",{staticClass:"my-0 mx-0 btn-border-left",attrs:{flat:"","active-class":"temp_active"},on:{click:t.goBack}},[t._v("\n        Quay lại  \n          "),i("v-icon",{attrs:{size:"16"}},[t._v("undo")])],1)],1)])]),i("v-expansion-panel",{staticClass:"expansion-p0",attrs:{expand:""}},[i("v-expansion-panel-content",{attrs:{value:!0}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"background-triangle-small"},[t._v("I. ")]),t._v("THÔNG TIN HỒ SƠ\n      ")]),i("v-card",{staticClass:"mb-2"},[i("v-card-text",[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"pl-0 text-header"},[t._v("Loại hồ sơ: ")])],1),i("v-flex",{attrs:{xs12:"",sm4:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[i("v-chip",{staticClass:"pl-0 mx-0 my-0",attrs:{small:""}},[t._v(" Hồ sơ trực tuyến ")])],1)],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"pl-0 text-header"},[t._v("Mã hồ sơ: ")])],1),i("v-flex",{attrs:{xs12:"",sm4:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),i("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[t._v(t._s(t.thongTinChiTietHoSo.dossierIdCTN))])],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"pl-0 text-header"},[t._v("Ngày tiếp nhận: ")])],1),i("v-flex",{attrs:{xs12:"",sm4:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),i("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[t._v(t._s(t.thongTinChiTietHoSo.receiveDate))])],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"pl-0 text-header"},[t._v("Chủ hồ sơ: ")])],1),i("v-flex",{attrs:{xs12:"",sm4:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),i("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[t._v(t._s(t.thongTinChiTietHoSo.applicantName))])],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"pl-0 text-header"},[t._v("Địa chỉ: ")])],1),i("v-flex",{attrs:{xs12:"",sm10:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),i("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[t._v(t._s(t.thongTinChiTietHoSo.address))])],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"pl-0 text-header"},[t._v("Người nộp: ")])],1),i("v-flex",{attrs:{xs12:"",sm4:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),i("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[t._v(t._s(t.thongTinChiTietHoSo.delegateName))])],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"pl-0 text-header"},[t._v("Số CMND: ")])],1),i("v-flex",{attrs:{xs12:"",sm4:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),i("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[t._v(t._s(t.thongTinChiTietHoSo.applicantIdNo))])],1)],1)],1)],1)],1)],1),i("v-expansion-panel",{staticClass:"expansion-p0",staticStyle:{position:"relative"},attrs:{expand:""}},[i("v-expansion-panel-content",{attrs:{value:!0}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"background-triangle-small"},[t._v("II. ")]),t._v("THÀNH PHẦN HỒ SƠ\n      ")]),i("thanh-phan-ho-so",{ref:"thanhphanhoso"})],1)],1),i("div",{staticClass:"text-center mt-2"},[t._l(t.btnDossierDynamics,function(e,a){return t.visibleBtnNextAction?i("v-btn",{key:a,attrs:{color:"primary"},on:{click:function(i){t.nextAction(e,a)}}},[t._v("\n      "+t._s(e.actionName)+"\n      "),i("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])]):t._e()}),i("v-btn",{attrs:{color:"primary",loading:t.loadingAction,disabled:t.loadingAction},nativeOn:{click:function(e){return t.goBack(e)}}},[i("v-icon",[t._v("undo")]),t._v("  \n      Quay lại\n      "),i("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],2)],1)},s=[],o=i("a18c"),n=i("93f5"),r={props:["index","id"],data:()=>({dialog_addTHPHS:!1,loadingAction:!1,thongTinChiTietHoSo:{},btnDossierDynamics:[],visibleBtnNextAction:!0}),computed:{loading(){return this.$store.getters.loading}},components:{"thanh-phan-ho-so":n["a"]},created(){var t=this;t.initData(t.id),t.getNextActions(t.id)},watch:{},methods:{initData(t){var e=this;e.$store.dispatch("getDetailDossier",t).then(t=>{e.thongTinChiTietHoSo=t,e.$refs.thanhphanhoso.initData(t)})},goBack(){window.history.back()},getNextActions(t){let e=this,i={dossierId:t};e.$store.dispatch("pullNextactions",i).then(function(t){e.btnDossierDynamics=t})},nextAction(t,e){console.log("Đã bổ sung");var i=this;console.log("luu Ho So--------------------"),i.$store.commit("setPrintPH",!1);let a=this.$refs.thanhphanhoso.dossierTemplateItems,s=i.$refs.thanhphanhoso.dossierFilesItems,n=a,r=[],l=[];n&&(n.forEach(function(t,e){1===t.partType&&(t["dossierId"]=i.thongTinChiTietHoSo.dossierId,l.push(i.$store.dispatch("postDossierMark",t)))}),0!==s.length?s.forEach(function(t,e){t.eForm&&(t["dossierId"]=i.thongTinChiTietHoSo.dossierId,r.push(i.$store.dispatch("putAlpacaForm",t)))}):n.forEach(function(t,e){1===t.partType&&t.hasForm&&(t["dossierId"]=i.thongTinChiTietHoSo.dossierId,r.push(i.$store.dispatch("postEform",t)))})),Promise.all(l).then(t=>{}).catch(function(t){}),Promise.all(r).then(e=>{console.log(e);let a={dossierId:i.thongTinChiTietHoSo.dossierId,actionCode:t.actionCode},s=i.$router.history.current.query;i.loadingActionProcess=!0,i.$store.dispatch("processDossierRouter",a).then(function(t){i.visibleBtnNextAction=!1,o["a"].push({path:i.$router.history.current.path,query:{recount:Math.floor(100*Math.random())+1,renew:Math.floor(100*Math.random())+1,q:s["q"]}})})}).catch(t=>{console.log("reject=============",t)})}}},l=r,c=i("2877"),d=Object(c["a"])(l,a,s,!1,null,null,null);d.options.__file="HoanThienBoSungHoSoDetail.vue";e["default"]=d.exports},bbba:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"form-chitiet"},[t.loading?i("content-placeholders",{staticClass:"mt-3"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("div",{staticClass:"row-header"},[i("div",{staticClass:"background-triangle-big"},[i("span",[t._v("CHI TIẾT HỒ SƠ")])]),i("div",{staticClass:"layout row wrap header_tools row-blue"},[i("div",{staticClass:"flex xs8 sm10 pl-3 text-ellipsis text-bold",attrs:{title:t.thongTinChiTietHoSo.serviceName}},[t._v("\n        "+t._s(t.thongTinChiTietHoSo.serviceCode)+" - "+t._s(t.thongTinChiTietHoSo.serviceName)+"\n      ")]),i("div",{staticClass:"flex xs4 sm2 text-right",staticStyle:{"margin-left":"auto"}},[i("v-btn",{staticClass:"my-0 mx-0 btn-border-left",attrs:{flat:"","active-class":"temp_active"},on:{click:t.goBack}},[i("v-icon",{attrs:{size:"18"}},[t._v("reply")]),t._v("  \n          Quay lại\n        ")],1)],1)])]),i("v-dialog",{staticStyle:{overflow:"hidden"},attrs:{"max-width":"900",transition:"fade-transition"},model:{value:t.dialogPDF,callback:function(e){t.dialogPDF=e},expression:"dialogPDF"}},[i("v-card",[i("v-card-title",{staticClass:"headline"},[t._v("File đính kèm")]),i("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogPDF=!1}}},[i("v-icon",[t._v("clear")])],1),t.dialogPDFLoading?i("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[i("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):t._e(),i("iframe",{directives:[{name:"show",rawName:"v-show",value:!t.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPDFPreview",src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1),i("thong-tin-co-ban-ho-so",{ref:"thong-tin-co-ban-ho-so",attrs:{detailDossier:t.thongTinChiTietHoSo}}),i("div",[i("v-tabs",{staticClass:"mb-4",attrs:{"icons-and-text":""},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[i("v-tabs-slider",{attrs:{color:"primary"}}),i("v-tab",{key:1,attrs:{href:"#tabs-1"},on:{click:function(e){t.getNextActions()}}},[i("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{flat:""}},[3===t.originality?i("span",[t._v("XỬ LÝ HỒ SƠ")]):i("span",[t._v("CHUẨN BỊ HỒ SƠ")])])],1),i("v-tab",{key:2,attrs:{href:"#tabs-2"},on:{click:function(e){t.loadTPHS()}}},[i("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{flat:""}},[t.thongTinChiTietHoSo.finishDate?i("span",[t._v("THÀNH PHẦN HỒ SƠ VÀ KẾT QUẢ")]):i("span",[t._v("THÀNH PHẦN HỒ SƠ")])])],1),t.paymentDetail?i("v-tab",{key:3,attrs:{href:"#tabs-3"},on:{click:function(e){t.loadThanhToan()}}},[i("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{flat:""}},[t._v("\n          THANH TOÁN\n        ")])],1):t._e(),1!==t.originality&&t.listLienThong.length>0?i("v-tab",{key:4,attrs:{href:"#tabs-4"},on:{click:function(e){t.loadHoSoLienThong()}}},[i("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{flat:""}},[t._v("\n          LIÊN THÔNG\n        ")])],1):t._e(),1!==t.originality?i("v-tab",{key:5,attrs:{href:"#tabs-5"},on:{click:function(e){t.loadDossierActions()}}},[i("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{flat:""}},[t._v("\n          TIẾN TRÌNH THỤ LÝ\n        ")])],1):t._e(),i("v-tabs-items",{staticStyle:{overflow:"visible!important"},attrs:{"reverse-transition":"fade-transition",transition:"fade-transition"},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[i("v-tab-item",{key:1,attrs:{id:"tabs-1","reverse-transition":"fade-transition",transition:"fade-transition"}},[i("div",{staticClass:"px-4 pt-2"},[t.btnStateVisible&&3===t.originality&&!t.thongTinChiTietHoSo.finishDate?i("div",{staticClass:"px-2 py-2",style:{border:t.filterNextActionEnable(t.btnDossierDynamics)||t.usersNextAction&&Array.isArray(t.usersNextAction)&&t.usersNextAction.length>0?"1px solid #4caf50":""}},[i("p",{staticClass:"mb-2"},[i("span",[t._v("Chuyển đến bởi: ")]),i("b",[t._v(" "+t._s(t.thongTinChiTietHoSo.lastActionUser))]),t.thongTinChiTietHoSo.lastActionNote&&"null"!==t.thongTinChiTietHoSo.lastActionNote?i("span",[i("span",[t._v(" - Ý kiến: ")]),i("span",{staticStyle:{color:"#0b72ba"}},[t._v(" "+t._s(t.thongTinChiTietHoSo.lastActionNote))])]):t._e()]),i("v-layout",{staticClass:"mb-0",attrs:{wrap:"",xs12:""}},[i("v-flex",{staticStyle:{width:"calc(100% - 100px)"}},[i("span",[t._v("Người thực hiện:  ")]),t.usersNextAction&&Array.isArray(t.usersNextAction)&&t.usersNextAction.length>0?i("span",[t._l(t.usersNextAction,function(e,a){return i("span",{key:e.userId},[t._v("\n                       "),i("b",[t._v(t._s(e.userName))]),a!==t.usersNextAction.length-1?i("span",[t._v(",")]):t._e()])}),t.stepOverdueNextAction?i("span",[t._v(" - ")]):t._e(),i("span",{style:t.stepOverdueNextAction&&t.stepOverdueNextAction.indexOf("Quá hạn")<0?"color:green":"color:red"},[t._v("\n                      "+t._s(t.stepOverdueNextAction)+"\n                    ")])],2):t._e()]),i("v-flex",{staticClass:"text-xs-right",staticStyle:{width:"100px"}},[i("v-btn",{staticClass:"mx-0 my-0",staticStyle:{height:"26px"},attrs:{disabled:!1===t.checkPemissionPhanCongLai(t.currentUser)&&String(t.currentUser["userId"])!==String(t.thongTinChiTietHoSo.lastActionUserId),small:"",color:"primary"},on:{click:t.reAsign}},[String(t.currentUser["userId"])===String(t.thongTinChiTietHoSo.lastActionUserId)||t.getUser("Administrator_data")||t.getUser("Administrator")?i("span",[t._v("Phân công lại")]):t._e(),t.getUser("Administrator_data")||t.getUser("Administrator")||String(t.currentUser["userId"])===String(t.thongTinChiTietHoSo.lastActionUserId)||!t.checkPemissionPhanCongLai(t.currentUser)?t._e():i("span",[t._v("Ủy quyền")])])],1)],1)],1):t._e(),t.thongTinChiTietHoSo.finishDate&&t.btnStateVisible?i("div",{staticClass:"px-2 py-2",staticStyle:{border:"1px solid #4caf50"}},[i("p",{staticClass:"mb-2"},[t._v("\n                Hồ sơ đã hoàn thành quá trình xử lý\n              ")])]):t._e()]),0!==t.checkInput&&t.filterNextActionEnable(t.btnDossierDynamics)?i("div",{staticStyle:{position:"relative"}},[i("v-expansion-panel",{staticClass:"expansion-pl"},[i("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"1"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"background-triangle-small"},[i("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),2===t.checkInput?i("span",[t._v("Chỉnh sửa thành phần hồ sơ")]):i("span",[t._v("Kiểm tra thành phần hồ sơ")]),t._v("     \n                ")]),i("thanh-phan-ho-so",{ref:"thanhphanhoso",attrs:{checkInput:t.checkInput,onlyView:!1,id:"ci",partTypes:t.inputTypes}})],1)],1)],1):t._e(),t.btnStateVisible?i("div",{staticClass:"px-4 py-3",staticStyle:{"border-bottom":"1px solid #dddddd"}},[t._l(t.btnDossierDynamics,function(e,a){return e.enable>0||"special"===e["autoEvent"]&&t.thongTinChiTietHoSo["permission"].indexOf("write")>=0?i("v-btn",{key:a,staticClass:"ml-0 mr-2",class:{deactive__btn:String(t.btnIndex)!==String(a)},attrs:{color:"primary",loading:t.loadingAction&&a===t.btnIndex,disabled:t.loadingAction||2===e.enable},nativeOn:{click:function(i){t.processPullBtnDetail(e,a)}}},[t._v("\n              "+t._s(e.actionName)+"\n              "),i("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])]):t._e()}),t._l(t.btnPlugins,function(e,a){return i("v-btn",{key:a,staticClass:"ml-0 mr-2",attrs:{color:"primary",loading:t.loadingPlugin,disabled:t.loadingPlugin},nativeOn:{click:function(i){t.processPullBtnplugin(e,a)}}},[t._v("\n              "+t._s(e.pluginName)+"\n              "),i("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])])}),t.btnStepsDynamics.length>0&&t.thongTinChiTietHoSo["permission"].indexOf("write")>=0?i("v-menu",{staticStyle:{display:"inline-block",position:"relative !important"},attrs:{bottom:"","offset-y":""}},[i("v-btn",{staticClass:"deactive__btn",attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[t._v("Khác   "),i("v-icon",{attrs:{size:"18"}},[t._v("arrow_drop_down")])],1),i("v-list",t._l(t.btnStepsDynamics,function(e,a){return i("v-list-tile",{key:a,on:{click:function(i){t.btnActionEvent(e,a)}}},[i("v-list-tile-title",[t._v(t._s(e.title))])],1)}),1)],1):t._e()],2):t._e(),t.loadingAction?i("content-placeholders",[i("content-placeholders-img"),i("content-placeholders-heading")],1):t._e(),t.dialogActionProcess&&!t.loadingAction?i("v-layout",{attrs:{wrap:""}},[t.showFormBoSungThongTinNgan?i("form-bo-sung-thong-tin",{ref:"formBoSungThongTinNgan",attrs:{dossier_id:Number(t.id),action_id:Number(t.actionIdCurrent)}}):t._e(),t.showPhanCongNguoiThucHien?i("phan-cong",{ref:"phancong",attrs:{type:t.type_assign},model:{value:t.assign_items,callback:function(e){t.assign_items=e},expression:"assign_items"}}):t._e(),t.showTaoTaiLieuKetQua?i("tai-lieu-ket-qua",{ref:"tailieuketqua",attrs:{detailDossier:t.thongTinChiTietHoSo,createFiles:t.createFiles}}):t._e(),t.showTraKetQua?i("tra-ket-qua",{attrs:{detailDossier:t.thongTinChiTietHoSo,createFiles:t.returnFiles}}):t._e(),t.showThuPhi?i("thu-phi",{attrs:{viaPortal:t.viaPortalDetail,detailDossier:t.thongTinChiTietHoSo},model:{value:t.payments,callback:function(e){t.payments=e},expression:"payments"}}):t._e(),t.showThanhToanDienTu?i("thanh-toan-dien-tu",{ref:"epayment",attrs:{paymentProfile:t.paymentProfile,detailDossier:t.thongTinChiTietHoSo}}):t._e(),t.showKyPheDuyetTaiLieu?i("ky-duyet",{ref:"kypheduyettailieu",style:""===t.dataEsign["signatureType"]?"display:none":"",attrs:{detailDossier:t.thongTinChiTietHoSo,dataEsign:t.dataEsign}}):t._e(),t.showExtendDateEdit?i("ngay-gia-han",{ref:"ngaygiahan",attrs:{type:t.typeExtendDate,extendDateEdit:t.extendDateEdit}}):t._e(),t.showEditDate?i("ngay-hen-tra",{ref:"ngayhentra",attrs:{dueDateEdit:t.dueDateEdit}}):t._e(),t.showPostalService?i("thong-tin-buu-chinh",{attrs:{postalService:t.thongTinChiTietHoSo}}):t._e(),t.showYkienCanBoThucHien?i("y-kien-can-bo",{ref:"ykiencanbo",attrs:{user_note:t.userNote,configNote:t.configNote}}):t._e(),i("div",{staticClass:"px-4 pt-0 pb-2",staticStyle:{width:"100%","border-bottom":"1px solid #dddddd"}},[t.dialogActionProcess?i("v-btn",{staticClass:"ml-0 mr-2",attrs:{color:"primary",loading:t.loadingActionProcess,disabled:t.loadingActionProcess},nativeOn:{click:function(e){t.processAction(t.dossierItemDialogPick,t.itemDialogPick,t.resultDialogPick,t.indexDialogPick,!1)}}},[i("v-icon",[t._v("save")]),t._v(" \n                Xác nhận\n                "),i("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1):t._e()],1)],1):t._e(),t.btnStateVisible?t._e():i("v-alert",{staticClass:"mx-3",attrs:{outline:"",color:t.alertObj.color,icon:t.alertObj.icon,value:!0}},[t._v("\n            "+t._s(t.alertObj.message)+"\n          ")]),t.rollbackable||t.printDocument?i("div",{staticClass:"py-2",staticStyle:{width:"100%","border-bottom":"1px solid #dddddd"}},[t.printDocument?i("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.printViewDocument()}}},[t._v("In văn bản hành chính")]):t._e()],1):t._e()],1),i("v-tab-item",{key:2,attrs:{id:"tabs-2","reverse-transition":"fade-transition",transition:"fade-transition"}},[i("v-expansion-panel",{staticClass:"expansion-pl ext__form",attrs:{expand:""}},[i("v-expansion-panel-content",{attrs:{value:!0}},[i("div",{staticClass:"text-bold",attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"background-triangle-small"},[t._v(" I.")]),t._v("\n                Tài liệu nộp     \n                "),0===t.thongTinChiTietHoSo.sampleCount||t.thongTinChiTietHoSo.online?t._e():i("span",[t._v("("+t._s(0===t.thongTinChiTietHoSo.sampleCount?"?":t.thongTinChiTietHoSo.sampleCount)+" bộ hồ sơ)")])]),i("thanh-phan-ho-so",{ref:"thanhphanhoso1",attrs:{onlyView:!0,id:"nm",partTypes:t.inputTypes}})],1)],1),t.stateViewResult?i("v-expansion-panel",{staticClass:"expansion-pl ext__form",attrs:{expand:""}},[i("v-expansion-panel-content",{attrs:{value:!0}},[i("div",{staticClass:"text-bold",attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"background-triangle-small"},[t._v(" II.")]),t._v("\n                Kết quả xử lý\n              ")]),i("thanh-phan-ho-so",{ref:"thanhphanhoso2",attrs:{onlyView:!0,id:"kq",partTypes:t.outputTypes},on:{"tp:change-state-view-result":t.changeStateViewResult}})],1)],1):t._e(),t.documents&&t.documents.length>0?i("v-expansion-panel",{staticClass:"expansion-pl ext__form",attrs:{expand:""}},[i("v-expansion-panel-content",{attrs:{value:!0}},[i("div",{staticClass:"text-bold",attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"background-triangle-small"},[t.stateViewResult?i("span",[t._v("III")]):i("span",[t._v("II")])]),t._v("\n                Văn bản hành chính\n              ")]),t._l(t.documents,function(e,a){return i("div",{key:a},[i("v-card",[i("v-layout",{staticClass:"px-3 py-1 align-center row-list-style",attrs:{wrap:""}},[i("v-flex",{attrs:{xs11:""}},[i("span",{staticClass:"text-bold",staticStyle:{position:"absolute"}},[t._v(t._s(a+1)+".")]),i("div",{staticStyle:{"margin-left":"30px"}},[t._v(t._s(e.documentName))])]),i("v-flex",{staticClass:"text-right",attrs:{xs1:""}},[i("v-tooltip",{attrs:{top:""}},[i("v-btn",{staticClass:"mx-0 my-0",staticStyle:{height:"25px",width:"25px"},attrs:{slot:"activator",fab:"",dark:"",small:"",color:"primary"},on:{click:function(i){t.viewFileDocument(e)}},slot:"activator"},[i("v-icon",{staticStyle:{"font-size":"14px"}},[t._v("visibility")])],1),i("span",[t._v("Xem")])],1)],1)],1)],1)],1)})],2)],1):t._e()],1),i("v-tab-item",{key:3,attrs:{id:"tabs-3","reverse-transition":"fade-transition",transition:"fade-transition"}},[i("v-card",[i("chi-tiet-thanh-toan",{ref:"thongtinthanhtoan",attrs:{payments:t.paymentDetail,dossierDetail:t.thongTinChiTietHoSo}})],1)],1),t.listLienThong.length>0?i("v-tab-item",{key:4,attrs:{id:"tabs-4","reverse-transition":"fade-transition",transition:"fade-transition"}},[i("v-card",[t.listLienThong.length>0?i("ho-so-lien-thong",{attrs:{listLienThong:t.listLienThong,dossierDetail:t.thongTinChiTietHoSo}}):i("v-card-text",[i("v-flex",{staticClass:"text-xs-center",attrs:{xs12:""}},[i("span",[t._v("Không có hồ sơ liên thông")])])],1)],1)],1):t._e(),1!==t.originality?i("v-tab-item",{key:5,attrs:{id:"tabs-5","reverse-transition":"fade-transition",transition:"fade-transition"}},[i("v-flex",{staticStyle:{height:"42px"},attrs:{xs12:""}},[i("v-radio-group",{staticClass:"absolute__btn pt-1",staticStyle:{width:"350px"},attrs:{row:""},on:{change:function(e){t.changeTypeTienTrinh(e)}},model:{value:t.typeTienTrinh,callback:function(e){t.typeTienTrinh=e},expression:"typeTienTrinh"}},[i("v-radio",{attrs:{label:"Xem dạng bảng",value:1}}),i("v-radio",{attrs:{label:"Xem dạng biểu đồ",value:2}})],1)],1),1===t.typeTienTrinh?i("v-data-table",{staticClass:"table-landing table-bordered",attrs:{headers:t.headers,items:t.dossierActions,"hide-actions":"","no-data-text":"Không có dữ liệu"},scopedSlots:t._u([{key:"headerCell",fn:function(e){return[i("v-tooltip",{attrs:{bottom:""}},[i("span",{attrs:{slot:"activator"},slot:"activator"},[t._v("\n                  "+t._s(e.header.text)+"\n                ")]),i("span",[t._v("\n                  "+t._s(e.header.text)+"\n                ")])])]}},{key:"items",fn:function(e){return[i("td",{staticClass:"text-xs-center"},[t._v(t._s(e.index+1))]),i("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.sequenceRole))]),i("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.sequenceName))]),i("td",{staticClass:"text-xs-left"},[t._v(t._s(t._f("getThoiHanQuyDinh")(e.item.durationCount)))]),i("td",{staticClass:"text-xs-left"},[t._v(t._s(t._f("dateTimeView")(e.item.startDate)))]),i("td",{staticClass:"text-xs-left"},t._l(e.item.assignUsers,function(e){return i("div",{key:e.userId},[t._v("\n                  "+t._s(e.userName)+" "),i("br")])}),0),i("td",{staticClass:"text-xs-left"},[t._l(e.item.actions,function(e,a){return i("div",{key:a},[t._v("\n                  "+t._s(t._f("dateTimeView")(e.createDate))+" : "),i("span",{staticStyle:{color:"#0b72ba"}},[t._v(t._s(e.actionName))]),e.actionNote&&"null"!==e.actionNote?i("span",[t._v(" - "),i("i",[t._v(t._s(e.actionNote))])]):t._e()])}),e.item.statusText?i("div",[i("span",{staticStyle:{color:"green"}},[t._v(t._s(e.item.statusText))])]):t._e()],2)]}}])}):i("div",[t.loadingMermaidgraph?i("content-placeholders",[i("content-placeholders-img"),i("content-placeholders-heading")],1):t._e(),i("div",{staticClass:"mermaid",staticStyle:{padding:"15px"},attrs:{id:"mermaid_dossier"}})],1)],1):t._e()],1)],1),i("v-tabs",{staticClass:"mb-4",attrs:{"icons-and-text":""},model:{value:t.activeTab2,callback:function(e){t.activeTab2=e},expression:"activeTab2"}},[i("v-tabs-slider",{attrs:{color:"primary"}}),1===t.originality&&"done"===t.thongTinChiTietHoSo["dossierStatus"]?i("v-tab",{key:1,attrs:{href:"#tabs-1b"}},[i("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{flat:""}},[t._v("\n          ĐÁNH GIÁ\n        ")])],1):t._e(),i("v-tab",{key:2,attrs:{href:"#tabs-2b"}},[i("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{flat:""}},[t._v("\n          TRAO ĐỔI\n        ")])],1),i("v-tab",{key:3,attrs:{href:"#tabs-3b"},on:{click:function(e){t.loadDossierLogs()}}},[i("v-btn",{staticClass:"px-0 py-0 mx-0 my-0",attrs:{flat:""}},[t._v("\n          NHẬT KÝ SỬA ĐỔI\n        ")])],1),i("v-tabs-items",{attrs:{"reverse-transition":"fade-transition",transition:"fade-transition"},model:{value:t.activeTab2,callback:function(e){t.activeTab2=e},expression:"activeTab2"}},[1===t.originality&&"done"===t.thongTinChiTietHoSo["dossierStatus"]?i("v-tab-item",{key:1,attrs:{id:"tabs-1b","reverse-transition":"fade-transition",transition:"fade-transition"}},[i("div",{staticClass:"px-2 py-2"},[t._l(t.votingItems,function(e,a){return t.votingItems.length>0?i("div",{key:a},[i("div",{staticClass:"text-bold"},[t._v("\n                "+t._s(a+1)+".  "+t._s(e.subject)+"\n              ")]),i("v-radio-group",{staticClass:"ml-3 pt-2",attrs:{row:""},model:{value:e.selected,callback:function(i){t.$set(e,"selected",i)},expression:"item.selected"}},t._l(e.choices,function(e,a){return i("v-radio",{key:a,attrs:{label:e,value:a+1,disabled:3===t.originality}})}),1),i("v-layout",{staticClass:"ml-3",staticStyle:{"margin-top":"-10px"},attrs:{wrap:""}},t._l(e.answers,function(a,s){return i("v-flex",{key:s,staticStyle:{"margin-left":"45px"}},[i("span",{staticClass:"text-bold",staticStyle:{color:"green"}},[t._v(t._s(a)+"/"+t._s(e.answersCount))])])}),1)],1):t._e()}),0===t.votingItems.length?i("div",{staticClass:"mx-3"},[i("v-alert",{attrs:{outline:"",color:"warning",icon:"priority_high",value:!0}},[t._v("\n                Không có đánh giá\n              ")])],1):t._e(),t.votingItems.length>0&&1===t.originality?i("div",{staticClass:"ml-3 mt-4"},[i("v-btn",{attrs:{color:"primary",loading:t.loadingVoting,disabled:t.loadingVoting},on:{click:t.submitVoting}},[t._v("Gửi đánh giá")])],1):t._e()],2)]):t._e(),i("v-tab-item",{key:2,attrs:{id:"tabs-2b","reverse-transition":"fade-transition",transition:"fade-transition"}},[t.thongTinChiTietHoSo.online&&!t.thongTinChiTietHoSo.originDossierNo?i("div",[i("v-expansion-panel",{staticClass:"expansion-pl"},[i("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"1"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"background-triangle-small"},[i("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),3===t.originality?i("span",[t._v("Trao đổi với người làm thủ tục")]):i("span",[t._v("Trao đổi với cán bộ xử lý")])]),i("v-card",[i("v-card-text",{staticClass:"px-0 py-0 pr-3"},[i("v-flex",{attrs:{xs12:""}},[t.dossierSyncs.length>0?i("ul",{staticClass:"timeline overflowComment",staticStyle:{"max-height":"300px",overflow:"auto"}},t._l(t.dossierSyncs,function(e,a){return 0!==e.syncType&&0!==e.infoType?i("li",{key:a,staticClass:"timeline-item"},[i("div",{staticClass:"timeline-badge",class:2===e.syncType?"primary":"warning"},[i("v-icon",{attrs:{color:"grey lighten-4",size:"20"}},[t._v(t._s(2===e.syncType?"account_balance":"perm_identity"))])],1),i("div",{staticClass:"timeline-panel"},[i("div",{staticClass:"timeline-heading"},[i("div",{staticClass:"timeline-panel-controls"},[i("div",{staticClass:"timestamp"},[i("small",{staticClass:"text-muted"},[t._v(t._s(t._f("dateTimeView")(e.createDate)))])])])]),i("div",{staticClass:"timeline-body"},[2===e.syncType?i("span",[t._v(t._s(e.actionName)+" ")]):t._e(),2===e.syncType&&e.actionNote&&"null"!==e.actionNote?i("span",[t._v(":")]):t._e(),e.actionNote&&"null"!==e.actionNote?i("span",{staticStyle:{color:"#0b72ba"}},[t._v(t._s(e.actionNote))]):t._e()])])]):t._e()}),0):i("div",{staticClass:"no-comments no-data my-2"},[i("i",{staticClass:"fa fa-comments",staticStyle:{"font-size":"25px"}}),i("br"),i("span",{staticStyle:{"font-size":"18px"}},[t._v("Không có trao đổi nào")])]),i("div",{staticStyle:{position:"relative"}},[i("v-text-field",{staticClass:"pl-4 my-3",attrs:{label:"Nhập trao đổi",box:""},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.postChat(e):null}},model:{value:t.messageChat,callback:function(e){t.messageChat=e},expression:"messageChat"}}),i("v-icon",{staticClass:"hover-pointer",staticStyle:{position:"absolute",right:"10px",bottom:"18px","font-size":"14px"},attrs:{color:"blue"},on:{click:t.postChat}},[t._v("send")])],1)])],1)],1)],1)],1)],1):t._e(),1!==t.originality?i("div",{staticStyle:{position:"relative"}},[i("v-expansion-panel",{staticClass:"expansion-pl"},[i("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"1"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"background-triangle-small"},[i("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("\n                  Trao đổi nội bộ      \n                ")]),i("comment",{ref:"comment",attrs:{classPK:t.id,className:t.className}})],1)],1)],1):t._e()]),i("v-tab-item",{key:3,attrs:{id:"tabs-3b","reverse-transition":"fade-transition",transition:"fade-transition"}},t._l(t.listHistoryProcessing,function(e,a){return i("div",{key:e.dossierLogId,staticClass:"list_history_style"},[i("td",{staticClass:"px-2 pt-2",class:a%2!==0?"col-tien-trinh-1":"col-tien-trinh-2"},[t._v(t._s(a+1))]),i("td",{staticClass:"text-xs-left px-2 py-2"},[i("p",{staticClass:"mb-1"},[i("span",[t._v(t._s(t._f("dateTimeView")(e.createDate)))]),t._v(" - "),i("b",[t._v(t._s(e.author))]),t._v(" \n                  : "),i("span",{staticStyle:{color:"#0b72ba"}},[t._v(t._s(e.payload.stepName))])]),""!==e.content&&null!==e.content?i("p",{staticClass:"mb-1"},[t._v("Ý kiến: "),i("span",{domProps:{innerHTML:t._s(e.content)}})]):t._e(),t._l(e.payload.files,function(e){return i("p",{key:e.dossierFileId,staticClass:"history__download__link hover-pointer-download mb-1",staticStyle:{cursor:"pointer"},attrs:{title:"Tải file"},on:{click:function(i){i.preventDefault(),i.stopPropagation(),t.downloadFileLogs(e.dossierFileId)}}},[i("v-icon",[t._v("file_download")]),i("span",[t._v(t._s(e.fileName))])],1)})],2)])}),0)],1)],1)],1),i("object",{attrs:{id:"plugin0",type:"application/x-cryptolib05plugin",width:"0",height:"0"}}),i("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"700px"},model:{value:t.dialog_reAsign,callback:function(e){t.dialog_reAsign=e},expression:"dialog_reAsign"}},[i("v-card",[i("v-card-title",{staticClass:"headline"},[t._v("\n        Chọn người thực hiện\n      ")]),i("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialog_reAsign=!1}}},[i("v-icon",[t._v("clear")])],1),i("v-card-text",[i("phan-cong-lai",{ref:"phanconglai",attrs:{type:1},model:{value:t.reAsignUsers,callback:function(e){t.reAsignUsers=e},expression:"reAsignUsers"}})],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{staticClass:"mr-3",attrs:{color:"primary",loading:t.loadingAction,disabled:t.loadingAction},on:{click:function(e){t.doReAsign()}}},[i("v-icon",[t._v("how_to_reg")]),t._v("  \n          Phân công\n          "),i("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1),i("v-btn",{staticClass:"mr-3",attrs:{color:"primary"},nativeOn:{click:function(e){t.dialog_reAsign=!1}}},[i("v-icon",[t._v("reply")]),t._v("  \n          Hủy\n        ")],1)],1)],1)],1),i("v-dialog",{staticStyle:{overflow:"hidden"},attrs:{persistent:"",overlay:!1,"max-width":800,transition:"dialog-transition"},model:{value:t.dialogPlugin,callback:function(e){t.dialogPlugin=e},expression:"dialogPlugin"}},[i("v-card",[i("v-card-title",{staticClass:"px-0 py-0"},[i("v-toolbar",{attrs:{dark:"",color:"primary",height:"40"}},[null!==t.modelPlugin&&void 0!==t.modelPlugin?i("div",{staticClass:"text-bold"},[t._v(t._s(t.modelPlugin["pluginName"]))]):t._e(),i("v-spacer"),i("v-toolbar-items",[i("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogPlugin=!1}}},[i("v-icon",[t._v("close")])],1)],1)],1)],1),i("v-card-text",{staticClass:"pr-0 py-0"},[null===t.modelPlugin?i("div",{staticClass:"text-xs-center center-all",staticStyle:{width:"100%",height:"400px"}},[i("v-progress-circular",{attrs:{indeterminate:"",size:100,color:"purple"}})],1):t.modelPlugin.pending?i("div",[t._v("\n          Hồ sơ chờ đồng bộ ...\n        ")]):t.modelPlugin["plugin"]?i("div",[t.modelPlugin.pdf?i("div",[i("div",{staticClass:"flex xs12 sm12 text-center"},[t.modelPlugin.no_pdf?t._e():i("object",{attrs:{id:"dossierPDFViewPlugin",data:"",width:"100%",height:"100%"}},[i("iframe",{staticStyle:{"min-height":"500px !important","padding-left":"0"},attrs:{src:t.modelPlugin.url,width:"100%"}})]),i("div",{staticClass:"text-center",attrs:{id:"dossierPDFViewNotFound"}},[t._v(t._s(t.modelPlugin.no_pdf))])])]):t._e(),t.modelPlugin["html"]?i("div",[i("input",{staticClass:"dossierFilePartNo",attrs:{type:"hidden",id:"dossierFilePartNo",name:""}}),i("div",{staticClass:"expansion-panel__header",attrs:{id:"alpacajs_form_plugin"}}),i("div",{staticClass:"text-center",attrs:{id:"dossierAlpacaNotFound"}},[t._v(t._s(t.modelPlugin.no_html))])]):t._e()]):i("div")])],1)],1)],1)},s=[],o=i("9a33"),n=o["a"],r=i("2877"),l=Object(r["a"])(n,a,s,!1,null,null,null);l.options.__file="XemChiTietHoSoDetailCanBo.vue";e["default"]=l.exports},bbd0:function(t){t.exports={initData:{menuConfigToDo:"/o/rest/v2_1/menuconfigs/todo",counterMenuStep:"/o/rest/v2/statistics/dossiers/todo",getListThuTucHanhChinh:"/o/rest/v2/onegate/serviceconfigs/processes",serviceInfoApi:"/o/rest/v2/serviceinfos",regionApi:"/o/rest/v2/dictcollections",postDossierApi:"/o/rest/v2/dossiers",dossierTemplatesApi:"/o/rest/v2/dossiertemplates",applicantApi:"/o/rest/v2/applicants",dossierlogsApi:"/o/rest/v2/dossierlogs",dossierApi:"/o/rest/v2/dossiers",serviceProcessesApi:"/o/rest/v2/serviceprocesses",serviceConfigApi:"/o/rest/v2/serviceconfigs",serviceConfigByGovApi:"/o/rest/v2/serviceconfigs/govagencies",getNextAction:"/o/rest/v2/dossiers",documentApi:"/o/rest/v2_1/dossiers",stepConfigApi:"/o/rest/v2_1/stepconfigs",getServiceConfigs:"/o/rest/v2/serviceconfigs",commentApi:"/o/rest/v2/comments"},renderURLInit:"?p_p_id=OneGate&p_p_lifecycle=2&p_p_state=exclusive&p_p_mode=view&p_p_resource_id=renderURLInit",dossierTemplates:[{partNo:"2",partName:"Giấy đăng ký hợp đồng xuất khẩu sản phẩm thủy sản (tải bản scan)",partTip:"",partType:0,multiple:!1,required:!1,esign:!1,fileTemplateNo:"",hasForm:!0,fileType:0},{partNo:"2",partName:"Giấy đăng ký hợp đồng xuất khẩu sản phẩm thủy sản (tải bản scan)",partTip:"",partType:0,multiple:!1,required:!1,esign:!1,fileTemplateNo:"",hasForm:!0,fileType:0},{partNo:"2",partName:"Giấy đăng ký hợp đồng xuất khẩu sản phẩm thủy sản (tải bản scan)",partTip:"",partType:0,multiple:!1,required:!1,esign:!1,fileTemplateNo:"",hasForm:!0,fileType:0},{partNo:"2",partName:"Giấy đăng ký hợp đồng xuất khẩu sản phẩm thủy sản (tải bản scan)",partTip:"",partType:0,multiple:!1,required:!1,esign:!1,fileTemplateNo:"",hasForm:!0,fileType:0},{partNo:"2",partName:"Giấy đăng ký hợp đồng xuất khẩu sản phẩm thủy sản (tải bản scan)",partTip:"",partType:0,multiple:!1,required:!1,esign:!1,fileTemplateNo:"",hasForm:!0,fileType:0}],advSearchTools:[{index:0,value:"adv_0",text:"Lọc hồ sơ theo năm - tháng - ngày",type:"select",dataSource:"data",spec:"year_month_day",display:!1,disabled:!1},{index:1,value:"adv_1",text:"Lọc hồ sơ theo top",type:"select",dataSource:"data",spec:"top",display:!1,disabled:!1},{index:2,value:"adv_2",text:"Lọc trạng thái hồ sơ",type:"select",dataSource:"getStatusLists",spec:"status",display:!1,disabled:!1},{index:3,value:"adv_3",text:"Lọc trạng thái con",type:"select",dataSource:"getSubstatusLists",spec:"substatus",display:!1,disabled:!1},{index:4,value:"adv_4",text:"Lọc theo mã đơn vị",type:"select",dataSource:"getAgencyLists",spec:"agency",display:!1,disabled:!1},{index:5,value:"adv_5",text:"Lọc theo mã thủ tục",type:"select",dataSource:"getServiceLists",spec:"service",display:!1,disabled:!1},{index:6,value:"adv_6",text:"Lọc theo lĩnh vực",type:"select",dataSource:"getDomainLists",spec:"domain",display:!1,disabled:!1},{index:7,value:"adv_7",text:"Tìm theo mã sổ theo dõi",type:"text",spec:"register",display:!1,disabled:!1}]}},be4d:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{attrs:{fluid:""}},[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{staticClass:"text-xs-center",attrs:{xs12:"","mt-5":""}},[i("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1)],1)],1)},s=[],o={},n=o,r=i("2877"),l=Object(r["a"])(n,a,s,!1,null,null,null);l.options.__file="NotFound.vue";e["a"]=l.exports},bf3f:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-expansion-panel",{staticClass:"expansion-pl"},[i("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"1"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"background-triangle-small"},[i("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("XÁC NHẬN THU PHÍ\n    ")]),i("v-card",[i("v-card-text",[5===t.payment_type?i("div",{staticClass:"pl-3 fee-info"},[i("v-checkbox",{attrs:{label:"Phí phải nộp: "+t.currency(t.payments.feeAmount)+" VNĐ"},model:{value:t.checkPaid,callback:function(e){t.checkPaid=e},expression:"checkPaid"}}),i("span",{staticClass:"red--text"},[t._v("* ")]),t._v(" Đánh dấu để xác định người làm thủ tục đã hoàn thành nộp phí.\n        ")],1):t._e()])],1)],1)],1)},s=[],o={props:{payments:{type:Object,default:()=>{}},payment_type:{type:Number,default:()=>5}},data:()=>({dossierId:"",loadingAction:!1,feeAmount:"",checkPaid:!1}),computed:{loading(){return this.$store.getters.loading},loadingTable(){return this.$store.getters.loadingTable}},created(){var t=this;t.$nextTick(function(){})},methods:{initData(t){var e=this;e.dossierId=t,e.$store.dispatch("getDetailDossier",t).then(t=>{e.$store.dispatch("loadDossierPayments",t).then(function(t){e.feeAmount=t.feeAmount}).catch(function(t){console.log(t)})}).catch(t=>{console.log(t)})},currency(t){if(t){let e=(t/1).toFixed(0).replace(".",",");return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}return""}}},n=o,r=i("2877"),l=Object(r["a"])(n,a,s,!1,null,null,null);l.options.__file="XacNhanThuPhi.vue";e["a"]=l.exports},c23d:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"taotailieuketqua",staticStyle:{"background-color":"white",width:"100%"}},[i("v-expansion-panel",{staticClass:"expansion-pl"},[i("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"1"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"background-triangle-small"},[i("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v(" Tài liệu kết quả\n      ")]),i("v-card",t._l(t.createFiles,function(e,a){return i("div",{key:e.partNo+"cr",staticClass:"form_alpaca",staticStyle:{position:"relative"}},[i("v-expansion-panel",{staticClass:"expaned__list__data"},[i("v-expansion-panel-content",{attrs:{"hide-actions":"",value:!1}},[i("div",{staticStyle:{"background-color":"#fff"},attrs:{slot:"header"},on:{click:function(e){t.stateView=!1}},slot:"header"},[i("div",{staticStyle:{"align-items":"center",background:"#fff","padding-left":"25px"},style:{width:t.checkStyle(e)}},t._l(t.dossierFilesItems,function(a,s){return e.partNo+t.id===a.dossierPartNo+t.id?i("div",{key:s+"cr"},[i("div",{staticStyle:{width:"calc(100% - 370px)",display:"flex","align-items":"center",background:"#fff","padding-left":"25px","font-size":"12px"}},[i("span",{staticClass:"text-bold"},[t._v(t._s(s+1)+". ")]),i("span",{staticClass:"ml-3",staticStyle:{cursor:"pointer"},on:{click:function(e){e.stopPropagation(),t.viewFile2(a)}}},[a.eForm?i("v-icon",[t._v("border_color")]):i("v-icon",[t._v("attach_file")]),t._v("\n                        "+t._s(a.displayName)+" - \n                        "),i("i",[t._v(t._s(a.modifiedDate))])],1)])]):t._e()}),0)]),e.eForm?i("v-card",[i("v-card-text",{staticStyle:{"background-color":"rgba(244, 247, 213, 0.19)"}},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{staticClass:"text-xs-right",attrs:{xs12:""}},[e.daKhai&&e.eForm?i("v-btn",{attrs:{color:"primary"},on:{click:function(i){t.previewFileEfom(e,a)}}},[t._v("In")]):t._e(),i("div",{attrs:{id:"formAlpaca"+e.partNo+t.id}})],1)],1)],1)],1):t._e()],1)],1)],1)}),0),i("v-dialog",{staticStyle:{overflow:"hidden"},attrs:{"max-width":"900",transition:"fade-transition"},model:{value:t.dialogPDF,callback:function(e){t.dialogPDF=e},expression:"dialogPDF"}},[i("v-card",[i("v-card-title",{staticClass:"headline"},[t._v("File đính kèm")]),i("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogPDF=!1}}},[i("v-icon",[t._v("clear")])],1),t.dialogPDFLoading?i("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[i("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):t._e(),i("iframe",{directives:[{name:"show",rawName:"v-show",value:!t.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPDFPreview"+t.id,src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1)],1)],1)],1)},s=[],o=i("6570"),n=o["a"],r=i("2877"),l=Object(r["a"])(n,a,s,!1,null,null,null);l.options.__file="TraKetQua.vue";e["a"]=l.exports},cade:function(t,e,i){"use strict";i.r(e);i("bf40"),i("61e3"),i("680c"),i("8685");var a=i("a026"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-app",{staticClass:"onegate__fe"},[0===t.trangThaiHoSoList.length||t.viewMobile?t._e():i("v-navigation-drawer",{class:{detail_state:0!==t.detailState},attrs:{app:"",clipped:"",floating:"",width:"240"}},[i("div",{staticClass:"mx-2"},[i("v-btn",{attrs:{block:"",color:"primary",loading:t.loadingGov,disabled:t.loadingGov},nativeOn:{click:function(e){t.doAddDVC()}}},[t._v("\n        Thêm mới hồ sơ\n        "),i("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])])],1),t.loading?i("content-placeholders",{staticClass:"mt-3"},[i("content-placeholders-text",{attrs:{lines:7}})],1):i("v-list",{staticClass:"py-0 nav_trang_thai_ho_so"},t._l(t.trangThaiHoSoList,function(e,a){return i("v-list-group",{key:a,ref:"listGroupCustom",refInFor:!0,attrs:{"prepend-icon":"description","append-icon":(e.hasOwnProperty("items"),""),"no-action":""},model:{value:e.active,callback:function(i){t.$set(e,"active",i)},expression:"item.active"}},[i("v-list-tile",{attrs:{slot:"activator"},on:{click:function(i){t.toTableIndexing(e,a)}},slot:"activator"},[i("v-list-tile-content",[i("v-list-tile-title",[t._v(t._s(e.title))]),e.hasOwnProperty("counter")&&e["counter"]>-1?i("span",{staticClass:"status__counter_group status__counter"},[t._v("\n              "+t._s(e.counter)+"\n            ")]):i("span",{staticClass:"status__counter_group status__counter"},[i("v-progress-circular",{attrs:{width:1,size:16,indeterminate:"",color:"red"}})],1)],1)],1),t._l(e.items,function(e){return i("v-list-tile",{key:e.stepCode,class:{"list__tile--active":String(t.currentStep)===String(e.stepCode)},nativeOn:{click:function(i){t.filterSteps(e,a)}}},[i("v-list-tile-action",[String(t.currentStep)===String(e.stepCode)?i("v-icon",{attrs:{color:"primary"}},[t._v("play_arrow")]):t._e()],1),i("v-list-tile-content",[i("v-list-tile-title",[t._v(t._s(e.menuStepName))]),e.hasOwnProperty("counter")&&e["counter"]>-1?i("span",{staticClass:"status__counter"},[t._v("\n              "+t._s(e.counter)+"\n            ")]):i("span",{staticClass:"status__counter"},[i("v-progress-circular",{attrs:{width:1,size:16,indeterminate:"",color:"red"}})],1)],1)],1)})],2)}),1)],1),0!==t.trangThaiHoSoList.length&&t.viewMobile?i("div",[i("div",{staticClass:"row-header mb-2 py-2",staticStyle:{"background-color":"#070f52"}},[i("div",{staticClass:"ml-2 text-bold white--text"},[i("span",[t._v("QUẢN LÝ HỒ SƠ")])])]),i("div",{staticClass:"mx-2"},[i("v-btn",{attrs:{block:"",color:"primary",loading:t.loadingGov,disabled:t.loadingGov},nativeOn:{click:function(e){t.doAddDVC()}}},[t._v("\n        Thêm mới hồ sơ\n        "),i("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])])],1),i("div",{staticStyle:{"max-height":"200px",overflow:"hidden","overflow-y":"scroll"}},[t.loading?i("content-placeholders",{staticClass:"mt-3"},[i("content-placeholders-text",{attrs:{lines:7}})],1):i("v-list",{staticClass:"py-0 nav_trang_thai_ho_so"},t._l(t.trangThaiHoSoList,function(e,a){return i("v-list-group",{key:a,ref:"listGroupCustom",refInFor:!0,attrs:{"prepend-icon":"description","append-icon":(e.hasOwnProperty("items"),""),"no-action":""},model:{value:e.active,callback:function(i){t.$set(e,"active",i)},expression:"item.active"}},[i("v-list-tile",{staticClass:"px-0",attrs:{slot:"activator"},on:{click:function(i){t.toTableIndexing(e,a)}},slot:"activator"},[i("v-list-tile-content",[i("v-list-tile-title",[t._v(t._s(e.title))]),e.hasOwnProperty("counter")&&e["counter"]>-1&&3!==e["menuType"]?i("span",{staticClass:"status__counter_group status__counter"},[t._v("\n                "+t._s(e.counter)+"\n              ")]):3!==e["menuType"]?i("span",{staticClass:"status__counter_group status__counter"},[i("v-progress-circular",{attrs:{width:1,size:16,indeterminate:"",color:"red"}})],1):t._e()],1)],1),t._l(e.items,function(a){return e.items&&e.items.length>1?i("v-list-tile",{key:a.stepCode,staticClass:"px-0",class:{"list__tile--active":String(t.currentStep)===String(a.stepCode)},nativeOn:{click:function(e){t.filterSteps(a)}}},[i("v-list-tile-action",[String(t.currentStep)===String(a.stepCode)?i("v-icon",{attrs:{color:"primary"}},[t._v("play_arrow")]):t._e()],1),i("v-list-tile-content",[i("v-list-tile-title",[t._v(t._s(a.menuStepName))]),a.hasOwnProperty("counter")&&a["counter"]>-1?i("span",{staticClass:"status__counter"},[t._v("\n                "+t._s(a.counter)+"\n              ")]):i("span",{staticClass:"status__counter"},[i("v-progress-circular",{attrs:{width:1,size:16,indeterminate:"",color:"red"}})],1)],1)],1):t._e()})],2)}),1)],1)]):t._e(),i("v-content",[i("router-view"),t.loading||0!==t.trangThaiHoSoList.length?t._e():i("v-alert",{attrs:{outline:"",color:"warning",icon:"priority_high",value:!0}},[t._v("\n      Bạn không có quyền thao tác!\n    ")])],1),i("object",{attrs:{id:"plugin0",type:"application/x-cryptolib05plugin",width:"0",height:"0"}})],1)},o=[],n=i("a18c"),r=i("9029"),l={data:()=>({isCallBack:!0,trangThaiHoSoList:[],loading:!0,currentStep:"0",counterData:[],detailState:0}),computed:{currentIndex(){return this.$store.getters.index},loadingGov(){return this.$store.getters.loadingGov},activeGetCounter(){return this.$store.getters.activeGetCounter},viewMobile(){return r["isMobile"]},pathLanding(){return r["isMobile"]?"/m/danh-sach-ho-so":"/danh-sach-ho-so"}},created(){var t=this;t.$nextTick(function(){t.loading=!0,t.$store.dispatch("loadMenuConfigToDo").then(function(e){if(t.loading=!1,0!==e.length){t.trangThaiHoSoList=e;let i=t.$router.history.current,a=t.$router.history.current.params;a.hasOwnProperty("index")||a.hasOwnProperty("serviceCode")||"ThanhToanThanhCong"===i.name?a.hasOwnProperty("index")&&(t.trangThaiHoSoList[a.index]["active"]=!0):(t.trangThaiHoSoList[0]["active"]=!0,n["a"].push({path:t.pathLanding+"/0",query:{q:t.trangThaiHoSoList[0]["queryParams"]}})),t.loadingCounter()}})})},updated(){var t=this;t.$nextTick(function(){let e=t.$router.history.current.params;e.hasOwnProperty("index")&&t.isCallBack&&(t.isCallBack=!1,t.$store.commit("setIndex",e.index),e.hasOwnProperty("id")?t.detailState=1:t.detailState=0)})},watch:{$route:function(t,e){let i=this,a=t.params,s=t.query;s.hasOwnProperty("step")?i.currentStep=String(s.step):i.currentStep="0",s.hasOwnProperty("recount")&&i.loadingCounter(),a.hasOwnProperty("id")?i.detailState=1:i.detailState=0},activeGetCounter(t){var e=this;setTimeout(function(){e.loadingCounter()},300)}},methods:{toTableIndexing(t,e){let i=this;this.$store.commit("setIndex",e),n["a"].push({path:i.pathLanding+"/"+e,query:{renew:Math.floor(100*Math.random())+1,q:t.queryParams}})},filterSteps(t,e){let i=this,a=this.$router.history.current.query,s=this.$router.history.current.params;console.log("currentParams",s),console.log("currentQuery",a);let o=this.trangThaiHoSoList[e].queryParams;if(null!==a&&void 0!==a){let t=o.lastIndexOf("=");t>0&&(o=o.substr(0,t+1))}this.currentStep=String(t.stepCode),n["a"].push({path:i.pathLanding+"/"+s.index,query:{renew:Math.floor(100*Math.random())+1,q:o+t.stepCode,step:t.stepCode}})},loadingCounter(){let t=this,e={originality:t.getOriginality()};t.$store.dispatch("loadingCounterHoSo",e).then(function(e){t.counterData=e.data;for(let i in t.trangThaiHoSoList)if(t.trangThaiHoSoList[i]["counter"]=0,t.trangThaiHoSoList[i].hasOwnProperty("items")){let e=0;for(let a in t.trangThaiHoSoList[i].items){t.trangThaiHoSoList[i].items[a]["counter"]=0;for(let s in t.counterData)if(String(t.counterData[s].stepCode)===String(t.trangThaiHoSoList[i].items[a].stepCode)){let o=t.counterData[s].totalCount;t.trangThaiHoSoList[i].items[a]["counter"]=o,e+=o;break}}t.trangThaiHoSoList[i]["counter"]=e}else if(t.trangThaiHoSoList[i].queryParams.indexOf("step")>=0){let e=t.trangThaiHoSoList[i].queryParams.split("step="),a=0;for(let i in t.counterData)if(String(t.counterData[i].stepCode)===String(e[1])){t.counterData[i].totalCount;break}t.trangThaiHoSoList[i]["counter"]=a}else{let e={queryParams:t.trangThaiHoSoList[i].queryParams};t.$store.dispatch("loadingCounterNotStep",e).then(function(e){t.trangThaiHoSoList[i]["counter"]=e.total}).catch(function(){t.trangThaiHoSoList[i]["counter"]=0})}t.loading=!1})},doAddDVC(){n["a"].push("/add-dvc/0")}}},c=l,d=i("2877"),h=Object(d["a"])(c,s,o,!1,null,null,null);h.options.__file="App_dvc.vue";var u=h.exports,p=i("8c4f"),m=i("4d55"),g=i("dfd7"),v=i("3436"),_=i("5338"),f=i("bbba"),y=i("5de0"),C=i("aa35"),T=i("38ec"),x=i("eaee"),D=i("9190"),S=i("d4a9"),b=i("be4d");const P=[{path:"/danh-sach-ho-so/:index",name:"Landing",component:m["default"],props:!0},{path:"/m/danh-sach-ho-so/:index",name:"LandingMobile",component:g["default"],props:!0},{path:"/tra-cuu-ho-so",name:"TraCuuHoSo",component:v["default"],props:!0},{path:"/danh-sach-ho-so/:index/tiep-nhan-ho-so/:id/:formCode",name:"TiepNhanHoSoDetail",component:_["default"],props:!0},{path:"/danh-sach-ho-so/:index/chi-tiet-ho-so/:id",name:"XemChiTietHoSoDetailCanBo",component:f["default"],props:!0},{path:"/danh-sach-ho-so/:index/xu-ly-ho-so",name:"XuLyHoSo",component:y["default"],props:!0},{path:"/danh-sach-ho-so/:index/bo-sung-ho-so/:id",name:"HoanThienBoSungHoSoDetail",component:C["default"],props:!0},{path:"/danh-sach-ho-so/:index/ho-so/:id/:formCode",name:"DetailForward",component:T["default"],props:!0},{path:"/add-dvc/:serviceCode",name:"DanhSachThuTuc",component:x["default"],props:!0},{path:"/danh-sach-ho-so/:index/nop-thanh-cong/:id",name:"NopThanhCong",component:D["default"],props:!0},{path:"/thanh-toan-thanh-cong",name:"ThanhToanThanhCong",component:S["default"],props:!0},{path:"*",name:"NotFound",component:b["a"]}];a["default"].use(p["a"]);const I=new p["a"]({routes:P});var A=I,N=i("ce5b"),w=i.n(N),k=i("4360"),E=i("967d"),F=(i("5a9d"),i("a576"),i("470b"),i("bc3a")),O=i.n(F);O.a.defaults.headers.common["Token"]=void 0!==window.Liferay?window.Liferay.authToken:"",a["default"].use(E["default"]),a["default"].use(w.a),a["default"].config.productionTip=!0,a["default"].mixin({methods:{getOriginality:function(){return 1}}}),new a["default"]({router:A,store:k["a"],render:function(t){return t(u)}}).$mount("#app")},cb0a:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-card",[i("v-expansion-panel",{staticClass:"expansion-pl"},[i("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"1"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"background-triangle-small"},[i("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),i("span",[t._v("Thông tin thanh toán")])]),i("v-card",{},[i("v-card-text",{staticClass:"px-0 py-0"},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:"",sm2:""}},[i("v-subheader",{staticClass:"pl-0 text-right"},[t._v("Lệ phí: ")])],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[i("p",{staticClass:"pt-2 mb-0"},[t._v(t._s(t.payments.feeAmount?t.currency(t.payments.feeAmount.toString().replace(/\./g,"")):0)+"    vnđ")])]),i("v-flex",{staticClass:"pt-1",attrs:{xs12:"",sm2:""}},[i("v-subheader",{staticClass:"pl-0 text-right"},[t._v("Phí: ")])],1),i("v-flex",{staticClass:"pt-1",attrs:{xs12:"",sm3:""}},[i("p",{staticClass:"pt-2 mb-0"},[t._v(t._s(t.payments.serviceAmount?t.currency(t.payments.serviceAmount.toString().replace(/\./g,"")):0)+"    vnđ")])]),i("v-flex",{attrs:{xs12:"",sm3:""}}),2!==t.dossierDetail.viaPortal&&"2"!==t.dossierDetail.viaPortal||0===t.payments.shipAmount?t._e():i("v-flex",{attrs:{xs12:"",sm2:""}},[i("v-subheader",{staticClass:"pl-0 text-right"},[t._v("Phí chuyển phát: ")])],1),2!==t.dossierDetail.viaPortal&&"2"!==t.dossierDetail.viaPortal||0===t.payments.shipAmount?t._e():i("v-flex",{attrs:{xs12:"",sm2:""}},[i("p",{staticClass:"pt-2 mb-0"},[t._v(t._s(t.payments.shipAmount?t.currency(t.payments.shipAmount.toString().replace(/\./g,"")):0)+"    vnđ")])]),2!==t.dossierDetail.viaPortal&&"2"!==t.dossierDetail.viaPortal||0===t.payments.shipAmount?t._e():i("v-flex",{attrs:{xs12:"",sm8:""}}),i("v-flex",{attrs:{xs12:"",sm2:""}},[i("v-subheader",{staticClass:"pl-0 text-right"},[i("span",{staticClass:"text-bold"},[t._v("Tổng: ")])])],1),i("v-flex",{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[i("span",[t._v(t._s(t.payments.paymentAmount?t.currency(t.payments.paymentAmount.toString().replace(/\./g,"")):0)+"    vnđ")])]),i("v-flex",{attrs:{xs12:"",sm7:""}}),i("v-flex",{staticClass:"my-0 pl-3 py-1",staticStyle:{width:"100px"}},[i("span",{staticClass:"red--text"},[t._v("* ")]),t._v(" Ghi chú:")]),i("v-flex",{staticStyle:{width:"calc(100% - 100px)"}},[i("p",{staticClass:"px-2 my-0 py-1"},[t._v("\n                  "+t._s(t.payments.paymentNote?t.payments.paymentNote:"")+"   \n                ")])])],1)],1)],1)],1)],1),i("v-expansion-panel",{staticClass:"expansion-pl"},[i("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"1"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"background-triangle-small"},[i("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),i("span",[t._v("Tình trạng thanh toán")])]),i("v-card",{},[i("v-card-text",{staticClass:"px-0 py-0"},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:"",sm2:""}},[i("v-subheader",{staticClass:"pl-0 text-right"},[t._v("Trạng thái: ")])],1),i("v-flex",{attrs:{xs12:"",sm3:""}},[i("p",{staticClass:"pt-2 mb-0"},[t._v(t._s(t.getPaymentStatus(t.payments.paymentStatus)))])]),i("v-flex",{attrs:{xs12:"",sm7:""}}),Number(t.payments.paymentStatus)>=3?i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:"",sm2:""}},[i("v-subheader",{staticClass:"pl-0 text-right"},[t._v("Hình thức thanh toán: ")])],1),i("v-flex",{attrs:{xs12:"",sm3:""}},[i("p",{staticClass:"pt-2 mb-0"},[t._v(t._s(t.payments.paymentMethod))])]),i("v-flex",{attrs:{xs12:"",sm7:""}}),t.paymentFile?i("v-flex",{attrs:{xs12:"",sm2:""}},[i("v-subheader",{staticClass:"pl-0 text-right"},[t._v("Chứng từ kèm theo: ")])],1):t._e(),t.paymentFile?i("v-flex",{attrs:{xs12:"",sm10:""}},[i("span",{staticStyle:{cursor:"pointer"},on:{click:function(e){e.stopPropagation(),t.viewFile()}}},[i("v-icon",[t._v("attach_file")]),t._v("\n                    "+t._s(t.paymentFileName)+"\n                  ")],1),i("v-tooltip",{attrs:{top:""}},[i("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:"",ripple:""},on:{click:function(e){e.stopPropagation(),t.downloadPaymentFile(t.item)}},slot:"activator"},[i("v-icon",{staticStyle:{color:"#0d71bb"},attrs:{size:"16",color:"primary"}},[t._v("save_alt")])],1),i("span",[t._v("Tải xuống")])],1)],1):t._e()],1):t._e()],1)],1)],1)],1)],1),Number(t.payments.paymentStatus)>=3?i("v-expansion-panel",{staticClass:"expansion-pl"},[i("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"1"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"background-triangle-small"},[i("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),i("span",[t._v("Hóa đơn thanh toán")])]),i("v-card",{staticClass:"pl-2"},[i("v-card-text",{staticClass:"px-0 py-0"},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:"",sm2:""}},[i("v-subheader",{staticClass:"pl-0 text-right"},[t._v("Mẫu số hóa đơn : ")])],1),i("v-flex",{attrs:{xs12:"",sm3:""}},[i("p",{staticClass:"pt-2 mb-0"},[t._v(t._s(t.payments.invoiceTemplateNo))])]),i("v-flex",{attrs:{xs12:"",sm2:""}},[i("v-subheader",{staticClass:"pl-0 text-right"},[t._v("Ký hiệu hóa đơn : ")])],1),i("v-flex",{attrs:{xs12:"",sm3:""}},[i("p",{staticClass:"pt-2 mb-0"},[t._v(t._s(t.payments.invoiceIssueNo))])]),i("v-flex",{attrs:{xs12:"",sm2:""}}),i("v-flex",{attrs:{xs12:"",sm2:""}},[i("v-subheader",{staticClass:"pl-0 text-right"},[t._v("Số hóa đơn trên hệ thống : ")])],1),i("v-flex",{attrs:{xs12:"",sm3:""}},[i("p",{staticClass:"pt-2 mb-0"},[t._v(t._s(t.getEinvoiceNo(t.payments.einvoice)))])]),i("v-flex",{attrs:{xs12:"",sm2:""}},[i("v-subheader",{staticClass:"pl-0 text-right"},[t._v("Mã tra cứu trên hệ thống : ")])],1),i("v-flex",{attrs:{xs12:"",sm3:""}},[i("p",{staticClass:"pt-2 mb-0"},[t._v(t._s(t.getEinvoiceCode(t.payments.einvoice)))])]),i("v-flex",{attrs:{xs12:"",sm2:""}}),i("v-flex",{staticClass:"mb-3",attrs:{xs12:"",sm12:""}},[i("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.tracuuhoadon()}}},[i("v-icon",[t._v("search")]),t._v(" \n                  Tra cứu hóa đơn\n                ")],1),3===t.originality?i("v-btn",{staticClass:"ml-3",attrs:{color:"primary"},on:{click:function(e){t.printPay()}}},[i("v-icon",[t._v("print")]),t._v("  \n                  In biên lai\n                ")],1):t._e()],1)],1)],1)],1)],1)],1):t._e()],1),i("v-dialog",{staticStyle:{overflow:"hidden"},attrs:{"max-width":"900",transition:"fade-transition"},model:{value:t.dialogPDF,callback:function(e){t.dialogPDF=e},expression:"dialogPDF"}},[i("v-card",[t.activePrintPay?i("v-card-title",{staticClass:"headline"},[t._v("In biên lai thanh toán")]):i("v-card-title",{staticClass:"headline"},[t._v("File đính kèm")]),i("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogPDF=!1}}},[i("v-icon",[t._v("clear")])],1),t.dialogPDFLoading?i("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[i("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):t._e(),i("iframe",{directives:[{name:"show",rawName:"v-show",value:!t.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPreview",src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1)],1)},s=[],o=(i("a18c"),{props:{payments:{type:Object,default:()=>{}},dossierDetail:{type:Object,default:()=>{}}},components:{},data:()=>({loading:!0,loadingAction:!1,paymentFile:"",dialogPDF:!1,dialogPDFLoading:!0,activePrintPay:!1}),computed:{paymentFileName(){return this.$store.getters.getPaymentFileName},originality(){var t=this;return t.getOriginality()}},created(){let t=this;t.$nextTick(function(){var t=this;t.$router.history.current.query})},watch:{dossierDetail(t){var e=this;let i=e.dossierDetail;console.log("filterFile",i),e.$store.dispatch("getPaymentFiles",i).then(t=>{e.paymentFile=t})}},methods:{currency(t){if(t){let e=(t/1).toFixed(0).replace(".",",");return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}return""},viewFile(){let t=this;t.activePrintPay=!1,t.dialogPDFLoading=!0,t.dialogPDF=!0;let e={dossierId:t.dossierDetail.dossierId,referenceUid:t.dossierDetail.referenceUid};t.$store.dispatch("viewPaymentFile",e).then(e=>{t.dialogPDFLoading=!1,document.getElementById("dialogPreview").src=e})},downloadPaymentFile(t){let e=this,i="/o/rest/v2/dossiers/"+e.dossierDetail.dossierId+"/payments/"+e.dossierDetail.referenceUid+"/confirmfile";window.open(i)},printPay(){let t=this;t.activePrintPay=!0;let e={dossierId:t.dossierDetail.dossierId,referenceUid:t.payments.referenceUid};t.dialogPDFLoading=!0,t.dialogPDF=!0,t.$store.dispatch("printPay",e).then(function(e){t.dialogPDFLoading=!1,document.getElementById("dialogPreview").src=e})},getEinvoiceNo(t){if(t&&t.indexOf("#")>=0){let e=t.split("#")[1]?t.split("#")[1]:"";return e.indexOf("}")<0&&e.indexOf('"')<0?e:""}return""},getEinvoiceCode(t){if(t&&t.indexOf("#")>=0){let e=t.split("#")[3]?t.split("#")[3].split(",")[0].replace('"',""):"";return e}return""},tracuuhoadon(){window.open("http://tracuu.cmcsoft.com","_blank")},getPaymentStatus(t){return 1===t||"1"===t?"Yêu cầu nộp tiền tạm ứng ":2===t||"2"===t?"Yêu cầu quyết toán phí":3===t||"3"===t?"Báo đã nộp phí trực tuyến":3===t||"4"===t?"Yêu cầu nộp lại phí trực tuyến":5===t||"5"===t?"Xác nhận hoàn thành thu phí":""}}}),n=o,r=i("2877"),l=Object(r["a"])(n,a,s,!1,null,null,null);l.options.__file="ChiTietThanhToan.vue";e["a"]=l.exports},d4a9:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-card",[i("div",{staticClass:"row-header"},[i("div",{staticClass:"background-triangle-big"},[i("span",[t._v("THÔNG TIN THANH TOÁN")])]),i("div",{staticClass:"layout row wrap header_tools row-blue"},[i("div",{staticClass:"flex xs4 sm2 text-right",staticStyle:{"margin-left":"auto"}},[i("v-btn",{staticClass:"my-0 mx-0 btn-border-left",attrs:{flat:"","active-class":"temp_active"},on:{click:t.goBack}},[t._v("\n            Quay lại  \n            "),i("v-icon",{attrs:{size:"16"}},[t._v("undo")])],1)],1)])]),i("div",[i("div",{staticClass:"mx-2 my-3"},[i("v-alert",{attrs:{outline:"",value:!0,type:"success"}},[t._v("\n          Giao dịch thanh toán thành công\n        ")])],1),i("v-card",{staticClass:"mx-2"},[i("v-card-text",{staticClass:"px-0 py-0"},[i("div",{staticClass:"table-bordered",staticStyle:{"border-top":"1px solid #dedede"}},[i("div",{staticClass:"table__overflow"},[i("table",{staticClass:"datatable table"},[i("tbody",[i("tr",[i("td",{attrs:{width:"200"}},[i("span",{staticClass:"text-bold"},[t._v("Tên hồ sơ")])]),i("td",[i("span",[t._v(t._s(t.dossierDetail.serviceName))])])]),i("tr",[i("td",[i("span",{staticClass:"text-bold"},[t._v("Mã hồ sơ")])]),i("td",[i("span",[t._v(t._s(t.dossierDetail.dossierNo))])])]),i("tr",[i("td",[i("span",{staticClass:"text-bold"},[t._v("Cơ quan thực hiện")])]),i("td",[i("span",[t._v(t._s(t.dossierDetail.govAgencyName))])])]),i("tr",[i("td",[i("span",{staticClass:"text-bold"},[t._v("Tên phí, lệ phí")])]),i("td",[i("span",[t._v(t._s(t.dossierDetail.paymentFee))])])]),i("tr",[i("td",[i("span",{staticClass:"text-bold"},[t._v("Tổng tiền")])]),i("td",[i("span",[t._v(t._s(t.currency(t.dossierDetail.paymentAmount))+" VNĐ")])])]),i("tr",[i("td",[i("span",{staticClass:"text-bold"},[t._v("Mã giao dịch trực tuyến")])]),i("td",[i("span",[t._v(t._s(t.dossierDetail.transId))])])]),i("tr",[i("td",[i("span",{staticClass:"text-bold"},[t._v("Mã tra cứu trên cổng thanh toán")])]),i("td",[i("span",[t._v(t._s(t.dossierDetail.goodCode))])])]),i("tr",[i("td",[i("span",{staticClass:"text-bold"},[t._v("Cổng thanh toán")])]),i("td",[i("span",[t._v(t._s(t.dossierDetail.paymentPortal))])])])])])])])])],1)],1)])],1)},s=[],o=(i("a18c"),{props:[],components:{},data:()=>({loading:!0,loadingAction:!1,dossierDetail:{serviceName:"",dossierNo:"",govAgencyName:"",paymentFee:"",paymentAmount:"",transId:"",goodCode:"",paymentPortal:""}}),computed:{},created(){let t=this;t.$nextTick(function(){var t=this;let e=t.$router.history.current.query,i=e.hasOwnProperty("dossierId")?e.dossierId:"",a=e.hasOwnProperty("referenceUid")?e.referenceUid:"",s=e.hasOwnProperty("actionCode")?e.actionCode:"";i&&t.$store.dispatch("getDetailDossier",i).then(i=>{t.dossierDetail["serviceName"]=i.serviceName,t.dossierDetail["dossierNo"]=i.dossierNo,t.dossierDetail["govAgencyName"]=i.govAgencyName,t.dossierDetail["transId"]=e.transId,t.dossierDetail["goodCode"]=e.goodCode,t.dossierDetail["paymentPortal"]=e.paymentPortal,t.dossierDetail["paymentAmount"]=e.net_cost;let o={dossierId:i.dossierId,referenceUid:a||i.referenceUid};t.$store.dispatch("putPayments",o).then(e=>{if(t.dossierDetail["paymentFee"]=e.paymentFee,s){let e={dossierId:a||i.referenceUid,actionCode:s};t.$store.dispatch("processDossierRouter",e).then(function(t){}).catch(function(){})}}).catch(t=>{})})})},watch:{},methods:{currency(t){return t&&t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")?t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."):0},goBack(){let t=window.themeDisplay.getLayoutRelativeURL().substring(0,window.themeDisplay.getLayoutRelativeURL().lastIndexOf("/")),e=t+"/dich-vu-cong#/";window.open(e,"_self")}}}),n=o,r=i("2877"),l=Object(r["a"])(n,a,s,!1,null,null,null);l.options.__file="ThanhToanThanhCong.vue";e["default"]=l.exports},d80f:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{width:"100%"}},["dieuchinhdulieu"!==t.type&&t.formBuilder.length>0?i("v-expansion-panel",{staticClass:"expansion-pl ext__form"},t._l(t.formBuilder,function(e,a){return i("v-expansion-panel-content",{key:a,attrs:{"hide-actions":"",value:"1"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"background-triangle-small"},[i("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("\n      "+t._s(e.fieldLabel)+" "),!0===e.required||"true"===e.required?i("span",{staticStyle:{color:"red"}},[t._v(" *")]):t._e()]),i("v-card",[i("v-card-text",{staticClass:"py-2 px-2"},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:""}},["textarea"===e.fieldType?i("v-text-field",{attrs:{id:e.fieldName,value:e.value,placeholder:e.placeholder,"multi-line":"",rules:!0===e.required||"true"===e.required?[t.rules.required]:[],required:!0===e.required||"true"===e.required},on:{input:function(i){t.inputChangeValue(e)}}}):t._e(),"string"===e.fieldType?i("v-text-field",{attrs:{id:e.fieldName,value:e.value,placeholder:e.placeholder,rules:!0===e.required||"true"===e.required?[t.rules.required]:[],required:!0===e.required||"true"===e.required},on:{input:function(i){t.inputChangeValue(e)}}}):t._e(),"number"===e.fieldType?i("v-text-field",{attrs:{id:e.fieldName,value:e.value,placeholder:e.placeholder,rules:!0===e.required||"true"===e.required?[t.rules.required]:[t.rules.number],required:!0===e.required||"true"===e.required},on:{input:function(i){t.inputChangeValue(e)}}}):t._e(),"date"===e.fieldType?i("v-layout",{staticClass:"pl-2",attrs:{wrap:""}},[i("v-icon",{staticClass:"ml-3",attrs:{color:"blue"}},[t._v("event")]),i("vue-ctk-date-time-picker",{ref:"datepicker",refInFor:!0,staticClass:"ml-2",staticStyle:{width:"auto!important"},attrs:{label:e.value?"":"Chọn ngày",id:e.fieldName,formatted:"DD/MM/YYYY HH:mm",format:"YYYY-MM-DDTHH:mm","time-format":"HH:mm","without-header":!0},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"item.value"}})],1):t._e()],1)],1)],1),i("v-dialog",{attrs:{width:"500"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-date-picker",{attrs:{"full-width":"",landscape:""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),i("v-card-actions",{staticStyle:{background:"#fff"}},[i("v-spacer"),i("v-btn",{attrs:{color:"primary",flat:""},on:{click:t.pickDateCustom}},[t._v("\n              Xác nhận\n            ")])],1)],1)],1)],1)}),1):t._e(),"dieuchinhdulieu"===t.type?i("div",{staticClass:"ext__form px-3"},[t._l(t.formBuilder,function(e,a){return t.formBuilder.length>0?i("div",{key:a,staticClass:"mb-2",attrs:{"hide-actions":"",value:"1"}},[i("div",{staticClass:"py-1",staticStyle:{"border-bottom":"1px solid #8a898942"}},[i("span",{staticClass:"text-bold"},[t._v(t._s(a+1)+". ")]),t._v(t._s(e.fieldLabel)+" "),!0===e.required||"true"===e.required?i("span",{staticStyle:{color:"red"}},[t._v(" *")]):t._e()]),i("v-form",{ref:"form",refInFor:!0,attrs:{"lazy-validation":""},model:{value:t.valid2,callback:function(e){t.valid2=e},expression:"valid2"}},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{staticClass:"px-3",attrs:{xs12:""}},["textarea"===e.fieldType?i("v-text-field",{attrs:{box:"",id:e.fieldName,value:e.value,placeholder:e.placeholder,"multi-line":"",rules:!0===e.required||"true"===e.required?[t.rules.required]:[],required:!0===e.required||"true"===e.required},on:{input:function(i){t.inputChangeValue(e)}}}):t._e()],1),i("v-flex",{staticClass:"px-3",attrs:{xs12:""}},["string"===e.fieldType?i("v-text-field",{attrs:{box:"",id:e.fieldName,value:e.value,placeholder:e.placeholder,rules:!0===e.required||"true"===e.required?[t.rules.required]:[],required:!0===e.required||"true"===e.required},on:{input:function(i){t.inputChangeValue(e)}}}):t._e()],1),i("v-flex",{staticClass:"px-3",attrs:{xs12:""}},["number"===e.fieldType?i("v-text-field",{attrs:{box:"",id:e.fieldName,value:e.value,placeholder:e.placeholder,rules:!0===e.required||"true"===e.required?[t.rules.required]:[t.rules.number],required:!0===e.required||"true"===e.required},on:{input:function(i){t.inputChangeValue(e)}}}):t._e()],1),i("v-flex",{staticClass:"px-3",attrs:{xs12:""}},["date"===e.fieldType?i("v-layout",{staticClass:"mt-2",attrs:{wrap:""}},[i("v-icon",{attrs:{color:"blue"}},[t._v("event")]),i("vue-ctk-date-time-picker",{ref:"datepicker",refInFor:!0,staticClass:"ml-2",staticStyle:{width:"auto!important"},attrs:{label:e.value?"":"Chọn ngày",id:e.fieldName,formatted:"DD/MM/YYYY HH:mm",format:"YYYY-MM-DDTHH:mm","time-format":"HH:mm","without-header":!0},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"item.value"}})],1):t._e()],1),i("v-flex",{staticClass:"px-3",attrs:{xs12:""}},["status"===e.fieldType?i("v-text-field",{attrs:{box:"",id:e.fieldName,value:e.value,placeholder:e.placeholder,rules:!0===e.required||"true"===e.required?[t.rules.required]:[],required:!0===e.required||"true"===e.required},on:{input:function(i){t.inputChangeValue(e)}}}):t._e()],1)],1)],1),i("v-dialog",{attrs:{width:"500"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-date-picker",{attrs:{"full-width":"",landscape:""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),i("v-card-actions",{staticStyle:{background:"#fff"}},[i("v-spacer"),i("v-btn",{attrs:{color:"primary",flat:""},on:{click:t.pickDateCustom}},[t._v("\n            Xác nhận\n          ")])],1)],1)],1):t._e()}),0===t.formBuilder.length?i("div",[i("v-alert",{attrs:{outline:"",color:"warning",icon:"priority_high",value:!0}},[t._v("\n        Không có form điều chỉnh dữ liệu\n      ")])],1):t._e()],2):t._e()],1)},s=[],o=i("e30a"),n=i.n(o),r={components:{"vue-ctk-date-time-picker":n.a},props:{dossier_id:{type:Number},action_id:{type:Number},type:{type:String,default:()=>""}},data:()=>({itemId:null,fieldNameID:"",date:null,dialog:!1,formBuilder:[],valid:!1,valid2:!1,rulesValid:{number:function(t){var e=/^\d+$/;return e.test(t)||"Kiểu dữ liệu sai định dạng."}},rules:{required:t=>!!t||"Trường dữ liệu bắt buộc",number:function(t){const e=/^\d+$/;return e.test(t)||"Kiểu dữ liệu sai định dạng."}}}),watch:{dossier_id(){let t=this,e={dossierId:t.dossier_id,actionId:t.action_id};t.$store.dispatch("getExtraForm",e).then(function(e){if(t.formBuilder=e,t.formBuilder.length>0)for(let i in t.formBuilder)"date"===t.formBuilder[i]["fieldType"]&&t.formBuilder[i]["value"]&&isNaN(new Date(t.formBuilder[i]["value"]).getTime())&&(t.formBuilder[i]["value"]="")}).catch(function(){t.formBuilder=[]})}},created(){var t=this;t.$nextTick(function(){let e={dossierId:t.dossier_id,actionId:t.action_id};e["dossierId"]&&e["actionId"]&&t.$store.dispatch("getExtraForm",e).then(function(e){if(t.formBuilder=e,t.formBuilder.length>0)for(let i in t.formBuilder)"date"===t.formBuilder[i]["fieldType"]&&t.formBuilder[i]["value"]&&isNaN(new Date(t.formBuilder[i]["value"]).getTime())&&(t.formBuilder[i]["value"]="")})})},methods:{openDialogCustom(t,e){let i=this;i.dialog=!0,i.fieldNameID=e,i.itemId=t},pickDateCustom(){let t=this;console.log(t.date),t.date&&(t.itemId.value=new Date(t.date)),t.dialog=!1},inputChangeValue(t){t.value=document.getElementById(t.fieldName).value},showDatePicker(){this.$refs.datepicker.showDatePicker()},dateTimeView(t){if(t){let e=new Date(t);return`${e.getDate().toString().padStart(2,"0")}/${(e.getMonth()+1).toString().padStart(2,"0")}/${e.getFullYear()}`}return""},parseCurrentDate(t){if(!t)return null;let[e,i,a]=t.split("/");return`${a}-${i.padStart(2,"0")}-${e.padStart(2,"0")}`},checkValid(){let t=this,e=!0;if(t.formBuilder.length>0)for(let i in t.formBuilder)if((!0===t.formBuilder[i]["required"]||"true"===t.formBuilder[i]["required"])&&!t.formBuilder[i]["value"])return e=!1,alert(t.formBuilder[i]["fieldLabel"]+" là bắt buộc!"),e;return e},formSubmitData(){let t=this,e={};if(t.formBuilder.length>0)for(let i in t.formBuilder){let a=t.formBuilder[i].value;"date"===t.formBuilder[i].fieldType&&(a=new Date(t.formBuilder[i].value).getTime()?new Date(t.formBuilder[i].value).getTime():""),e[t.formBuilder[i].fieldName]=a}else e="";return e}},filters:{parseDate:function(t){if(!t)return"";let e="";return e=isNaN(Number(t))?new Date(t):new Date(Number(t)),e?`${e.getDate().toString().padStart(2,"0")}/${(e.getMonth()+1).toString().padStart(2,"0")}/${e.getFullYear()} ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`:""}}},l=r,c=i("2877"),d=Object(c["a"])(l,a,s,!1,null,null,null);d.options.__file="FormBoSungThongTinNgan.vue";e["a"]=d.exports},de7d:function(module,__webpack_exports__,__webpack_require__){"use strict";var vue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("a026");__webpack_exports__["a"]={props:{item:{type:Object,default(){return{dossierId:0}}},layout_view:{type:Object}},created(){let vm=this;null!==vm.layout_view&&void 0!==vm.layout_view&&"undefined"!==vm.layout_view&&vue__WEBPACK_IMPORTED_MODULE_0__["default"].component("my-dynamic-view",{template:vm.layout_view["template"],data:eval(" ( "+vm.layout_view["data"]+" ) "),created:eval(" ( "+vm.layout_view["created"]+" ) "),updated:eval(" ( "+vm.layout_view["updated"]+" ) "),methods:vm.layout_view["methods"]})}}},dfd7:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"row-header no__hidden_class",staticStyle:{"background-color":"#070f52"}},[null!==t.trangThaiHoSoList?i("div",{staticClass:"ml-2 py-2 text-bold white--text"},[i("span",[t._v(t._s(t.trangThaiHoSoList[t.index]["title"]))])]):t._e()]),i("v-layout",{staticClass:"menu_header_list",class:{no__border__bottom:null===t.btnDynamics||void 0===t.btnDynamics||"undefined"===t.btnDynamics||null!==t.btnDynamics&&void 0!==t.btnDynamics&&"undefined"!==t.btnDynamics&&0===t.btnDynamics.length},attrs:{wrap:""}},[1!==t.originality?i("v-layout",{attrs:{wrap:""}},[i("v-flex",{staticClass:"pl-2 pr-2 input-group--text-field-box",attrs:{xs12:"",sm3:""}},[i("v-select",{attrs:{items:t.listLinhVuc,autocomplete:"",placeholder:"Chọn lĩnh vực","item-text":"displayName","item-value":"domainCode","return-object":"","hide-selected":!0,clearable:""},on:{change:t.changeDomain},model:{value:t.linhVucSelected,callback:function(e){t.linhVucSelected=e},expression:"linhVucSelected"}})],1),i("v-flex",{staticClass:"pl-2 pr-2 input-group--text-field-box",attrs:{xs12:"",sm3:""}},[i("v-select",{attrs:{items:t.listThuTucHanhChinh,autocomplete:"",placeholder:"Chọn thủ tục hành chính","item-text":"displayName","item-value":"serviceConfigId","return-object":"","hide-selected":!0,clearable:""},on:{change:t.changeServiceConfigs},model:{value:t.thuTucHanhChinhSelected,callback:function(e){t.thuTucHanhChinhSelected=e},expression:"thuTucHanhChinhSelected"}})],1),i("v-flex",{staticClass:"pl-2 pr-2 input-group--text-field-box",attrs:{xs12:"",sm3:""}},[i("v-select",{attrs:{items:t.listDichVu,placeholder:"Chọn dịch vụ:",autocomplete:"","item-text":"optionName","item-value":"processOptionId","return-object":"","hide-selected":!0},on:{change:t.changeDichVuConfigs},model:{value:t.dichVuSelected,callback:function(e){t.dichVuSelected=e},expression:"dichVuSelected"}})],1),i("v-flex",{staticClass:"pl-2 pr-2",attrs:{xs12:"",sm3:""}},[i("div",{staticStyle:{position:"relative"}},[i("v-text-field",{attrs:{placeholder:"Mã hồ sơ, tên hồ sơ, tên thủ tục ...","append-icon":"search",box:"","append-icon-cb":t.keywordEventChange},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.keywordEventChange(e):null}},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}})],1)])],1):t._e(),null!==t.dossierCounting&&void 0!==t.dossierCounting&&t.dossierCounting.length>0&&t.dossierCountingShow?i("div",{staticClass:"py-1 px-1",staticStyle:{background:"#f6f6f6","border-top":"1px solid lightgrey"}},t._l(t.dossierCounting,function(e,a){return i("v-chip",{key:a,on:{click:function(i){t.changeAdvFilterDataChips(e)}}},["deleted"===e.key?i("v-avatar",{staticStyle:{"background-color":"#da0e0e","border-color":"#da0e0e",color:"#fff"}},[i("v-icon",{attrs:{size:"16"}},[t._v("delete")])],1):i("v-avatar",{staticStyle:{"background-color":"#0b72ba","border-color":"#0b72ba",color:"#fff"}},[t._v(t._s(e.count))]),t._v("\n        "+t._s(e.title)+"\n      ")],1)}),1):t._e()],1),1===t.originality&&t.viewMobile?i("v-flex",{staticClass:"pl-2 pr-2",attrs:{xs12:"",sm3:""}},[i("div",{staticStyle:{position:"relative"}},[i("v-text-field",{attrs:{placeholder:"Tìm theo mã hồ sơ, tên hồ sơ, tên thủ tục ...","append-icon":"search",box:"","append-icon-cb":t.keywordEventChange},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.keywordEventChange(e):null}},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}})],1)]):t._e(),t.loadingDynamicBtn?i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:"",sm6:""}}),i("v-flex",{attrs:{xs12:"",sm2:""}},[i("content-placeholders",{staticClass:"mt-3"},[i("content-placeholders-text",{attrs:{lines:1}})],1)],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[i("content-placeholders",{staticClass:"mt-3"},[i("content-placeholders-text",{attrs:{lines:1}})],1)],1),i("v-flex",{attrs:{xs12:"",sm2:""}},[i("content-placeholders",{staticClass:"mt-3"},[i("content-placeholders-text",{attrs:{lines:1}})],1)],1)],1):t._e(),t.loadingDynamicBtn?t._e():i("div",{staticClass:"btn_wrap_actions"},[t.getUser("Administrator_data")&&"deleted"!==t.currentQueryState["status"]?i("v-btn",{attrs:{color:"red",dark:""},nativeOn:{click:function(e){t.btnActionEvent(null,{form:"UNDO_DOSSIER"},0,!0)}}},[t._v("\n         Undo   \n    ")]):t._e(),t.getUser("Administrator_data")?i("v-menu",{staticStyle:{position:"relative !important"},attrs:{left:""}},[i("v-btn",{attrs:{slot:"activator",color:"red",dark:""},slot:"activator"},[t._v("Go to   "),i("v-icon",{attrs:{size:"18"}},[t._v("arrow_drop_down")])],1),i("v-list",[i("v-list-tile",{on:{click:function(e){t.btnActionEvent(t.selectedDoAction[t.selectedDoAction.length-1],{form:"GOTO_DONE"},0,!0)}}},[i("v-list-tile-title",[t._v("Hoàn thành")])],1),i("v-list-tile",{on:{click:function(e){t.btnActionEvent(t.selectedDoAction[t.selectedDoAction.length-1],{form:"GOTO_CANCEL"},0,!0)}}},[i("v-list-tile-title",[t._v("Rút hồ sơ")])],1),i("v-list-tile",{on:{click:function(e){t.btnActionEvent(t.selectedDoAction[t.selectedDoAction.length-1],{form:"GOTO_DENY"},0,!0)}}},[i("v-list-tile-title",[t._v("Từ chối")])],1)],1)],1):t._e(),t.getUser("Administrator_data")&&"deleted"!==t.currentQueryState["status"]?i("v-btn",{attrs:{color:"red",dark:""},nativeOn:{click:function(e){t.btnActionEvent(null,{form:"CHANGE_DATA_DOSSIER"},0,!0)}}},[t._v("\n      Điều chỉnh dữ liệu\n    ")]):t._e(),t.getUser("Administrator")&&"deleted"!==t.currentQueryState["status"]?i("v-btn",{attrs:{color:"red",dark:""},nativeOn:{click:function(e){t.btnActionEvent(null,{form:"DELETE"},0,!0)}}},[t._v("\n      DELETE\n    ")]):t._e(),t.getUser("Administrator_data")&&t.currentQueryState.hasOwnProperty("status")&&"deleted"===t.currentQueryState["status"]?i("v-btn",{attrs:{color:"red",dark:""},nativeOn:{click:function(e){t.btnActionEvent(null,{form:"RESTORE_DOSSIER"},0,!0)}}},[t._v("\n      Khôi phục hồ sơ\n    ")]):t._e(),t._l(t.btnDynamics,function(e,a){return String(e.form).indexOf("VIEW")<0&&3!==t.menuType?i("v-btn",{key:a,attrs:{color:"primary",loading:t.loadingAction&&a===t.indexAction,disabled:t.loadingAction&&a===t.indexAction},nativeOn:{click:function(i){t.btnActionEvent(null,e,a,!0)}}},[t._v("\n      "+t._s(e.title)+t._s(e.tiltle)+"\n      "),i("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])]):t._e()})],2),i("v-data-table",{staticClass:"table-landing table-bordered",attrs:{headers:t.headers,items:t.hosoDatas,"total-items":t.hosoDatasTotal,"item-key":"dossierId","select-all":3!==t.menuType&&1!==t.originality&&t.btnDynamics.length>0||t.getUser("Administrator")||t.getUser("Administrator_data"),"no-data-text":"Không có hồ sơ nào","hide-actions":""},scopedSlots:t._u([{key:"headers",fn:function(e){return[i("tr",[3!==t.menuType&&1!==t.originality&&t.btnDynamics.length>0||t.getUser("Administrator")||t.getUser("Administrator_data")?i("th",{staticClass:"v_data_table_check_all"},[t.getUser("Administrator")?i("v-checkbox",{attrs:{"input-value":e.all,indeterminate:e.indeterminate,primary:"","hide-details":""},nativeOn:{click:function(e){return t.toggleAll(e)}}}):i("v-checkbox",{attrs:{"input-value":e.all,indeterminate:e.indeterminate,disabled:!t.thuTucHanhChinhSelected||t.thuTucHanhChinhSelected&&"0"===t.thuTucHanhChinhSelected.serviceConfigId||t.thuTucHanhChinhSelected&&""===t.thuTucHanhChinhSelected.serviceConfigId,primary:"","hide-details":""},nativeOn:{click:function(e){return t.toggleAll(e)}}})],1):t._e(),i("th",{attrs:{width:"30px"}},[i("span",[t._v("STT")])]),i("th",[i("span",[t._v("Tên thủ tục")])]),t.hideAction?t._e():i("th",{attrs:{width:"30px"}})])]}},{key:"items",fn:function(e){return[i("tr",[3!==t.menuType&&1!==t.originality&&t.btnDynamics.length>0||t.getUser("Administrator")||t.getUser("Administrator_data")?i("td",{staticClass:"v_data_table_check_all"},[t.getUser("Administrator")||t.getUser("Administrator_data")?i("v-checkbox",{attrs:{primary:"","hide-details":"",color:"primary"},on:{change:t.changeSelected},model:{value:e.selected,callback:function(i){t.$set(e,"selected",i)},expression:"props.selected"}}):i("v-checkbox",{attrs:{disabled:0===e.item["assigned"]||!t.thuTucHanhChinhSelected||t.thuTucHanhChinhSelected&&"0"===t.thuTucHanhChinhSelected.serviceConfigId||t.thuTucHanhChinhSelected&&""===t.thuTucHanhChinhSelected.serviceConfigId,primary:"","hide-details":"",color:"primary"},on:{change:t.changeSelected},model:{value:e.selected,callback:function(i){t.$set(e,"selected",i)},expression:"props.selected"}})],1):t._e(),i("td",{staticClass:"text-xs-center px-0 py-0"},[t.loadingTable?i("content-placeholders",[i("content-placeholders-text",{attrs:{lines:1}})],1):i("span",{class:{no_acction__event:!e.item["permission"]},staticStyle:{cursor:"pointer"},on:{click:function(i){t.viewDetail(e.item,e.index)}}},[t._v("\n            "+t._s(15*t.hosoDatasPage-15+e.index+1)+"\n          ")])],1),i("td",{staticClass:"px-1 py-0"},[t.loadingTable?i("content-placeholders",[i("content-placeholders-text",{attrs:{lines:1}})],1):i("div",{class:{no_acction__event:!e.item["permission"]},staticStyle:{cursor:"pointer"},on:{click:function(i){t.viewDetail(e.item,e.index)}}},[e.item.dossierNo?i("span",{staticClass:"primary--text"},[t._v(" "+t._s(e.item.dossierNo)+" - ")]):t._e(),i("span",{staticClass:"primary--text"},[t._v(" "+t._s(e.item.online?"Hồ sơ trực tuyến":"Hồ sơ một cửa"))]),i("br"),i("span",{staticClass:"primary--text text-bold"},[t._v(" "+t._s(e.item.serviceName)+" ")]),i("br"),i("span",{staticClass:"text-bold"},[t._v("Chủ hồ sơ: ")]),i("span",[t._v(t._s(e.item.applicantName))]),i("br"),i("span",{staticClass:"text-bold"},[t._v("Tiếp nhận: ")]),i("span",[t._v(t._s(e.item.receiveDate))]),i("br"),i("span",{staticClass:"text-bold"},[t._v("Hẹn trả: ")]),i("span",[t._v(t._s(e.item.dueDate))]),i("br"),e.item.dossierOverdue?i("span",{class:e.item.dossierOverdue.indexOf("Quá hạn")>=0?"red--text":"green--text"},[t._v(t._s(e.item.dossierOverdue))]):t._e()])],1),t.hideAction?t._e():i("td",{staticClass:"text-xs-center px-0 py-0"},[t.loadingTable?i("content-placeholders",[i("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),t.loadingTable||null===t.btnDynamics&&void 0===t.btnDynamics&&"undefined"===t.btnDynamics&&null===t.btnDossierDynamics&&void 0===t.btnDossierDynamics&&"undefined"===t.btnDossierDynamics?t._e():i("v-menu",{staticStyle:{position:"relative !important"},attrs:{left:""}},[i("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(i){t.processPullBtnDynamics(e.item)}},slot:"activator"},[i("v-icon",[t._v("more_vert")])],1),i("v-list",[t._l(t.btnDynamics,function(a,s){return 3===t.menuType?i("v-list-tile",{key:s+"_menu_"+e.item.dossierId,attrs:{disabled:-1===String(e.item["permission"]).indexOf("write")},on:{click:function(i){t.btnActionEvent(e.item,a,e.index,!1)}}},[i("v-list-tile-title",[t._v(t._s(a.title)+t._s(a.tiltle))])],1):t._e()}),t._l(t.btnDossierDynamics,function(a,s){return(a["enable"]>0||"special"===a["autoEvent"])&&3!==t.menuType?i("v-list-tile",{key:s+"_"+e.item.dossierId,attrs:{disabled:2===a["enable"]||-1===String(e.item["permission"]).indexOf("write")},on:{click:function(i){t.processPullBtnDetail(e.item,a,e.index,s)}}},[i("v-list-tile-title",[t._v(t._s(a.actionName))])],1):t._e()}),t._l(t.btnStepsDynamics,function(a,s){return-1!==String(e.item["permission"]).indexOf("write")&&"NEW"!==String(a.form)&&3!==t.menuType?i("v-list-tile",{key:s+"_"+e.item.dossierId+"_"+e.item.dossierId,on:{click:function(i){t.btnActionEvent(e.item,a,t.index,!1)}}},[i("v-list-tile-title",[t._v(t._s(a.title))])],1):t._e()}),i("v-list-tile",{attrs:{disabled:!e.item["permission"]},on:{click:function(i){t.viewDetail(e.item,e.index)}}},[t._v("\n                Xem chi tiết\n              ")])],2)],1)],1)])]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}),i("div",{class:t.viewMobile?"":"text-xs-right layout wrap",staticStyle:{position:"relative"}},[i("div",{staticClass:"flex pagging-table px-2"},[i("tiny-pagination",{attrs:{total:t.hosoDatasTotal,page:t.hosoDatasPage,"custom-class":"custom-tiny-class"},on:{"tiny:change-page":t.paggingData}})],1)]),i("v-dialog",{attrs:{"max-width":"400",transition:"fade-transition",persistent:""},model:{value:t.dialogAction,callback:function(e){t.dialogAction=e},expression:"dialogAction"}},[i("v-card",[i("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-card-title",{staticClass:"headline"},[t._v(t._s(t.itemAction.title)+t._s(t.itemAction.tiltle))]),i("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogAction=!1}}},[i("v-icon",[t._v("clear")])],1),t.loadingAction?i("v-progress-linear",{staticClass:"my-0",attrs:{indeterminate:!0}}):t._e(),i("v-card-text",{staticClass:"pb-0 pt-4"},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{staticClass:"px-2 pb-3",attrs:{xs12:""}},[i("v-select",{attrs:{items:t.listThuTucHanhChinh,autocomplete:"",placeholder:"chọn thủ tục hành chính","item-text":"serviceName","item-value":"serviceConfigId","return-object":"","hide-selected":!0},on:{change:t.changeServiceConfigs},model:{value:t.thuTucHanhChinhSelected,callback:function(e){t.thuTucHanhChinhSelected=e},expression:"thuTucHanhChinhSelected"}})],1),i("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[t.thuTucHanhChinhSelected&&t.listDichVu.length>1?i("v-select",{attrs:{items:t.listDichVu,label:"Dịch vụ:",autocomplete:"",placeholder:"chọn dịch vụ","item-text":"optionName","item-value":"processOptionId","return-object":"","hide-selected":!0,rules:[function(t){return!!t||"dịch vụ bắt buộc phải chọn."}],required:""},on:{change:t.changeDichVuConfigs},model:{value:t.dichVuSelected,callback:function(e){t.dichVuSelected=e},expression:"dichVuSelected"}}):t._e()],1)],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"red darken-3",flat:"flat",loading:t.loadingAction,disabled:t.loadingAction},nativeOn:{click:function(e){t.dialogAction=!1}}},[i("v-icon",[t._v("undo")]),t._v(" \n            Quay lại\n            "),i("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1),i("v-btn",{attrs:{color:"primary",flat:"flat",loading:t.loadingAction,disabled:t.loadingAction},nativeOn:{click:function(e){t.doSubmitDialogAction(t.itemAction)}}},[i("v-icon",[t._v("save")]),t._v(" \n            Đồng ý\n            "),i("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1)],1)],1)],1),i("v-dialog",{attrs:{"max-width":"1000",transition:"fade-transition",persistent:""},model:{value:t.dialogActionProcess,callback:function(e){t.dialogActionProcess=e},expression:"dialogActionProcess"}},[i("v-card",[i("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.validProcess,callback:function(e){t.validProcess=e},expression:"validProcess"}},[i("v-card-title",{staticClass:"headline"},[t._v(t._s(t.itemAction.actionName))]),i("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogActionProcess=!1}}},[i("v-icon",[t._v("clear")])],1),t.loadingActionProcess?i("v-progress-linear",{staticClass:"my-0",attrs:{indeterminate:!0}}):t._e(),i("v-card-text",{staticClass:"py-0 px-0"},[i("v-layout",{attrs:{wrap:""}},[t.dialogActionProcess?i("thong-tin-co-ban-ho-so",{attrs:{detailDossier:t.thongtinhoso}}):t._e(),t.dialogActionProcess&&t.showPhanCongNguoiThucHien?i("phan-cong",{attrs:{type:t.type_assign},model:{value:t.assign_items,callback:function(e){t.assign_items=e},expression:"assign_items"}}):t._e(),t.dialogActionProcess&&t.showTraKetQua?i("tra-ket-qua",{attrs:{resultFiles:t.returnFiles}}):t._e(),t.dialogActionProcess&&t.showThuPhi?i("thu-phi",{attrs:{viaPortal:t.viaPortalDetail},model:{value:t.payments,callback:function(e){t.payments=e},expression:"payments"}}):t._e(),t.dialogActionProcess&&t.showYkienCanBoThucHien?i("y-kien-can-bo",{ref:"ykiencanbo",attrs:{user_note:t.userNote}}):t._e()],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"primary",loading:t.loadingActionProcess,disabled:t.loadingActionProcess},nativeOn:{click:function(e){t.submitFormXuLy(t.dossierItemDialogPick,t.itemDialogPick,t.resultDialogPick,t.indexDialogPick,!1)}}},[i("v-icon",[t._v("save")]),t._v(" \n          Xác nhận\n          "),i("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1),i("v-btn",{attrs:{color:"red",dark:"",loading:t.loadingActionProcess,disabled:t.loadingActionProcess},nativeOn:{click:function(e){t.dialogActionProcess=!1}}},[i("v-icon",[t._v("undo")]),t._v(" \n          Quay lại\n          "),i("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1)],1)],1)],1),i("v-dialog",{attrs:{"max-width":"900",transition:"fade-transition"},model:{value:t.dialogPDF,callback:function(e){t.dialogPDF=e},expression:"dialogPDF"}},[i("v-card",[i("v-card-title",{staticClass:"headline"},[t._v(t._s(t.itemAction.title)+t._s(t.itemAction.tiltle))]),i("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogPDF=!1}}},[i("v-icon",[t._v("clear")])],1),t.dialogPDFLoading?i("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[i("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):t._e(),i("iframe",{directives:[{name:"show",rawName:"v-show",value:!t.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPDFPreview",src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1),i("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"700px"},model:{value:t.dialog_statusAction,callback:function(e){t.dialog_statusAction=e},expression:"dialog_statusAction"}},[i("v-card",[i("v-card-title",{staticClass:"headline"},[t._v("\n        Trạng thái xử lý\n      ")]),i("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(e){return t.closeDialogStatusAction(e)}}},[i("v-icon",[t._v("clear")])],1),i("v-card-text",{staticStyle:{"max-height":"350px"}},t._l(t.selected,function(e,a){return i("div",{key:e.dossierIdCTN},[i("v-layout",{staticClass:"py-1 align-center row-list-style",staticStyle:{"border-bottom":"1px solid #ddd",position:"relative"},attrs:{wrap:""}},[i("v-flex",{attrs:{xs11:""}},[i("span",{staticClass:"text-bold",staticStyle:{position:"absolute"}},[t._v(t._s(a+1)+".")]),i("div",{staticClass:"ml-4"},[i("span",{staticClass:"text-bold"},[t._v(t._s(e.dossierNo))]),t._v(" - "+t._s(e.serviceName))])]),i("v-flex",{staticClass:"text-right",attrs:{xs1:""}},[e.statusAction?i("v-tooltip",{attrs:{top:""}},[i("v-icon",{attrs:{slot:"activator",size:"20",color:"primary"},slot:"activator"},[t._v("\n                  check\n                ")]),i("span",[t._v("Thành công")])],1):i("v-tooltip",{attrs:{top:""}},[i("v-icon",{attrs:{slot:"activator",size:"20",color:"red darken-3"},slot:"activator"},[t._v("\n                  block\n                ")]),i("span",[t._v("Thất bại")])],1)],1)],1)],1)}),0),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"primary",loading:t.loadingAction,disabled:t.loadingAction},nativeOn:{click:function(e){return t.resend(e)}}},[i("v-icon",{attrs:{size:"20"}},[t._v("refresh")]),t._v(" \n          Thử lại\n          "),i("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1),i("v-btn",{attrs:{color:"red",dark:"",loading:t.loadingAction,disabled:t.loadingAction},nativeOn:{click:function(e){return t.closeDialogStatusAction(e)}}},[i("v-icon",[t._v("undo")]),t._v(" \n          Thoát\n          "),i("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1)],1)],1),i("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"700px"},model:{value:t.dialog_printGuide,callback:function(e){t.dialog_printGuide=e},expression:"dialog_printGuide"}},[i("v-card",[i("v-card-title",{staticClass:"headline"},[t._v("\n        Thông tin phiếu hướng dẫn hoàn thiện hồ sơ\n      ")]),i("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialog_printGuide=!1}}},[i("v-icon",[t._v("clear")])],1),i("v-card-text",[i("v-form",{ref:"formGuide",attrs:{"lazy-validation":""},model:{value:t.validGuide,callback:function(e){t.validGuide=e},expression:"validGuide"}},[i("v-layout",{staticClass:"py-1 align-center row-list-style",attrs:{wrap:""}},[i("v-flex",{staticClass:"px-2 pb-3",attrs:{xs12:""}},[i("div",{staticClass:"my-2"},[t._v("Thủ tục hành chính:")]),i("v-select",{staticClass:"input-group--text-field-box",attrs:{items:t.listThuTucHanhChinh,autocomplete:"",placeholder:"Chọn thủ tục hành chính","item-text":"serviceName","item-value":"serviceConfigId","return-object":"","hide-selected":!0,rules:[function(t){return!!t||"Thủ tục bắt buộc phải chọn."}],required:""},on:{change:t.changeServiceConfigsGuide},model:{value:t.thuTucHanhChinhSelectedGuide,callback:function(e){t.thuTucHanhChinhSelectedGuide=e},expression:"thuTucHanhChinhSelectedGuide"}})],1),i("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[i("div",{staticClass:"my-2"},[t._v("Dịch vụ:")]),i("v-select",{staticClass:"input-group--text-field-box",attrs:{items:t.listDichVuGuide,placeholder:"Chọn dịch vụ",autocomplete:"","item-text":"optionName","item-value":"processOptionId","return-object":"","hide-selected":!0,rules:[function(t){return!!t||"dịch vụ bắt buộc phải chọn."}],required:""},model:{value:t.dichVuSelectedGuide,callback:function(e){t.dichVuSelectedGuide=e},expression:"dichVuSelectedGuide"}})],1),i("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[i("div",{staticClass:"my-2"},[t._v("Tên người làm thủ tục:")]),i("v-text-field",{attrs:{placeholder:"Nhập tên người làm thủ tục",box:"",rules:[function(t){return!!t||"Trường dữ liệu bắt buộc"}],required:""},model:{value:t.applicantNameGuide,callback:function(e){t.applicantNameGuide=e},expression:"applicantNameGuide"}})],1),i("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[i("div",{staticClass:"my-2"},[t._v("Địa chỉ:")]),i("v-text-field",{attrs:{placeholder:"Nhập địa chỉ",box:""},model:{value:t.applicantAddressGuide,callback:function(e){t.applicantAddressGuide=e},expression:"applicantAddressGuide"}})],1),i("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[i("div",{staticClass:"my-2"},[t._v("Thư điện tử:")]),i("v-text-field",{attrs:{box:"",placeholder:"Nhập thư điện tử"},model:{value:t.applicantEmailGuide,callback:function(e){t.applicantEmailGuide=e},expression:"applicantEmailGuide"}})],1),i("v-flex",{staticClass:"px-2",attrs:{xs12:""}},[i("div",{staticClass:"my-2"},[t._v("Số điện thoại:")]),i("v-text-field",{attrs:{box:""},model:{value:t.applicantTelNoGuide,callback:function(e){t.applicantTelNoGuide=e},expression:"applicantTelNoGuide"}})],1)],1)],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{staticClass:"mr-3",attrs:{color:"primary",loading:t.loadingAction,disabled:t.loadingAction},on:{click:function(e){t.doGuiding()}}},[i("v-icon",[t._v("print")]),t._v("  \n          In phiếu hướng dẫn\n          "),i("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1)],1)],1),i("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"700px"},model:{value:t.dialog_extraForm,callback:function(e){t.dialog_extraForm=e},expression:"dialog_extraForm"}},[i("v-card",[i("v-card-title",{staticClass:"headline"},[t._v("\n        Điều chỉnh dữ liệu mã hồ sơ: "+t._s(t.selectedDoAction.length>0?t.selectedDoAction[t.selectedDoAction.length-1]["dossierNo"]:"")+"\n      ")]),i("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialog_extraForm=!1}}},[i("v-icon",[t._v("clear")])],1),i("v-card-text",{staticClass:"px-0",attrs:{flat:""}},[i("form-bo-sung-thong-tin",{ref:"formBoSungThongTinNgan",attrs:{dossier_id:t.dossierIdSelected,action_id:t.actionId,type:"dieuchinhdulieu"}})],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{staticClass:"mr-3",attrs:{color:"primary"},on:{click:function(e){t.doChangeDossierExtraForm()}}},[i("v-icon",[t._v("save")]),t._v("  \n          Xác nhận\n        ")],1),i("v-btn",{staticClass:"mr-3",attrs:{color:"primary"},on:{click:function(e){t.dialog_extraForm=!1}}},[i("v-icon",[t._v("clear")]),t._v("  \n          Hủy\n        ")],1)],1)],1)],1)],1)},s=[],o=i("a18c"),n=i("e4e5"),r=i("000e"),l=i("1136"),c=i("7121"),d=i("c23d"),h=i("bf3f"),u=i("f374"),p=i("87c1"),m=i("bbd0"),g=i("d80f"),v=i("9029"),_={props:["index"],components:{"tiny-pagination":r["a"],"thong-tin-co-ban-ho-so":l["a"],"phan-cong":c["a"],"tra-ket-qua":d["a"],"xac-nhan-thu-phi":h["a"],"thu-phi":u["a"],"y-kien-can-bo":p["a"],"template-rendering":n["a"],"form-bo-sung-thong-tin":g["a"]},data:()=>({isAdminSuper:!1,actionId:"",dossierIdSelected:"",dossierCountingShow:!1,dossierCounting:[],advSearchToolsSelected:[],advSearchTools:m.advSearchTools,advSearchItems:[],advObjectSearch:{},menusss:!1,itemFilterSupport:{years:[{value:"",name:"Lọc theo năm"},{value:"2017",name:"năm 2017"},{value:"2018",name:"năm 2018"},{value:"2019",name:"năm 2019"}],year:"",months:[{value:"",name:"Lọc theo tháng"},{value:"1",name:"tháng 1"},{value:"2",name:"tháng 2"},{value:"3",name:"tháng 3"},{value:"4",name:"tháng 4"},{value:"5",name:"tháng 5"},{value:"6",name:"tháng 6"},{value:"7",name:"tháng 7"},{value:"8",name:"tháng 8"},{value:"9",name:"tháng 9"},{value:"10",name:"tháng 10"},{value:"11",name:"tháng 11"},{value:"12",name:"tháng 12"}],month:"",tops:[{value:"",name:"toàn bộ"},{value:"overdue",name:"hồ sơ đang quá hạn cần giải quyết"},{value:"delay",name:"chậm hạn trả"},{value:"coming",name:"sắp đến hạn"}],top:"",statusLists:[],status:"",substatusLists:[{itemCode:"",itemName:"toàn bộ"}],substatus:"",agencyLists:[],agency:"",serviceLists:[],service:"",domainLists:[],domain:"",keyword:"",register:""},itemFilterKey:["year","month","top","status","substatus","agency","service","domain","keyword","register"],menuType:0,type_assign:"",assign_items:[],returnFiles:[],payments:"",viaPortalDetail:0,countSelected:0,statusFailed:0,dialog_statusAction:!1,dialog_printGuide:!1,dialog_extraForm:!1,validGuide:!1,applicantNameGuide:"",applicantEmailGuide:"",applicantTelNoGuide:"",applicantAddressGuide:"",dossierSelected:[{dossierNo:"18ACE289",serviceName:"Đăng ký, cấp Giấy chứng nhận quyền sử dụng đất, quyền sở hữu nhà ở và tài sản khác gắn liền với đất lần đầu đối với tài sản gắn liền với đất mà chủ sở hữu không đồng thời là người sử dụng đất",statusAction:!1}],buttonConfigItem:{},textNote:"",thongtinhoso:{},dossierId:0,valid:!0,isCallBack:!0,trangThaiHoSoList:null,listDichVu:[],dichVuSelected:null,btnDynamics:[],btnDossierDynamics:[],btnStepsDynamics:[],loading:!0,headers:[],hideAction:!1,hosoDatas:[],hosoDatasTotal:0,hosoDatasPage:1,hosoTotalPage:0,selectedDoAction:[],selectMultiplePage:[],selected:[],listThuTucHanhChinh:[],listThuTuc:[],thuTucHanhChinhSelected:null,thuTucHanhChinhSelectedGuide:null,listLinhVuc:[],linhVucSelected:null,listDichVuGuide:[],dichVuSelectedGuide:null,templateNoGuide:"",domainCode:"",govAgencyCode:"",serviceCode:"",templateNo:"",dossierNoKey:"",searchKey:"",dialogAction:!1,loadingAction:!1,dialogActionProcess:!1,loadingActionProcess:!1,validProcess:!1,indexAction:-1,itemAction:{title:""},showThongTinCoBanHoSo:!1,showYkienCanBoThucHien:!1,showFormBoSungThongTinNgan:!1,showPhanCongNguoiThucHien:!1,showTaoTaiLieuKetQua:!1,showKyPheDuyetTaiLieu:!1,showTraKetQua:!1,showXacNhanThuPhi:!1,showThuPhi:!1,showThucHienThanhToanDienTu:!1,dossierItemDialogPick:null,itemDialogPick:null,resultDialogPick:null,indexDialogPick:0,userNote:0,dialogPDF:!1,dialogPDFLoading:!0,filterForm:null,checkSelectAll:3!==(void 0).menuType&&1!==(void 0).originality,titleLanding:"",currentQueryState:""}),computed:{loadingDynamicBtn(){return this.$store.getters.loadingDynamicBtn},loadingTable(){return this.$store.getters.loadingTable},originality(){var t=this;return t.getOriginality()},currentUser(){return this.$store.getters.loadingInitData.user},activeLoadingDataHoSo(){return this.$store.getters.activeLoadingDataHoSo},viewMobile(){return v["isMobile"]}},created(){var t=this;t.selectMultiplePage=[],t.$nextTick(function(){let e=t.$router.history.current.query,i=t.$router.history.current.query;t.currentQueryState=e,e.hasOwnProperty("page")&&"1"!==e["page"]?t.hosoDatasPage=parseInt(e["page"]):t.hosoDatasPage=1,t.setStateAdvSearch(i)})},updated(){var t=this;t.$nextTick(function(){let e=t.$router.history.current.params,i=t.$router.history.current.query;t.currentQueryState=i,e.hasOwnProperty("index")&&t.isCallBack&&(t.isCallBack=!1,t.$store.commit("setLoadingDynamicBtn",!0),setTimeout(()=>{t.$store.dispatch("loadMenuConfigToDo").then(function(e){t.btnDynamics=[],t.trangThaiHoSoList=e,t.menuType=parseInt(t.trangThaiHoSoList[t.index]["menuType"]),t.processListTTHC(i),t.processListDomain(i),null!==t.trangThaiHoSoList[t.index]["tableConfig"]&&void 0!==t.trangThaiHoSoList[t.index]["tableConfig"]&&t.trangThaiHoSoList[t.index]["tableConfig"].hasOwnProperty("headers")&&(t.headers=t.trangThaiHoSoList[t.index]["tableConfig"]["headers"]),null!==t.trangThaiHoSoList[t.index]["tableConfig"]&&void 0!==t.trangThaiHoSoList[t.index]["tableConfig"]&&t.trangThaiHoSoList[t.index]["tableConfig"].hasOwnProperty("hideAction")&&(t.hideAction=t.trangThaiHoSoList[t.index]["tableConfig"]["hideAction"]),null!==t.trangThaiHoSoList[t.index]["buttonConfig"]&&void 0!==t.trangThaiHoSoList[t.index]["buttonConfig"]&&t.trangThaiHoSoList[t.index]["buttonConfig"].hasOwnProperty("buttons")&&(t.btnDynamics=t.trangThaiHoSoList[t.index]["buttonConfig"]["buttons"]),null!==t.trangThaiHoSoList[t.index]["buttonConfig"]&&void 0!==t.trangThaiHoSoList[t.index]["buttonConfig"]&&t.trangThaiHoSoList[t.index]["buttonConfig"].hasOwnProperty("layout_view")&&(t.filterForm=t.trangThaiHoSoList[t.index]["buttonConfig"]["layout_view"]);let a=[],s=[];for(let i in t.btnDynamics)t.btnDynamics[i].hasOwnProperty("onlySteps")?a.push(t.btnDynamics[i]):s.push(t.btnDynamics[i]);if(t.btnDynamics=[],t.btnDynamics=s,t.btnStepsDynamics=[],i.hasOwnProperty("step"))for(let n in t.trangThaiHoSoList[t.index]["items"]){let e=t.trangThaiHoSoList[t.index]["items"][n];if(String(e.stepCode)===String(i.step)){for(let i in a)for(var o=0;o<a[i].onlySteps.length;o++)String(a[i].onlySteps[o])===String(e.stepCode)&&t.btnDynamics.push(a[i]);break}}t.$store.commit("setLoadingDynamicBtn",!1)})},200))})},watch:{$route:function(t,e){let i=this,a=t.query,s=e.query;if(i.currentQueryState=a,a.hasOwnProperty("q")){i.btnDynamics=[],i.$store.commit("setLoadingDynamicBtn",!0),i.menuType=i.trangThaiHoSoList[i.index]["menuType"],i.headers=i.trangThaiHoSoList[i.index]["tableConfig"]["headers"],null!==i.trangThaiHoSoList[i.index]["tableConfig"]&&void 0!==i.trangThaiHoSoList[i.index]["tableConfig"]&&i.trangThaiHoSoList[i.index]["tableConfig"].hasOwnProperty("hideAction")&&(i.hideAction=i.trangThaiHoSoList[i.index]["tableConfig"]["hideAction"]),null!==i.trangThaiHoSoList[i.index]["buttonConfig"]&&void 0!==i.trangThaiHoSoList[i.index]["buttonConfig"]&&i.trangThaiHoSoList[i.index]["buttonConfig"].hasOwnProperty("buttons")&&(i.btnDynamics=i.trangThaiHoSoList[i.index]["buttonConfig"]["buttons"]),null!==i.trangThaiHoSoList[i.index]["buttonConfig"]&&void 0!==i.trangThaiHoSoList[i.index]["buttonConfig"]&&i.trangThaiHoSoList[i.index]["buttonConfig"].hasOwnProperty("layout_view")&&(i.filterForm=i.trangThaiHoSoList[i.index]["buttonConfig"]["layout_view"]);let t=[],e=[];for(let a in i.btnDynamics)i.btnDynamics[a].hasOwnProperty("onlySteps")?t.push(i.btnDynamics[a]):e.push(i.btnDynamics[a]);if(i.btnDynamics=[],i.btnDynamics=e,i.btnStepsDynamics=[],a.hasOwnProperty("step"))for(let s in i.trangThaiHoSoList[i.index]["items"]){let e=i.trangThaiHoSoList[i.index]["items"][s];if(String(e.stepCode)===String(a.step)){for(let a in t)for(var o=0;o<t[a].onlySteps.length;o++)String(t[a].onlySteps[o])===String(e.stepCode)&&i.btnDynamics.push(t[a]);break}}if(a.hasOwnProperty("page")?(i.hosoDatasPage=parseInt(a.page),a.page===s["page"]&&(i.selectMultiplePage=[])):(i.hosoDatasPage=1,i.selectMultiplePage=[]),i.$store.commit("setLoadingDynamicBtn",!1),null===i.listLinhVuc||void 0===i.listLinhVuc||null!==i.listLinhVuc&&void 0!==i.listLinhVuc&&0===i.listLinhVuc.length)i.processListDomain(a);else for(let s in i.listLinhVuc)String(i.listLinhVuc[s]["domainCode"])===String(a.domain)&&(i.linhVucSelected=i.listLinhVuc[s],i.domainCode=i.linhVucSelected["domainCode"]);null===i.listThuTucHanhChinh||void 0===i.listThuTucHanhChinh||null!==i.listThuTucHanhChinh&&void 0!==i.listThuTucHanhChinh&&0===i.listThuTucHanhChinh.length?i.processListTTHC(a):i.doLoadingDataHoSo(),i.setStateAdvSearch(a)}},activeLoadingDataHoSo(t){var e=this;setTimeout(function(){e.doLoadingDataHoSo()},100)},selectMultiplePage:{handler:function(t){let e=this;if(t.length>0){e.selectedDoAction=[];for(let i in t)e.selectedDoAction=e.selectedDoAction.concat(t[i]["selected"])}else e.selectedDoAction=[]},deep:!0}},methods:{toggleAll(){var t=this;if(t.getUser("Administrator"))t.selected.length?t.selected=[]:t.selected=t.hosoDatas;else{if(!t.thuTucHanhChinhSelected||t.thuTucHanhChinhSelected&&"0"===t.thuTucHanhChinhSelected.serviceConfigId||t.thuTucHanhChinhSelected&&""===t.thuTucHanhChinhSelected.serviceConfigId)return;t.selected.length?t.selected=[]:t.selected=t.hosoDatas.filter(function(t){return 0!==t["assigned"]})}t.selectMultiplePage[t.hosoDatasPage-1]["selected"]=t.selected},getUser(t){let e=this,i=e.$store.getters.getUser.role,a=i.findIndex(e=>e===t);return a>=0},changeSelected(){let t=this;t.selectMultiplePage[t.hosoDatasPage-1]["selected"]=t.selected},setStateAdvSearch(t){let e=this;if(t.hasOwnProperty("adv_renew")){e.advSearchItems=[];for(let i in e.itemFilterKey)for(let a in t){if(e.itemFilterKey[i]===a&&t[a]){e.itemFilterSupport[e.itemFilterKey[i]]=t[a];break}e.itemFilterSupport[e.itemFilterKey[i]]=""}for(let t in e.itemFilterKey){let i=e.itemFilterKey[t],a=e.advSearchTools.find(function(t){return t.spec===i});if(e.itemFilterSupport[i])if("keyword"===i)e.advSearchItems.push({spec:i,value:i+":"+e.itemFilterSupport[i],text:i+":"+e.itemFilterSupport[i],index:-1});else if("year"===i){let t=e.advSearchItems.find(function(t){return"year_month"===t.spec});t?(t["value"]="year_month:"+e.itemFilterSupport[i]+"_"+e.itemFilterSupport["month"],t["text"]="year_month:"+e.itemFilterSupport[i]+"_"+e.itemFilterSupport["month"],t["index"]=0):e.advSearchItems.push({spec:"year_month",value:"year_month:"+e.itemFilterSupport[i]+"_"+e.itemFilterSupport["month"],text:"year_month:"+e.itemFilterSupport[i]+"_"+e.itemFilterSupport["month"],index:0})}else if("month"===i){let t=e.advSearchItems.find(function(t){return"year_month"===t.spec});t?(t["value"]="year_month:"+e.itemFilterSupport["year"]+"_"+e.itemFilterSupport[i],t["text"]="year_month:"+e.itemFilterSupport["year"]+"_"+e.itemFilterSupport[i],t["index"]=0):e.advSearchItems.push({spec:"year_month",value:"year_month:"+e.itemFilterSupport["year"]+"_"+e.itemFilterSupport[i],text:"year_month:"+e.itemFilterSupport["year"]+"_"+e.itemFilterSupport[i],index:0})}else e.advSearchItems.push({spec:i,value:i+":"+e.itemFilterSupport[i],text:i+":"+e.itemFilterSupport[i],index:a["index"]})}}else e.advSearchItems=[];for(let i in e.advSearchTools){e.advSearchTools[i].display=!1,e.advSearchTools[i].disabled=!1;let t=e.advSearchItems.find(function(t){return t.spec===e.advSearchTools[i].spec});t&&(e.advSearchTools[i].display=!0,e.advSearchTools[i].disabled=!0)}},resend(){var t=this;t.doActions(null,t.buttonConfigItem,null,!0)},closeDialogStatusAction(){var t=this;t.dialog_statusAction=!1,t.selectedDoAction=t.selectedDoAction.filter(function(t){return!t.statusAction})},submitFormXuLy(t,e,i,a,s){var o=this;if(o.showYkienCanBoThucHien){let s=o.$refs.ykiencanbo.doExport();s.valid&&(o.textNote=s.text,o.processAction(t,e,i,a,!1))}else o.processAction(t,e,i,a,!1)},processListTTHC(t){let e=this;e.$store.dispatch("loadListThuTucHanhChinh").then(function(i){if((!t.hasOwnProperty("domain")||t.hasOwnProperty("domain")&&""===String(t.domain))&&(e.listThuTucHanhChinh=i.map(t=>{return t["displayName"]=t["serviceCode"]+" - "+t["serviceName"],t})),e.listThuTuc=i.map(t=>{return t["displayName"]=t["serviceCode"]+" - "+t["serviceName"],t}),t.hasOwnProperty("service_config")&&"0"!==String(t.service_config)){for(let a in e.listThuTucHanhChinh)if(String(e.listThuTucHanhChinh[a].serviceConfigId)===String(t.service_config)){if(e.thuTucHanhChinhSelected=e.listThuTucHanhChinh[a],null!==e.thuTucHanhChinhSelected&&void 0!==e.thuTucHanhChinhSelected&&e.thuTucHanhChinhSelected.hasOwnProperty("options"))if(e.govAgencyCode=e.thuTucHanhChinhSelected.govAgencyCode,e.serviceCode=e.thuTucHanhChinhSelected.serviceCode,t.hasOwnProperty("template_no")){e.listDichVu=e.thuTucHanhChinhSelected.options;for(let i in e.listDichVu)e.listDichVu[i].templateNo===t.template_no&&(e.dichVuSelected=e.listDichVu[i],e.templateNo=e.dichVuSelected.templateNo)}else e.listDichVu=[],e.dichVuSelected=null,e.govAgencyCode="",e.serviceCode="",e.templateNo="";break}}else e.thuTucHanhChinhSelected=null,e.dichVuSelected=null,e.govAgencyCode="",e.serviceCode="",e.templateNo="";e.doLoadingDataHoSo()})},processListDomain(t){let e=this;e.$store.dispatch("getDomainLists").then(function(i){if(i.length>0&&(e.listLinhVuc=i.map(t=>{return t["displayName"]=t["domainCode"]+" - "+t["domainName"],t})),t.hasOwnProperty("domain")&&""!==String(t.domain)){for(let a in e.listLinhVuc)String(e.listLinhVuc[a]["domainCode"])===String(t.domain)&&(e.linhVucSelected=e.listLinhVuc[a],e.domainCode=e.linhVucSelected["domainCode"]);let i={domain:e.linhVucSelected.domainCode};e.$store.dispatch("getServiceinfoFilter",i).then(t=>{e.listThuTucHanhChinh=t.map(t=>{return t["displayName"]=t["serviceCode"]+" - "+t["serviceName"],t})})}else e.linhVucSelected=null})},checkPemissionSpecialAction(t,e,i){var a=this,s=!0;if("PRINT_01"!==t&&"PRINT_02"!==t&&"PRINT_03"!==t&&"GUIDE"!==t&&"PREVIEW"!==t&&"BETIMES"!==t){let t=a.$store.getters.getUsersNextAction;if(t.length>0){let i=t.filter(function(t){return t["userId"].toString()===e["userId"].toString()});s=i.length>0}else s=!1}return"ROLLBACK_01"!==t&&"ROLLBACK_02"!==t&&"ROLLBACK_03"!==t||(s=!1),s},paggingData(t){let e=this,i=e.$router.history.current,a=i.query,s="?";a["page"]="";for(let o in a)""!==a[o]&&"undefined"!==a[o]&&void 0!==a[o]&&(s+=o+"="+a[o]+"&");s+="page="+t.page,e.$router.push({path:i.path+s})},doLoadingDataHoSo(){let t=this;t.selected=[];let e=o["a"].history.current.query;if(console.log("currentQuery======",e),e.hasOwnProperty("q")){let a;a=e.q.indexOf("step")>0?e.q:e["step"]?e.q+"&step="+e["step"]:e.q;var i=null;if(3!==t.menuType)i={queryParams:a,page:t.hosoDatasPage,agency:e.hasOwnProperty("agency")?e.agency:t.govAgencyCode,service:e.hasOwnProperty("service")?e.service:t.serviceCode,template:e.hasOwnProperty("template")?e.template:t.templateNo,domain:e.hasOwnProperty("domain")?e.domain:t.domainCode,status:e.hasOwnProperty("status")?e.status:"",substatus:e.hasOwnProperty("substatus")?e.substatus:"",year:e.hasOwnProperty("year")?e.year:0,month:e.hasOwnProperty("month")?e.month:0,top:e.hasOwnProperty("top")?e.top:"",keyword:e.hasOwnProperty("keyword")&&e.keyword?e.keyword:t.searchKey,register:e.hasOwnProperty("register")?e.register:"",dossierNo:t.dossierNoKey?t.dossierNoKey:""};else{let s=e.hasOwnProperty("status")&&"deleted"===e["status"]?-1:"";i={queryParams:a,page:t.hosoDatasPage,agency:e.hasOwnProperty("agency")?e.agency:t.govAgencyCode,service:e.hasOwnProperty("service")?e.service:t.serviceCode,template:e.hasOwnProperty("template")?e.template:t.templateNo,domain:e.hasOwnProperty("domain")?e.domain:t.domainCode,status:e.hasOwnProperty("status")&&e["status"]&&"deleted"!==e["status"]?e.status:"",substatus:e.hasOwnProperty("substatus")?e.substatus:"",year:e.hasOwnProperty("year")?e.year:0,month:e.hasOwnProperty("month")?e.month:0,top:e.hasOwnProperty("top")?e.top:"",keyword:e.hasOwnProperty("keyword")&&e.keyword?e.keyword:"",register:e.hasOwnProperty("register")?e.register:"",originality:e.hasOwnProperty("originality")&&e["originality"]?e.originality:s,dossierNo:t.dossierNoKey?t.dossierNoKey:""}}t.$store.dispatch("loadingDataHoSo",i).then(function(e){if(t.hosoDatas=e.data,t.hosoDatasTotal=e.total,t.hosoTotalPage=Math.ceil(t.hosoDatasTotal/15),t.hosoTotalPage>0&&0===t.selectMultiplePage.length){for(let e=0;e<t.hosoTotalPage;e++){let i={selected:[],page:e+1};t.selectMultiplePage.push(i)}console.log("selectMultiplePage",t.selectMultiplePage)}t.selected=t.selectMultiplePage[t.hosoDatasPage-1]["selected"]}).catch(e=>{t.hosoDatas=[],t.hosoDatasTotal=0})}3===t.menuType||"3"===String(t.menuType)?setTimeout(()=>{t.$store.dispatch("loadingDossierCounting").then(function(e){if(null!==e&&void 0!==e){if(t.dossierCounting=e,t.getUser("Administrator_data")){let e={key:"deleted",title:"Hồ sơ đã xóa",count:0};t.dossierCounting.push(e)}}else t.dossierCounting=[];t.dossierCountingShow=!0})},200):t.dossierCountingShow=!1},changeServiceConfigs(t){let e=this;e.selectMultiplePage=[],null!==t&&"null"!==t&&t.hasOwnProperty("options")?this.listDichVu=t.options:this.listDichVu=[],null!==this.listDichVu&&void 0!==this.listDichVu&&"undefined"!==this.listDichVu&&this.listDichVu.length>0?(this.dichVuSelected=this.listDichVu[0],this.templateNo=this.dichVuSelected.templateNo):this.dichVuSelected=null;let i=e.$router.history.current,a=i.query,s="?";a["service_config"]="",a["template_no"]="";for(let o in a)"page"===o?s+=o+"=1&":""!==a[o]&&"undefined"!==a[o]&&void 0!==a[o]&&"step"!==o&&(s+=o+"="+a[o]+"&");-1===String(a["q"]).indexOf("&step")&&3!==e.menuType&&(s+="step="+a["step"]+"&"),null!==this.listDichVu&&void 0!==this.listDichVu&&"undefined"!==this.listDichVu&&this.listDichVu.length>0?(s+="service_config="+t.serviceConfigId,s+="&template_no="+this.dichVuSelected.templateNo,e.govAgencyCode=t.govAgencyCode,e.serviceCode=t.serviceCode):(e.templateNo="",e.govAgencyCode="",e.serviceCode=""),e.$router.push({path:i.path+s})},changeServiceConfigsGuide(t){null!==t&&"null"!==t&&t.hasOwnProperty("options")?this.listDichVuGuide=t.options:this.listDichVuGuide=[],null!==this.listDichVuGuide&&void 0!==this.listDichVuGuide&&"undefined"!==this.listDichVuGuide&&this.listDichVuGuide.length>0?(this.dichVuSelectedGuide=this.listDichVuGuide[0],this.templateNoGuide=this.dichVuSelectedGuide.templateNo):this.dichVuSelectedGuide=null},changeDomain(t){let e=this;e.selectMultiplePage=[],e.linhVucSelected=t,t?setTimeout(function(){let t={domain:e.linhVucSelected.domainCode};e.$store.dispatch("getServiceinfoFilter",t).then(t=>{e.listThuTucHanhChinh=t.map(t=>{return t["displayName"]=t["serviceCode"]+" - "+t["serviceName"],t})})},100):e.listThuTucHanhChinh=e.listThuTuc,e.domainCode=null!==t?e.linhVucSelected["domainCode"]:"";let i=e.$router.history.current,a=i.query,s="?";a["domain"]="";for(let o in a)"page"===o?s+=o+"=1&":""!==a[o]&&"undefined"!==a[o]&&void 0!==a[o]&&"step"!==o&&(s+=o+"="+a[o]+"&");-1===String(a["q"]).indexOf("&step")&&3!==e.menuType&&(s+="step="+a["step"]+"&"),s+="domain="+e.domainCode,e.$router.push({path:i.path+s,query:{renew:Math.floor(100*Math.random())+1}})},changeDossierNoKey(){var t=this;t.selectMultiplePage=[],setTimeout(function(){t.dossierNoKey?(t.dossierNoKey.length>3||""===t.dossierNoKey)&&t.doLoadingDataHoSo():t.doLoadingDataHoSo()},200)},clearDossierNoKey(){this.dossierNoKey="",this.changeDossierNoKey()},changeDichVuConfigs(t){let e=this;e.selectMultiplePage=[];let i=e.$router.history.current,a=i.query,s="?";a["template_no"]="";for(let o in a)""!==a[o]&&"undefined"!==a[o]&&void 0!==a[o]&&(s+=o+"="+a[o]+"&");s+="template_no="+t.templateNo,e.templateNo=t.templateNo,e.$router.push({path:i.path+s})},btnActionEvent(t,e,i,a){let s=this;if(s.buttonConfigItem={},s.buttonConfigItem=e,s.itemAction=e,s.indexAction=i,"NEW"===String(e.form)){let t=!0;null!==s.dichVuSelected&&void 0!==s.dichVuSelected&&"undefined"!==s.dichVuSelected&&null!==s.listDichVu&&void 0!==s.listDichVu&&1===s.listDichVu.length&&(t=!1),t?s.dialogAction=!0:s.doCreateDossier()}else if("UPDATE"===String(e.form))o["a"].push({path:"/danh-sach-ho-so/"+s.index+"/ho-so/"+t.dossierId+"/"+s.itemAction.form,query:s.$router.history.current.query});else if("ADD"===String(e.form))o["a"].push({path:"/danh-sach-ho-so/"+s.index+"/bo-sung-ho-so/"+t.dossierId,query:s.$router.history.current.query});else if("COPY"===String(e.form))s.doCopy(t,e,i,a);else if("CANCEL"===String(e.form))s.doCancel(t,e,i,a);else if("PRINT_01"===String(e.form))s.doPrint01(t,e,i,a);else if("PRINT_02"===String(e.form))s.doPrint02(t,e,i,a);else if("PRINT_03"===String(e.form))s.doPrint03(t,e,i,a);else if("GUIDING"===String(e.form))s.dialog_printGuide=!0;else if("PREVIEW"===String(e.form))s.doPreview(t,e,i,a);else if("ACTIONS"===String(e.form))s.doActions(t,e,i,a);else if("DELETE"===String(e.form))s.doDeleteDossier(t,e,i,a);else if("ROLLBACK_01"===String(e.form)){let a={actionCode:9e3};s.processAction(t,e,a,i,!0)}else if("ROLLBACK_02"===String(e.form)){let a={actionCode:9e3};s.processAction(t,e,a,i,!0)}else if("OVERDUE"===String(e.form)){let e={actionCode:8500,dossierId:t.dossierId,overdue:t["extendDate"]};s.processPullBtnDetailRouter(t,null,e,null,8500)}else if("PREOVERDUE"===String(e.form)){let e={actionCode:8501,dossierId:t.dossierId,preoverdue:t["extendDate"]};s.processPullBtnDetailRouter(t,null,e,null,8501)}else if("BETIMES"===String(e.form)){let e={actionCode:8400,dossierId:t.dossierId,betimes:t["extendDate"]};s.processPullBtnDetailRouter(t,null,e,null,8400)}else if("CHANGE_DATA_DOSSIER"===String(e.form))s.doChangeDossier(t,e,i,a);else if("UNDO_DOSSIER"===String(e.form))s.doUndoDossier(t,e,i,a);else if("RESTORE_DOSSIER"===String(e.form))s.doRestoreDossier(t,e,i,a);else if("GOTO_DONE"===String(e.form)){if(!t)return void alert("Chọn hồ sơ để thực hiện");let a={actionCode:4e3};s.processAction(t,e,a,i,!0)}else if("GOTO_CANCEL"===String(e.form)){if(!t)return void alert("Chọn hồ sơ để thực hiện");let a={actionCode:4100};s.processAction(t,e,a,i,!0)}else if("GOTO_DENY"===String(e.form)){if(!t)return void alert("Chọn hồ sơ để thực hiện");let a={actionCode:4200};s.processAction(t,e,a,i,!0)}},doPrint01(t,e,i,a){let s=this;s.dialogPDFLoading=!0,s.dialogPDF=!0;let o={dossierId:t.dossierId,document:e.document};s.$store.dispatch("doPrint01",o).then(function(t){s.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=t})},doPrint02(t,e,i,a){let s=this;if(console.log("vm.selectedDoAction",s.selectedDoAction),null===s.thuTucHanhChinhSelected||void 0===s.thuTucHanhChinhSelected||"undefined"===s.thuTucHanhChinhSelected)alert("Loại thủ tục bắt buộc phải chọn");else{let t={document:e.document,serviceCode:s.thuTucHanhChinhSelected.serviceCode,govAgencyCode:s.thuTucHanhChinhSelected.govAgencyCode,dossiers:JSON.stringify(s.selectedDoAction)};s.dialogPDFLoading=!0,s.dialogPDF=!0,s.$store.dispatch("doPrint02",t).then(function(t){s.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=t})}},doPrint03(t,e,i,a){let s=this;s.dialogPDFLoading=!0,s.dialogPDF=!0;let o={dossierId:t.dossierId,document:e.document};s.$store.dispatch("doPrint03",o).then(function(t){s.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=t})},doGuiding(){let t=this;if(t.$refs.formGuide.validate()){t.loadingAction=!0;let e={serviceConfigId:t.thuTucHanhChinhSelectedGuide.serviceConfigId,serviceCode:t.thuTucHanhChinhSelectedGuide.serviceCode,serviceName:t.thuTucHanhChinhSelectedGuide.serviceName,templateNo:t.templateNoGuide,applicantName:t.applicantNameGuide,applicantAddress:t.applicantAddressGuide,applicantEmail:t.applicantEmailGuide,applicantTelNo:t.applicantTelNoGuide,employeeName:window.themeDisplay.getUserName()?window.themeDisplay.getUserName():"",typeCode:"DOC_03"};t.dialogPDFLoading=!0,t.dialogPDF=!0,t.$store.dispatch("doGuiding",e).then(function(e){t.loadingAction=!1,t.dialog_printGuide=!1,t.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=e}).catch(function(){t.loadingAction=!1})}},doPreview(t,e,i,a){let s=this;s.dialogPDFLoading=!0,s.dialogPDF=!0;let o={dossierId:t.dossierId,document:e.document};s.$store.dispatch("doPrint03",o).then(function(t){s.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview").src=t})},doActions(t,e,i,a){let s=this;s.$router.history.current.query,e.action;if(a)if(s.countSelected=0,1===s.selectedDoAction.length)for(let n in s.selectedDoAction){let t=s.selectedDoAction[n];o["a"].push({path:"/danh-sach-ho-so/"+s.index+"/chi-tiet-ho-so/"+t["dossierId"],query:{activeTab:"tabs-1",btnIndex:null}})}else s.selectedDoAction.length>1?s.$store.dispatch("loadActionActive",e).then(function(){s.$store.dispatch("loadDossierSelected",s.selectedDoAction).then(function(){let t=s.selectedDoAction.map(t=>{return t.dossierId}).join(","),i=s.$router.history.current.query;i["dossiers"]=t,i["actionActive"]=JSON.stringify(e),o["a"].push({path:"/danh-sach-ho-so/"+s.index+"/xu-ly-ho-so",query:i})})}):alert("Chọn hồ sơ để thao tác")},doCopy(t,e,i,a){let s=this,n={dossierId:t.dossierId};s.loadingAction=!0,s.$store.dispatch("doCopy",n).then(function(t){s.loadingAction=!1,s.indexAction=-1,o["a"].push({path:"/danh-sach-ho-so/"+s.index+"/ho-so/"+t.dossierId+"/"+s.itemAction.form,query:s.$router.history.current.query})}).catch(t=>{s.loadingAction=!1})},doCancel(t,e,i,a){let s=this;if(s.loadingAction=!0,a);else{let e={dossierId:t.dossierId};s.$store.dispatch("doCancel",e).then(function(t){s.loadingAction=!1,s.indexAction=-1,o["a"].push({path:"/danh-sach-ho-so/"+s.index+"/ho-so/"+t.dossierId+"/"+s.itemAction.form,query:s.$router.history.current.query})}).catch(t=>{s.loadingAction=!1})}},doChangeDossier(t,e,i,a){let s=this;s.$router.history.current.query;if(a)if(s.selectedDoAction.length>0){let t=s.selectedDoAction.length;s.actionId=9100,s.dossierIdSelected=s.selectedDoAction[t-1].dossierId,s.dialog_extraForm=!0}else alert("Chọn hồ sơ để thực hiện")},doUndoDossier(t,e,i,a){let s=this;s.$router.history.current.query;if(s.selectedDoAction.length>0){let t=s.selectedDoAction.length,e=confirm("Xác thực Undo hồ sơ với mã: "+s.selectedDoAction[t-1].dossierNo);if(e){let e={dossierId:s.selectedDoAction[t-1].dossierId};s.$store.dispatch("rollBack",e).then(function(t){setTimeout(function(){s.doLoadingDataHoSo()},300)}).catch(function(){setTimeout(function(){s.doLoadingDataHoSo()},300)})}}else alert("Chọn hồ sơ để thực hiện")},doChangeDossierExtraForm(){let t=this,e=t.$refs.formBoSungThongTinNgan.checkValid();if(e){let e=t.$refs.formBoSungThongTinNgan.formSubmitData(),i=confirm("Bạn có chắc chắn thực hiện hành động điều chỉnh dữ liệu?");if(i){let i=t.selectedDoAction.length,a={dossierId:t.selectedDoAction[i-1].dossierId,actionCode:t.actionId,payload:e};t.$store.dispatch("processDossierRouter",a).then(function(e){t.doLoadingDataHoSo(),t.dialog_extraForm=!1}).catch(function(){t.dialog_extraForm=!1,t.doLoadingDataHoSo()})}}},doRestoreDossier(){let t=this,e=confirm("Bạn có chắc chắn thực hiện hành động khôi phục hồ sơ?");if(e)if(t.selectedDoAction.length>0){let e=0,i=t.selectedDoAction.length;for(let a in t.selectedDoAction){let s={dossierId:t.selectedDoAction[a]["dossierId"]};console.log("filter Restore",s),t.selectedDoAction[a]["originality"]&&t.$store.dispatch("restoreDossier",s).then(function(a){e+=1,e===i&&t.doLoadingDataHoSo()}).catch(function(){e+=1,e===i&&t.doLoadingDataHoSo()})}}else alert("Chọn hồ sơ để thực hiện")},doDeleteDossier(t,e,i,a){let s=this,n=confirm("Bạn có chắc chắn thực hiện hành động xóa hồ sơ?");if(!n)return!1;{let e=s.$router.history.current.query;if(a){let t={dossierId:0};if(s.selectedDoAction.length>0){let e=[];for(let t in s.selectedDoAction)e.push(s.selectedDoAction[t]["dossierId"]);t["dossierId"]=e,s.$store.dispatch("deleteDossierPatch",t).then(function(t){})}else alert("Chọn hồ sơ để thực hiện")}else{let i={dossierId:t.dossierId};s.$store.dispatch("deleteDossier",i).then(function(t){s.dialogActionProcess=!1,s.loadingActionProcess=!1,o["a"].push({path:s.$router.history.current.path,query:{recount:Math.floor(100*Math.random())+1,renew:Math.floor(100*Math.random())+1,q:e["q"]}})})}}},doCreateDossier(){let t=this,e={serviceCode:t.serviceCode,govAgencyCode:t.govAgencyCode,templateNo:t.templateNo,originality:t.getOriginality()};t.$store.commit("setDataCreateDossier",e),t.loadingAction=!0,t.$store.dispatch("postDossier",e).then(function(e){t.loadingAction=!1,t.indexAction=-1,o["a"].push({path:"/danh-sach-ho-so/"+t.index+"/ho-so/"+e.dossierId+"/"+t.itemAction.form,query:t.$router.history.current.query})}).catch(e=>{t.loadingAction=!1})},doSubmitDialogAction(t){let e=this;e.$refs.form.validate()&&e.doCreateDossier()},processPullBtnDynamics(t){let e=this;e.btnDossierDynamics=[];let i={dossierId:t.dossierId,dossierStatus:t.dossierStatus,dossierSubStatus:t.dossierSubStatus};if(e.dossierId=t.dossierId,""===t.dossierStatus||""===t.dossierSubStatus)e.$store.dispatch("pullNextactions",i).then(t=>{e.btnDossierDynamics=t});else{e.btnStepsDynamics=[];var a=[e.$store.dispatch("pullNextactions",i),e.$store.dispatch("pullBtnConfigStep",i)];Promise.all(a).then(t=>{e.btnDossierDynamics=t[0],e.btnStepsDynamics=t[1]}).catch(t=>{e.$store.dispatch("pullNextactions",i).then(t=>{e.btnDossierDynamics=t})})}},processAction(t,e,i,a,s){let n=this;var r=null;n.payments&&(r={requestPayment:n.payments["requestPayment"],advanceAmount:Number(n.payments["advanceAmount"].toString().replace(/\./g,"")),feeAmount:Number(n.payments["feeAmount"].toString().replace(/\./g,"")),serviceAmount:Number(n.payments["serviceAmount"].toString().replace(/\./g,"")),shipAmount:Number(n.payments["shipAmount"].toString().replace(/\./g,""))});let l={dossierId:t.dossierId,actionCode:i.actionCode,toUsers:n.assign_items,payment:r,userNote:n.textNote?n.textNote:""};n.dossierId=t.dossierId;let c=n.$router.history.current.query,d="?";c["recount"]=Math.floor(100*Math.random())+1,c["renew"]=Math.floor(100*Math.random())+1;for(let o in c)""!==c[o]&&"undefined"!==c[o]&&void 0!==c[o]&&(d+=o+"="+c[o]+"&");if(n.loadingActionProcess=!0,s){let t=confirm("Bạn có muốn thực hiện hành động này?");if(!t)return!1;n.$store.dispatch("processDossierRouter",l).then(function(t){n.dialogActionProcess=!1,n.loadingActionProcess=!1,n.$router.push({path:n.$router.history.current.path+d})})}else t.statusAction||n.$store.dispatch("processCheckNextActions",l).then(function(t){n.$store.dispatch("processDossierRouter",t).then(function(t){n.dialogActionProcess=!1,n.loadingActionProcess=!1,"ACTIONS"===String(e.form)?(n.hosoDatas.splice(a,1),n.selectedDoAction[a].statusAction=!0,n.countSelected+=1,n.countSelected===n.selectedDoAction.length&&n.statusFailed>0&&n.selectedDoAction.length>1?n.dialog_statusAction=!0:n.countSelected===n.selectedDoAction.length&&0===n.statusFailed&&o["a"].push({path:n.$router.history.current.path,query:{recount:Math.floor(100*Math.random())+1,renew:Math.floor(100*Math.random())+1,q:c["q"]}})):o["a"].push({path:n.$router.history.current.path,query:{recount:Math.floor(100*Math.random())+1,renew:Math.floor(100*Math.random())+1,q:c["q"]}})}).catch(function(){n.loadingActionProcess=!1,"ACTIONS"===String(e.form)&&(n.countSelected+=1,n.statusFailed+=1,n.selectedDoAction[a].statusAction=!1,n.countSelected===n.selectedDoAction.length&&n.statusFailed>0&&n.selectedDoAction.length>1&&(n.dialog_statusAction=!0))})})},processPullBtnDetailRouter(t,e,i,a,s){let n=this,r=!1;if(n.dossierId=t.dossierId,n.showYkienCanBoThucHien=!1,n.showFormBoSungThongTinNgan=!1,n.showPhanCongNguoiThucHien=!1,n.showTaoTaiLieuKetQua=!1,n.showKyPheDuyetTaiLieu=!1,n.showTraKetQua=!1,n.showXacNhanThuPhi=!1,n.showThuPhi=!1,n.showThucHienThanhToanDienTu=!1,n.dossierItemDialogPick=t,n.itemDialogPick=e,n.resultDialogPick=i,n.indexDialogPick=a,n.userNote=0,null!==i&&void 0!==i&&"undefined"!==i&&(i.hasOwnProperty("userNote")||i.hasOwnProperty("extraForm")||i.hasOwnProperty("allowAssignUser")||i.hasOwnProperty("createFiles")||i.hasOwnProperty("eSignature")||i.hasOwnProperty("returnFiles")||i.hasOwnProperty("payment")||i.hasOwnProperty("overdue")||i.hasOwnProperty("betimes"))){if(!i.hasOwnProperty("userNote")||1!==i.userNote&&"1"!==i.userNote&&2!==i.userNote&&"2"!==i.userNote||(r=!0,n.showYkienCanBoThucHien=!0,n.userNote=i.userNote),i.hasOwnProperty("extraForm")&&i.extraForm&&(r=!0,n.showFormBoSungThongTinNgan=!0),i.hasOwnProperty("allowAssignUser")&&0!==i.allowAssignUser&&(n.assign_items=i.toUsers,n.type_assign=i.allowAssignUser,r=!0,n.showPhanCongNguoiThucHien=!0),i.hasOwnProperty("returnFiles")&&null!==i.createFiles&&void 0!==i.createFiles&&"undefined"!==i.createFiles&&i.createFiles.length>0&&(r=!0,n.showTaoTaiLieuKetQua=!0),i.hasOwnProperty("eSignature")&&i.eSignature&&(r=!0,n.showKyPheDuyetTaiLieu=!0),i.hasOwnProperty("returnFiles")&&null!==i.returnFiles&&void 0!==i.returnFiles&&"undefined"!==i.returnFiles&&i.returnFiles.length>0&&(r=!0,n.showTraKetQua=!0,n.returnFiles=i.returnFiles),i.hasOwnProperty("payment")&&null!==i.payment&&void 0!==i.payment&&"undefined"!==i.payment&&i.payment.requestPayment>0)if(2===i.payment.requestPayment||"2"===i.payment.requestPayment){r=!0;let t={dossierId:n.dossierId};n.$store.dispatch("loadDossierPayments",t).then(t=>{n.paymentProfile=t}).catch(t=>{})}else r=!0,n.showThuPhi=!0,n.payments=i.payment,n.viaPortalDetail=t.viaPostal;i.hasOwnProperty("overdue")&&(r=!0),i.hasOwnProperty("betimes")&&(r=!0)}if(r){let e={activeTab:"tabs-1",btnIndex:s};o["a"].push({path:"/danh-sach-ho-so/"+n.index+"/chi-tiet-ho-so/"+t["dossierId"],query:e})}else n.processAction(t,e,i,a,!0)},processPullBtnDetail(t,e,i,a){let s=this;if(1===e["enable"]||"special"===e["autoEvent"]){s.itemAction=e;let o={dossierId:t.dossierId,actionId:e.processActionId};s.dossierId=t.dossierId,s.loadingActionProcess=!0,s.$store.dispatch("processPullBtnDetail",o).then(function(o){s.processPullBtnDetailRouter(t,e,o,i,a)})}},goBack(){window.history.back()},viewDetail(t,e){console.log("permission: ",t.permission),null!==t.permission&&""!==t.permission&&o["a"].push("/danh-sach-ho-so/"+this.index+"/chi-tiet-ho-so/"+t["dossierId"])},keywordEventChange(t){let e=this;e.selectMultiplePage=[],console.log("keywordEventChange",t),e.advObjectSearch={};for(let i in t)if("string"===typeof t[i]&&null!==t[i]&&void 0!==t[i]&&"undefined"!==t[i])if(t[i].startsWith("keyword:")||t[i].startsWith("year_month:")||t[i].startsWith("top:")||t[i].startsWith("status:")||t[i].startsWith("substatus:")||t[i].startsWith("agency:")||t[i].startsWith("service:")||t[i].startsWith("domain:")||t[i].startsWith("register:")||(e.advObjectSearch["keyword"]=t[i]),t[i].startsWith("keyword:"))e.advObjectSearch["keyword"]=t[i].replace("keyword:","");else for(let a in e.advSearchItems)t[i].startsWith(e.advSearchItems[a].spec+":")&&(e.advObjectSearch[e.advSearchItems[a].spec]=t[i].replace(e.advSearchItems[a].spec+":",""));else{let a=t[i].value;e.advObjectSearch[t[i].spec]=a.replace(t[i].spec+":","")}e.advSearchItems=[];for(let i in e.advObjectSearch){if(!e.advObjectSearch.hasOwnProperty(i))continue;let t=e.advObjectSearch[i];if("string"===typeof t&&null!==t&&void 0!==t&&""!==t)if("keyword"===i)e.advSearchItems.push({spec:i,value:i+":"+t,text:i+":"+t,index:-1});else{let a=-2;for(let t in e.advSearchTools)if(e.advSearchTools[t].spec===i){a=e.advSearchTools[t].index;break}e.advSearchItems.push({spec:i,value:i+":"+t,text:i+":"+t,index:a})}else"string"!==typeof t&&null!==t&&void 0!==t&&""!==t&&e.advSearchItems.push({spec:i,value:i+":"+t.value,text:i+":"+t.value,index:i+":"+t.index})}for(let i in e.advSearchTools)e.advSearchTools[i].display=!1,e.advSearchTools[i].disabled=!1,null!==e.advObjectSearch[e.advSearchTools[i].spec]&&void 0!==e.advObjectSearch[e.advSearchTools[i].spec]&&""!==e.advObjectSearch[e.advSearchTools[i].spec]&&(e.advSearchTools[i].display=!0,e.advSearchTools[i].disabled=!0);console.log("vm.advSearchItems",e.advSearchItems),e.doRedirectFilter()},selectedAdvFilter(t){let e=this;e.advSearchTools[t.index].display=!0,e.advSearchTools[t.index].disabled=!0;let i=!1;for(let a in e.advSearchItems)if(e.advSearchItems[a].index===t.index){i=!0;break}i||e.advSearchItems.push({spec:e.advSearchTools[t.index].spec,value:e.advSearchTools[t.index].spec+":__",text:e.advSearchTools[t.index].spec+":__",index:t.index})},showAdvFilter(){let t=this;t.menusss=!t.menusss,t.$store.dispatch("getStatusLists").then(function(e){t.itemFilterSupport.statusLists=e;let i={itemCode:"deleted",itemName:"Đã xóa"};t.getUser("Administrator_data")&&t.itemFilterSupport.statusLists.push(i)});let e={itemCode:""};t.$store.dispatch("getSubstatusLists",e).then(function(e){t.itemFilterSupport.substatusLists=e}),t.$store.dispatch("getAgencyLists").then(function(e){t.itemFilterSupport.agencyLists=e}),t.$store.dispatch("getServiceLists").then(function(e){t.itemFilterSupport.serviceLists=e}),t.$store.dispatch("getDomainLists").then(function(e){t.itemFilterSupport.domainLists=e})},changeAdvFilterData(t,e,i){let a=this;if(console.log("data change advSearch",t,e,i),"status"===e){let e={itemCode:t};a.$store.dispatch("getSubstatusLists",e).then(function(t){a.itemFilterSupport.substatusLists=t})}let s=t;"year"===e?(a.itemFilterSupport.year=t,s=a.itemFilterSupport.year+"_"+a.itemFilterSupport.month,e="year_month"):"month"===e?(a.itemFilterSupport.month=t,s=a.itemFilterSupport.year+"_"+a.itemFilterSupport.month,e="year_month"):a.itemFilterSupport[e]=t;for(let o in a.advSearchItems)if(console.log("adv Search index",a.advSearchItems[o].index),a.advSearchItems[o].index===i){console.log("vm.itemFilterSupport2",a.itemFilterSupport),a.advSearchItems[o].value=e+":"+s,a.advSearchItems[o].text=e+":"+s;break}a.doRedirectFilter()},doRedirectFilter(){let t=this;t.selectMultiplePage=[];let e=t.$router.history.current,i=e.query,a="?";for(let s in i)""!==i[s]&&"undefined"!==i[s]&&void 0!==i[s]&&"top"!==s&&"status"!==s&&"substatus"!==s&&"agency"!==s&&"service"!==s&&"domain"!==s&&"register"!==s&&"year"!==s&&"month"!==s&&"adv_renew"!==s&&"keyword"!==s&&(a+=s+"="+i[s]+"&");for(let s in t.advSearchItems){let e=t.advSearchItems[s];if("year_month"===e.spec){let t=e.text.replace(e.spec+":","");const[i,s]=t.split("_");a+="year="+i+"&month="+s+"&"}else console.log("currentItemFilter.spec",e.text.replace(e.spec+":","")),a+=e.spec+"="+e.text.replace(e.spec+":","")+"&"}a+="adv_renew="+Math.floor(100*Math.random())+1,a=a.replace(/=__/g,"="),t.$router.push({path:e.path+a})},changeAdvFilterDataChips(t){let e=this,i=-2;for(let o in e.advSearchTools)"delay"===t.key||"overdue"===t.key||"coming"===t.key?"top"===e.advSearchTools[o]["spec"]&&(i=e.advSearchTools[o]["index"],e.advSearchTools[o].display=!0,e.advSearchTools[o].disabled=!0):"status"===e.advSearchTools[o]["spec"]&&(i=e.advSearchTools[o]["index"],e.advSearchTools[o].display=!0,e.advSearchTools[o].disabled=!0);let a="";a="delay"===t.key||"overdue"===t.key||"coming"===t.key?"top":"status";let s=!0;for(let o in e.advSearchItems)if("status"===e.advSearchItems[o]["spec"]){if("delay"!==t.key&&"overdue"!==t.key&&"coming"!==t.key){e.advSearchItems[o].value="status:"+t.key,e.advSearchItems[o].text="status:"+t.key,s=!1;break}}else if("top"===e.advSearchItems[o]["spec"]&&("delay"===t.key||"overdue"===t.key||"coming"===t.key)){e.advSearchItems[o].value="top:"+t.key,e.advSearchItems[o].text="top:"+t.key,s=!1;break}s&&e.advSearchItems.push({spec:a,value:a+":"+t.key,text:a+":"+t.key,index:i}),e.doRedirectFilter()},validate(){return!0},callback(t){t?alert(t):alert("please check you are not robot")}}},f=_,y=i("2877"),C=Object(y["a"])(f,a,s,!1,null,null,null);C.options.__file="LandingMobile.vue";e["default"]=C.exports},e4e5:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return null!==t.layout_view&&void 0!==t.layout_view&&"undefined"!==t.layout_view?i("my-dynamic-view"):t._e()},s=[],o=i("de7d"),n=o["a"],r=i("2877"),l=Object(r["a"])(n,a,s,!1,null,null,null);l.options.__file="template_rendering.vue";e["a"]=l.exports},eaee:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",["0"===String(t.serviceCode)||t.selectOption?t._e():i("div",{staticClass:"text-center mt-4"},[i("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}}),i("p",{staticClass:"mt-4"},[t._v("đang tạo hồ sơ ...")])],1),"0"!==String(t.serviceCode)||t.selectOption?t._e():i("v-expansion-panel",{staticClass:"expand__select__gov",attrs:{expand:""}},t._l(t.govAgencies,function(e,a){return i("v-expansion-panel-content",{key:a},[i("div",{staticClass:"ml-3",attrs:{slot:"header"},slot:"header"},[i("v-icon",{staticStyle:{"font-size":"14px","margin-top":"-4px","padding-right":"5px"}},[t._v("account_balance")]),t._v("\n        "+t._s(e.govAgencyName)+"\n      ")],1),i("v-card",[i("v-card-text",{staticClass:"grey lighten-3 px-0 py-0"},[i("v-expansion-panel",{staticClass:"expand__select__domain",attrs:{expand:""}},t._l(e.domains,function(a,s){return e.domains?i("v-expansion-panel-content",{key:s,attrs:{value:!0}},[i("div",{staticStyle:{"margin-left":"14px"},attrs:{slot:"header"},slot:"header"},[i("v-icon",{staticClass:"pr-2 theme--dark"},[t._v("navigate_next")]),i("span",{staticStyle:{position:"absolute","margin-top":"1px"}},[t._v(t._s(a.domainName))])],1),i("v-card",t._l(a.serviceConfigs,function(s,o){return a.serviceConfigs?i("v-card-text",{key:o,staticClass:"card__text__gov"},[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{staticClass:"pt-1",attrs:{xs12:"",sm9:""}},[i("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(o+1)+".")]),t._v("  \n                      "),i("span",[t._v(t._s(s.serviceInfoName))])]),i("v-flex",{staticClass:"text-xs-center pt-1",attrs:{xs12:"",sm1:""}},[i("span",[t._v("Mức "+t._s(s.level))])]),i("v-flex",{staticClass:"text-xs-center",attrs:{xs12:"",sm2:""}},[i("v-menu",{attrs:{left:""}},[i("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",flat:"",small:""},on:{click:function(i){t.pullServiceOptions(s,e.govAgencyCode)}},slot:"activator"},[t._v("\n                          Chọn\n                        ")]),t.serviceOptions.length>1?i("v-list",t._l(t.serviceOptions,function(a,o){return i("v-list-tile",{key:o,on:{click:function(i){t.selectServiceOption(a,e.govAgencyCode,s)}}},[i("v-list-tile-title",[t._v(t._s(a.optionName))])],1)}),1):t._e()],1)],1)],1)],1):t._e()}),1)],1):t._e()}),1)],1)],1)],1)}),1),t.selectOption?i("div",[i("div",{staticClass:"row-header"},[t._m(0),i("div",{staticClass:"layout row wrap header_tools row-blue"},[i("div",{staticClass:"flex xs4 sm2 text-right",staticStyle:{"margin-left":"auto"}},[i("v-btn",{staticClass:"my-0 mx-0 btn-border-left",attrs:{flat:"","active-class":"temp_active"},on:{click:t.goBack}},[t._v("\n            Quay lại  \n            "),i("v-icon",{attrs:{size:"16"}},[t._v("undo")])],1)],1)])]),i("v-list",{staticClass:"py-0"},[t._l(t.serviceOptionsProcess,function(e,a){return[i("v-list-tile",{key:a,staticClass:"px-2 py-1",staticStyle:{"border-bottom":"1px solid #dede"}},[i("v-list-tile-content",[i("v-list-tile-title",{domProps:{innerHTML:t._s(e.optionName)}})],1),i("v-list-tile-action",[i("v-btn",{attrs:{color:"primary"},on:{click:function(i){t.selectServiceOptionCRD(e,t.govAgencyCodeSelect)}}},[t._v("\n              Chọn\n            ")])],1)],1)]})],2)],1):t._e()],1)},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"background-triangle-big"},[i("span",[t._v("THÊM MỚI HỒ SƠ")])])}],o=i("a18c"),n={props:["serviceCode"],data:()=>({govAgencies:[],serviceOptions:[],serviceConfigSelect:"",serviceInfoIdSelect:"",serviceOptionsProcess:[],selectOption:!1,govAgencyCodeSelect:"",loadingMutiple:!0}),computed:{currentIndex(){return this.$store.getters.index}},created(){var t=this;console.log("create------"),t.$store.dispatch("loadServiceConfigsGov",{}).then(e=>{if(t.govAgencies=e,"0"!==String(t.serviceCode))for(let i in t.govAgencies){let e=t.govAgencies[i].govAgencyCode;for(let a in t.govAgencies[i].domains)for(let s in t.govAgencies[i].domains[a].serviceConfigs){let o=t.govAgencies[i].domains[a].serviceConfigs[s],n=o.serviceConfigId;if(String(t.serviceCode)===String(n)){t.govAgencyCodeSelect=e,t.serviceInfoIdSelect=o.serviceInfoId,t.pullServiceOptions(o,e);break}}}})},updated(){},watch:{},methods:{pullServiceOptions(t,e){console.log("govAgencyCode++++++++++",e);var i=this;i.serviceConfigSelect=t,i.govAgencyCodeSelect=e,i.serviceInfoIdSelect=t.serviceInfoId,i.$store.dispatch("getServiceOpionByProcess",t).then(a=>{1===a.length?(i.selectOption=!1,i.$store.dispatch("getServiceInfo",{serviceInfoId:t.serviceInfoId}).then(t=>{console.log("resServiceInfo+++++++++++",t);let s={serviceCode:t.serviceCode,govAgencyCode:e,templateNo:a[0].templateNo,originality:i.getOriginality()};i.$store.dispatch("postDossier",s).then(function(t){i.loadingAction=!1,i.indexAction=-1,o["a"].push({path:"/danh-sach-ho-so/0/ho-so/"+t.dossierId+"/NEW",query:i.$router.history.current.query})})})):(i.serviceOptions=a,i.serviceOptionsProcess=a,i.selectOption=!0)})},selectServiceOption(t,e,i){var a=this;a.serviceConfigSelect=i,a.govAgencyCodeSelect=e,a.serviceInfoIdSelect=i.serviceInfoId,a.loadingMutiple=!0,console.log("govAgencyCode+++++++++++",e),a.$store.dispatch("getServiceInfo",{serviceInfoId:a.serviceConfigSelect.serviceInfoId}).then(i=>{console.log("resServiceInfo+++++++++++",i);let s={serviceCode:i.serviceCode,govAgencyCode:e,templateNo:t.templateNo,originality:a.getOriginality()};a.$store.dispatch("postDossier",s).then(function(t){a.loadingAction=!1,a.indexAction=-1,o["a"].push({path:"/danh-sach-ho-so/0/ho-so/"+t.dossierId+"/NEW",query:a.$router.history.current.query})})})},selectServiceOptionCRD(t,e){var i=this;console.log("govAgencyCode+++++++++++",e),i.$store.dispatch("getServiceInfo",{serviceInfoId:i.serviceInfoIdSelect}).then(a=>{console.log("resServiceInfo+++++++++++",a);let s={serviceCode:a.serviceCode,govAgencyCode:e,templateNo:t.templateNo,originality:i.getOriginality()};i.$store.dispatch("postDossier",s).then(function(t){i.loadingAction=!1,i.indexAction=-1,o["a"].push({path:"/danh-sach-ho-so/0/ho-so/"+t.dossierId+"/NEW",query:i.$router.history.current.query})})})},getColor(t){return 2===t?"green":3===t?"orange":4===t?"red":void 0},goBack(){window.history.back()}}},r=n,l=i("2877"),c=Object(l["a"])(r,a,s,!1,null,null,null);c.options.__file="DanhSachThuTuc.vue";e["default"]=c.exports},f374:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"payment-info",staticStyle:{width:"100%"}},[i("v-expansion-panel",{staticClass:"expansion-pl"},[i("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"1"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"background-triangle-small"},[i("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),1===t.data_payment.requestPayment||5===t.data_payment.requestPayment?i("span",[t._v(t._s(t.data_payment.paymentFee))]):t._e(),2===t.data_payment.requestPayment?i("span",[t._v("Lập phiếu thanh toán")]):t._e()]),i("v-card",[i("v-card-text",{staticClass:"pb-1"},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:"",sm2:""}},[i("v-subheader",{staticClass:"pl-0 text-right"},[t._v("Lệ phí: ")])],1),i("v-flex",{attrs:{xs12:"",sm3:""}},[1===t.data_payment.editable||3===t.data_payment.editable?i("v-text-field",{directives:[{name:"money",rawName:"v-money",value:t.money,expression:"money"}],attrs:{suffix:"vnđ"},on:{keyup:t.changeFee},model:{value:t.data_payment.feeAmount,callback:function(e){t.$set(t.data_payment,"feeAmount",e)},expression:"data_payment.feeAmount"}}):i("p",{staticClass:"mt-1 mb-0"},[t._v(t._s(t.currency(t.data_payment.feeAmount.toString().replace(/\./g,"")))+"    vnđ")])],1),i("v-flex",{staticClass:"pt-1",attrs:{xs12:"",sm2:""}},[i("v-subheader",{staticClass:"pl-0 text-right"},[t._v("Phí: ")])],1),i("v-flex",{staticClass:"pt-1",attrs:{xs12:"",sm3:""}},[2===t.data_payment.editable||3===t.data_payment.editable?i("v-text-field",{directives:[{name:"money",rawName:"v-money",value:t.money,expression:"money"}],attrs:{suffix:"vnđ"},on:{keyup:t.changeFee},model:{value:t.data_payment.serviceAmount,callback:function(e){t.$set(t.data_payment,"serviceAmount",e)},expression:"data_payment.serviceAmount"}}):i("p",{staticClass:"mt-1 mb-0"},[t._v(t._s(t.currency(t.data_payment.serviceAmount.toString().replace(/\./g,"")))+"    vnđ")])],1),i("v-flex",{attrs:{xs12:"",sm2:""}}),2!==t.viaPortal&&"2"!==t.viaPortal||0===t.data_payment.shipAmount?t._e():i("v-flex",{attrs:{xs12:"",sm2:""}},[i("v-subheader",{staticClass:"pl-0 text-right"},[t._v("Phí chuyển phát: ")])],1),2!==t.viaPortal&&"2"!==t.viaPortal||0===t.data_payment.shipAmount?t._e():i("v-flex",{attrs:{xs12:"",sm3:""}},[1===t.data_payment.editable||3===t.data_payment.editable?i("v-text-field",{directives:[{name:"money",rawName:"v-money",value:t.money,expression:"money"}],attrs:{suffix:"vnđ"},on:{keyup:t.changeFee},model:{value:t.data_payment.shipAmount,callback:function(e){t.$set(t.data_payment,"shipAmount",e)},expression:"data_payment.shipAmount"}}):i("p",{staticClass:"mt-1 mb-0"},[t._v(t._s(t.currency(t.data_payment.shipAmount.toString().replace(/\./g,"")))+"    vnđ")])],1),i("v-flex",{attrs:{xs12:"",sm2:""}})],1)],1),i("v-card-text",{staticClass:"pt-0"},[i("v-layout",{attrs:{wrap:""}},[1===t.data_payment.requestPayment?i("v-flex",{attrs:{xs12:"",sm2:""}},[i("v-subheader",{staticClass:"pl-0 text-right"},[i("span",{staticClass:"text-bold"},[t._v("Tổng: ")])])],1):t._e(),1===t.data_payment.requestPayment?i("v-flex",{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[i("span",[t._v(t._s(t.currency(t.feeTong.toString().replace(/\./g,"")))+"    vnđ")])]):t._e(),1===t.data_payment.requestPayment?i("v-flex",{attrs:{xs12:"",sm1:""}}):t._e(),2===t.data_payment.requestPayment?i("v-flex",{attrs:{xs12:"",sm2:""}},[i("v-subheader",{staticClass:"pl-0 text-right"},[i("span",{staticClass:"text-bold"},[t._v("Tổng: ")])])],1):t._e(),2===t.data_payment.requestPayment?i("v-flex",{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[i("span",[t._v(t._s(t.currency(t.totalFee.toString().replace(/\./g,"")))+"    vnđ")])]):t._e(),2===t.data_payment.requestPayment?i("v-flex",{attrs:{xs12:"",sm1:""}}):t._e(),5===t.data_payment.requestPayment?i("v-flex",{attrs:{xs12:"",sm2:""}},[i("v-subheader",{staticClass:"pl-0 text-right"},[i("span",{staticClass:"text-bold"},[t._v("Tổng: ")])])],1):t._e(),5===t.data_payment.requestPayment?i("v-flex",{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[i("span",[t._v(t._s(t.currency(t.feeTong.toString().replace(/\./g,"")))+"    vnđ")])]):t._e(),5===t.data_payment.requestPayment?i("v-flex",{attrs:{xs12:"",sm2:""}},[i("v-subheader",{staticClass:"pl-0 text-right"},[i("span",{staticClass:"text-bold"},[t._v("Đã tạm nộp: ")])])],1):t._e(),5===t.data_payment.requestPayment?i("v-flex",{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[i("span",[t._v(t._s(t.currency(Number(t.data_payment.advanceAmount.toString().replace(/\./g,"")).toString().replace(/\./g,"")))+"    vnđ")])]):t._e(),5===t.data_payment.requestPayment?i("v-flex",{attrs:{xs12:"",sm1:""}}):t._e(),5===t.data_payment.requestPayment?i("v-flex",{attrs:{xs12:"",sm2:""}},[i("v-subheader",{staticClass:"pl-0 text-right"},[i("span",{staticClass:"text-bold"},[t._v("Còn phải nộp: ")])])],1):t._e(),5===t.data_payment.requestPayment?i("v-flex",{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[i("span",[t._v(t._s(t.currency(t.totalFee.toString().replace(/\./g,"")))+"    vnđ")])]):t._e(),5===t.data_payment.requestPayment?i("v-flex",{attrs:{xs12:"",sm1:""}}):t._e()],1),i("v-layout",{staticStyle:{position:"relative"},attrs:{wrap:""}},[i("v-flex",{staticClass:"my-0 py-1",staticStyle:{width:"70px"}},[i("span",{staticClass:"red--text"},[t._v("* ")]),t._v(" Ghi chú:")]),i("v-flex",{staticStyle:{width:"calc(100% - 80px)"}},[0==t.activeEdit?i("div",{staticClass:"pl-2"},[i("v-text-field",{staticClass:"py-0",attrs:{"multi-line":"",readonly:t.activeEdit,required:""},model:{value:t.data_payment.paymentNote,callback:function(e){t.$set(t.data_payment,"paymentNote",e)},expression:"data_payment.paymentNote"}})],1):t._e(),t.activeEdit||""===t.data_payment.paymentNote?i("p",{staticClass:"px-2 my-0 py-1"},[t._v("\n                "+t._s(t.data_payment.paymentNote)+"   \n                "),1==t.activeEdit?i("v-icon",{staticClass:"hover-pointer btn-add mx-0 my-0",attrs:{color:"blue",size:"20",title:"Sửa",grey:"","darken-4":""},on:{click:function(e){e.stopPropagation(),t.activeEdit=!1}}},[t._v("\n                  create\n                ")]):t._e()],1):t._e(),i("span",{staticStyle:{position:"absolute",top:"15px",right:"10px"}},[0==t.activeEdit?i("v-icon",{staticClass:"hover-pointer btn-add mx-0 my-0",attrs:{color:"green",size:"25",grey:"","darken-4":""},on:{click:function(e){e.stopPropagation(),t.activeEdit=!0}}},[t._v("\n                  check\n                ")]):t._e()],1)])],1),t.paymentFile&&5===t.data_payment.requestPayment?i("div",[i("span",[i("span",{staticClass:"red--text"},[t._v("* ")]),t._v(" File báo thanh toán:")]),t._v(" \n            "),i("span",{staticStyle:{cursor:"pointer"},on:{click:function(e){e.stopPropagation(),t.viewFile()}}},[i("v-icon",[t._v("attach_file")]),t._v("\n              "+t._s(t.paymentFileName)+"\n            ")],1),i("v-tooltip",{attrs:{top:""}},[i("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:"",ripple:""},on:{click:function(e){e.stopPropagation(),t.downloadPaymentFile(t.item)}},slot:"activator"},[i("v-icon",{staticStyle:{color:"#0d71bb"},attrs:{size:"16",color:"primary"}},[t._v("save_alt")])],1),i("span",[t._v("Tải xuống")])],1)],1):t._e()],1)],1)],1)],1),i("v-dialog",{staticStyle:{overflow:"hidden"},attrs:{"max-width":"900",transition:"fade-transition"},model:{value:t.dialogPDF,callback:function(e){t.dialogPDF=e},expression:"dialogPDF"}},[i("v-card",[i("v-card-title",{staticClass:"headline"},[t._v("File đính kèm")]),i("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogPDF=!1}}},[i("v-icon",[t._v("clear")])],1),t.dialogPDFLoading?i("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[i("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):t._e(),i("iframe",{directives:[{name:"show",rawName:"v-show",value:!t.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPreview",src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1)],1)},s=[],o=i("716b"),n={props:{payments:{type:Object,default:()=>{}},viaPortal:{type:Number,default:()=>0},detailDossier:{type:Object,default:()=>{}}},model:{prop:"payments"},data:()=>({data_payment:{},money:{decimal:"",thousands:".",prefix:"",suffix:"",precision:0,masked:!1},totalFee:0,feeTamThu:0,feeTong:0,checkPaid:!0,activeEdit:!0,paymentFile:"",dialogPDF:!1,dialogPDFLoading:!0}),directives:{money:o["VMoney"]},created(){var t=this;t.data_payment=t.payments,t.payments&&setTimeout(function(){let e=t.payments.feeAmount?Number(t.payments.feeAmount.toString().replace(/\./g,"")):0;if(1===t.payments.requestPayment){let i=Number(t.payments.serviceAmount);t.feeTong=e+i,t.totalFee=e+i}else if(2===t.payments.requestPayment){let i=t.payments.serviceAmount?Number(t.payments.serviceAmount.toString().replace(/\./g,"")):0,a=t.payments.shipAmount?Number(t.payments.shipAmount.toString().replace(/\./g,"")):0;2!==t.viaPortal&&"2"!==t.viaPortal||0===a?t.totalFee=e+i:t.totalFee=e+i+a}else{let i=t.payments.advanceAmount?Number(t.payments.advanceAmount.toString().replace(/\./g,"")):0,a=t.payments.serviceAmount?Number(t.payments.serviceAmount.toString().replace(/\./g,"")):0,s=t.payments.shipAmount?Number(t.payments.shipAmount.toString().replace(/\./g,"")):0;if(2!==t.viaPortal&&"2"!==t.viaPortal||0===s?(t.feeTong=e+a,t.totalFee=e+a-i):(t.feeTong=e+a+s,t.totalFee=e+a+s-i),5===t.payments.requestPayment&&620===t.detailDossier.stepCode){let e=t.detailDossier;t.$store.dispatch("getPaymentFiles",e).then(e=>{t.paymentFile=e})}}t.totalFee<0&&(t.totalFee=0)},200)},computed:{paymentFileName(){return this.$store.getters.getPaymentFileName}},watch:{viaPortal(t){console.log("viaPortal",t),this.changeFee()},detailDossier(t){var e=this;if(5===e.payments.requestPayment){let i=t;console.log("run get paymentfile",i),e.$store.dispatch("getPaymentFiles",i).then(t=>{e.paymentFile=t})}}},methods:{changeFee(){var t=this;let e=t.data_payment,i=e.feeAmount?Number(e.feeAmount.toString().replace(/\./g,"")):0;if(1===e.requestPayment){let e=t.payments.serviceAmount?Number(t.payments.serviceAmount.toString().replace(/\./g,"")):0;t.feeTong=i+e,t.totalFee=i+e}else if(2===e.requestPayment){let e=t.payments.serviceAmount?Number(t.payments.serviceAmount.toString().replace(/\./g,"")):0,a=t.payments.shipAmount?Number(t.payments.shipAmount.toString().replace(/\./g,"")):0;2!==t.viaPortal&&"2"!==t.viaPortal||0===a?t.totalFee=i+e:t.totalFee=i+e+a}else{let a=Number(e.advanceAmount.toString().replace(/\./g,"")),s=Number(e.serviceAmount.toString().replace(/\./g,"")),o=Number(e.shipAmount.toString().replace(/\./g,""));2!==t.viaPortal&&"2"!==t.viaPortal||0===o?(t.feeTong=i+s,t.totalFee=i+s-a):(t.feeTong=i+s+o,t.totalFee=i+s+o-a)}t.totalFee<0&&(t.totalFee=0)},viewFile(){let t=this;t.dialogPDFLoading=!0,t.dialogPDF=!0;let e={dossierId:t.detailDossier.dossierId,referenceUid:t.detailDossier.referenceUid};t.$store.dispatch("viewPaymentFile",e).then(e=>{t.dialogPDFLoading=!1,document.getElementById("dialogPreview").src=e})},downloadPaymentFile(t){let e=this,i="/o/rest/v2/dossiers/"+e.detailDossier.dossierId+"/payments/"+e.detailDossier.referenceUid+"/confirmfile";window.open(i)},currency(t){if(t){let e=(t/1).toFixed(0).replace(".",",");return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}return""},goBack(){window.history.back()}},filters:{}},r=n,l=i("2877"),c=Object(l["a"])(r,a,s,!1,null,null,null);c.options.__file="FeeDetail.vue";e["a"]=c.exports},fc7b:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"payment-info",staticStyle:{width:"100%"}},[i("v-expansion-panel",{staticClass:"expansion-pl"},[i("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"1"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"background-triangle-small"},[i("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),i("span",[t._v(t._s(t.paymentProfile.paymentFee))])]),i("v-card",[i("v-card-text",{staticClass:"px-4 pb-1"},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:"",sm2:""}},[i("v-subheader",{staticClass:"pl-0 text-right"},[t._v("Lệ phí: ")])],1),i("v-flex",{attrs:{xs12:"",sm3:""}},[i("p",{staticClass:"mt-1 mb-0"},[t._v(t._s(t.currency(Number(t.paymentProfile.feeAmount)))+"    vnđ")])]),i("v-flex",{attrs:{xs12:"",sm2:""}},[i("v-subheader",{staticClass:"pl-0 text-right"},[t._v("Phí: ")])],1),i("v-flex",{attrs:{xs12:"",sm3:""}},[i("p",{staticClass:"mt-1 mb-0"},[t._v(t._s(t.currency(Number(t.paymentProfile.serviceAmount)))+"    vnđ")])]),i("v-flex",{attrs:{xs12:"",sm2:""}}),2!==t.detailDossier.viaPostal&&"2"!==t.detailDossier.viaPostal||0===t.paymentProfile.shipAmount?t._e():i("v-flex",{attrs:{xs12:"",sm2:""}},[i("v-subheader",{staticClass:"pl-0 text-right"},[t._v("Phí chuyển phát: ")])],1),i("v-flex",{attrs:{xs12:"",sm3:""}},[2!==t.detailDossier.viaPostal&&"2"!==t.detailDossier.viaPostal||0===t.paymentProfile.shipAmount?t._e():i("p",{staticClass:"mt-1 mb-0"},[t._v("\n                "+t._s(t.currency(Number(t.paymentProfile.shipAmount)))+"    vnđ\n              ")])])],1)],1),i("v-card-text",{staticClass:"px-4 pt-0"},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:"",sm2:""}},[i("v-subheader",{staticClass:"pl-0 text-right"},[i("span",{staticClass:"text-bold"},[t._v("Tổng: ")])])],1),i("v-flex",{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[i("span",[t._v(t._s(t.currency(Number(t.feeTong)))+"    vnđ")])]),i("v-flex",{attrs:{xs12:"",sm2:""}},[i("v-subheader",{staticClass:"pl-0 text-right"},[i("span",{staticClass:"text-bold"},[t._v("Đã tạm nộp: ")])])],1),i("v-flex",{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[i("span",[t._v(t._s(t.currency(Number(t.paymentProfile.advanceAmount)))+"    vnđ")])]),i("v-flex",{attrs:{xs12:"",sm1:""}}),i("v-flex",{attrs:{xs12:"",sm2:""}},[i("v-subheader",{staticClass:"pl-0 text-right"},[i("span",{staticClass:"text-bold"},[t._v("Còn phải nộp: ")])])],1),i("v-flex",{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[i("span",[t._v(t._s(t.currency(t.totalFee))+"    vnđ")])]),i("v-flex",{attrs:{xs12:"",sm1:""}})],1),i("v-layout",{staticStyle:{position:"relative"},attrs:{wrap:""}},[i("v-flex",{staticClass:"my-0 py-1",staticStyle:{width:"70px"}},[i("span",{staticClass:"red--text"},[t._v("* ")]),t._v(" Ghi chú:")]),i("v-flex",{staticStyle:{width:"calc(100% - 80px)"}},[i("p",{staticClass:"px-2 my-0 py-1"},[t._v("\n                "+t._s(t.paymentProfile.paymentNote)+"   \n              ")])])],1),i("p",{staticClass:"mb-0"},[i("span",{staticClass:"red--text"},[t._v("* ")]),t._v(" Lựa chọn hình thức thanh toán:")]),i("v-btn",{staticClass:"ml-3 mr-2",attrs:{dark:"",small:"",color:"blue darken-1"},nativeOn:{click:function(e){return function(){return t.isBank=!0}()}}},[i("v-icon",[t._v("account_balance")]),t._v("  \n            Thanh toán chuyển khoản\n          ")],1),t.getEPaymentProfile(t.paymentProfile.epaymentProfile)?i("v-btn",{staticClass:"ml-2 mr-2",attrs:{dark:"",small:"",color:"amber accent-4"},nativeOn:{click:function(e){t.toKeyPay(t.getEPaymentProfile(t.paymentProfile.epaymentProfile).keypayUrl)}}},[i("v-icon",[t._v("payment")]),t._v("  \n            Thanh toán điện tử\n          ")],1):t._e(),t.isBank?i("div",{staticClass:"ml-3"},[i("div",[i("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"paymentFile1"},on:{change:function(e){t.uploadPaymentFile(e)}}}),i("span",[t._v("Tải lên file báo thanh toán chuyển khoản (Định dạng: .png, .jpg, .jpeg)")]),t.progressUploadPart?i("v-progress-circular",{attrs:{width:2,size:25,color:"green",indeterminate:""}}):i("v-tooltip",{attrs:{top:""}},[i("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(e){t.pickFile()}},slot:"activator"},[i("v-badge",[i("v-icon",{attrs:{size:"16",color:"primary"}},[t._v("cloud_upload")])],1)],1),i("span",[t._v("Tải file lên")])],1)],1),t.paymentFile?i("div",[i("span",{staticStyle:{cursor:"pointer"},on:{click:function(e){e.stopPropagation(),t.viewFile()}}},[i("v-icon",{attrs:{color:"blue"}},[t._v("insert_drive_file")]),t._v("\n                "+t._s(t.paymentFileName)+"\n              ")],1),i("v-tooltip",{attrs:{top:""}},[i("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:"",ripple:""},on:{click:function(e){e.stopPropagation(),t.downloadPaymentFile(t.item)}},slot:"activator"},[i("v-icon",{staticStyle:{color:"#0d71bb"},attrs:{size:"16",color:"primary"}},[t._v("save_alt")])],1),i("span",[t._v("Tải xuống")])],1)],1):t._e(),t.epaymentValid?t._e():i("span",{staticStyle:{color:"#f44336"}},[t._v("* Yêu cầu tải lên file báo thanh toán")])]):t._e(),!t.isBank&&t.errorNotSelect?i("p",{staticStyle:{color:"#f44336"}},[t._v("* Yêu cầu lựa chọn hình thức thanh toán")]):t._e()],1)],1)],1)],1),i("v-dialog",{staticStyle:{overflow:"hidden"},attrs:{"max-width":"900",transition:"fade-transition"},model:{value:t.dialogPDF,callback:function(e){t.dialogPDF=e},expression:"dialogPDF"}},[i("v-card",[i("v-card-title",{staticClass:"headline"},[t._v("File đính kèm")]),i("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogPDF=!1}}},[i("v-icon",[t._v("clear")])],1),t.dialogPDFLoading?i("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[i("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):t._e(),i("iframe",{directives:[{name:"show",rawName:"v-show",value:!t.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPreview",src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1)],1)},s=[],o=(i("a18c"),i("1157")),n=i.n(o),r=i("854a"),l=i.n(r),c=i("716b");l.a.options={closeButton:!0,timeOut:"5000"};var d={props:{paymentProfile:{type:Object,default:()=>{}},detailDossier:{type:Object,default:()=>{}}},data:()=>({data_payment:{advanceAmount:"",feeAmount:"",serviceAmount:"",shipAmount:"",paymentAmount:"",paymentNote:"",paymentFile:""},paymentFile:"",epaymentValid:!0,money:{decimal:"",thousands:".",prefix:"",suffix:"",precision:0,masked:!1},totalFee:0,feeTamThu:0,feeTong:0,checkPaid:!0,activeEdit:!0,progressUploadPart:!1,dialogPDF:!1,dialogPDFLoading:!0,isBank:!1,errorNotSelect:!1}),directives:{money:c["VMoney"]},created(){var t=this;if(t.detailDossier.hasOwnProperty("dossierId")){let e=t.detailDossier;t.$store.dispatch("getPaymentFiles",e).then(e=>{t.paymentFile=e,t.data_payment["paymentFile"]=t.paymentFile,t.$store.commit("setPaymentProfile",t.data_payment)})}},computed:{paymentFileName(){return this.$store.getters.getPaymentFileName},isBank(t){!0===t&&(this.errorNotSelect=!1)}},watch:{paymentProfile(t){var e=this;e.paymentProfile&&(e.feeTong=Number(e.paymentProfile.feeAmount)+Number(e.paymentProfile.serviceAmount),2!==e.detailDossier.viaPostal&&"2"!==e.detailDossier.viaPostal||0===e.paymentProfile.shipAmount||(e.feeTong=Number(e.paymentProfile.feeAmount)+Number(e.paymentProfile.serviceAmount)+Number(e.paymentProfile.shipAmount)),console.log("feeTong",e.feeTong),e.totalFee=e.feeTong-Number(e.paymentProfile.advanceAmount),e.totalFee<0&&(e.totalFee=0),e.data_payment={advanceAmount:e.paymentProfile.advanceAmount,feeAmount:e.paymentProfile.feeAmount,serviceAmount:e.paymentProfile.serviceAmount,shipAmount:e.paymentProfile.shipAmount,paymentAmount:e.totalFee,paymentNote:e.paymentProfile.paymentNote,paymentFile:e.paymentFile},e.$store.commit("setPaymentProfile",e.data_payment))},detailDossier(t){var e=this;if(t.hasOwnProperty("dossierId")){let i=t;e.$store.dispatch("getPaymentFiles",i).then(t=>{e.paymentFile=t,e.data_payment["paymentFile"]=e.paymentFile,e.$store.commit("setPaymentProfile",e.data_payment)})}}},methods:{uploadPaymentFile(t){var e=this;e.progressUploadPart=!0;var i={};i["dossierId"]=e.detailDossier.dossierId,i["referenceUid"]=e.detailDossier.referenceUid,i["selector"]="paymentFile1",i["partTip"]={tip:"",maxSize:10,extensions:"jpg,png,jpeg"};n()("#paymentFile1")[0].files[0];e.$store.dispatch("uploadPaymentFile",i).then(function(t){e.epaymentValid=!0,e.progressUploadPart=!1,e.paymentFile=t,e.data_payment["paymentFile"]=e.paymentFile,e.$store.commit("setPaymentProfile",e.data_payment),e.$store.dispatch("getPaymentFiles",i).then(t=>{e.paymentFile=t,e.data_payment["paymentFile"]=e.paymentFile,e.$store.commit("setPaymentProfile",e.data_payment)})}).catch(function(t){e.progressUploadPart=!1})},viewFile(){let t=this;t.dialogPDFLoading=!0,t.dialogPDF=!0;let e={dossierId:t.detailDossier.dossierId,referenceUid:t.detailDossier.referenceUid};t.$store.dispatch("viewPaymentFile",e).then(e=>{t.dialogPDFLoading=!1,document.getElementById("dialogPreview").src=e})},getEPaymentProfile(t){return t?JSON.parse(t):""},deleteFile(t){var e=this;let i=confirm("Bạn có chắc chắn xóa file?");i&&(t["dossierId"]=e.dossierId,e.$store.dispatch("deletePaymentFile",t).then(t=>{l.a.success("Xóa file thành công."),e.paymentFile="",e.data_payment["paymentFile"]=e.paymentFile,e.$store.commit("setPaymentProfile",e.data_payment)}).catch(t=>{l.a.error("Xóa file thất bại.")}))},downloadPaymentFile(t){let e=this,i="/o/rest/v2/dossiers/"+e.detailDossier.dossierId+"/payments/"+e.detailDossier.referenceUid+"/confirmfile";window.open(i)},pickFile(){document.getElementById("paymentFile1").value="",document.getElementById("paymentFile1").click()},currency(t){return t&&t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")?t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."):0},validPayment(){return this.paymentFile?this.epaymentValid=!0:this.epaymentValid=!1,this.isBank?this.errorNotSelect=!1:this.errorNotSelect=!0,!1!==this.isBank},toKeyPay(t){window.open(t,"_self")},goBack(){window.history.back()}},filters:{}},h=d,u=i("2877"),p=Object(u["a"])(h,a,s,!1,null,null,null);p.options.__file="ThucHienThanhToanDienTu.vue";e["a"]=p.exports}});