(function(t){function e(e){for(var n,r,s=e[0],c=e[1],l=e[2],d=0,p=[];d<s.length;d++)r=s[d],o[r]&&p.push(o[r][0]),o[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(p.length)p.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,s=1;s<a.length;s++){var c=a[s];0!==o[c]&&(n=!1)}n&&(i.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},o={app:0},i=[];function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;i.push(["56d7","chunk-vendors"]),a()})({"56d7":function(t,e,a){"use strict";a.r(e);a("0f18");var n=a("a026"),o=a("bb71");a("74ef");n["a"].use(o["a"],{theme:{primary:"#001f4d",secondary:"#424242",accent:"#001f4d",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"},customProperties:!0,iconfont:"md"});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"app_survey"}},[t._e(),a("v-content",[a("router-view")],1)],1)},r=[],s={data:function(){return{}}},c=s,l=a("2877"),u=a("6544"),d=a.n(u),p=a("7496"),f=a("549c"),h=a("f774"),m=Object(l["a"])(c,i,r,!1,null,null,null);m.options.__file="App.vue";var g=m.exports;d()(m,{VApp:p["a"],VContent:f["a"],VNavigationDrawer:h["a"]});var v=a("8c4f"),w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"text-xs-center",attrs:{xs12:"","mt-5":""}},[a("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1)],1)],1)},b=[],y={},x=y,I=a("a523"),_=a("0e8f"),D=a("a722"),C=a("490a"),k=Object(l["a"])(x,w,b,!1,null,null,null);k.options.__file="NotFound.vue";var L=k.exports;d()(k,{VContainer:I["a"],VFlex:_["a"],VLayout:D["a"],VProgressCircular:C["a"]});var V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"100%","background-color":"#ffff","padding-top":"20px"}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"text-xs-center",staticStyle:{"margin-bottom":"20px"},attrs:{xs12:"",sm12:""}},[a("h3",{staticClass:"text-center"},[t._v("CÂU HỎI KHẢO SÁT")])]),a("v-flex",{attrs:{xs12:"",sm2:""}}),a("v-flex",{attrs:{xs12:"",sm8:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:""}},[t._l(t.votingItems,function(e,n){return a("div",{staticStyle:{"margin-bottom":"5px"}},[a("div",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(n+1)+". "+t._s(e.subject))]),a("div",{staticClass:"ml-4"},[a("v-radio-group",{attrs:{height:"10",row:""},model:{value:e.selected,callback:function(a){t.$set(e,"selected",a)},expression:"item.selected"}},t._l(e["choices"],function(t,e){return a("v-radio",{key:"rd"+e,attrs:{label:t,height:"10",value:e+1}})}),1),a("v-layout",{staticClass:"ml-3",staticStyle:{"margin-top":"-10px"},attrs:{wrap:""}},t._l(e.answers,function(n,o){return a("v-flex",{key:o,staticStyle:{"margin-left":"18px"}},[a("span",{staticClass:"text-bold",staticStyle:{color:"green"}},[t._v(t._s(n)+"/"+t._s(e.answersCount))])])}),1)],1),e.commentable?a("div",{staticClass:"mt-3 ml-4 mr-3"},[a("v-text-field",{attrs:{label:"Ý kiến khác","multi-line":"",rows:"2"},model:{value:e["comment"],callback:function(a){t.$set(e,"comment",a)},expression:"item['comment']"}})],1):t._e()])}),t.showCaptcha?a("v-flex",{staticClass:"mb-3 mt-3",attrs:{xs12:"",sm12:""}},[a("captcha",{ref:"captcha"})],1):t._e(),a("v-flex",{staticClass:"text-xs-center mt-2",attrs:{xs12:"",sm12:""}},[a("v-btn",{attrs:{color:"primary",loading:t.btnLoading,disabled:t.btnLoading},on:{click:t.doVottingResultSubmit}},[t._v("Gửi kết quả đánh giá")])],1)],2)],1)],1),a("v-flex",{attrs:{xs12:"",sm2:""}})],1)],1)},S=[],P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("img",{attrs:{src:t.chapchablob,alt:"capcha"}})]),a("v-flex",{staticClass:"mt-2",attrs:{xs10:""}},[a("v-text-field",{attrs:{placeholder:"Nhập captcha"},model:{value:t.j_captcha_response,callback:function(e){t.j_captcha_response=e},expression:"j_captcha_response"}})],1),a("v-flex",{staticClass:"mt-2 text-right pr-1",attrs:{xs2:""}},[a("v-btn",{attrs:{flat:"",icon:""},nativeOn:{click:function(e){return t.makeImageCap(e)}}},[a("v-icon",{attrs:{size:"28"}},[t._v("refresh")])],1)],1)],1)},N=[],A=a("1157"),R=a.n(A),j={props:["index"],components:{},data:function(){return{j_captcha_response:"",chapchablob:"",options:{},arrCaptcha:[],captcha:"",currentlyDragging:null,loggedEvent:"",images:[{name:"Image 1",src:"http://placehold.it/100/000000/ffffff"},{name:"Image 2",src:"http://placehold.it/100/C93742/ffffff"},{name:"Image 3",src:"http://placehold.it/100/6894D1/ffffff"}]}},computed:{loading:function(){return this.$store.getters.loading}},created:function(){var t=this;t.makeImageCap()},watch:{},methods:{makeImageCap:function(){var t=this;t.chapchablob="",t.$store.dispatch("makeImageCap").then(function(e){t.chapchablob=e}).catch(function(e){t.chapchablob=""})},makeRandomString:function(){for(var t=this,e="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<4;n++)e+=a.charAt(Math.floor(Math.random()*a.length));e&&(t.arrCaptcha=t.shuffleArrCaptcha(e.split(""))),t.captcha=e},shuffleArrCaptcha:function(t){var e=t.length,a=null,n=0;while(e>0)n=Math.floor(Math.random()*e),e--,a=t[e],t[e]=t[n],t[n]=a;return t},checkValidCaptcha:function(){var t=this,e="",a=R()("#captcha").children();console.log(a);for(var n=0;n<a.length;n++)e+=a[n].innerHTML;return t.captcha===e}},filters:{dateTimeView:function(t){if(t){var e=new Date(t);return"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear())}return""}}},O=j,$=(a("cf0c"),a("8336")),E=a("132d"),F=a("2677"),T=Object(l["a"])(O,P,N,!1,null,null,null);T.options.__file="Captcha.vue";var M=T.exports;d()(T,{VBtn:$["a"],VFlex:_["a"],VIcon:E["a"],VLayout:D["a"],VTextField:F["a"]});var U=a("854a"),G=a.n(U),Y={props:["index"],components:{captcha:M},data:function(){return{votingItems:[],btnLoading:!1,showCaptcha:!1}},computed:{loading:function(){return this.$store.getters.loading}},created:function(){var t=this;console.log("landing---------"),t.$nextTick(function(){t.$store.dispatch("loadVoting",{className:"survey",classPk:0}).then(function(e){t.votingItems=e,console.log(t.votingItems)}).catch(function(t){})})},watch:{},methods:{viewListEmployee:function(t){this.$router.push({path:"/danh-sach-can-bo/"+t.itemCode,query:{itemName:t.itemName}})},doVottingResultSubmit:function(){var t=this;if(t.$refs.captcha)if(t.$refs.captcha.checkValidCatcha()){t.btnLoading=!0;var e=[];for(var a in t.votingItems)t.votingItems[a]["className"]="survey",t.votingItems[a]["classPk"]=0,e.push(t.$store.dispatch("submitVoting",t.votingItems[a]));Promise.all(e).then(function(e){G.a.success("Yêu cầu của bạn được thực hiện thành công."),t.btnLoading=!1,t.$refs.captcha&&t.$refs.captcha.refreshCaptcha()}).catch(function(e){G.a.error("Yêu cầu của bạn được thực hiện thất bại."),t.btnLoading=!1})}else G.a.error("Xác nhận sai. Vui lòng kiểm tra lại!");else t.showCaptcha=!0}},filters:{}},H=Y,q=a("67b6"),z=a("43a6"),B=Object(l["a"])(H,V,S,!1,null,null,null);B.options.__file="Landing.vue";var J=B.exports;d()(B,{VBtn:$["a"],VFlex:_["a"],VLayout:D["a"],VRadio:q["a"],VRadioGroup:z["a"],VTextField:F["a"]});var K=[{path:"/",component:J,props:!0},{path:"*",name:"NotFound",component:L}];n["a"].use(v["a"]);var W=new v["a"]({routes:K}),X=W,Q=a("2f62"),Z=a("bc3a"),tt=a.n(Z),et=a("bbd0");n["a"].use(G.a),n["a"].use(Q["a"]);var at=new Q["a"].Store({state:{initData:{},loading:!1,index:0},actions:{loadInitResource:function(t){t.commit;var e=t.state;return new Promise(function(t,a){null!==window.themeDisplay&&void 0!==window.themeDisplay?(e.initData["groupId"]=window.themeDisplay.getScopeGroupId(),e.initData["user"]={userName:window.themeDisplay.getUserName(),userEmail:"",userId:window.themeDisplay.getUserId()}):(e.initData["groupId"]=0,e.initData["user"]={userName:"",userEmail:"",userId:20103}),t(e.initData)})},loadVoting:function(t,e){var a=t.commit,n=t.state;return new Promise(function(t,o){a("setLoading",!0),at.dispatch("loadInitResource").then(function(i){var r={headers:{groupId:n.initData.groupId}};tt.a.get(et.initData.votingApi+"/"+e.className+"/"+e.classPk,r).then(function(e){e.data?t(e.data.data):t([]),a("setLoading",!1)}).catch(function(t){o(t),a("setLoading",!1)})})})},loadImageEmployee:function(t,e){t.commit;var a=t.state;return console.log(e),new Promise(function(t,n){at.dispatch("loadInitResource").then(function(o){var i={headers:{groupId:a.initData.groupId},responseType:"blob"};tt.a.get("/o/rest/v2/users/"+e.mappingUser.userId+"/photo",i).then(function(e){var a=window.URL.createObjectURL(e.data);t(a)}).catch(function(t){n(t)})})})},loadGovAgencys:function(t,e){var a=t.commit,n=t.state;return new Promise(function(t,e){a("setLoading",!0),at.dispatch("loadInitResource").then(function(o){var i={headers:{groupId:n.initData.groupId}};tt.a.get(et.initData.dictcollectionsApi+"/GOVERNMENT_AGENCY/dictitems",i).then(function(e){e.data?t(e.data.data):t([]),a("setLoading",!1)}).catch(function(t){e(t),a("setLoading",!1)})})})},loadEmployees:function(t,e){var a=t.commit,n=t.state;return new Promise(function(t,o){a("setLoading",!0),at.dispatch("loadInitResource").then(function(i){var r={headers:{groupId:n.initData.groupId}};tt.a.get(et.initData.employeeApi+"/"+e.itemCode,r).then(function(e){e.data?t(e.data.data):t([]),a("setLoading",!1)}).catch(function(t){o(t),a("setLoading",!1)})})})},getEmployee:function(t,e){var a=t.commit,n=t.state;return new Promise(function(t,o){a("setLoading",!0),at.dispatch("loadInitResource").then(function(i){var r={headers:{groupId:n.initData.groupId}};tt.a.get(et.initData.detailEmployeeApi+"/"+e.employeeId,r).then(function(e){t(e.data),a("setLoading",!1)}).catch(function(t){o(t),a("setLoading",!1)})})})},checkPermisionVoting:function(t,e){t.commit;var a=t.state;return new Promise(function(t,n){at.dispatch("loadInitResource").then(function(){var o={headers:{groupId:a.initData.groupId},params:{applicantIdNo:e.applicantIdNo,dossierNo:e.dossierNo}};tt.a.get("/o/rest/v2/votings/checkpermission",o).then(function(e){var a=e.data;t(a)}).catch(function(t){console.log(t),n(t)})})})},submitVoting:function(t,e){t.commit;var a=t.state;return new Promise(function(t,n){at.dispatch("loadInitResource").then(function(o){var i=new URLSearchParams,r={headers:{groupId:a.initData.groupId}};e.comment&&i.append("comment",e.comment),i.append("selected",e.selected),i.append("className",e.className),i.append("classPk",e.classPk),tt.a.post(et.initData.votingApi+"/"+e.votingId+"/results",i,r).then(function(e){t(e.data)}).catch(function(t){n(t)})})})}},mutations:{setIndex:function(t,e){t.index=e},setInitData:function(t,e){t.initData=e}},getters:{loading:function(t){return t.loading},index:function(t){return t.index}}}),nt=a("967d");n["a"].use(nt["default"]);var ot=void 0!==window.themeDisplay?window.themeDisplay.getScopeGroupId():0;tt.a.defaults.withCredentials=!0,tt.a.defaults.headers.common["Token"]=void 0!==window.Liferay?window.Liferay.authToken:"",tt.a.defaults.headers.common["groupId"]=ot,n["a"].config.productionTip=!0,n["a"].mixin({methods:{getScopeGroupId:function(){return null!==window.themeDisplay&&void 0!==window.themeDisplay?window.themeDisplay.getScopeGroupId():0},getAuthToken:function(){return null!==window.themeDisplay&&void 0!==window.themeDisplay?window.Liferay.authToken:""},getUserId:function(){return null!==window.themeDisplay&&void 0!==window.themeDisplay?window.themeDisplay.getUserId():0}}}),new n["a"]({router:X,store:at,render:function(t){return t(g)}}).$mount("#app_survey")},"726e":function(t,e,a){},"74ef":function(t,e,a){},bbd0:function(t){t.exports={renderURLInit:"?p_p_id=FrontendWebVoting&p_p_lifecycle=2&p_p_state=exclusive&p_p_mode=view&p_p_resource_id=renderURLInit",initData:{votingApi:"/o/rest/v2/postal/votings",agenciesApi:"/o/rest/v2/serviceinfos/statistics/agencies",employeeApi:"/o/rest/v2/employees/publish",detailEmployeeApi:"/o/rest/v2/employees",dictcollectionsApi:"/o/rest/v2/dictcollections"}}},cf0c:function(t,e,a){"use strict";var n=a("726e"),o=a.n(n);o.a}});
//# sourceMappingURL=app.js.map