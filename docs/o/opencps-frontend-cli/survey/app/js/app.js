(function(t){function e(e){for(var a,o,s=e[0],c=e[1],l=e[2],u=0,d=[];u<s.length;u++)o=s[u],i[o]&&d.push(i[o][0]),i[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);p&&p(e);while(d.length)d.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,o=1;o<n.length;o++){var s=n[o];0!==i[s]&&(a=!1)}a&&(r.splice(e--,1),t=c(c.s=n[0]))}return t}var a={},o={app:0},i={app:0},r=[];function s(t){return c.p+"../../docs/o/opencps-frontend-cli/survey/app/js/"+({DetailForward:"DetailForward",HoanThienBoSungHoSoDetail:"HoanThienBoSungHoSoDetail",Landing:"Landing",TiepNhanHoSoDetail:"TiepNhanHoSoDetail"}[t]||t)+".js"}function c(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(t){var e=[],n={DetailForward:1,TiepNhanHoSoDetail:1};o[t]?e.push(o[t]):0!==o[t]&&n[t]&&e.push(o[t]=new Promise(function(e,n){for(var a="../../docs/o/opencps-frontend-cli/survey/app/css/"+({DetailForward:"DetailForward",HoanThienBoSungHoSoDetail:"HoanThienBoSungHoSoDetail",Landing:"Landing",TiepNhanHoSoDetail:"TiepNhanHoSoDetail"}[t]||t)+".css",i=c.p+a,r=document.getElementsByTagName("link"),s=0;s<r.length;s++){var l=r[s],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===a||u===i))return e()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){l=d[s],u=l.getAttribute("data-href");if(u===a||u===i)return e()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=e,p.onerror=function(e){var a=e&&e.target&&e.target.src||i,r=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");r.request=a,delete o[t],p.parentNode.removeChild(p),n(r)},p.href=i;var h=document.getElementsByTagName("head")[0];h.appendChild(p)}).then(function(){o[t]=0}));var a=i[t];if(0!==a)if(a)e.push(a[2]);else{var r=new Promise(function(e,n){a=i[t]=[e,n]});e.push(a[2]=r);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=s(t),l=function(e){u.onerror=u.onload=null,clearTimeout(d);var n=i[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src,r=new Error("Loading chunk "+t+" failed.\n("+a+": "+o+")");r.type=a,r.request=o,n[1](r)}i[t]=void 0}};var d=setTimeout(function(){l({type:"timeout",target:u})},12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(e)},c.m=t,c.c=a,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)c.d(n,a,function(e){return t[e]}.bind(null,a));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/",c.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=e,l=l.slice();for(var d=0;d<l.length;d++)e(l[d]);var p=u;r.push(["56d7","chunk-vendors"]),n()})({"56d7":function(t,e,n){"use strict";n.r(e);n("0f18");var a=n("a026"),o=n("bb71");n("74ef");a["a"].use(o["a"],{theme:{primary:"#001f4d",secondary:"#424242",accent:"#001f4d",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"},customProperties:!0,iconfont:"md"});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{id:"app_survey"}},[t._e(),n("v-content",[n("router-view")],1)],1)},r=[],s={data:function(){return{}}},c=s,l=n("2877"),u=n("6544"),d=n.n(u),p=n("7496"),h=n("549c"),f=n("f774"),m=Object(l["a"])(c,i,r,!1,null,null,null);m.options.__file="App.vue";var g=m.exports;d()(m,{VApp:p["a"],VContent:h["a"],VNavigationDrawer:f["a"]});var v=n("8c4f"),w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{fluid:""}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{staticClass:"text-xs-center",attrs:{xs12:"","mt-5":""}},[n("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1)],1)],1)},y=[],b={},x=b,D=n("a523"),I=n("0e8f"),_=n("a722"),S=n("490a"),C=Object(l["a"])(x,w,y,!1,null,null,null);C.options.__file="NotFound.vue";var L=C.exports;d()(C,{VContainer:D["a"],VFlex:I["a"],VLayout:_["a"],VProgressCircular:S["a"]});var k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{height:"100%","background-color":"#ffff","padding-top":"20px"}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{staticClass:"text-xs-center",staticStyle:{"margin-bottom":"20px"},attrs:{xs12:"",sm12:""}},[n("h3",{staticClass:"text-center"},[t._v("CÂU HỎI KHẢO SÁT")])]),n("v-flex",{attrs:{xs12:"",sm2:""}}),n("v-flex",{attrs:{xs12:"",sm8:""}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:"",sm12:""}},[t._l(t.votingItems,function(e,a){return n("div",{staticStyle:{"margin-bottom":"5px"}},[n("div",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(a+1)+". "+t._s(e.subject))]),n("div",{staticClass:"ml-4"},[n("v-radio-group",{attrs:{height:"10",row:""},model:{value:e.selected,callback:function(n){t.$set(e,"selected",n)},expression:"item.selected"}},t._l(e["choices"],function(t,e){return n("v-radio",{key:"rd"+e,attrs:{label:t,height:"10",value:e+1}})}),1),n("v-layout",{staticClass:"ml-3",staticStyle:{"margin-top":"-10px"},attrs:{wrap:""}},t._l(e.answers,function(a,o){return n("v-flex",{key:o,staticStyle:{"margin-left":"18px"}},[n("span",{staticClass:"text-bold",staticStyle:{color:"green"}},[t._v(t._s(a)+"/"+t._s(e.answersCount))])])}),1)],1),e.commentable?n("div",{staticClass:"mt-3 ml-4 mr-3"},[n("v-text-field",{attrs:{label:"Ý kiến khác","multi-line":"",rows:"2"},model:{value:e["comment"],callback:function(n){t.$set(e,"comment",n)},expression:"item['comment']"}})],1):t._e()])}),t.showCaptcha?n("v-flex",{staticClass:"mb-3 mt-3",attrs:{xs12:"",sm12:""}},[n("captcha",{ref:"captcha"})],1):t._e(),n("v-flex",{staticClass:"text-xs-center mt-2",attrs:{xs12:"",sm12:""}},[n("v-btn",{attrs:{color:"primary",loading:t.btnLoading,disabled:t.btnLoading},on:{click:t.doVottingResultSubmit}},[t._v("Gửi kết quả đánh giá")])],1)],2)],1)],1),n("v-flex",{attrs:{xs12:"",sm2:""}})],1)],1)},T=[],N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("img",{attrs:{src:t.chapchablob,alt:"capcha"}})]),n("v-flex",{staticClass:"mt-2",attrs:{xs10:""}},[n("v-text-field",{attrs:{placeholder:"Nhập captcha"},model:{value:t.j_captcha_response,callback:function(e){t.j_captcha_response=e},expression:"j_captcha_response"}})],1),n("v-flex",{staticClass:"mt-2 text-right pr-1",attrs:{xs2:""}},[n("v-btn",{attrs:{flat:"",icon:""},nativeOn:{click:function(e){return t.makeImageCap(e)}}},[n("v-icon",{attrs:{size:"28"}},[t._v("refresh")])],1)],1)],1)},V=[],A=n("1157"),P=n.n(A),E={props:["index"],components:{},data:function(){return{j_captcha_response:"",chapchablob:"",options:{},arrCaptcha:[],captcha:"",currentlyDragging:null,loggedEvent:"",images:[{name:"Image 1",src:"http://placehold.it/100/000000/ffffff"},{name:"Image 2",src:"http://placehold.it/100/C93742/ffffff"},{name:"Image 3",src:"http://placehold.it/100/6894D1/ffffff"}]}},computed:{loading:function(){return this.$store.getters.loading}},created:function(){var t=this;t.makeImageCap()},watch:{},methods:{makeImageCap:function(){var t=this;t.chapchablob="",t.$store.dispatch("makeImageCap").then(function(e){t.chapchablob=e}).catch(function(e){t.chapchablob=""})},makeRandomString:function(){for(var t=this,e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<4;a++)e+=n.charAt(Math.floor(Math.random()*n.length));e&&(t.arrCaptcha=t.shuffleArrCaptcha(e.split(""))),t.captcha=e},shuffleArrCaptcha:function(t){var e=t.length,n=null,a=0;while(e>0)a=Math.floor(Math.random()*e),e--,n=t[e],t[e]=t[a],t[a]=n;return t},checkValidCaptcha:function(){var t=this,e="",n=P()("#captcha").children();console.log(n);for(var a=0;a<n.length;a++)e+=n[a].innerHTML;return t.captcha===e}},filters:{dateTimeView:function(t){if(t){var e=new Date(t);return"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear())}return""}}},F=E,H=(n("cf0c"),n("8336")),j=n("132d"),R=n("2677"),O=Object(l["a"])(F,N,V,!1,null,null,null);O.options.__file="Captcha.vue";var $=O.exports;d()(O,{VBtn:H["a"],VFlex:I["a"],VIcon:j["a"],VLayout:_["a"],VTextField:R["a"]});var B=n("854a"),M=n.n(B),U={props:["index"],components:{captcha:$},data:function(){return{votingItems:[],btnLoading:!1,showCaptcha:!1}},computed:{loading:function(){return this.$store.getters.loading}},created:function(){var t=this;console.log("landing---------"),t.$nextTick(function(){t.$store.dispatch("loadVoting",{className:"survey",classPk:0}).then(function(e){t.votingItems=e,console.log(t.votingItems)}).catch(function(t){})})},watch:{},methods:{viewListEmployee:function(t){this.$router.push({path:"/danh-sach-can-bo/"+t.itemCode,query:{itemName:t.itemName}})},doVottingResultSubmit:function(){var t=this;if(t.$refs.captcha)if(t.$refs.captcha.checkValidCatcha()){t.btnLoading=!0;var e=[];for(var n in t.votingItems)t.votingItems[n]["className"]="survey",t.votingItems[n]["classPk"]=0,e.push(t.$store.dispatch("submitVoting",t.votingItems[n]));Promise.all(e).then(function(e){M.a.success("Yêu cầu của bạn được thực hiện thành công."),t.btnLoading=!1,t.$refs.captcha&&t.$refs.captcha.refreshCaptcha()}).catch(function(e){M.a.error("Yêu cầu của bạn được thực hiện thất bại."),t.btnLoading=!1})}else M.a.error("Xác nhận sai. Vui lòng kiểm tra lại!");else t.showCaptcha=!0}},filters:{}},G=U,q=n("67b6"),Y=n("43a6"),z=Object(l["a"])(G,k,T,!1,null,null,null);z.options.__file="Landing.vue";var J=z.exports;d()(z,{VBtn:H["a"],VFlex:I["a"],VLayout:_["a"],VRadio:q["a"],VRadioGroup:Y["a"],VTextField:R["a"]});var K=[{path:"/",component:J,props:!0},{path:"/danh-sach-ho-so/:index",name:"Landing",component:function(){return n.e("Landing").then(n.bind(null,"306c"))},props:!0,meta:{requiresAuth:!1}},{path:"/danh-sach-ho-so/:index/tiep-nhan-ho-so/:id/:formCode",name:"TiepNhanHoSoDetail",component:function(){return n.e("TiepNhanHoSoDetail").then(n.bind(null,"d129"))},props:!0,meta:{requiresAuth:!1}},{path:"/danh-sach-ho-so/:index/bo-sung-ho-so/:id",name:"HoanThienBoSungHoSoDetail",component:function(){return n.e("HoanThienBoSungHoSoDetail").then(n.bind(null,"a35c"))},props:!0,meta:{requiresAuth:!1}},{path:"/danh-sach-ho-so/:index/ho-so/:id/:formCode",name:"DetailForward",component:function(){return n.e("DetailForward").then(n.bind(null,"b94b"))},props:!0,meta:{requiresAuth:!1}},{path:"*",name:"NotFound",component:L}];a["a"].use(v["a"]);var W=new v["a"]({routes:K}),X=W,Q=n("2f62"),Z=n("bc3a"),tt=n.n(Z),et=n("bbd0");a["a"].use(M.a),a["a"].use(Q["a"]);var nt=new Q["a"].Store({state:{initData:{},loading:!1,index:0},actions:{loadInitResource:function(t){t.commit;var e=t.state;return new Promise(function(t,n){null!==window.themeDisplay&&void 0!==window.themeDisplay?(e.initData["groupId"]=window.themeDisplay.getScopeGroupId(),e.initData["user"]={userName:window.themeDisplay.getUserName(),userEmail:"",userId:window.themeDisplay.getUserId()}):(e.initData["groupId"]=0,e.initData["user"]={userName:"",userEmail:"",userId:20103}),t(e.initData)})},loadVoting:function(t,e){var n=t.commit,a=t.state;return new Promise(function(t,o){n("setLoading",!0),nt.dispatch("loadInitResource").then(function(i){var r={headers:{groupId:a.initData.groupId}};tt.a.get(et.initData.votingApi+"/"+e.className+"/"+e.classPk,r).then(function(e){e.data?t(e.data.data):t([]),n("setLoading",!1)}).catch(function(t){o(t),n("setLoading",!1)})})})},loadImageEmployee:function(t,e){t.commit;var n=t.state;return console.log(e),new Promise(function(t,a){nt.dispatch("loadInitResource").then(function(o){var i={headers:{groupId:n.initData.groupId},responseType:"blob"};tt.a.get("/o/rest/v2/users/"+e.mappingUser.userId+"/photo",i).then(function(e){var n=window.URL.createObjectURL(e.data);t(n)}).catch(function(t){a(t)})})})},loadGovAgencys:function(t,e){var n=t.commit,a=t.state;return new Promise(function(t,e){n("setLoading",!0),nt.dispatch("loadInitResource").then(function(o){var i={headers:{groupId:a.initData.groupId}};tt.a.get(et.initData.dictcollectionsApi+"/GOVERNMENT_AGENCY/dictitems",i).then(function(e){e.data?t(e.data.data):t([]),n("setLoading",!1)}).catch(function(t){e(t),n("setLoading",!1)})})})},loadEmployees:function(t,e){var n=t.commit,a=t.state;return new Promise(function(t,o){n("setLoading",!0),nt.dispatch("loadInitResource").then(function(i){var r={headers:{groupId:a.initData.groupId}};tt.a.get(et.initData.employeeApi+"/"+e.itemCode,r).then(function(e){e.data?t(e.data.data):t([]),n("setLoading",!1)}).catch(function(t){o(t),n("setLoading",!1)})})})},getEmployee:function(t,e){var n=t.commit,a=t.state;return new Promise(function(t,o){n("setLoading",!0),nt.dispatch("loadInitResource").then(function(i){var r={headers:{groupId:a.initData.groupId}};tt.a.get(et.initData.detailEmployeeApi+"/"+e.employeeId,r).then(function(e){t(e.data),n("setLoading",!1)}).catch(function(t){o(t),n("setLoading",!1)})})})},checkPermisionVoting:function(t,e){t.commit;var n=t.state;return new Promise(function(t,a){nt.dispatch("loadInitResource").then(function(){var o={headers:{groupId:n.initData.groupId},params:{applicantIdNo:e.applicantIdNo,dossierNo:e.dossierNo}};tt.a.get("/o/rest/v2/votings/checkpermission",o).then(function(e){var n=e.data;t(n)}).catch(function(t){console.log(t),a(t)})})})},submitVoting:function(t,e){t.commit;var n=t.state;return new Promise(function(t,a){nt.dispatch("loadInitResource").then(function(o){var i=new URLSearchParams,r={headers:{groupId:n.initData.groupId}};e.comment&&i.append("comment",e.comment),i.append("selected",e.selected),i.append("className",e.className),i.append("classPk",e.classPk),tt.a.post(et.initData.votingApi+"/"+e.votingId+"/results",i,r).then(function(e){t(e.data)}).catch(function(t){a(t)})})})}},mutations:{setIndex:function(t,e){t.index=e},setInitData:function(t,e){t.initData=e}},getters:{loading:function(t){return t.loading},index:function(t){return t.index}}}),at=n("967d");a["a"].use(at["default"]);var ot=void 0!==window.themeDisplay?window.themeDisplay.getScopeGroupId():0;tt.a.defaults.withCredentials=!0,tt.a.defaults.headers.common["Token"]=void 0!==window.Liferay?window.Liferay.authToken:"",tt.a.defaults.headers.common["groupId"]=ot,a["a"].config.productionTip=!0,a["a"].mixin({methods:{getScopeGroupId:function(){return null!==window.themeDisplay&&void 0!==window.themeDisplay?window.themeDisplay.getScopeGroupId():0},getAuthToken:function(){return null!==window.themeDisplay&&void 0!==window.themeDisplay?window.Liferay.authToken:""},getUserId:function(){return null!==window.themeDisplay&&void 0!==window.themeDisplay?window.themeDisplay.getUserId():0}}}),new a["a"]({router:X,store:nt,render:function(t){return t(g)}}).$mount("#app_survey")},"726e":function(t,e,n){},"74ef":function(t,e,n){},bbd0:function(t){t.exports={renderURLInit:"?p_p_id=FrontendWebVoting&p_p_lifecycle=2&p_p_state=exclusive&p_p_mode=view&p_p_resource_id=renderURLInit",initData:{votingApi:"/o/rest/v2/postal/votings",agenciesApi:"/o/rest/v2/serviceinfos/statistics/agencies",employeeApi:"/o/rest/v2/employees/publish",detailEmployeeApi:"/o/rest/v2/employees",dictcollectionsApi:"/o/rest/v2/dictcollections"}}},cf0c:function(t,e,n){"use strict";var a=n("726e"),o=n.n(a);o.a}});
//# sourceMappingURL=app.js.map