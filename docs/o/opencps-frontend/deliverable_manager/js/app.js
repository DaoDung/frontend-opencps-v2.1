(function(e){function t(t){for(var o,i,s=t[0],c=t[1],l=t[2],d=0,p=[];d<s.length;d++)i=s[d],r[i]&&p.push(r[i][0]),r[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);u&&u(t);while(p.length)p.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(o=!1)}o&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},r={app:0},a=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"1a0d":function(e,t,n){"use strict";var o=n("d593"),r=n.n(o);r.a},"56d7":function(e,t,n){"use strict";n.r(t);var o=n("a026"),r=n("ce5b"),a=n.n(r);o["default"].use(a.a,{theme:{primary:"#212121",secondary:"#424242",accent:"#459fed",error:"#ff8e8e",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}});n("ca9a"),n("a51b"),n("c35c"),n("861c");var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{id:"app"}},[n("router-view"),n("go-top",{attrs:{size:42,"bg-color":"#0064c7"}})],1)},s=[],c=n("49ec"),l=n.n(c),u={props:["index"],data:function(){return{dialog:!1,drawer:null,dataSocket:{}}},components:{GoTop:l.a},computed:{items:function(){return this.$store.getters.getDeliverableTypes},user:function(){return this.$store.getters.user},drawer:function(){return this.$store.getters.drawer},snackbarerror:{get:function(){return this.$store.getters.getsnackbarerror},set:function(e){this.$store.commit("setsnackbarerror",e)}},snackbarsocket:{get:function(){return this.$store.getters.getsnackbarsocket},set:function(e){this.$store.commit("setsnackbarsocket",e)}}},methods:{redirectFilter:function(e){this.$router.push(e+"?state_change="+Math.floor(100*Math.random())+1)},closeError:function(){this.$store.commit("setsnackbarerror",!1)},reloadPage:function(){window.location.reload(!0)},deliverableRouter:function(e){console.log(e)}}},d=u,p=n("2877"),f=Object(p["a"])(d,i,s,!1,null,null,null);f.options.__file="App.vue";var v=f.exports,h=n("8c4f"),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-navigation-drawer",{attrs:{fixed:"",app:"",width:"240"},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("v-list",{attrs:{dense:""}},e._l(e.items,function(t,o){return n("v-list-tile",{key:o,attrs:{to:"/danh-sach-giay-to/"+o}},[n("v-list-tile-action",[String(o)===String(e.index)?n("v-icon",{attrs:{color:"blue darken-3"}},[e._v("play_arrow")]):n("v-icon",[e._v("description")])],1),n("v-list-tile-content",[n("v-list-tile-title",[e._v(e._s(t.typeName))])],1)],1)}))],1),n("v-content",[n("router-view")],1),n("v-snackbar",{attrs:{bottom:!1,left:!1,"multi-line":!1,right:!0,timeout:2e3,top:!0,vertical:!1,color:"red darken-3"},model:{value:e.snackbarerror,callback:function(t){e.snackbarerror=t},expression:"snackbarerror"}},[e._v("\n    Yêu cầu thực hiện thất bại\n    "),n("v-btn",{attrs:{icon:""},on:{click:function(t){e.closeError()}}},[n("v-icon",[e._v("clear")])],1)],1),n("v-snackbar",{attrs:{bottom:!0,left:!1,"multi-line":!0,right:!1,timeout:0,top:!0,vertical:!1,color:"red darken-3"},model:{value:e.snackbarsocket,callback:function(t){e.snackbarsocket=t},expression:"snackbarsocket"}},[n("v-progress-circular",{attrs:{size:20,width:1,color:"white",indeterminate:""}}),e._v("\n     \n    Mất kết nối, tự động kết nối lại trong giây lát ... \n    \n    "),n("v-btn",{attrs:{icon:""},on:{click:function(t){e.reloadPage()}}},[n("v-icon",[e._v("replay")])],1)],1)],1)},g=[],b={props:["index"],data:function(){return{dialog:!1,drawer:null,dataSocket:{}}},computed:{items:function(){return this.$store.getters.getDeliverableTypes},snackbarerror:{get:function(){return this.$store.getters.getsnackbarerror},set:function(e){this.$store.commit("setsnackbarerror",e)}},snackbarsocket:{get:function(){return this.$store.getters.getsnackbarsocket},set:function(e){this.$store.commit("setsnackbarsocket",e)}}},methods:{redirectFilter:function(e){this.$router.push(e+"?state_change="+Math.floor(100*Math.random())+1)},closeError:function(){this.$store.commit("setsnackbarerror",!1)},reloadPage:function(){window.location.reload(!0)},deliverableRouter:function(e){console.log(e)}}},w=b,y=Object(p["a"])(w,m,g,!1,null,null,null);y.options.__file="Home.vue";var k=y.exports,_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[e._v("\n    Not found\n")])},x=[],D={},T=D,C=(n("1a0d"),Object(p["a"])(T,_,x,!1,null,"6c946066",null));C.options.__file="NotFound.vue";var S=C.exports,O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"row-header no__hidden_class"},[n("div",{staticClass:"background-triangle-big"},[n("span",[e._v(e._s(void 0!==e.items[e.index]?e.items[e.index]["typeName"]:""))])]),n("div",{staticClass:"layout row wrap header_tools row-blue"},[n("div",{staticClass:"flex pl-3 text-ellipsis text-bold",staticStyle:{position:"relative"}}),n("div",{staticClass:"flex text-right",staticStyle:{"margin-left":"auto","max-width":"50px"}},[n("v-btn",{staticClass:"my-0 mx-2",attrs:{icon:""}},[n("v-icon",{attrs:{size:"16"}},[e._v("filter_list")])],1)],1)])]),n("div",{staticStyle:{"text-align":"right"}},[n("v-btn",{attrs:{color:"blue darken-3",dark:"",to:"/danh-sach-giay-to/"+e.index+"/editor"}},[e._v("\n      Thêm giấy phép\n    ")])],1),n("v-data-table",{staticClass:"table-landing table-bordered",attrs:{headers:e.headers,items:e.hosoDatas,"total-items":e.hosoDatasTotal,"item-key":"deliverableId","no-data-text":"Không có giấy phép nào","hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[n("tr",[n("td",{staticClass:"text-xs-center px-0 py-0"},[e.loadingTable?n("content-placeholders",[n("content-placeholders-text",{attrs:{lines:1}})],1):n("span",{staticStyle:{cursor:"pointer"},on:{click:function(n){e.viewDetail(t.item,t.index)}}},[e._v("\n            "+e._s(15*e.hosoDatasPage-15+t.index+1)+"\n          ")])],1),e._l(e.headers,function(o,r){return o.hasOwnProperty("value")?n("td",{key:r+"_"+t.item.deliverableId,class:o["class_column"]},[e.loadingTable?n("content-placeholders",[n("content-placeholders-text",{attrs:{lines:1}})],1):n("div",{class:{no_acction__event:!t.item["permission"]},staticStyle:{cursor:"pointer"},on:{click:function(n){e.viewDetail(t.item,t.index)}}},[o.hasOwnProperty("layout_view")?n("template-rendering",{attrs:{item:t.item,layout_view:o.layout_view}}):n("span",[e._v("\n              "+e._s(t.item[o.value])+"\n            ")])],1)],1):e._e()}),e.hideAction?e._e():n("td",{staticClass:"text-xs-center px-0 py-0"},[e.loadingTable?n("content-placeholders",[n("content-placeholders-text",{attrs:{lines:1}})],1):e._e(),e._v("\n          pdf\n        ")],1)],2)]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),n("div",{staticClass:"text-xs-right layout wrap",staticStyle:{position:"relative"}},[n("div",{staticClass:"flex pagging-table px-2"},[n("tiny-pagination",{attrs:{total:e.hosoDatasTotal,page:e.hosoDatasPage,"custom-class":"custom-tiny-class"},on:{"tiny:change-page":e.paggingData}})],1)])],1)},E=[],$=n("d3a7"),I=$["a"],N=Object(p["a"])(I,O,E,!1,null,null,null);N.options.__file="DeliverableList.vue";var P=N.exports,j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"row-header no__hidden_class"},[n("div",{staticClass:"background-triangle-big"},[n("span",[e._v(e._s(void 0!==e.items[e.index]?e.items[e.index]["typeName"]:""))])]),n("div",{staticClass:"layout row wrap header_tools row-blue"},[n("div",{staticClass:"flex pl-3 text-ellipsis text-bold",staticStyle:{position:"relative"}}),n("div",{staticClass:"flex xs4 sm2 text-right",staticStyle:{"margin-left":"auto"}},[n("v-btn",{staticClass:"my-0 mx-0 btn-border-left",attrs:{flat:"","active-class":"temp_active"},on:{click:e.goBack}},[e._v("\n          Quay lại  \n          "),n("v-icon",{attrs:{size:"16"}},[e._v("undo")])],1)],1)])]),n("div")])},R=[],A={props:["index"],data:function(){return{dataSocket:{}}},created:function(){var e=this;e.$nextTick(function(){setTimeout(function(){var t=e.items[e.index];console.log("formId",t),e.$store.dispatch("getContentFile",t).then(function(e){console.log(e)})},100)})},watch:{$route:function(e,t){}},computed:{items:function(){return this.$store.getters.getDeliverableTypes}},methods:{goBack:function(){window.history.back()}}},F=A,L=Object(p["a"])(F,j,R,!1,null,null,null);L.options.__file="DeliverableEditor.vue";var M=L.exports,U=[{path:"/danh-sach-giay-to/:index",name:"Home",component:k,props:!0,meta:{requiresAuth:!0},children:[{path:"/danh-sach-giay-to/:index",name:"DeliverableList",component:P,props:!0,meta:{requiresAuth:!0}},{path:"/danh-sach-giay-to/:index/editor",name:"DeliverableEditor",component:M,props:!0,meta:{requiresAuth:!0}}]},{path:"*",name:"NotFound",component:S}];o["default"].use(h["a"]);var G=new h["a"]({routes:U});G.beforeEach(function(e,t,n){e.matched.some(function(e){return e.meta.requiresAuth});n()});var z,W=G,q=n("2f62"),K=n("bc3a"),B=n.n(K),H="\n    {\n        getDeliverableTypes(start: -1, end: -1) {\n            typeCode\n            typeName\n            formScriptFileId\n            formReportFileId\n            dataConfig\n            tableConfig\n        }\n    }\n",J={getDeliverableTypes:H};function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}o["default"].use(q["a"]);var Q=new q["a"].Store({state:{groupId:void 0!==window.themeDisplay?window.themeDisplay.getScopeGroupId():0,snackbarerror:!1,snackbarsocket:!1,refreshSocket:0,initData:{},tocken:"",loginUser:[{email:"",role:""}],user:null,socket:{isConnected:!1,message:"",reconnectError:!1},endPointApi:"/o/rest/v2",getDeliverableTypes:[]},actions:{loadInitResource:function(e){var t=e.state;return new Promise(function(e){null!==window.themeDisplay&&void 0!==window.themeDisplay?(t.initData["groupId"]=window.themeDisplay.getScopeGroupId(),t.initData["user"]={userName:window.themeDisplay.getUserName(),userEmail:"",userId:window.themeDisplay.getUserId()}):(t.initData["groupId"]=0,t.initData["user"]={userName:"",userEmail:"",userId:20103}),e(t.initData)})},getDeliverableTypes:function(e){var t=e.commit,n=e.state;return new Promise(function(){var e={headers:{Authorization:"Basic dGVzdEBsaWZlcmF5LmNvbTp0ZXN0",groupId:n.groupId,"Content-Type":"text/plain",Accept:"application/json"}},o=J.getDeliverableTypes;B.a.post("/o/v1/opencps/deliverable",o,e).then(function(e){n.getDeliverableTypes=e.data["getDeliverableTypes"]}).catch(function(){n.getDeliverableTypes=[],t("setsnackbarerror",!0)})})},getContentFile:function(e,t){var n=e.commit,o=e.state;return new Promise(function(){var e={headers:{groupId:o.groupId,Accept:"text/plain"}};B.a.get("/fileattach/"+t+"/text",e).then(function(e){resolve(e.data)}).catch(function(){n("setsnackbarerror",!0)})})}},mutations:(z={SOCKET_ONOPEN:function(e,t){o["default"].prototype.$socket=t.currentTarget,e.socket.isConnected=!0,setTimeout(function(){e.socket.isConnected&&3===e.refreshSocket&&(e.refreshSocket=0,window.location.reload(!0))},4e3)},SOCKET_ONCLOSE:function(e,t){console.log("SOCKET_ONCLOSE",t),e.refreshSocket=3,e.snackbarsocket=!0,e.socket.isConnected=!1},SOCKET_ONERROR:function(e,t){console.error(e,t)},SOCKET_ONMESSAGE:function(e,t){e.message=t}},Z(z,WebSocket.WS_RECONNECT,function(e,t){console.log("WS_RECONNECT",e),console.log("WS_RECONNECT",t)}),Z(z,WebSocket.WS_RECONNECT_ERROR,function(e){e.socket.reconnectError=!0}),Z(z,"setInitData",function(e,t){e.initData=t}),Z(z,"setsnackbarerror",function(e,t){e.snackbarerror=t}),Z(z,"setsnackbarsocket",function(e,t){e.snackbarsocket=t}),z),getters:{getsnackbarerror:function(e){return e.snackbarerror},getsnackbarsocket:function(e){return e.snackbarsocket},getDeliverableTypes:function(e){return e.getDeliverableTypes}}}),V=n("b408"),X=n.n(V),Y=n("967d"),ee=n("e0e8");o["default"].use(ee["a"]),o["default"].use(Y["default"]);var te=void 0!==window.themeDisplay?window.themeDisplay.getScopeGroupId():0,ne=void 0!==window.themeDisplay?window.themeDisplay.getCompanyId():0,oe=void 0!==window.themeDisplay?window.themeDisplay.getUserId():0,re=void 0!==window.themeDisplay?window.themeDisplay.getUserName():"",ae=void 0!==window.themeDisplay?window.themeDisplay.getPortalURL().replace("http://",""):"localhost:8080",ie=void 0!==window.themeDisplay?window.Liferay.authToken:"",se=ae.indexOf(":")>0?ae.substr(0,ae.indexOf(":")):ae;o["default"].use(X.a,"ws://"+se+":8080/o/v1/socket/web?groupId="+te+"&portalURL="+ae+"&companyId="+ne+"&userId="+oe+"&userName="+re+"&Token="+ie,{store:Q,format:"json",reconnection:!0,reconnectionAttempts:5,reconnectionDelay:3e3,maxHttpBufferSize:31457280,maxPayload:31457280}),B.a.defaults.headers.common["Token"]=void 0!==window.Liferay?window.Liferay.authToken:"",B.a.defaults.headers.common["groupId"]=te,o["default"].config.productionTip=!0,o["default"].mixin({methods:{getScopeGroupId:function(){return null!==window.themeDisplay&&void 0!==window.themeDisplay?window.themeDisplay.getScopeGroupId():0},getAuthToken:function(){return null!==window.themeDisplay&&void 0!==window.themeDisplay?window.Liferay.authToken:""},getUserId:function(){return null!==window.themeDisplay&&void 0!==window.themeDisplay?window.themeDisplay.getUserId():0}}}),new o["default"]({el:"#app",router:W,store:Q,render:function(e){return e(v)},created:function(){var e=this;e.$nextTick(function(){e.$store.dispatch("getDeliverableTypes")})}})},"861c":function(e,t,n){},a51b:function(e,t,n){},c35c:function(e,t,n){},ca9a:function(e,t,n){},d3a7:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__["a"]={props:["index"],data:function(){return{headers:[],hideAction:!1,hosoDatas:[],hosoDatasTotal:0,hosoDatasPage:1,hosoTotalPage:0,dataSocket:{}}},created:function created(){var vm=this;vm.$nextTick(function(){console.log(vm.index),setTimeout(function(){console.log(vm.items),vm.headers=eval("( "+vm.items[vm.index]["tableConfig"]+" )")["headers"]},100)})},watch:{$route:function(e,t){},index:function index(val){var vm=this;vm.headers=eval("( "+vm.items[val]["tableConfig"]+" )")["headers"]}},computed:{items:function(){return this.$store.getters.getDeliverableTypes},loadingTable:function(){return this.$store.getters.loadingTable}},methods:{paggingData:function(e){var t=this,n=t.$router.history.current,o=n.query,r="?";for(var a in o["page"]="",o)""!==o[a]&&"undefined"!==o[a]&&void 0!==o[a]&&(r+=a+"="+o[a]+"&");r+="page="+e.page,t.$router.push({path:n.path+r})}}}},d593:function(e,t,n){}});
//# sourceMappingURL=app.js.map