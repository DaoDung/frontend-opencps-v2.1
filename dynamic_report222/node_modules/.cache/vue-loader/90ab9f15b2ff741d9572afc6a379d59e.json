{"remainingRequest":"/Users/binhthgc/Documents/fds/github/frontend-opencps-v2.1/dynamic_report/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/binhthgc/Documents/fds/github/frontend-opencps-v2.1/dynamic_report/src/components/form_xu_ly/ThucHienThanhToanDienTu.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/binhthgc/Documents/fds/github/frontend-opencps-v2.1/dynamic_report/src/components/form_xu_ly/ThucHienThanhToanDienTu.vue","mtime":1548065607379},{"path":"/Users/binhthgc/Documents/fds/github/frontend-opencps-v2.1/dynamic_report/node_modules/vuetify-loader/lib/loader.js","mtime":499162500000},{"path":"/Users/binhthgc/Documents/fds/github/frontend-opencps-v2.1/dynamic_report/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/binhthgc/Documents/fds/github/frontend-opencps-v2.1/dynamic_report/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport Vue from 'vue'\nimport $ from 'jquery'\nimport toastr from 'toastr'\nimport {VMoney} from 'v-money'\ntoastr.options = {\n  'closeButton': true,\n  'timeOut': '5000'\n}\nexport default {\n  props: {\n    paymentProfile: {\n      type: Object,\n      default: () => {}\n    },\n    detailDossier: {\n      type: Object,\n      default: () => {}\n    }\n  },\n  data: () => ({\n    data_payment: {\n      advanceAmount: '',\n      feeAmount: '',\n      serviceAmount: '',\n      shipAmount: '',\n      paymentAmount: '',\n      paymentNote: '',\n      paymentFile: ''\n    },\n    paymentFile: '',\n    epaymentValid: true,\n    money: {\n      decimal: '',\n      thousands: '.',\n      prefix: '',\n      suffix: '',\n      precision: 0,\n      masked: false\n    },\n    totalFee: 0,\n    feeTamThu: 0,\n    feeTong: 0,\n    checkPaid: true,\n    activeEdit: true,\n    progressUploadPart: false,\n    dialogPDF: false,\n    dialogPDFLoading: true,\n    isBank: false,\n    errorNotSelect: false\n  }),\n  directives: {money: VMoney},\n  created () {\n    var vm = this\n    if (vm.detailDossier.hasOwnProperty('dossierId')) {\n      let filter = vm.detailDossier\n      vm.$store.dispatch('getPaymentFiles', filter).then(result => {\n        vm.paymentFile = result\n        vm.data_payment['paymentFile'] = vm.paymentFile\n        vm.$store.commit('setPaymentProfile', vm.data_payment)\n      })\n    }\n  },\n  computed: {\n    paymentFileName () {\n      return this.$store.getters.getPaymentFileName\n    },\n    isBank (val) {\n      if (val === true) {\n        this.errorNotSelect = false\n      }\n    }\n  },\n  watch: {\n    paymentProfile (val) {\n      var vm = this\n      if (vm.paymentProfile) {\n        vm.feeTong = Number(vm.paymentProfile.feeAmount) + Number(vm.paymentProfile.serviceAmount)\n        if ((vm.detailDossier.viaPostal === 2 || vm.detailDossier.viaPostal === '2') && vm.paymentProfile.shipAmount !== 0) {\n          vm.feeTong = Number(vm.paymentProfile.feeAmount) + Number(vm.paymentProfile.serviceAmount) + Number(vm.paymentProfile.shipAmount)\n        }\n        console.log('feeTong', vm.feeTong)\n        vm.totalFee = vm.feeTong - Number(vm.paymentProfile.advanceAmount)\n        if (vm.totalFee < 0) {\n          vm.totalFee = 0\n        }\n        vm.data_payment = {\n          advanceAmount: vm.paymentProfile.advanceAmount,\n          feeAmount: vm.paymentProfile.feeAmount,\n          serviceAmount: vm.paymentProfile.serviceAmount,\n          shipAmount: vm.paymentProfile.shipAmount,\n          paymentAmount: vm.totalFee,\n          paymentNote: vm.paymentProfile.paymentNote,\n          paymentFile: vm.paymentFile\n        }\n        vm.$store.commit('setPaymentProfile', vm.data_payment)\n        // }\n      }\n    },\n    detailDossier (val) {\n      var vm = this\n      if (val.hasOwnProperty('dossierId')) {\n        let filter = val\n        vm.$store.dispatch('getPaymentFiles', filter).then(result => {\n          vm.paymentFile = result\n          vm.data_payment['paymentFile'] = vm.paymentFile\n          vm.$store.commit('setPaymentProfile', vm.data_payment)\n        })\n      }\n    }\n  },\n  methods: {\n    uploadPaymentFile (e) {\n      var vm = this\n      vm.progressUploadPart = true\n      var data = {}\n      data['dossierId'] = vm.detailDossier.dossierId\n      data['referenceUid'] = vm.detailDossier.referenceUid\n      data['selector'] = 'paymentFile1'\n      data['partTip'] = {\n        tip: '',\n        maxSize: 10,\n        extensions: 'jpg,png,jpeg'\n      }\n      let file = $('#paymentFile1')[0].files[0]\n      vm.$store.dispatch('uploadPaymentFile', data).then(function (result) {\n        vm.epaymentValid = true\n        vm.progressUploadPart = false\n        vm.paymentFile = result\n        vm.data_payment['paymentFile'] = vm.paymentFile\n        vm.$store.commit('setPaymentProfile', vm.data_payment)\n        vm.$store.dispatch('getPaymentFiles', data).then(result => {\n          vm.paymentFile = result\n          vm.data_payment['paymentFile'] = vm.paymentFile\n          vm.$store.commit('setPaymentProfile', vm.data_payment)\n        })\n      }).catch(function (xhr) {\n        vm.progressUploadPart = false\n      })\n    },\n    viewFile () {\n      let vm = this\n      vm.dialogPDFLoading = true\n      vm.dialogPDF = true\n      let filter = {\n        dossierId: vm.detailDossier.dossierId,\n        referenceUid: vm.detailDossier.referenceUid\n      }\n      vm.$store.dispatch('viewPaymentFile', filter).then(result => {\n        vm.dialogPDFLoading = false\n        document.getElementById('dialogPreview').src = result\n      })\n    },\n    getEPaymentProfile (paymentProfile) {\n      if (paymentProfile) {\n        return JSON.parse(paymentProfile)\n      } else {\n        return ''\n      }\n    },\n    deleteFile (item) {\n      var vm = this\n      let x = confirm('Bạn có chắc chắn xóa file?')\n      if (x) {\n        item['dossierId'] = vm.dossierId\n        vm.$store.dispatch('deletePaymentFile', item).then(resFile => {\n          toastr.success('Xóa file thành công.')\n          vm.paymentFile = ''\n          vm.data_payment['paymentFile'] = vm.paymentFile\n          vm.$store.commit('setPaymentProfile', vm.data_payment)\n        }).catch(reject => {\n          toastr.error('Xóa file thất bại.')\n        })\n      }\n    },\n    downloadPaymentFile (item) {\n      let vm = this\n      // test local\n      // let url = 'http://127.0.0.1:8081/api/dossiers/' + vm.dossierId + '/payment/confirmfile'\n      let url = '/o/rest/v2/dossiers/' + vm.detailDossier.dossierId + '/payments/' + vm.detailDossier.referenceUid + '/confirmfile'\n      window.open(url)\n    },\n    pickFile () {\n      var vm = this\n      document.getElementById('paymentFile1').value = ''\n      document.getElementById('paymentFile1').click()\n    },\n    currency (value) {\n      if (value) {\n        return value.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, '.') ? value.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, '.') : 0\n      }\n      return 0\n    },\n    validPayment () {\n      if (this.paymentFile) {\n        this.epaymentValid = true\n      } else {\n        this.epaymentValid = false\n      }\n      if (!this.isBank) {\n        this.errorNotSelect = true\n      } else {\n        this.errorNotSelect = false\n      }\n      if (this.isBank === false) {\n        return false\n      } else {\n        return true\n      }\n    },\n    toKeyPay (item) {\n      window.open(item, '_self')\n    },\n    goBack () {\n      window.history.back()\n    }\n  },\n  filters: {}\n}\n",{"version":3,"sources":["ThucHienThanhToanDienTu.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ThucHienThanhToanDienTu.vue","sourceRoot":"src/components/form_xu_ly","sourcesContent":["<template>\n  <div style=\"width:100%\" class=\"payment-info\">\n    <v-expansion-panel :value=\"[true]\" class=\"expansion-pl\">\n      <v-expansion-panel-content>\n        <div slot=\"header\">\n          <div class=\"background-triangle-small\"> \n            <v-icon size=\"18\" color=\"white\">star_rate</v-icon> \n          </div>\n          <span>{{paymentProfile.paymentFee}}</span>\n        </div>\n        <v-card>\n          <v-card-text class=\"px-4 pb-1\">\n            <v-layout wrap>\n              <v-flex xs12 sm2>\n                <v-subheader class=\"pl-0 text-right\">Lệ phí: </v-subheader>\n              </v-flex>\n              <v-flex xs12 sm3>\n                <p class=\"mt-1 mb-0\">{{currency(Number(paymentProfile.feeAmount))}} &nbsp;&nbsp; vnđ</p>\n              </v-flex>\n              <v-flex xs12 sm2>\n                <v-subheader class=\"pl-0 text-right\">Phí: </v-subheader>\n              </v-flex>\n              <v-flex xs12 sm3>\n                <p class=\"mt-1 mb-0\">{{currency(Number(paymentProfile.serviceAmount))}} &nbsp;&nbsp; vnđ</p>\n              </v-flex>\n              <v-flex xs12 sm2></v-flex>\n              <v-flex xs12 sm2 v-if=\"(detailDossier.viaPostal === 2 || detailDossier.viaPostal === '2') && paymentProfile.shipAmount !== 0\">\n                <v-subheader class=\"pl-0 text-right\">Phí chuyển phát: </v-subheader>\n              </v-flex>\n              <v-flex xs12 sm3>\n                <p class=\"mt-1 mb-0\" v-if=\"(detailDossier.viaPostal === 2 || detailDossier.viaPostal === '2') && paymentProfile.shipAmount !== 0\">\n                  {{currency(Number(paymentProfile.shipAmount))}} &nbsp;&nbsp; vnđ\n                </p>\n              </v-flex>\n            </v-layout>\n          </v-card-text>\n          <v-card-text class=\"px-4 pt-0\">\n            <v-layout wrap>\n              <v-flex xs12 sm2>\n                <v-subheader class=\"pl-0 text-right\"><span class=\"text-bold\">Tổng: </span></v-subheader>\n              </v-flex>\n              <v-flex xs12 sm3 style=\"padding-top:7px\">\n                <span>{{currency(Number(feeTong))}} &nbsp;&nbsp; vnđ</span>\n              </v-flex>\n              <v-flex xs12 sm2>\n                <v-subheader class=\"pl-0 text-right\"><span class=\"text-bold\">Đã tạm nộp: </span></v-subheader>\n              </v-flex>\n              <v-flex xs12 sm3 style=\"padding-top:7px\">\n                <span>{{currency(Number(paymentProfile.advanceAmount))}} &nbsp;&nbsp; vnđ</span>\n              </v-flex>\n              <v-flex xs12 sm1></v-flex>\n              <v-flex xs12 sm2>\n                <v-subheader class=\"pl-0 text-right\"><span class=\"text-bold\">Còn phải nộp: </span></v-subheader>\n              </v-flex>\n              <v-flex xs12 sm3 style=\"padding-top:7px\">\n                <span>{{currency(totalFee)}} &nbsp;&nbsp; vnđ</span>\n              </v-flex>\n              <v-flex xs12 sm1></v-flex>\n            </v-layout>\n            <!-- paymentNote -->\n            <v-layout wrap style=\"position: relative\">\n              <v-flex style=\"width:70px\" class=\"my-0 py-1\"><span class=\"red--text\">* </span>&nbsp;Ghi chú:</v-flex>\n              <v-flex style=\"width:calc(100% - 80px)\">\n                <p class=\"px-2 my-0 py-1\">\n                  {{paymentProfile.paymentNote}} &nbsp;&nbsp;\n                </p>\n              </v-flex>\n            </v-layout>\n            <!-- epayment -->\n            <p class=\"mb-0\"><span class=\"red--text\">* </span>&nbsp;Lựa chọn hình thức thanh toán:</p>\n            <v-btn dark small color=\"blue darken-1\" class=\"ml-3 mr-2\" @click.native=\"() => isBank = true\">\n              <v-icon>account_balance</v-icon> &nbsp;\n              Thanh toán chuyển khoản\n            </v-btn>\n            <v-btn v-if=\"getEPaymentProfile(paymentProfile.epaymentProfile)\" dark small color=\"amber accent-4\" class=\"ml-2 mr-2\" @click.native=\"toKeyPay(getEPaymentProfile(paymentProfile.epaymentProfile).keypayUrl)\">\n              <v-icon>payment</v-icon> &nbsp;\n              Thanh toán điện tử\n            </v-btn>\n            <div v-if=\"isBank\" class=\"ml-3\">\n              <div>\n                <input type=\"file\" id=\"paymentFile1\" @change=\"uploadPaymentFile($event)\" style=\"display:none\">\n                <span>Tải lên file báo thanh toán chuyển khoản (Định dạng: .png, .jpg, .jpeg)</span>\n                <v-progress-circular\n                :width=\"2\"\n                :size=\"25\"\n                color=\"green\"\n                indeterminate\n                v-if=\"progressUploadPart\"\n                ></v-progress-circular>\n                <v-tooltip top v-else>\n                  <v-btn slot=\"activator\" icon class=\"mx-0 my-0\" @click=\"pickFile()\">\n                    <v-badge>\n                      <v-icon size=\"16\" color=\"primary\">cloud_upload</v-icon>\n                    </v-badge>\n                  </v-btn>\n                  <span>Tải file lên</span>\n                </v-tooltip>\n              </div>\n              <!-- view file -->\n              <div v-if=\"paymentFile\">\n                <span v-on:click.stop=\"viewFile()\" style=\"cursor: pointer;\">\n                  <v-icon color=\"blue\">insert_drive_file</v-icon>\n                  {{paymentFileName}}\n                </span>\n                <v-tooltip top>\n                  <v-btn icon ripple slot=\"activator\" v-on:click.stop=\"downloadPaymentFile(item)\" class=\"mx-0 my-0\">\n                    <v-icon style=\"color: #0d71bb;\" size=\"16\" color=\"primary\">save_alt</v-icon>\n                  </v-btn>\n                  <span>Tải xuống</span>\n                </v-tooltip>\n              </div>\n              <span v-if=\"!epaymentValid\" style=\"color:#f44336\">* Yêu cầu tải lên file báo thanh toán</span>\n            </div>\n            <p v-if=\"!isBank && errorNotSelect\" style=\"color:#f44336\">* Yêu cầu lựa chọn hình thức thanh toán</p>\n          </v-card-text>\n        </v-card>\n      </v-expansion-panel-content>\n    </v-expansion-panel>\n    <v-dialog v-model=\"dialogPDF\" max-width=\"900\" transition=\"fade-transition\" style=\"overflow: hidden;\">\n      <v-card>\n        <v-card-title class=\"headline\">File đính kèm</v-card-title>\n        <v-btn icon dark class=\"mx-0 my-0 absolute__btn_panel mr-2\" @click.native=\"dialogPDF = false\">\n          <v-icon>clear</v-icon>\n        </v-btn>\n        <div v-if=\"dialogPDFLoading\" style=\"\n          min-height: 600px;\n          text-align: center;\n          margin: auto;\n          padding: 25%;\n        \">\n          <v-progress-circular\n            :size=\"100\"\n            :width=\"1\"\n            color=\"primary\"\n            indeterminate\n          ></v-progress-circular>\n        </div>\n        <iframe v-show=\"!dialogPDFLoading\" id=\"dialogPreview\" src=\"\" type=\"application/pdf\" width=\"100%\" height=\"100%\" style=\"overflow: auto;min-height: 600px;\" frameborder=\"0\">\n        </iframe>\n      </v-card>\n    </v-dialog>\n  </div>\n</template>\n\n<script>\n\nimport Vue from 'vue'\nimport $ from 'jquery'\nimport toastr from 'toastr'\nimport {VMoney} from 'v-money'\ntoastr.options = {\n  'closeButton': true,\n  'timeOut': '5000'\n}\nexport default {\n  props: {\n    paymentProfile: {\n      type: Object,\n      default: () => {}\n    },\n    detailDossier: {\n      type: Object,\n      default: () => {}\n    }\n  },\n  data: () => ({\n    data_payment: {\n      advanceAmount: '',\n      feeAmount: '',\n      serviceAmount: '',\n      shipAmount: '',\n      paymentAmount: '',\n      paymentNote: '',\n      paymentFile: ''\n    },\n    paymentFile: '',\n    epaymentValid: true,\n    money: {\n      decimal: '',\n      thousands: '.',\n      prefix: '',\n      suffix: '',\n      precision: 0,\n      masked: false\n    },\n    totalFee: 0,\n    feeTamThu: 0,\n    feeTong: 0,\n    checkPaid: true,\n    activeEdit: true,\n    progressUploadPart: false,\n    dialogPDF: false,\n    dialogPDFLoading: true,\n    isBank: false,\n    errorNotSelect: false\n  }),\n  directives: {money: VMoney},\n  created () {\n    var vm = this\n    if (vm.detailDossier.hasOwnProperty('dossierId')) {\n      let filter = vm.detailDossier\n      vm.$store.dispatch('getPaymentFiles', filter).then(result => {\n        vm.paymentFile = result\n        vm.data_payment['paymentFile'] = vm.paymentFile\n        vm.$store.commit('setPaymentProfile', vm.data_payment)\n      })\n    }\n  },\n  computed: {\n    paymentFileName () {\n      return this.$store.getters.getPaymentFileName\n    },\n    isBank (val) {\n      if (val === true) {\n        this.errorNotSelect = false\n      }\n    }\n  },\n  watch: {\n    paymentProfile (val) {\n      var vm = this\n      if (vm.paymentProfile) {\n        vm.feeTong = Number(vm.paymentProfile.feeAmount) + Number(vm.paymentProfile.serviceAmount)\n        if ((vm.detailDossier.viaPostal === 2 || vm.detailDossier.viaPostal === '2') && vm.paymentProfile.shipAmount !== 0) {\n          vm.feeTong = Number(vm.paymentProfile.feeAmount) + Number(vm.paymentProfile.serviceAmount) + Number(vm.paymentProfile.shipAmount)\n        }\n        console.log('feeTong', vm.feeTong)\n        vm.totalFee = vm.feeTong - Number(vm.paymentProfile.advanceAmount)\n        if (vm.totalFee < 0) {\n          vm.totalFee = 0\n        }\n        vm.data_payment = {\n          advanceAmount: vm.paymentProfile.advanceAmount,\n          feeAmount: vm.paymentProfile.feeAmount,\n          serviceAmount: vm.paymentProfile.serviceAmount,\n          shipAmount: vm.paymentProfile.shipAmount,\n          paymentAmount: vm.totalFee,\n          paymentNote: vm.paymentProfile.paymentNote,\n          paymentFile: vm.paymentFile\n        }\n        vm.$store.commit('setPaymentProfile', vm.data_payment)\n        // }\n      }\n    },\n    detailDossier (val) {\n      var vm = this\n      if (val.hasOwnProperty('dossierId')) {\n        let filter = val\n        vm.$store.dispatch('getPaymentFiles', filter).then(result => {\n          vm.paymentFile = result\n          vm.data_payment['paymentFile'] = vm.paymentFile\n          vm.$store.commit('setPaymentProfile', vm.data_payment)\n        })\n      }\n    }\n  },\n  methods: {\n    uploadPaymentFile (e) {\n      var vm = this\n      vm.progressUploadPart = true\n      var data = {}\n      data['dossierId'] = vm.detailDossier.dossierId\n      data['referenceUid'] = vm.detailDossier.referenceUid\n      data['selector'] = 'paymentFile1'\n      data['partTip'] = {\n        tip: '',\n        maxSize: 10,\n        extensions: 'jpg,png,jpeg'\n      }\n      let file = $('#paymentFile1')[0].files[0]\n      vm.$store.dispatch('uploadPaymentFile', data).then(function (result) {\n        vm.epaymentValid = true\n        vm.progressUploadPart = false\n        vm.paymentFile = result\n        vm.data_payment['paymentFile'] = vm.paymentFile\n        vm.$store.commit('setPaymentProfile', vm.data_payment)\n        vm.$store.dispatch('getPaymentFiles', data).then(result => {\n          vm.paymentFile = result\n          vm.data_payment['paymentFile'] = vm.paymentFile\n          vm.$store.commit('setPaymentProfile', vm.data_payment)\n        })\n      }).catch(function (xhr) {\n        vm.progressUploadPart = false\n      })\n    },\n    viewFile () {\n      let vm = this\n      vm.dialogPDFLoading = true\n      vm.dialogPDF = true\n      let filter = {\n        dossierId: vm.detailDossier.dossierId,\n        referenceUid: vm.detailDossier.referenceUid\n      }\n      vm.$store.dispatch('viewPaymentFile', filter).then(result => {\n        vm.dialogPDFLoading = false\n        document.getElementById('dialogPreview').src = result\n      })\n    },\n    getEPaymentProfile (paymentProfile) {\n      if (paymentProfile) {\n        return JSON.parse(paymentProfile)\n      } else {\n        return ''\n      }\n    },\n    deleteFile (item) {\n      var vm = this\n      let x = confirm('Bạn có chắc chắn xóa file?')\n      if (x) {\n        item['dossierId'] = vm.dossierId\n        vm.$store.dispatch('deletePaymentFile', item).then(resFile => {\n          toastr.success('Xóa file thành công.')\n          vm.paymentFile = ''\n          vm.data_payment['paymentFile'] = vm.paymentFile\n          vm.$store.commit('setPaymentProfile', vm.data_payment)\n        }).catch(reject => {\n          toastr.error('Xóa file thất bại.')\n        })\n      }\n    },\n    downloadPaymentFile (item) {\n      let vm = this\n      // test local\n      // let url = 'http://127.0.0.1:8081/api/dossiers/' + vm.dossierId + '/payment/confirmfile'\n      let url = '/o/rest/v2/dossiers/' + vm.detailDossier.dossierId + '/payments/' + vm.detailDossier.referenceUid + '/confirmfile'\n      window.open(url)\n    },\n    pickFile () {\n      var vm = this\n      document.getElementById('paymentFile1').value = ''\n      document.getElementById('paymentFile1').click()\n    },\n    currency (value) {\n      if (value) {\n        return value.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, '.') ? value.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, '.') : 0\n      }\n      return 0\n    },\n    validPayment () {\n      if (this.paymentFile) {\n        this.epaymentValid = true\n      } else {\n        this.epaymentValid = false\n      }\n      if (!this.isBank) {\n        this.errorNotSelect = true\n      } else {\n        this.errorNotSelect = false\n      }\n      if (this.isBank === false) {\n        return false\n      } else {\n        return true\n      }\n    },\n    toKeyPay (item) {\n      window.open(item, '_self')\n    },\n    goBack () {\n      window.history.back()\n    }\n  },\n  filters: {}\n}\n</script>\n"]}]}